import De from"./toast.esm.c29266ca.js";import de from"./button.esm.3176abd6.js";import Se from"./inputicon.esm.a2acbb30.js";import ce from"./inputtext.esm.a3cafc3d.js";import Ce from"./iconfield.esm.9e1413e8.js";import Ee from"./toolbar.esm.4d8fb4de.js";import Ne from"./progressspinner.esm.4def725f.js";import{a2 as ue,$ as l,a6 as me,a7 as pe,a8 as ye,a as Ue,o as w,b as E,i as t,q as N,s as be,l as a,u as e,a9 as h,e as j,a3 as ve,a4 as fe,ca as _e,w as _,P as Ie,c as ie,t as ne,F as ge,f as xe,K as Be}from"./entry.cbc4cad8.js";import{u as X,a as Ae}from"./cookie.650bfd0d.js";import{u as he}from"./fetch.92bc8ca7.js";import F from"./column.esm.9e7e3fa6.js";import Fe from"./datatable.esm.7ce57948.js";import Te from"./textarea.esm.c10fcecf.js";import $e from"./dropdown.esm.78020c76.js";import we from"./multiselect.esm.89669ccb.js";import{u as Z}from"./company.c930777e.js";import{a as W}from"./usePermission.50740bc5.js";import re from"./dialog.esm.a3377809.js";import"./portal.esm.d33d469a.js";import"./basecomponent.esm.6fe80a6b.js";import"./index.esm.40366b4d.js";import"./baseicon.esm.abfcf349.js";import"./index.esm.c92528da.js";import"./index.esm.693955ee.js";import"./index.esm.654b8d3d.js";import"./badge.esm.58e1fc0b.js";import"./index.esm.17a7140c.js";import"./paginator.esm.849cd2cd.js";import"./index.esm.e2b409df.js";import"./inputnumber.esm.c12d6f45.js";import"./index.esm.3b91898a.js";import"./index.esm.ff143372.js";import"./index.esm.86c4af79.js";import"./index.esm.3aee824d.js";import"./index.esm.1e659663.js";import"./overlayeventbus.esm.3bb8389f.js";import"./virtualscroller.esm.09f1d1b9.js";import"./index.esm.c9125384.js";import"./index.esm.9c90e4b7.js";import"./checkbox.esm.3bb6ea33.js";import"./radiobutton.esm.567e210f.js";import"./index.esm.7485515f.js";import"./index.esm.2ef3fb31.js";import"./workCompany.1b7d25f0.js";const ee=c=>(ve("data-v-8b705925"),c=c(),fe(),c),Oe={class:"field"},ze={for:"company"},qe=ee(()=>t("i",{class:"text-red-400"},"*",-1)),je={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},He={class:"field flex flex-column"},Ke={for:"email"},Re={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Qe={class:"field flex flex-column"},Ye=ee(()=>t("label",null,[N("Line Manager"),t("i",{class:"text-red-400"},"*")],-1)),Ge={class:"field flex flex-column"},Je=ee(()=>t("label",null,[N("Team Lead"),t("i",{class:"text-red-400"},"*")],-1)),Pe={class:"field"},We=ee(()=>t("label",null,[N("Team Members"),t("i",{class:"text-red-400"},"*")],-1)),Xe={key:0,style:{color:"red"}},Ze={class:"create-btn-wrapper mb-0"},et={__name:"CreateTeam",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(c,{emit:H}){const O=_e(),A=l(c.param.usersLists),m=l([]),k=l([]),L=l([]),p=me(),f=l(""),v=l(""),y=l(!1),b=l(!1),T=l(!0),$=H,V=l(!1),z=async()=>{var i;if(V.value=!0,f.value===""||m.value.length===0||k.value.length===0||L.value.length===0){b.value=!0,V.value=!1;return}else if(b.value=!1,!b.value){const n=X("token"),{data:u,error:r,pending:g}=await he(`${O.public.apiUrl}/teams/create`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:f.value,description:v.value,team_lead_id:m.value.id,line_manager_id:k.value.id,members:L.value.map(D=>D.id)}},"$LDh3IAOr92");if(((i=u==null?void 0:u.value)==null?void 0:i.code)===201){V.value=!1,f.value=null,v.value=null,m.value=[],k.value=[],L.value=[],T.value=!1,$("closeCreateModal",!1),p.add({severity:"success",summary:"Success",detail:"Team created successfully!",group:"br",life:3e3});return}else{V.value=!1,p.add({severity:"error",summary:"Error",detail:"Failed to create team!",group:"br",life:3e3});return}}};return pe(()=>{const i=document.getElementById("createTeamName");ye(()=>{i&&i.focus()})}),(i,n)=>{const u=ce,r=Te,g=$e,D=we,C=de,U=Ue("tooltip");return w(),E("div",null,[t("div",Oe,[t("label",ze,[N("Name"),qe,be(t("span",je,null,512),[[U,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(u,{id:"createTeamName",modelValue:e(f),"onUpdate:modelValue":n[0]||(n[0]=x=>h(f)?f.value=x:null),class:"w-full"},null,8,["modelValue"])]),t("div",He,[t("label",Ke,[N("Description "),be(t("span",Re,null,512),[[U,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(r,{id:"description",class:"border-gray-300",modelValue:e(v),"onUpdate:modelValue":n[1]||(n[1]=x=>h(v)?v.value=x:null),rows:"3",cols:"20",invalid:e(y)},null,8,["modelValue","invalid"])]),t("div",Qe,[Ye,a(g,{modelValue:e(k),"onUpdate:modelValue":n[2]||(n[2]=x=>h(k)?k.value=x:null),options:e(A),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Ge,[Je,a(g,{modelValue:e(m),"onUpdate:modelValue":n[3]||(n[3]=x=>h(m)?m.value=x:null),options:e(A),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Pe,[We,a(D,{display:"chip",modelValue:e(L),"onUpdate:modelValue":n[4]||(n[4]=x=>h(L)?L.value=x:null),options:e(A),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e(b)?(w(),E("p",Xe,"Please fill/check up all the fields")):j("",!0),t("div",Ze,[a(C,{loading:e(V),label:"Save",icon:"pi pi-check",text:"",onClick:z},null,8,["loading"])])])}}},tt=ue(et,[["__scopeId","data-v-8b705925"]]);const Q=c=>(ve("data-v-e4bdffc0"),c=c(),fe(),c),lt={class:"field"},at=Q(()=>t("label",{for:"company"},[N("Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ot={class:"field flex flex-column"},st=Q(()=>t("label",{for:"email"},"Description",-1)),it={class:"field flex flex-column"},nt=Q(()=>t("label",null,[N("Line Manager"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),rt={class:"field flex flex-column"},dt=Q(()=>t("label",null,[N("Team Lead"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ct={class:"field"},ut=Q(()=>t("label",null,[N("Team Members"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),mt={key:0,style:{color:"red"}},pt={class:"create-btn-wrappe"},vt={__name:"EditTeam",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(c,{emit:H}){const O=Z(),{getTaskAssignModalData:K}=Z(),A=_e(),m=c,k=me(),L=l(m.param.id),p=l(m.param.editName),f=l(m.param.editDescription),v=l(m.param.editLineManager),y=l(m.param.editTeamLead),b=l(m.param.editMembers),T=l(O.users),$=l(!1),V=l(!0),z=H,i=l(!1),n=async()=>{var u;if(i.value=!0,p.value===""||y.value.length===0||v.value.length===0||b.value.length===0){$.value=!0,i.value=!1;return}else if($.value=!1,!$.value){const r=X("token"),{data:g,error:D,pending:C}=await he(`${A.public.apiUrl}/teams/update/${L.value}`,{method:"POST",headers:{Authorization:`Bearer ${r.value}`},body:{name:p.value,description:f.value,team_lead_id:y.value.id,line_manager_id:v.value.id,members:b.value.map(U=>U.id)}},"$L7Q6VHiEVV");if(((u=g==null?void 0:g.value)==null?void 0:u.code)===200){i.value=!1,V.value=!1,z("closeEditModal",!1),k.add({severity:"success",summary:"Success",detail:"Team Updated successfully!",group:"br",life:3500});return}else{i.value=!1,k.add({severity:"error",summary:"Error",detail:"Failed to update team!",group:"br",life:3e3});return}}};return pe(async()=>{await K(),T.value=O.users;const u=document.getElementById("editTeamName");ye(()=>{u&&u.focus()})}),(u,r)=>{const g=ce,D=Te,C=$e,U=we,x=de;return w(),E("div",null,[t("div",lt,[at,a(g,{id:"editTeamName",modelValue:e(p),"onUpdate:modelValue":r[0]||(r[0]=M=>h(p)?p.value=M:null),class:"w-full"},null,8,["modelValue"])]),t("div",ot,[st,a(D,{id:"description",class:"border-gray-300",modelValue:e(f),"onUpdate:modelValue":r[1]||(r[1]=M=>h(f)?f.value=M:null),rows:"3",cols:"20",invalid:u.teamDescriptionError},null,8,["modelValue","invalid"])]),t("div",it,[nt,a(C,{modelValue:e(v),"onUpdate:modelValue":r[2]||(r[2]=M=>h(v)?v.value=M:null),options:e(T),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",rt,[dt,a(C,{modelValue:e(y),"onUpdate:modelValue":r[3]||(r[3]=M=>h(y)?y.value=M:null),options:e(T),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",ct,[ut,a(U,{display:"chip",modelValue:e(b),"onUpdate:modelValue":r[4]||(r[4]=M=>h(b)?b.value=M:null),options:e(T),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e($)?(w(),E("p",mt,"Please fill/check up all the fields")):j("",!0),t("div",pt,[a(x,{label:"Update",icon:"pi pi-check",text:"",onClick:n,loading:e(i)},null,8,["loading"])])])}}},ft=ue(vt,[["__scopeId","data-v-e4bdffc0"]]);const te=c=>(ve("data-v-b372e2f9"),c=c(),fe(),c),_t={key:0,class:"card"},ht={class:"d-flex mr-2"},bt=te(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Teams")],-1)),gt=te(()=>t("i",{class:"pi pi-search"},null,-1)),xt=te(()=>t("p",{class:"text-center"},"No Data found...",-1)),yt={style:{display:"flex","flex-wrap":"wrap"}},Tt=te(()=>t("p",null,"Are you sure you want to delete?",-1)),$t={__name:"index",setup(c){const H=Z(),{getTaskAssignModalData:O}=Z(),K=_e(),A=l(W("read_team")),m=l(W("create_team")),k=l(W("update_team")),L=l(W("delete_team")),p=l(),f=l(!0),v=l(!1),y=l(!1),b=me(),T=l(!1),$=l(!1),V=l([]),z=l([]),i=l(!1),n=l(""),u=l(""),r=l(""),g=l(null),D=l(null),C=l(null),U=d=>{T.value=!1,Y()},x=d=>{$.value=!1,Y()},M=async()=>{v.value=!0,await O(),V.value=H.users,T.value=!0,v.value=!1},ke=d=>{console.log("editTeamdata",d),n.value=d.id,$.value=!0,u.value=d.name,r.value=d.description,g.value={id:d.children.data.id,name:d.children.data.name},console.log("editLineManager",g.value),D.value={id:d.children.children.data.id,name:d.children.children.data.name},console.log("editTeamLead",D.value),C.value=d.children.children.children.map(s=>({id:s.data.id,name:s.data.name})),console.log("editMembers",C.value)},Me=d=>{i.value=!0,n.value=d},Le=async()=>{y.value=!0;const d=X("token"),{data:s,pending:le}=await he(`${K.public.apiUrl}/teams/delete/${n.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${d.value}`}},"$0jIuqBy51n");s.value.code===200?(i.value=!1,b.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),y.value=!1,Y()):(b.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),y.value=!1)},Y=async()=>{var G,J,P;const d=X("token"),{data:s,pending:le,error:q}=await Ae("getTeams",()=>$fetch(`${K.public.apiUrl}/teams/list`,{headers:{Authorization:`Bearer ${d.value}`}}));((J=(G=s.value)==null?void 0:G.data)==null?void 0:J.length)>0&&(z.value=(P=s.value)==null?void 0:P.data.map((ae,oe)=>({...ae,index:oe+1})))},Ve=()=>{p.value={global:{value:null,matchMode:Ie.CONTAINS}}};return pe(()=>{Y(),f.value=!1}),Ve(),(d,s)=>{const le=De,q=de,G=Se,J=ce,P=Ce,ae=Ee,oe=Ne;return e(A)?(w(),E("div",_t,[t("div",ht,[a(le,{position:"bottom-right",group:"br"}),bt]),a(ae,{class:"border-0 px-0"},{start:_(()=>[e(m)?(w(),ie(q,{key:0,icon:"pi pi-plus",label:"Create",onClick:M,class:"mr-2",severity:"secondary",loading:e(v)},null,8,["loading"])):j("",!0)]),end:_(()=>[a(P,{iconPosition:"right",raised:""},{default:_(()=>[a(G,null,{default:_(()=>[gt]),_:1}),a(J,{modelValue:e(p).global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e(p).global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),a(e(Fe),{filters:e(p),"onUpdate:filters":s[1]||(s[1]=o=>h(p)?p.value=o:null),class:"table-st",value:e(z),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[5,10,20,50],dataKey:"id",filterDisplay:"menu",loading:e(f)},{empty:_(()=>[xt]),loading:_(()=>[a(oe,{style:{width:"50px",height:"50px"}})]),default:_(()=>[a(e(F),{field:"index",header:"Serial",sortable:"",style:{width:"5%"}}),a(e(F),{field:"name",header:"Team Name",style:{width:"15%"}}),a(e(F),{field:"description",header:"Description",style:{width:"20%"}}),a(e(F),{field:"Line Manager",header:"Line Manager",style:{width:"10%"}},{body:_(o=>{var S,I,B;return[t("div",null,ne((B=(I=(S=o==null?void 0:o.data)==null?void 0:S.children)==null?void 0:I.data)==null?void 0:B.name),1)]}),_:1}),a(e(F),{field:"Line Manager",header:"Team Lead",style:{width:"10%"}},{body:_(o=>{var S,I,B,R;return[t("div",null,ne((R=(B=(I=(S=o==null?void 0:o.data)==null?void 0:S.children)==null?void 0:I.children)==null?void 0:B.data)==null?void 0:R.name),1)]}),_:1}),a(e(F),{field:"Members",header:"Members",style:{width:"30%"}},{body:_(o=>{var S,I,B;return[t("div",yt,[(w(!0),E(ge,null,xe((B=(I=(S=o==null?void 0:o.data)==null?void 0:S.children)==null?void 0:I.children)==null?void 0:B.children,R=>(w(),E("div",{key:R,style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},[(w(!0),E(ge,null,xe(R,se=>(w(),E("div",{key:se},[t("div",{class:"mb-1",style:Be(se.name?"border: 1px solid rgba(167, 167, 167, 0.486); border-radius: 5px; padding: 2px 5px":" ")},ne(se.name),5)]))),128))]))),128))])]}),_:1}),a(e(F),{field:"action",header:"Action",style:{width:"10%"}},{body:_(o=>[e(k)?(w(),ie(q,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:S=>ke(o.data)},null,8,["onClick"])):j("",!0),e(L)?(w(),ie(q,{key:1,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:S=>Me(o.data.id)},null,8,["onClick"])):j("",!0)]),_:1})]),_:1},8,["filters","value","loading"]),a(e(re),{visible:e(T),"onUpdate:visible":s[3]||(s[3]=o=>h(T)?T.value=o:null),modal:"",header:"Create Team",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:_(()=>[a(tt,{param:{usersLists:e(V)},onCloseCreateModal:s[2]||(s[2]=o=>U(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(re),{visible:e($),"onUpdate:visible":s[5]||(s[5]=o=>h($)?$.value=o:null),modal:"",header:"Edit Team",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:_(()=>[a(ft,{param:{id:e(n),editName:e(u),editDescription:e(r),editLineManager:e(g),editTeamLead:e(D),editMembers:e(C)},onCloseEditModal:s[4]||(s[4]=o=>x(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(re),{visible:e(i),"onUpdate:visible":s[7]||(s[7]=o=>h(i)?i.value=o:null),header:" ",dismissableMask:"true",style:{width:"25rem"}},{default:_(()=>[Tt,a(q,{label:"No",icon:"pi pi-times",text:"",onClick:s[6]||(s[6]=o=>i.value=!1)}),a(q,{label:"Yes",icon:"pi pi-check",text:"",onClick:Le,loading:e(y)},null,8,["loading"])]),_:1},8,["visible"])])):j("",!0)}}},vl=ue($t,[["__scopeId","data-v-b372e2f9"]]);export{vl as default};
