import R from"./button.esm.5e19325a.js";import pe from"./inputicon.esm.cf1a30a2.js";import q from"./inputtext.esm.d5eee7d7.js";import me from"./iconfield.esm.3a16492f.js";import _e from"./toolbar.esm.2443ec6c.js";import ve from"./progressspinner.esm.22275cc7.js";import{a2 as H,ad as L,$ as t,ae as j,af as W,o as v,b as I,i as c,l as o,u as e,ag as w,e as T,a3 as K,a4 as Q,q as X,ca as J,w as m,P as fe,c as S}from"./entry.39b87fbf.js";import{u as Y}from"./fetch.7ef59f45.js";import{u as V,a as ge}from"./cookie.0a2ee428.js";import ye from"./dialog.esm.eee5e52b.js";import be from"./toast.esm.a47bef80.js";import z from"./column.esm.1429be9d.js";import he from"./datatable.esm.afdf5952.js";import{a as P}from"./usePermission.f68fc90d.js";import"./badge.esm.153b1648.js";import"./basecomponent.esm.b0e02d81.js";import"./index.esm.9511de23.js";import"./baseicon.esm.78269063.js";import"./index.esm.4c77e9d0.js";import"./portal.esm.6123b056.js";import"./index.esm.68b39fb5.js";import"./index.esm.6159b65b.js";import"./index.esm.5c5ddc00.js";import"./paginator.esm.560780b6.js";import"./index.esm.6c8aed28.js";import"./dropdown.esm.36c47059.js";import"./index.esm.080cc9ac.js";import"./index.esm.572d93fe.js";import"./overlayeventbus.esm.42ec4436.js";import"./virtualscroller.esm.c8f7adab.js";import"./inputnumber.esm.00e4e0fd.js";import"./index.esm.9dd50410.js";import"./index.esm.2465e2ce.js";import"./index.esm.2d9193d2.js";import"./index.esm.3c8ee8f5.js";import"./index.esm.1122f352.js";import"./checkbox.esm.0370a2f8.js";import"./radiobutton.esm.1db8deb5.js";import"./index.esm.90ef8874.js";import"./index.esm.835a94ea.js";const Te=l=>(K("data-v-cac7cbe0"),l=l(),Q(),l),xe={class:"field"},ke=Te(()=>c("label",{for:"company"},[X("Tag Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),$e={key:0,style:{color:"red"}},we={class:"create-btn-wrapper mb-0"},Ce={__name:"CreateTag",emits:["closeCreateModal"],setup(l,{emit:k}){const C=J(),x=L(),d=t(""),f=t(!1),i=t(!0),g=k,h=async()=>{if(d.value===""){f.value=!0;return}else if(f.value=!1,!f.value){const _=V("token"),{data:u,pending:n}=await Y(`${C.public.apiUrl}/tag/create`,{method:"POST",headers:{Authorization:`Bearer ${_.value}`},body:{name:d.value}},"$jxcvHxJQkU");u.value.code===201?(d.value=null,i.value=!1,g("closeCreateModal",!1),x.add({severity:"success",summary:"Success",detail:"Tag Created successfully!",group:"br",life:3e3})):x.add({severity:"error",summary:"Error",detail:"Tag Creation Failed!",group:"br",life:3e3})}};return j(()=>{const _=document.getElementById("createTagName");W(()=>{_&&_.focus()})}),(_,u)=>{const n=q,y=R;return v(),I("div",null,[c("div",xe,[ke,o(n,{id:"createTagName",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=p=>w(d)?d.value=p:null),class:"w-full",placeholder:"Enter tag name"},null,8,["modelValue"])]),e(f)?(v(),I("p",$e,"Please enter tag name")):T("",!0),c("div",we,[o(y,{label:"Save",icon:"pi pi-check",text:"",onClick:h})])])}}},Ee=H(Ce,[["__scopeId","data-v-cac7cbe0"]]);const Se=l=>(K("data-v-36eab91a"),l=l(),Q(),l),Ie={class:"field"},Me=Se(()=>c("label",{for:"company"},[X("Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={key:0,style:{color:"red"}},Ue={class:"create-btn-wrappe"},Be={__name:"EditTag",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(l,{emit:k}){const C=J(),x=l,d=L(),f=t(x.param.id),i=t(x.param.name),g=t(!1),h=t(!0),_=k,u=async()=>{if(i.value===""){g.value=!0;return}else if(g.value=!1,!g.value){const n=V("token"),{data:y,pending:p}=await Y(`${C.public.apiUrl}/tag/update/${f.value}`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:i.value}},"$RrQ4SF9MPi");y.value.code===200?(h.value=!1,_("closeEditModal",!1),d.add({severity:"success",summary:"Success",detail:"Tag Updated successfully!",group:"br",life:3e3})):d.add({severity:"error",summary:"Error",detail:"Tag Update Failed!",group:"br",life:3e3})}};return j(()=>{const n=document.getElementById("editTagName");W(()=>{n&&n.focus()})}),(n,y)=>{const p=q,$=R;return v(),I("div",null,[c("div",Ie,[Me,o(p,{id:"editTagName",modelValue:e(i),"onUpdate:modelValue":y[0]||(y[0]=M=>w(i)?i.value=M:null),class:"w-full",placeholder:"Edit tag name"},null,8,["modelValue"])]),e(g)?(v(),I("p",Ne,"Please enter tag name")):T("",!0),c("div",Ue,[o($,{label:"Update",icon:"pi pi-check",text:"",onClick:u})])])}}},Pe=H(Be,[["__scopeId","data-v-36eab91a"]]);const D=l=>(K("data-v-41d0d5fe"),l=l(),Q(),l),Ve={key:0,class:"card"},De=D(()=>c("div",{class:"d-flex mr-2"},[c("h5",{class:"mb-1"},"Tags")],-1)),Fe=D(()=>c("i",{class:"pi pi-search"},null,-1)),Ae=D(()=>c("p",{class:"text-center"},"No Data found...",-1)),Oe=D(()=>c("p",null,"Are you sure you want to delete?",-1)),ze={__name:"index",setup(l){const k=J(),C=t(P("read_tags")),x=t(P("create_tags")),d=t(P("update_tags")),f=t(P("delete_tags")),i=t(),g=t(!0),h=t(!1),_=L(),u=t(!1),n=t(!1),y=t([]),p=t(!1),$=t(""),M=t(""),Z=t(""),ee=t(""),te=t(""),ae=r=>{u.value=!1,E()},oe=r=>{n.value=!1,E()},se=()=>{u.value=!0,E()},le=r=>{n.value=!0,$.value=r.id,M.value=r.name,Z.value=r.email,ee.value=r.phone,te.value=r.address},ie=r=>{p.value=!0,$.value=r},ne=async()=>{h.value=!0;const r=V("token"),{data:a,pending:b}=await Y(`${k.public.apiUrl}/tag/delete/${$.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.value}`}},"$2xUf6ofqOr");a.value.code===200?(p.value=!1,_.add({severity:"success",summary:"Success",detail:"Tag Deleted successfully!",group:"br",life:3e3}),h.value=!1,E()):(_.add({severity:"error",summary:"Error",detail:"Tag Deleted Failed!",group:"br",life:3e3}),h.value=!1)},E=async()=>{var N,U,B;const r=V("token"),{data:a,pending:b,error:G}=await ge("tagsList",()=>$fetch(`${k.public.apiUrl}/tag/list`,{headers:{Authorization:`Bearer ${r.value}`}}));((U=(N=a.value)==null?void 0:N.data)==null?void 0:U.length)>0&&(y.value=(B=a.value)==null?void 0:B.data.map((F,A)=>({...F,index:A+1})))},re=()=>{i.value={global:{value:null,matchMode:fe.CONTAINS}}};return j(()=>{E(),g.value=!1}),re(),(r,a)=>{const b=R,G=pe,N=q,U=me,B=_e,F=ve,A=Ee,O=ye,ce=Pe,de=be;return e(C)?(v(),I("div",Ve,[De,o(B,{class:"border-0 px-0"},{start:m(()=>[e(x)?(v(),S(b,{key:0,icon:"pi pi-plus",label:"Create",onClick:se,class:"mr-2",severity:"secondary"})):T("",!0)]),end:m(()=>[o(U,{iconPosition:"right",raised:""},{default:m(()=>[o(G,null,{default:m(()=>[Fe]),_:1}),o(N,{modelValue:e(i).global.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).global.value=s),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(he),{filters:e(i),"onUpdate:filters":a[1]||(a[1]=s=>w(i)?i.value=s:null),class:"table-st",value:e(y),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[5,10,20,50],dataKey:"id",filterDisplay:"menu",loading:e(g)},{empty:m(()=>[Ae]),loading:m(()=>[o(F,{style:{width:"50px",height:"50px"}})]),default:m(()=>[o(e(z),{field:"index",header:"Serial",sortable:""}),o(e(z),{field:"name",header:"Tag Name"}),o(e(z),{field:"action",header:"Action"},{body:m(s=>[e(d)?(v(),S(b,{key:0,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",onClick:ue=>le(s.data)},null,8,["onClick"])):T("",!0),e(d)?T("",!0):(v(),S(b,{key:1,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(f)?(v(),S(b,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ue=>ie(s.data.id)},null,8,["onClick"])):T("",!0),e(f)?T("",!0):(v(),S(b,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(O,{visible:e(u),"onUpdate:visible":a[3]||(a[3]=s=>w(u)?u.value=s:null),modal:"",header:"Create Tag",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(A,{onCloseCreateModal:a[2]||(a[2]=s=>ae(s))})]),_:1},8,["visible"]),o(O,{visible:e(n),"onUpdate:visible":a[5]||(a[5]=s=>w(n)?n.value=s:null),modal:"",header:"Edit Tag",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(ce,{param:{id:e($),name:e(M)},onCloseEditModal:a[4]||(a[4]=s=>oe(s))},null,8,["param"])]),_:1},8,["visible"]),o(O,{visible:e(p),"onUpdate:visible":a[7]||(a[7]=s=>w(p)?p.value=s:null),header:" ",dismissableMask:"true",style:{width:"25rem"}},{default:m(()=>[Oe,o(b,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=s=>p.value=!1)}),o(b,{label:"Yes",icon:"pi pi-check",text:"",onClick:ne,loading:e(h)},null,8,["loading"])]),_:1},8,["visible"]),o(de,{position:"bottom-right",group:"br"})])):T("",!0)}}},Et=H(ze,[["__scopeId","data-v-41d0d5fe"]]);export{Et as default};
