import{u as n,b as d}from"./cookie.06a761fe.js";import{an as g}from"./entry.47cc6144.js";const h=g("ActiveCompany",{state:()=>({availableCompanies:null,compInLoclStrg:null,getSpaces:null}),getters:{menu(o){var s;if(o.getSpaces){const p=[];return(s=o.getSpaces)==null||s.spaces.forEach(a=>{var r;const c={label:a==null?void 0:a.name,icon:"pi pi-list",color:a==null?void 0:a.color,id:a==null?void 0:a.id,name:a==null?void 0:a.name,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}`,items:[]};((r=a==null?void 0:a.projects)==null?void 0:r.length)>0&&a.projects.forEach(i=>{const t={label:i==null?void 0:i.name,id:i==null?void 0:i.id,icon:"pi pi-bars",color:i==null?void 0:i.color,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}/projects/${i.id}`};c.items.push(t)}),p.push(c)}),p}else return[]},company(o){var s;return o.compInLoclStrg?(s=o.compInLoclStrg)==null?void 0:s.label:""},company_id(o){var s;return o.compInLoclStrg?(s=o.compInLoclStrg)==null?void 0:s.id:""},companyList(o){return o.availableCompanies?o.availableCompanies.map(s=>({id:s.id,label:s.name})):[]},totalCompanies(o){return o.availableCompanies?o.availableCompanies.length:0},selectedCompany(o){return o.compInLoclStrg},totalProjects(o){var p;let s=[];if(o.getSpaces)(p=o.getSpaces)==null||p.spaces.forEach(a=>{var c;((c=a==null?void 0:a.projects)==null?void 0:c.length)>0&&a.projects.forEach(r=>{s.push({name:r.name,id:r.id,statuses:r.statuses})})});else return[];return s}},actions:{async getCompany(){var r;const o=n("token"),{data:s,pending:p,error:a}=await d("companyList",()=>$fetch("https://pbe.singularitybd.net/api/v1/company/list",{headers:{Authorization:`Bearer ${o.value}`}}));console.log("SideBar List",s.value),this.availableCompanies=(r=s.value)==null?void 0:r.data;let c=Number(localStorage.getItem("userCompany"));if(this.availableCompanies){const i=this.availableCompanies.find(t=>t.id===c);if(this.getSpaces=i,i){const{id:t,name:u}=i;return this.compInLoclStrg={id:t,label:u},{name:u,id:t}}}return null}}});export{h as u};
