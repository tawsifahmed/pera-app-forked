import j from"./button.esm.7f915b6f.js";import oe from"./column.esm.bad48978.js";import ae from"./datatable.esm.1709ce08.js";import W from"./dialog.esm.74fc998f.js";import Y from"./multiselect.esm.e7c7d546.js";import{a2 as G,a6 as le,ad as J,$ as l,a7 as ie,a as K,o as y,b as M,c as Q,w as f,l as d,i as e,u as m,bO as N,t as B,F as P,f as E,q as ne,e as X,ag as T,s as g,a3 as Z,a4 as ee,ca as te,ae as re}from"./entry.e3d024fb.js";import{u as V,a as I}from"./cookie.bbdfbee5.js";import{u as ce}from"./workCompany.f22cac75.js";import{s as se}from"./editor.esm.65897551.js";import{a as F}from"./usePermission.265ce68c.js";import"./badge.esm.4135f5c9.js";import"./basecomponent.esm.1e75bdb5.js";import"./index.esm.c2b97eac.js";import"./baseicon.esm.760a237c.js";import"./paginator.esm.0c5535f0.js";import"./index.esm.e319477c.js";import"./dropdown.esm.ce355c94.js";import"./index.esm.ad69de90.js";import"./index.esm.bfaec2db.js";import"./index.esm.7e495903.js";import"./index.esm.a37f4bb4.js";import"./overlayeventbus.esm.9997582c.js";import"./portal.esm.e352cabe.js";import"./virtualscroller.esm.624d1150.js";import"./inputnumber.esm.430988e9.js";import"./index.esm.c62c3d0b.js";import"./index.esm.26bfdb01.js";import"./inputtext.esm.213e50cf.js";import"./index.esm.386b821f.js";import"./index.esm.e91ad7d5.js";import"./index.esm.648c6045.js";import"./checkbox.esm.53fff157.js";import"./radiobutton.esm.5b746ce8.js";import"./index.esm.3cf26f0c.js";import"./index.esm.e9d669d8.js";import"./index.esm.1a25ecda.js";const w=n=>(Z("data-v-c366aca1"),n=n(),ee(),n),de=["onClick"],ue={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},pe={class:""},me={class:"scr-title"},ve=w(()=>e("p",{class:""},"Participants:",-1)),be={class:""},_e={class:"participants"},fe={class:"flex gap-1 flex-wrap"},he={class:""},ye=["innerHTML"],ge={class:"flex-auto richtext-wrapper"},Se=w(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),we={class:"ql-formats flex justify-content-end mr-0"},ke={class:"ql-bold"},$e={class:"ql-italic"},xe={class:"ql-underline"},De={class:"ql-strike"},Me=w(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),qe=w(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Re=w(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Ue=w(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ve={class:"flex-auto"},Ce=w(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Be={__name:"ScrumTable",props:["scrumData","fetchData","employees","totalRecords","readScrum"],setup(n){const{scrumData:q,fetchData:A,employees:O,totalRecords:H,readScrum:C}=n;le(ce());const $=J(),v=l(!1);l(!1);const S=l(!1);l([]);const b=l(null),p=l(" "),h=l(""),x=te(),R=l(!1),D=s=>{C===!0?(console.log(s),b.value=s,v.value=!0):$.add({severity:"error",summary:"Permission Denied",detail:"You do not have permission to view this page",group:"br",life:3e3})},L=async s=>{s.preventDefault(),isSubmitting.value=!0;try{const t=V("token"),o=new FormData;o.append("space_id",selectedSpace.value.id),o.append("description",p.value),h.value.forEach(c=>o.append("user_ids[]",c.id));const _=await $fetch(`${x.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${t.value}`},body:o});createModal.value=!1,$.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(t){console.error("Submission failed:",t),$.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}};ie(p,s=>{s.length===0&&(p.value=" ")});const z=async s=>{var u,r,a;const t=V("token");R.value=!0;const{data:o,pending:_,error:c}=await I("scrumData",()=>$fetch(`${x.public.apiUrl}/scrum-meeting/list?page=${s.page+1}&limit=${s.rows}`,{headers:{Authorization:`Bearer ${t.value}`}}));return((r=(u=o.value)==null?void 0:u.data)==null?void 0:r.length)>0&&(q.value=(a=o.value)==null?void 0:a.data),R.value=!1};return(s,t)=>{const o=oe,_=j,c=ae,u=W,r=Y,a=K("tooltip");return y(),M(P,null,[n.scrumData&&n.scrumData.length>0?(y(),Q(c,{key:0,class:"scr-table-st",value:n.scrumData,rowHover:!0,paginator:!0,rows:10,stripedRows:"",scrollable:"",tableStyle:"min-width: 50rem",totalRecords:n.totalRecords,loading:m(R),rowsPerPageOptions:[5,10,20,50],onPage:z},{default:f(()=>[d(o,{style:{width:"12%"},field:"meeting_date",header:"Date"},{body:f(i=>[e("div",{class:"cursor-pointer",onClick:()=>D(("toRaw"in s?s.toRaw:m(N))(i.data))},B(i.data.meeting_date),9,de)]),_:1}),d(o,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:f(i=>[e("div",ue,[(y(!0),M(P,null,E(i.data.user_ids,U=>(y(),M("div",{class:"border rounded",key:U.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",pe,B(U.name),1)]))),128))])]),_:1}),d(o,{style:{width:"3%"},field:"actions",header:"Actions"},{body:f(i=>[d(_,{severity:"info",rounded:"",text:"",type:"button",onClick:()=>D(("toRaw"in s?s.toRaw:m(N))(i.data)),icon:"pi pi-pencil",class:""},{default:f(()=>[ne("View")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","totalRecords","loading"])):X("",!0),d(u,{lazy:"true",visible:m(v),"onUpdate:visible":t[0]||(t[0]=i=>T(v)?v.value=i:null),modal:"",header:"Scrum Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:f(()=>{var i;return[e("div",me,[ve,e("p",be,B(m(b).meeting_date),1)]),e("div",_e,[e("div",fe,[(y(!0),M(P,null,E(m(b).user_ids,U=>(y(),M("div",{class:"border rounded",key:U.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",he,B(U.name),1)]))),128))])]),e("div",{class:"scr-details",innerHTML:(i=m(b))==null?void 0:i.description},null,8,ye)]}),_:1},8,["visible"]),d(u,{lazy:"true",visible:m(S),"onUpdate:visible":t[3]||(t[3]=i=>T(S)?S.value=i:null),modal:"",header:"Update Scrum",dismissableMask:"true",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[e("form",{onSubmit:L,class:"scr-form",action:""},[e("div",ge,[Se,d(m(se),{modelValue:m(p),"onUpdate:modelValue":t[1]||(t[1]=i=>T(p)?p.value=i:null),editorStyle:"height: 200px"},{toolbar:f(()=>[e("span",we,[g(e("button",ke,null,512),[[a,"Bold",void 0,{bottom:!0}]]),g(e("button",$e,null,512),[[a,"Italic",void 0,{bottom:!0}]]),g(e("button",xe,null,512),[[a,"Underline",void 0,{bottom:!0}]]),g(e("button",De,null,512),[[a,"Strikethrough",void 0,{bottom:!0}]]),Me,qe,Re,Ue])]),_:1},8,["modelValue"])]),e("div",Ve,[Ce,d(r,{id:"members",display:"chip",modelValue:m(h),"onUpdate:modelValue":t[2]||(t[2]=i=>T(h)?h.value=i:null),options:n.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),d(_,{label:s.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:s.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Te=G(Be,[["__scopeId","data-v-c366aca1"]]);const k=n=>(Z("data-v-7007365c"),n=n(),ee(),n),Pe={class:"card"},Ae={class:"header"},Le=k(()=>e("h3",null,"Meeting Minutes",-1)),ze={class:"flex-auto"},Fe=k(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Ie={class:"ql-formats flex justify-content-end mr-0"},Oe={class:"ql-bold"},He={class:"ql-italic"},Ne={class:"ql-underline"},Ee={class:"ql-strike"},je=k(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),We=k(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Ye=k(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Ge=k(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Je={class:"flex-auto"},Ke=k(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Qe={__name:"index",setup(n){const q=te(),A=J(),O=l(F("read_scrum")),H=l(F("create_scrum"));l(F("update_scrum"));const C=l(0),$=l([]),v=l(!1),S=l([]),b=l(""),p=l(""),h=l(!1),x=l(!0),R=async s=>{s.preventDefault(),h.value=!0;try{const t=V("token"),o=new FormData;o.append("description",p.value),b.value.forEach(c=>o.append("user_ids[]",c.id));const _=await $fetch(`${q.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${t.value}`},body:o});console.log("Submission successful:",_),v.value=!1,A.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),p.value="",b.value="",D()}catch(t){console.error("Submission failed:",t),A.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{h.value=!1}},D=async()=>{var c,u,r,a;x.value=!0;const s=V("token"),{data:t,pending:o,error:_}=await I("scrumData",()=>$fetch(`${q.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${s.value}`}}));return((u=(c=t.value)==null?void 0:c.data)==null?void 0:u.length)>0&&($.value=(r=t.value)==null?void 0:r.data,C.value=(a=t.value)==null?void 0:a.totalRecords),x.value=!1},L=async()=>{var c,u,r;const s=V("token"),{data:t,pending:o,error:_}=await I("taskAssignModalData",()=>$fetch(`${q.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${s.value}`}}));((u=(c=t.value)==null?void 0:c.data)==null?void 0:u.length)>0&&(S.value=(r=t.value)==null?void 0:r.data.map(a=>({name:a.name,id:a.id})))};D(),re(()=>{L()});const z=()=>{v.value=!1,p.value="",b.value=""};return(s,t)=>{const o=j,_=Te,c=Y,u=W,r=K("tooltip");return y(),M(P,null,[e("div",Pe,[e("header",Ae,[Le,H.value?(y(),Q(o,{key:0,onClick:t[0]||(t[0]=a=>v.value=!v.value),icon:"pi pi-plus",severity:"secondary"})):X("",!0)]),d(_,{scrumData:$.value,fetchData:D,employees:S.value,totalRecords:C.value,readScrum:O.value},null,8,["scrumData","employees","totalRecords","readScrum"])]),d(u,{lazy:"true",loading:x.value,visible:v.value,"onUpdate:visible":[t[3]||(t[3]=a=>v.value=a),z],modal:"",header:"New Scrum",style:{minWidth:"45vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[e("form",{onSubmit:R,class:"form",action:""},[e("div",ze,[Fe,d(m(se),{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),editorStyle:"height: 200px"},{toolbar:f(()=>[e("span",Ie,[g(e("button",Oe,null,512),[[r,"Bold",void 0,{bottom:!0}]]),g(e("button",He,null,512),[[r,"Italic",void 0,{bottom:!0}]]),g(e("button",Ne,null,512),[[r,"Underline",void 0,{bottom:!0}]]),g(e("button",Ee,null,512),[[r,"Strikethrough",void 0,{bottom:!0}]]),je,We,Ye,Ge])]),_:1},8,["modelValue"])]),e("div",Je,[Ke,d(c,{id:"members",display:"chip",modelValue:b.value,"onUpdate:modelValue":t[2]||(t[2]=a=>b.value=a),options:S.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),d(o,{label:h.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:h.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},Tt=G(Qe,[["__scopeId","data-v-7007365c"]]);export{Tt as default};
