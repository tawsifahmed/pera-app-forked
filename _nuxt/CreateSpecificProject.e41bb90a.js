import ne from"./button.esm.53dfb894.js";import re from"./inputtext.esm.d946f53c.js";import ue from"./textarea.esm.4633c8bb.js";import ce from"./inputgroupaddon.esm.6de0df6c.js";import de from"./inputgroup.esm.f100d6bd.js";import pe from"./dropdown.esm.f0ccdd50.js";import me from"./dialog.esm.2f6be234.js";import{d as ve}from"./vuedraggable.umd.a8de9748.js";import{ao as _e,a4 as fe,a3 as ke,$ as i,V as O,ar as M,a as ge,o as h,b as S,l as n,k as he,w as x,u as a,i as t,q as C,t as Se,s as f,a7 as k,e as B,K as xe,a6 as Ce}from"./entry.c2c43cd1.js";import z from"./colorpicker.esm.e600de6e.js";import{u as ye,a as be}from"./cookie.4d3ffd11.js";import{u as we}from"./workCompany.10ab7266.js";import{u as Ne}from"./company.146b96b2.js";const Pe=we(),Ve=Ne(),A=_e("workProjects",{state:()=>({isProjectCreated:null}),getters:{save(u){return u.isProjectCreated}},actions:{async createProjects({name:u,description:b,space_id:w,statuses:D}){var c;const E=ye("token"),{data:j,pending:G}=await be("https://pbe.singularitybd.net/api/v1/projects/create",{method:"POST",headers:{Authorization:`Bearer ${E.value}`},body:{name:u,description:b,space_id:w,statuses:D}},"$h5ITqNs3Yo");((c=j.value)==null?void 0:c.app_message)==="success"&&(this.isProjectCreated=!0,await Pe.getCompany(),await Ve.getSingleSpace(w))}}});const De={class:"field"},je={for:"name"},Te={class:"field"},$e={for:"name"},Ie=t("i",{class:"text-red-400 text-italic"},"*",-1),Ue={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Oe={class:"field"},Be={for:"name"},Ee={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},qe={class:"mb-4"},Fe={class:"text-slate-700 mb-2 tracking-wide left-3"},Le=t("i",{class:"text-red-400 text-italic"},"*",-1),Me={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},ze={class:"container"},Ae=t("p",{class:"pi pi-plus cursor-pointer"},null,-1),Ge={key:0,class:"text-red-600 text-small"},He={class:"row mt-2"},Re={class:"col-12 d-flex flex-column p-0"},We=["onMouseenter"],Ke={style:{"margin-right":"-4px"},width:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",class:"cu-status-manager-status-list-item__drag-handler-icon"},Xe=t("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},[t("circle",{cx:"5",cy:"5",r:"1"}),t("circle",{cx:"5",cy:"12",r:"1"}),t("circle",{cx:"5",cy:"19",r:"1"}),t("circle",{cx:"12",cy:"5",r:"1"}),t("circle",{cx:"12",cy:"12",r:"1"}),t("circle",{cx:"12",cy:"19",r:"1"})],-1),Ye=[Xe],Je={class:"flex align-items-center",style:{width:"89%"}},Qe=["onClick"],Ze=t("p",{class:"pi pi-times"},null,-1),et=[Ze],tt={class:"mb-4"},st={class:"text-slate-700 mb-2 tracking-wide left-3"},at=t("i",{class:"text-red-400 text-italic"},"*",-1),ot={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},lt={class:"container"},it={class:"field"},nt={key:0,class:"text-red-600 text-small"},rt={key:0,class:"text-center",style:{color:"red"}},Ct={__name:"CreateSpecificProject",props:["singleSpace","spaces","isPage"],setup(u){const b=fe(),w=A(),{save:D}=ke(A()),{singleSpace:E,spaces:j,isPage:G}=u,c=i(!1),T=i(!1),H=i(!0),q=i(!1),$=i(null),R=i(!0),W=O(()=>({animation:250,group:"tasks",disabled:!R.value,ghostClass:"ghost"})),K=O(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",margin:"8px 0px"})),X=O(()=>({backgroundColor:"#f9f9f9",boxShadow:"0px 4px 4px #e2e2e3",cursor:"grab",margin:"8px 0px"})),d=i(""),s=i([{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}]),N=i("6466f1"),F=i(null),P=i(!1),Y=i(!1),p=i(null),m=i(""),J=()=>{var l;if(d.value?P.value=!1:P.value=!0,((l=d==null?void 0:d.value)==null?void 0:l.length)>0){const e={taskStatusName:d.value,taskStatusColor:`#${N.value}`,is_closed_status:0,serial_no:s.value.length+1};s.value.push(e),d.value=""}else P.value=!0;s.value.length>0&&(F.value=!0)},Q=l=>{var e,v;s.value.splice(l,1),((e=r.value)==null?void 0:e.is_closed_status)===((v=s.value[l])==null?void 0:v.is_closed_status)&&(r.value=null),s.value.length==0&&(F.value=!1)},r=i(null);M(r,l=>{l&&s.value.forEach(e=>{e.is_closed_status=e.taskStatusName===l.taskStatusName?1:0}),console.log("taskStatusList",s.value)}),M(s,l=>{l.forEach((e,v)=>{e.serial_no=v+1})});const y=i(!1),Z=async()=>{if(y.value=!0,p.value===null||s.value.length<=0||r.value===null)T.value=!0,y.value=!1;else{T.value=!1,s.value=s.value.map(e=>(e.taskStatusColor.startsWith("#")||(e.taskStatusColor=`#${e.taskStatusColor}`),e));const l={name:p.value,description:m.value,space_id:j,statuses:s.value};console.log("statuses",s.value),await w.createProjects(l),D.value===!0?(c.value=!1,p.value=null,m.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value=null,y.value=!1,b.add({severity:"success",summary:"Success!",detail:"Project created successfully!",group:"br",life:3e3})):(b.add({severity:"error",summary:"Failed",detail:"Project creation Failed!",group:"br",life:3e3}),y.value=!1,c.value=!0)}},ee=async()=>{if(c.value=!0,c.value){console.log("isOpen"),await Ce();let l=document.getElementById("createProjectName");l&&l.focus()}},te=()=>{c.value=!1,p.value&&(p.value=null),m.value&&(m.value=null),s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value&&(r.value=null),d.value=""},se=()=>{p.value&&(p.value=null),m.value&&(m.value=null),s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value&&(r.value=null),d.value=""};return(l,e)=>{const v=ne,I=re,ae=ue,L=ce,oe=de,le=pe,ie=me,_=ge("tooltip");return h(),S("div",null,[n(v,{icon:u.isPage?"":"pi pi-plus",class:he(u.isPage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:u.isPage?"Create +":"",onClick:ee,severity:u.isPage?"primary":"secondary","aria-label":"Bookmark",text:!u.isPage},null,8,["icon","class","label","severity","text"]),n(ie,{visible:a(c),"onUpdate:visible":[e[9]||(e[9]=V=>k(c)?c.value=V:null),se],style:{width:"450px"},header:"Create Project",modal:!0,class:"p-fluid"},{footer:x(()=>[n(v,{label:"Cancel",icon:"pi pi-times",text:"",onClick:te}),n(v,{loading:a(y),label:"Save",icon:"pi pi-check",text:"",onClick:Z},null,8,["loading"])]),default:x(()=>{var V;return[t("div",De,[t("label",je,[C("Create project for "),t("strong",null,Se((V=u.singleSpace)==null?void 0:V.name),1),C(" space")])]),t("div",Te,[t("label",$e,[C("Project Name"),Ie,f(t("span",Ue,null,512),[[_,{value:"Demo Text Text"},void 0,{right:!0}]])]),n(I,{id:"createProjectName",modelValue:a(p),"onUpdate:modelValue":e[0]||(e[0]=o=>k(p)?p.value=o:null),required:"true"},null,8,["modelValue"])]),t("div",Oe,[t("label",Be,[C("Project Description "),f(t("span",Ee,null,512),[[_,{value:"Demo Text Text"},void 0,{right:!0}]])]),n(ae,{id:"description",class:"border-gray-300",modelValue:a(m),"onUpdate:modelValue":e[1]||(e[1]=o=>k(m)?m.value=o:null),rows:"3",cols:"20"},null,8,["modelValue"])]),t("div",qe,[t("p",Fe,[C("Setup Task Status"),Le,f(t("span",Me,null,512),[[_,{value:"Demo Text Text"},void 0,{right:!0}]])]),t("div",ze,[n(oe,null,{default:x(()=>[n(L,null,{default:x(()=>[f(n(a(z),{class:"color-pick",style:{width:"1.5rem"},modelValue:a(N),"onUpdate:modelValue":e[2]||(e[2]=o=>k(N)?N.value=o:null),inputId:"cp-hex",format:"hex"},null,8,["modelValue"]),[[_,{value:"Pick Color"},void 0,{left:!0}]])]),_:1}),f(n(I,{class:"form-control",modelValue:a(d),"onUpdate:modelValue":e[3]||(e[3]=o=>k(d)?d.value=o:null),placeholder:"e.g., TO-DO, DOING"},null,8,["modelValue"]),[[_,{value:"Type Status Name"},void 0,{top:!0}]]),n(L,{onClick:J,class:"btn btn-outline-secondary cursor-pointer"},{default:x(()=>[Ae]),_:1})]),_:1}),a(P)?(h(),S("p",Ge,"Please type status name!")):B("",!0),t("div",He,[t("div",Re,[n(a(ve),{modelValue:a(s),"onUpdate:modelValue":e[5]||(e[5]=o=>k(s)?s.value=o:null),options:a(W),disabled:!a(H),class:"list-group","ghost-class":"ghost",move:l.checkMove,onStart:e[6]||(e[6]=o=>q.value=!0),onEnd:e[7]||(e[7]=o=>q.value=!1)},{item:x(({element:o,index:U})=>[(h(),S("div",{class:"flex delete-task justify-content-between",style:xe(a($)===U?a(X):a(K)),onMouseenter:g=>$.value=U,onMouseleave:e[4]||(e[4]=g=>$.value=null),key:o.id},[(h(),S("svg",Ke,Ye)),t("div",Je,[f(n(a(z),{class:"color-pick mr-2 status-colors border-none",modelValue:o.taskStatusColor,"onUpdate:modelValue":g=>o.taskStatusColor=g,inputId:"cp-hex",format:"hex"},null,8,["modelValue","onUpdate:modelValue"]),[[_,{value:"Change Color"},void 0,{left:!0}]]),f(n(I,{class:"text-uppercase text-muteds w-full",id:"name",modelValue:o.taskStatusName,"onUpdate:modelValue":g=>o.taskStatusName=g,required:"true"},null,8,["modelValue","onUpdate:modelValue"]),[[_,{value:"Change Status Name"},void 0,{left:!0}]])]),t("div",{onClick:g=>Q(U),class:"cursor-pointer cross-icon ms-1 flex justify-content-center align-items-center"},et,8,Qe)],44,We))]),_:1},8,["modelValue","options","disabled","move"])])])])]),t("div",tt,[t("p",st,[C("Set Task Close Status"),at,f(t("span",ot,null,512),[[_,{value:"Demo Text Text"},void 0,{right:!0}]])]),t("div",lt,[t("div",it,[n(le,{modelValue:a(r),"onUpdate:modelValue":e[8]||(e[8]=o=>k(r)?r.value=o:null),options:a(s),optionLabel:"taskStatusName",placeholder:"Select Status",class:"w-full"},null,8,["modelValue","options"])]),a(Y)?(h(),S("p",nt,"Please set close status!")):B("",!0)])]),a(T)?(h(),S("p",rt,"Please add/fill/check up all the fields")):B("",!0)]}),_:1},8,["visible"])])}}};export{Ct as _};
