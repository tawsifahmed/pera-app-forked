import I from"./button.esm.d3de2cb4.js";import L from"./column.esm.007d60ae.js";import N from"./datatable.esm.2c5cef05.js";import{a2 as B,o as b,c as z,w as h,l as o,i as t,t as M,b as $,F as C,f as R,e as E,a4 as O,a3 as P,$ as p,a5 as H,u as W,a8 as j,a9 as q,ca as G}from"./entry.6ba041bf.js";import J from"./dropdown.esm.301107b0.js";import K from"./textarea.esm.e074e7d0.js";import Q from"./multiselect.esm.f5deb6e5.js";import X from"./dialog.esm.626f6ed5.js";import{u as D,a as V}from"./cookie.3bc34ce6.js";import{u as Y}from"./workCompany.6298b5ea.js";import"./badge.esm.4bb7f42c.js";import"./basecomponent.esm.19c83d7f.js";import"./index.esm.96bbbac9.js";import"./baseicon.esm.f6241ef2.js";import"./paginator.esm.cee69934.js";import"./index.esm.df0f4f18.js";import"./inputnumber.esm.a0ad6bd1.js";import"./index.esm.143a5e72.js";import"./index.esm.7ee4a4bf.js";import"./inputtext.esm.d2ed1013.js";import"./index.esm.03d8c592.js";import"./index.esm.1c033539.js";import"./index.esm.d782d6f7.js";import"./index.esm.87fd5dea.js";import"./index.esm.1387be6f.js";import"./overlayeventbus.esm.f1a5c88a.js";import"./portal.esm.b296c789.js";import"./virtualscroller.esm.9bf0dc15.js";import"./index.esm.9b1be29b.js";import"./index.esm.45008443.js";import"./checkbox.esm.e77e2fea.js";import"./radiobutton.esm.bf509652.js";import"./index.esm.fcf04c40.js";import"./index.esm.4591863d.js";import"./index.esm.a4c423a9.js";const Z={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},ee={class:""},te={__name:"ScrumTable",props:["scrumData"],setup(r){return(g,k)=>{const a=L,f=N;return r.scrumData&&r.scrumData.length>0?(b(),z(f,{key:0,value:r.scrumData,stripedRows:"",tableStyle:"min-width: 50rem"},{default:h(()=>[o(a,{style:{width:"2%"},field:"id",header:"id"}),o(a,{style:{width:"10%"},field:"meeting_date",header:"Date"}),o(a,{style:{width:"10%"},field:"space_id",header:"Space"},{body:h(s=>[t("div",null,M(s.data.space_id.name),1)]),_:1}),o(a,{style:{width:"30%"},field:"description",header:"Description"}),o(a,{style:{width:"38%"},field:"user ids",header:"Participants"},{body:h(s=>[t("div",Z,[(b(!0),$(C,null,R(s.data.user_ids,m=>(b(),$("div",{class:"border rounded",key:m.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[t("div",ee,M(m.name),1)]))),128))])]),_:1})]),_:1},8,["value"])):E("",!0)}}},oe=B(te,[["__scopeId","data-v-59bed09e"]]);const y=r=>(j("data-v-5eff5e27"),r=r(),q(),r),ae={class:"card"},se={class:"header"},ie=y(()=>t("h3",null,"Meeting Minutes",-1)),le={class:"flex-auto"},re=y(()=>t("label",{for:"space",class:"font-bold block mb-2"},"Space: ",-1)),ne={class:"flex-auto"},ce=y(()=>t("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),de={class:"flex-auto"},pe=y(()=>t("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),ue={__name:"index",setup(r){const g=O(),{menu:k}=P(Y()),a=G(),f=p([]),s=p(!1),m=p([]),S=p(""),w=p(""),x=p(""),v=p(!1),T=async u=>{u.preventDefault(),v.value=!0;try{const e=D("token"),i=new FormData;i.append("space_id",w.value.id),i.append("description",x.value),S.value.forEach(l=>i.append("user_ids[]",l.id));const _=await $fetch(`${a.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${e.value}`},body:i});console.log("Submission successful:",_),s.value=!1,g.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3})}catch(e){console.error("Submission failed:",e),g.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{v.value=!1}},U=async()=>{var l,c,d;const u=D("token"),{data:e,pending:i,error:_}=await V("scrumData",()=>$fetch(`${a.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${u.value}`}}));((c=(l=e.value)==null?void 0:l.data)==null?void 0:c.length)>0&&(f.value=(d=e.value)==null?void 0:d.data)},A=async()=>{var l,c,d;const u=D("token"),{data:e,pending:i,error:_}=await V("taskAssignModalData",()=>$fetch(`${a.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${u.value}`}}));((c=(l=e.value)==null?void 0:l.data)==null?void 0:c.length)>0&&(m.value=(d=e.value)==null?void 0:d.data)};return H(()=>{A(),U(),console.log("call")}),(u,e)=>{const i=I,_=oe,l=J,c=K,d=Q,F=X;return b(),$(C,null,[t("div",ae,[t("header",se,[ie,o(i,{onClick:e[0]||(e[0]=n=>s.value=!s.value),icon:"pi pi-plus",severity:"secondary"})]),o(_,{scrumData:f.value},null,8,["scrumData"])]),o(F,{visible:s.value,"onUpdate:visible":e[4]||(e[4]=n=>s.value=n),modal:"",header:"New Scrum",style:{minWidth:"25vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:h(()=>[t("form",{onSubmit:T,class:"form",action:""},[t("div",le,[re,o(l,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=n=>w.value=n),id:"space",options:W(k),optionLabel:"name",placeholder:"Select Space",class:"w-full"},null,8,["modelValue","options"])]),t("div",ne,[ce,o(c,{class:"w-full",id:"description",modelValue:x.value,"onUpdate:modelValue":e[2]||(e[2]=n=>x.value=n),rows:"10",placeholder:"Scrum Description..."},null,8,["modelValue"])]),t("div",de,[pe,o(d,{id:"members",display:"chip",modelValue:S.value,"onUpdate:modelValue":e[3]||(e[3]=n=>S.value=n),options:m.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),o(i,{label:v.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:v.value},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Je=B(ue,[["__scopeId","data-v-5eff5e27"]]);export{Je as default};
