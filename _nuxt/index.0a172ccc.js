import ea from"./toast.esm.3d8d09e9.js";import{_ as ta}from"./nuxt-link.4c202a09.js";import vs from"./multiselect.esm.69a6d2aa.js";import ps from"./dropdown.esm.0fc7b8ad.js";import fs from"./calendar.esm.e9e6920f.js";import Qt from"./button.esm.4dd3c46c.js";import sa from"./inputicon.esm.236474d8.js";import qs from"./inputtext.esm.ba89d3ee.js";import aa from"./iconfield.esm.269144df.js";import ia from"./toolbar.esm.2d61f263.js";import Ps from"./card.esm.db3bad82.js";import Cs from"./avatar.esm.f8728af2.js";import la from"./speeddial.esm.4f715982.js";import Ks from"./treetable.esm.6d3362a7.js";import na from"./timeline.esm.e9bb1717.js";import{r as Tt,o as u,b as m,l as g,p as ks,w as E,h as se,q as ce,i,t as T,c as re,n as Hs,m as Ws,e as D,k as he,K as P,F as me,f as ke,T as hs,_ as I,j as oa,G as Js,Q as ra,I as mt,a3 as Ct,$ as f,a4 as es,aa as ds,ar as Le,a5 as ys,V as Ts,a as _s,u as o,a7 as K,s as z,a6 as Zt,bO as Kt,ca as Gs,a2 as Es,a8 as Ss,a9 as xs,ao as da,cb as ua,ac as ca,P as ha}from"./entry.e7d8f855.js";import{u as pt,a as Us}from"./cookie.c68f5909.js";import{u as us}from"./fetch.6bb0f6b4.js";import{d as ma}from"./vuedraggable.umd.9520b7b5.js";import{u as We}from"./company.a4b8112f.js";import{a as vt}from"./usePermission.e2b284f9.js";import ht from"./column.esm.21b6fe69.js";import Xs from"./textarea.esm.7e717f64.js";import{s as ms}from"./editor.esm.012414e8.js";import va from"./floatlabel.esm.f29d5045.js";import pa from"./inputnumber.esm.9bcb0b9b.js";import fa from"./confirmpopup.esm.dc805401.js";import ya from"./tabpanel.esm.ef16dbf6.js";import _a from"./tabview.esm.fa40a22c.js";import{u as Fs}from"./clock.fae33b4e.js";import"./inplace.esm.74b6446a.js";import rs from"./dialog.esm.b43638c3.js";import"./portal.esm.2728edee.js";import"./basecomponent.esm.cdf3b797.js";import"./index.esm.87eb8ee0.js";import"./baseicon.esm.e88ffaa5.js";import"./index.esm.278653f5.js";import"./index.esm.cf022044.js";import"./index.esm.6d9e5d17.js";import"./checkbox.esm.31799cc8.js";import"./index.esm.380d3aa1.js";import"./index.esm.04396fb2.js";import"./index.esm.73cd2e1f.js";import"./overlayeventbus.esm.0060ac8d.js";import"./virtualscroller.esm.06412756.js";import"./index.esm.ac3d4b1b.js";import"./index.esm.fc6b3dc4.js";import"./index.esm.5dd3e13b.js";import"./badge.esm.0637ea13.js";import"./index.esm.dd73ee1c.js";import"./paginator.esm.d94f7134.js";import"./index.esm.7622a950.js";import"./index.esm.8b368644.js";import"./index.esm.137a65da.js";import"./index.esm.5231292b.js";import"./index.esm.df498f99.js";import"./index.esm.7b1ae75f.js";import"./_commonjsHelpers.87174ba5.js";import"./workCompany.32993747.js";var ga=Object.defineProperty,wa=(t,e,a)=>e in t?ga(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,ot=(t,e,a)=>wa(t,typeof e!="symbol"?e+"":e,a);const Da=(t,e,a)=>{const l=t[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})};let Jt,Ns,Bs,Re,Gt={},jt={};class ba{constructor(e,a=!1){ot(this,"texts",{}),ot(this,"dateToMinutes",l=>l.getHours()*60+l.getMinutes()),Re=this,this._texts=e,!a&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(e){return Re.addDays(this,e)},Date.prototype.subtractDays=function(e){return Re.subtractDays(this,e)},Date.prototype.addHours=function(e){return Re.addHours(this,e)},Date.prototype.subtractHours=function(e){return Re.subtractHours(this,e)},Date.prototype.addMinutes=function(e){return Re.addMinutes(this,e)},Date.prototype.subtractMinutes=function(e){return Re.subtractMinutes(this,e)},Date.prototype.getWeek=function(){return Re.getWeek(this)},Date.prototype.isToday=function(){return Re.isToday(this)},Date.prototype.isLeapYear=function(){return Re.isLeapYear(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return Re.formatDate(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return Re.formatTime(this,e)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(e){this._texts=e}_todayFormatted(){return Ns!==new Date().getDate()&&(Jt=new Date,Ns=Jt.getDate(),Bs=`${Jt.getFullYear()}-${Jt.getMonth()}-${Jt.getDate()}`),Bs}addDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()+a),l}subtractDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()-a),l}addHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()+a),l}subtractHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()-a),l}addMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()+a),l}subtractMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()-a),l}getWeek(e){const a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),l=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-l);const r=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a-r)/864e5+1)/7)}isToday(e){return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===this._todayFormatted()}isLeapYear(e){const a=e.getFullYear();return!(a%400)||a%100&&!(a%4)}getPreviousFirstDayOfWeek(e=null,a){const l=e&&new Date(e.valueOf())||new Date,r=a?7:6;return l.setDate(l.getDate()-(l.getDay()+r)%7),l}stringToDate(e){return e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/")))}countDays(e,a){typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof a=="string"&&(a=a.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),a=new Date(a).setHours(0,0,1,0);const l=(new Date(a).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((a-e-l)/(24*3600*1e3))}datesInSameTimeStep(e,a,l){return Math.abs(e.getTime()-a.getTime())<=l*60*1e3}formatDate(e,a="YYYY-MM-DD",l=null){if(l||(l=this._texts),a||(a="YYYY-MM-DD"),a==="YYYY-MM-DD")return this.formatDateLite(e);Gt={},jt={};const r={YYYY:()=>this._hydrateDateObject(e,l).YYYY,YY:()=>this._hydrateDateObject(e,l).YY(),M:()=>this._hydrateDateObject(e,l).M,MM:()=>this._hydrateDateObject(e,l).MM(),MMM:()=>this._hydrateDateObject(e,l).MMM(),MMMM:()=>this._hydrateDateObject(e,l).MMMM(),MMMMG:()=>this._hydrateDateObject(e,l).MMMMG(),D:()=>this._hydrateDateObject(e,l).D,DD:()=>this._hydrateDateObject(e,l).DD(),S:()=>this._hydrateDateObject(e,l).S(),d:()=>this._hydrateDateObject(e,l).d,dd:()=>this._hydrateDateObject(e,l).dd(),ddd:()=>this._hydrateDateObject(e,l).ddd(),dddd:()=>this._hydrateDateObject(e,l).dddd(),HH:()=>this._hydrateTimeObject(e,l).HH,H:()=>this._hydrateTimeObject(e,l).H,hh:()=>this._hydrateTimeObject(e,l).hh,h:()=>this._hydrateTimeObject(e,l).h,am:()=>this._hydrateTimeObject(e,l).am,AM:()=>this._hydrateTimeObject(e,l).AM,mm:()=>this._hydrateTimeObject(e,l).mm,m:()=>this._hydrateTimeObject(e,l).m};return a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(s,h)=>{const n=r[h.replace(/\{|\}/g,"")];return n!==void 0?n():h})}formatDateLite(e){const a=e.getMonth()+1,l=e.getDate();return`${e.getFullYear()}-${a<10?"0":""}${a}-${l<10?"0":""}${l}`}formatTime(e,a="HH:mm",l=null,r=!1){let s=!1;if(r){const[_,v,y]=[e.getHours(),e.getMinutes(),e.getSeconds()];_+v+y===23+59+59&&(s=!0)}if(e instanceof Date&&a==="HH:mm")return s?"24:00":this.formatTimeLite(e);jt={},l||(l=this._texts);const h=this._hydrateTimeObject(e,l),n=a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(_,v)=>{const y=h[v.replace(/\{|\}/g,"")];return y!==void 0?y:v});return s?n.replace("23:59","24:00"):n}formatTimeLite(e){const a=e.getHours(),l=e.getMinutes();return`${(a<10?"0":"")+a}:${(l<10?"0":"")+l}`}_nth(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(e,a){if(Gt.D)return Gt;const l=e.getFullYear(),r=e.getMonth()+1,s=e.getDate(),n=(e.getDay()-1+7)%7;return Gt={YYYY:l,YY:()=>l.toString().substring(2),M:r,MM:()=>(r<10?"0":"")+r,MMM:()=>a.months[r-1].substring(0,3),MMMM:()=>a.months[r-1],MMMMG:()=>(a.monthsGenitive||a.months)[r-1],D:s,DD:()=>(s<10?"0":"")+s,S:()=>this._nth(s),d:n+1,dd:()=>a.weekDays[n][0],ddd:()=>a.weekDays[n].substr(0,3),dddd:()=>a.weekDays[n]},Gt}_hydrateTimeObject(e,a){if(jt.am)return jt;let l,r;e instanceof Date?(l=e.getHours(),r=e.getMinutes()):(l=Math.floor(e/60),r=Math.floor(e%60));const s=l%12?l%12:12,h=(a||{am:"am",pm:"pm"})[l===24||l<12?"am":"pm"];return jt={H:l,h:s,HH:(l<10?"0":"")+l,hh:(s<10?"0":"")+s,am:h,AM:h.toUpperCase(),m:r,mm:(r<10?"0":"")+r},jt}}const ka=24*60;class Ta{constructor(e){ot(this,"_vuecal",null),ot(this,"selectCell",(a=!1,l,r)=>{this._vuecal.$emit("cell-click",r?{date:l,split:r}:l),this._vuecal.clickToNavigate||a?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",r?{date:l,split:r}:l)))}),ot(this,"keyPressEnterCell",(a,l)=>{this._vuecal.$emit("cell-keypress-enter",l?{date:a,split:l}:a),this._vuecal.switchToNarrowerView()}),ot(this,"getPosition",a=>{const{left:l,top:r}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:s,clientY:h}="ontouchstart"in window&&a.touches?a.touches[0]:a;return{x:s-l,y:h-r}}),ot(this,"minutesAtCursor",a=>{let l=0,r={x:0,y:0};const{timeStep:s,timeCellHeight:h,timeFrom:n}=this._vuecal.$props;return typeof a=="number"?l=a:typeof a=="object"&&(r=this.getPosition(a),l=Math.round(r.y*s/parseInt(h)+n)),{minutes:Math.max(Math.min(l,ka),0),cursorCoords:r}}),this._vuecal=e}}const Ca=2,Ds=24*60;let De,be,bs;class Ea{constructor(e,a){ot(this,"_vuecal",null),ot(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=e,De=a}createAnEvent(e,a,l){if(typeof e=="string"&&(e=De.stringToDate(e)),!(e instanceof Date))return!1;const r=De.dateToMinutes(e);a=a*1||Ca*60;const s=r+a,h=De.addMinutes(new Date(e),a);l.end&&(typeof l.end=="string"&&(l.end=De.stringToDate(l.end)),l.endTimeMinutes=De.dateToMinutes(l.end));const n={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:e,startTimeMinutes:r,end:h,endTimeMinutes:s,segments:null,...l};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(n,()=>this.deleteAnEvent(n))))return n.startDateF!==n.endDateF&&(n.daysCount=De.countDays(n.start,n.end)),this._vuecal.mutableEvents.push(n),this._vuecal.addEventsToView([n]),this._vuecal.emitWithEvent("event-create",n),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(n),originalEvent:null}),n}addEventSegment(e){e.segments||(e.segments={},e.segments[De.formatDateLite(e.start)]={start:e.start,startTimeMinutes:e.startTimeMinutes,endTimeMinutes:Ds,isFirstDay:!0,isLastDay:!1});const a=e.segments[De.formatDateLite(e.end)];a&&(a.isLastDay=!1,a.endTimeMinutes=Ds);const l=De.addDays(e.end,1),r=De.formatDateLite(l);return l.setHours(0,0,0,0),e.segments[r]={start:l,startTimeMinutes:0,endTimeMinutes:e.endTimeMinutes,isFirstDay:!1,isLastDay:!0},e.end=De.addMinutes(l,e.endTimeMinutes),e.daysCount=Object.keys(e.segments).length,r}removeEventSegment(e){let a=Object.keys(e.segments).length;if(a<=1)return De.formatDateLite(e.end);delete e.segments[De.formatDateLite(e.end)],a--;const l=De.subtractDays(e.end,1),r=De.formatDateLite(l),s=e.segments[r];return a?s&&(s.isLastDay=!0,s.endTimeMinutes=e.endTimeMinutes):e.segments=null,e.daysCount=a||1,e.end=l,r}createEventSegments(e,a,l){const r=a.getTime(),s=l.getTime();let h=e.start.getTime(),n=e.end.getTime(),_=!1,v,y,S;for(!e.end.getHours()&&!e.end.getMinutes()&&(n-=1e3),e.segments={},e.repeat?(v=r,y=Math.min(s,e.repeat.until?De.stringToDate(e.repeat.until).getTime():s)):(v=Math.max(r,h),y=Math.min(s,n));v<=y;){let M=!1;const B=De.addDays(new Date(v),1).setHours(0,0,0,0);let j,pe,ae,G;if(e.repeat){const X=new Date(v),fe=De.formatDateLite(X);(_||e.occurrences&&e.occurrences[fe])&&(_||(h=e.occurrences[fe].start,S=new Date(h).setHours(0,0,0,0),n=e.occurrences[fe].end),_=!0,M=!0),j=v===S,pe=fe===De.formatDateLite(new Date(n)),ae=new Date(j?h:v),G=De.formatDateLite(ae),pe&&(_=!1)}else M=!0,j=v===h,pe=y===n&&B>y,ae=j?e.start:new Date(v),G=De.formatDateLite(j?e.start:ae);M&&(e.segments[G]={start:ae,startTimeMinutes:j?e.startTimeMinutes:0,endTimeMinutes:pe?e.endTimeMinutes:Ds,isFirstDay:j,isLastDay:pe}),v=B}return e}deleteAnEvent(e){this._vuecal.emitWithEvent("event-delete",e),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(a=>a._eid!==e._eid),this._vuecal.view.events=this._vuecal.view.events.filter(a=>a._eid!==e._eid)}checkCellOverlappingEvents(e,a){bs=e.slice(0),be={},e.forEach(r=>{bs.shift(),be[r._eid]||(be[r._eid]={overlaps:[],start:r.start,position:0}),be[r._eid].position=0,bs.forEach(s=>{be[s._eid]||(be[s._eid]={overlaps:[],start:s.start,position:0});const h=this.eventInRange(s,r.start,r.end),n=a.overlapsPerTimeStep?De.datesInSameTimeStep(r.start,s.start,a.timeStep):1;if(!r.background&&!r.allDay&&!s.background&&!s.allDay&&h&&n)be[r._eid].overlaps.push(s._eid),be[r._eid].overlaps=[...new Set(be[r._eid].overlaps)],be[s._eid].overlaps.push(r._eid),be[s._eid].overlaps=[...new Set(be[s._eid].overlaps)],be[s._eid].position++;else{let _,v;(_=(be[r._eid]||{overlaps:[]}).overlaps.indexOf(s._eid))>-1&&be[r._eid].overlaps.splice(_,1),(v=(be[s._eid]||{overlaps:[]}).overlaps.indexOf(r._eid))>-1&&be[s._eid].overlaps.splice(v,1),be[s._eid].position--}})});let l=0;for(const r in be){const s=be[r],h=s.overlaps.map(n=>({id:n,start:be[n].start}));h.push({id:r,start:s.start}),h.sort((n,_)=>n.start<_.start?-1:n.start>_.start?1:n.id>_.id?-1:1),s.position=h.findIndex(n=>n.id===r),l=Math.max(this.getOverlapsStreak(s,be),l)}return[be,l]}getOverlapsStreak(e,a={}){let l=e.overlaps.length+1,r=[];return e.overlaps.forEach(s=>{r.includes(s)||e.overlaps.filter(n=>n!==s).forEach(n=>{a[n].overlaps.includes(s)||r.push(n)})}),r=[...new Set(r)],l-=r.length,l}eventInRange(e,a,l){if(e.allDay||!this._vuecal.time){const h=new Date(e.start).setHours(0,0,0,0);return new Date(e.end).setHours(23,59,0,0)>=new Date(a).setHours(0,0,0,0)&&h<=new Date(l).setHours(0,0,0,0)}const r=e.start.getTime(),s=e.end.getTime();return r<l.getTime()&&s>a.getTime()}}const Sa={class:"vuecal__flex vuecal__weekdays-headings"},xa=["onClick"],Ma={class:"vuecal__flex weekday-label",grow:""},Va={class:"full"},$a={class:"small"},Oa={class:"xsmall"},Aa={key:0},La={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function ja(t,e,a,l,r,s){return u(),m("div",Sa,[(u(!0),m(me,null,ke(s.headings,(h,n)=>(u(),m(me,{key:n},[h.hide?D("",!0):(u(),m("div",{key:0,class:he(["vuecal__flex vuecal__heading",{today:h.today,clickable:s.cellHeadingsClickable}]),style:P(s.weekdayCellStyles),onClick:_=>s.view.id==="week"&&s.selectCell(h.date,_),onDblclick:e[0]||(e[0]=_=>s.view.id==="week"&&s.vuecal.dblclickToNavigate&&a.switchToNarrowerView())},[g(hs,{name:`slide-fade--${a.transitionDirection}`,appear:s.vuecal.transitions},{default:E(()=>[(u(),m("div",{class:"vuecal__flex",column:"",key:s.vuecal.transitions?`${n}-${h.dayOfMonth}`:!1},[i("div",Ma,[se(t.$slots,"weekday-heading",{heading:s.cleanupHeading(h),view:s.view},()=>[i("span",Va,T(h.full),1),i("span",$a,T(h.small),1),i("span",Oa,T(h.xsmall),1),h.dayOfMonth?(u(),m("span",Aa," "+T(h.dayOfMonth),1)):D("",!0)])]),s.vuecal.hasSplits&&s.vuecal.stickySplitLabels?(u(),m("div",La,[(u(!0),m(me,null,ke(s.vuecal.daySplits,(_,v)=>(u(),m("div",{class:he(["day-split-header",_.class||!1]),key:v},[se(t.$slots,"split-label",{split:_,view:s.view},()=>[ce(T(_.label),1)])],2))),128))])):D("",!0)]))]),_:2},1032,["name","appear"])],46,xa))],64))),128))])}const It=(t,e)=>{const a=t.__vccOpts||t;for(const[l,r]of e)a[l]=r;return a},Ia={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(t,e){t.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=t),this.utils.cell.selectCell(!1,t,e)},cleanupHeading:t=>({label:t.full,date:t.date,...t.today?{today:t.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let t=!1;return this.weekDays.map((a,l)=>{const r=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?l-1:l);return{hide:a.hide,full:a.label,small:a.short||a.label.substr(0,3),xsmall:a.short||a.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:r.getDate(),date:r,today:!t&&this.utils.date.isToday(r)&&!t++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((t,e)=>t+e.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Zs=It(Ia,[["render",ja]]),Ha={class:"vuecal__header"},Wa={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},Ua=["onDragenter","onDragleave","onClick","aria-label"],Fa={key:1,class:"vuecal__title-bar"},Na=["aria-label"],Ba={class:"vuecal__flex vuecal__title",grow:""},Ya=["aria-label"],za={key:0,class:"vuecal__flex vuecal__split-days-headers"};function Ra(t,e,a,l,r,s){const h=Tt("weekdays-headings");return u(),m("div",Ha,[a.options.hideViewSelector?D("",!0):(u(),m("div",Wa,[(u(!0),m(me,null,ke(a.viewProps.views,(n,_)=>(u(),m(me,{key:_},[n.enabled?(u(),m("button",{key:0,class:he(["vuecal__view-btn",{"vuecal__view-btn--active":s.view.id===_,"vuecal__view-btn--highlighted":t.highlightedControl===_}]),type:"button",onDragenter:v=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(v,_,t.$data),onDragleave:v=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(v,_,t.$data),onClick:v=>s.switchView(_,null,!0),"aria-label":`${n.label} view`},T(n.label),43,Ua)):D("",!0)],64))),128))])),a.options.hideTitleBar?D("",!0):(u(),m("div",Fa,[i("button",{class:he(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":t.highlightedControl==="previous"}]),type:"button",onClick:e[0]||(e[0]=(...n)=>s.previous&&s.previous(...n)),onDragenter:e[1]||(e[1]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"previous",t.$data)),onDragleave:e[2]||(e[2]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"previous",t.$data)),"aria-label":`Previous ${s.view.id}`},[se(t.$slots,"arrow-prev")],42,Na),i("div",Ba,[g(hs,{name:a.options.transitions?`slide-fade--${s.transitionDirection}`:""},{default:E(()=>[(u(),re(oa(s.broaderView?"button":"span"),{type:!!s.broaderView&&"button",key:`${s.view.id}${s.view.startDate.toString()}`,onClick:e[3]||(e[3]=n=>!!s.broaderView&&s.switchToBroaderView()),"aria-label":!!s.broaderView&&`Go to ${s.broaderView} view`},{default:E(()=>[se(t.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),a.options.todayButton?(u(),m("button",{key:0,class:he(["vuecal__today-btn",{"vuecal__today-btn--highlighted":t.highlightedControl==="today"}]),type:"button",onClick:e[4]||(e[4]=(...n)=>s.goToToday&&s.goToToday(...n)),onDragenter:e[5]||(e[5]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"today",t.$data)),onDragleave:e[6]||(e[6]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"today",t.$data)),"aria-label":"Today"},[se(t.$slots,"today-button")],34)):D("",!0),i("button",{class:he(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":t.highlightedControl==="next"}]),type:"button",onClick:e[7]||(e[7]=(...n)=>s.next&&s.next(...n)),onDragenter:e[8]||(e[8]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"next",t.$data)),onDragleave:e[9]||(e[9]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"next",t.$data)),"aria-label":`Next ${s.view.id}`},[se(t.$slots,"arrow-next")],42,Ya)])),a.viewProps.weekDaysInHeader?(u(),re(h,{key:2,"week-days":a.weekDays,"transition-direction":s.transitionDirection,"switch-to-narrower-view":a.switchToNarrowerView},ks({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:E(({heading:n,view:_})=>[se(t.$slots,"weekday-heading",{heading:n,view:_})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:E(({split:n})=>[se(t.$slots,"split-label",{split:n,view:s.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):D("",!0),g(hs,{name:`slide-fade--${s.transitionDirection}`},{default:E(()=>[s.showDaySplits?(u(),m("div",za,[(u(!0),m(me,null,ke(a.daySplits,(n,_)=>(u(),m("div",{class:he(["day-split-header",n.class||!1]),key:_},[se(t.$slots,"split-label",{split:n,view:s.view.id},()=>[ce(T(n.label),1)])],2))),128))])):D("",!0)]),_:3},8,["name"])])}const qa={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Zs},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(t){this.vuecal.transitionDirection=t}},broaderView(){const{enabledViews:t}=this.vuecal;return t[t.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},Pa=It(qa,[["render",Ra]]),Ka=["draggable"];function Ja(t,e,a,l,r,s){return u(),m("div",{class:he(["vuecal__event",s.eventClasses]),style:P(s.eventStyles),tabindex:"0",onFocus:e[4]||(e[4]=(...h)=>s.focusEvent&&s.focusEvent(...h)),onKeypress:e[5]||(e[5]=Js(mt((...h)=>s.onEnterKeypress&&s.onEnterKeypress(...h),["stop"]),["enter"])),onMouseenter:e[6]||(e[6]=(...h)=>s.onMouseEnter&&s.onMouseEnter(...h)),onMouseleave:e[7]||(e[7]=(...h)=>s.onMouseLeave&&s.onMouseLeave(...h)),onTouchstart:e[8]||(e[8]=mt((...h)=>s.onTouchStart&&s.onTouchStart(...h),["stop"])),onMousedown:e[9]||(e[9]=h=>s.onMouseDown(h)),onMouseup:e[10]||(e[10]=(...h)=>s.onMouseUp&&s.onMouseUp(...h)),onTouchend:e[11]||(e[11]=(...h)=>s.onMouseUp&&s.onMouseUp(...h)),onTouchmove:e[12]||(e[12]=(...h)=>s.onTouchMove&&s.onTouchMove(...h)),onDblclick:e[13]||(e[13]=(...h)=>s.onDblClick&&s.onDblClick(...h)),draggable:s.draggable,onDragstart:e[14]||(e[14]=h=>s.draggable&&s.onDragStart(h)),onDragend:e[15]||(e[15]=h=>s.draggable&&s.onDragEnd())},[s.vuecal.editEvents.delete&&a.event.deletable?(u(),m("div",{key:0,class:"vuecal__event-delete",onClick:e[0]||(e[0]=mt((...h)=>s.deleteEvent&&s.deleteEvent(...h),["stop"])),onTouchstart:e[1]||(e[1]=mt((...h)=>s.touchDeleteEvent&&s.touchDeleteEvent(...h),["stop"]))},T(s.vuecal.texts.deleteEvent),33)):D("",!0),se(t.$slots,"event",{event:a.event,view:s.view.id}),s.resizable?(u(),m("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:e[2]||(e[2]=mt((...h)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...h),["stop","prevent"])),onTouchstart:e[3]||(e[3]=mt((...h)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...h),["stop","prevent"]))},null,32)):D("",!0)],46,Ka)}const Ga={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(t,e=!1){if("ontouchstart"in window&&!e)return!1;const{clickHoldAnEvent:a,focusAnEvent:l,resizeAnEvent:r,dragAnEvent:s}=this.domEvents;if(l._eid===this.event._eid&&a._eid===this.event._eid)return!0;this.focusEvent(),a._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(a.timeoutId=setTimeout(()=>{!r._eid&&!s._eid&&(a._eid=this.event._eid,this.event.deleting=!0)},a.timeout))},onMouseUp(t){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(t){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:e,clientY:a}=t.touches[0],{startX:l,startY:r,dragThreshold:s}=this.touch;(Math.abs(e-l)>s||Math.abs(a-r)>s)&&(this.touch.dragged=!0)},onTouchStart(t){this.touch.startX=t.touches[0].clientX,this.touch.startY=t.touches[0].clientY,this.onMouseDown(t,!0)},onEnterKeypress(t){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,t)},onDblClick(t){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,t)},onDragStart(t){this.dnd&&this.dnd.eventDragStart(t,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(t=!1){if("ontouchstart"in window&&!t)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(t){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:t}=this.domEvents,e=t._eid;if(e!==this.event._eid){if(e){const a=this.view.events.find(l=>l._eid===e);a&&(a.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),t._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:t,endTimeMinutes:e}=this.segment||this.event;let a=t-this.vuecal.timeFrom;const l=Math.max(Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);a=Math.min(e,this.vuecal.timeTo)-this.vuecal.timeFrom;const r=Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),s=Math.max(r-l,5);return{top:l,height:s}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let t=100/Math.min(this.overlaps.length+1,this.overlapsStreak),e=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&t<this.vuecal.minEventWidth&&(t=this.vuecal.minEventWidth,e=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:a,height:l}=this.eventDimensions;return{top:`${a}px`,height:`${l}px`,width:`${t}%`,left:this.event.left&&`${this.event.left}px`||`${e}%`}},eventClasses(){const{isFirstDay:t,isLastDay:e}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&t&&!e,"event-middle":this.segment&&!t&&!e,"event-end":this.segment&&e&&!t}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:t,background:e,daysCount:a}=this.event;return this.vuecal.editEvents.drag&&t&&!e&&a===1},resizable(){const{editEvents:t,time:e}=this.vuecal;return t.resize&&this.event.resizable&&e&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Xa=It(Ga,[["render",Ja]]),Za=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],Qa={key:0,class:"cell-time-labels"},ei=["innerHTML"],ti={key:2,class:"vuecal__cell-events"},si=["title"];function ai(t,e,a,l,r,s){const h=Tt("event");return u(),re(ra,{class:he(["vuecal__cell",s.cellClasses]),name:`slide-fade--${s.transitionDirection}`,tag:"div",appear:a.options.transitions,style:P(s.cellStyles)},{default:E(()=>[(u(!0),m(me,null,ke(s.splitsCount?s.splits:1,(n,_)=>(u(),m("div",{class:he(["vuecal__flex vuecal__cell-content",s.splitsCount&&s.splitClasses(n)]),key:a.options.transitions?`${s.view.id}-${a.data.content}-${_}`:_,"data-split":s.splitsCount?n.id:!1,column:"",tabindex:"0","aria-label":a.data.content,onFocus:e[0]||(e[0]=v=>s.onCellFocus(v)),onKeypress:e[1]||(e[1]=Js(v=>s.onCellkeyPressEnter(v),["enter"])),onTouchstart:v=>!s.isDisabled&&s.onCellTouchStart(v,s.splitsCount?n.id:null),onMousedown:v=>!s.isDisabled&&s.onCellMouseDown(v,s.splitsCount?n.id:null),onClick:e[2]||(e[2]=v=>!s.isDisabled&&s.onCellClick(v)),onDblclick:e[3]||(e[3]=v=>!s.isDisabled&&s.onCellDblClick(v)),onContextmenu:e[4]||(e[4]=v=>!s.isDisabled&&a.options.cellContextmenu&&s.onCellContextMenu(v)),onDragenter:e[5]||(e[5]=v=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragEnter(v,t.$data,a.data.startDate)),onDragover:v=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragOver(v,t.$data,a.data.startDate,s.splitsCount?n.id:null),onDragleave:e[6]||(e[6]=v=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragLeave(v,t.$data,a.data.startDate)),onDrop:v=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragDrop(v,t.$data,a.data.startDate,s.splitsCount?n.id:null)},[a.options.showTimeInCells&&a.options.time&&s.isWeekOrDayView&&!a.allDay?(u(),m("div",Qa,[(u(!0),m(me,null,ke(s.vuecal.timeCells,(v,y)=>(u(),m("span",{class:"cell-time-label",key:y},T(v.label),1))),128))])):D("",!0),s.isWeekOrDayView&&!a.allDay&&s.specialHours.length?(u(!0),m(me,{key:1},ke(s.specialHours,(v,y)=>(u(),m("div",{class:he(["vuecal__special-hours",`vuecal__special-hours--day${v.day} ${v.class}`]),style:P(`height: ${v.height}px;top: ${v.top}px`)},[v.label?(u(),m("div",{key:0,class:"special-hours-label",innerHTML:v.label},null,8,ei)):D("",!0)],6))),256)):D("",!0),se(t.$slots,"cell-content",{events:s.events,selectCell:v=>s.selectCell(v,!0),split:s.splitsCount?n:!1}),s.eventsCount&&(s.isWeekOrDayView||s.view.id==="month"&&a.options.eventsOnMonthView)?(u(),m("div",ti,[(u(!0),m(me,null,ke(s.splitsCount?n.events:s.events,(v,y)=>(u(),re(h,{key:y,"cell-formatted-date":a.data.formattedDate,event:v,"all-day":a.allDay,"cell-events":s.splitsCount?n.events:s.events,overlaps:((s.splitsCount?n.overlaps[v._eid]:t.cellOverlaps[v._eid])||[]).overlaps,"event-position":((s.splitsCount?n.overlaps[v._eid]:t.cellOverlaps[v._eid])||[]).position,"overlaps-streak":s.splitsCount?n.overlapsStreak:t.cellOverlapsStreak},{event:E(({event:S,view:M})=>[se(t.$slots,"event",{view:M,event:S})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):D("",!0)],42,Za))),128)),s.timelineVisible?(u(),m("div",{class:"vuecal__now-line",style:P(`top: ${s.todaysTimePosition}px`),key:a.options.transitions?`${s.view.id}-now-line`:"now-line",title:s.utils.date.formatTime(s.vuecal.now)},null,12,si)):D("",!0)]),_:3},8,["class","name","appear","style"])}const ii={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Xa},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:t}){let a=t.classList.contains("vuecal__cell-split")?t:this.vuecal.findAncestor(t,"vuecal__cell-split");return a&&(a=a.attributes["data-split"].value,parseInt(a).toString()===a.toString()&&(a=parseInt(a))),a||null},splitClasses(t){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===t.id,[t.class]:!!t.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(t){return this.vuecal.isDOMElementAnEvent(t)},selectCell(t,e=!1){const a=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.selectCell(e,this.timeAtCursor,a),this.timeAtCursor=null},onCellkeyPressEnter(t){this.isSelected||this.onCellFocus(t);const e=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,e),this.timeAtCursor=null},onCellFocus(t){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const e=this.splitsCount?this.getSplitAtCursor(t):null,a=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",e?{date:a,split:e}:a)}},onCellMouseDown(t,e=null,a=!1){if("ontouchstart"in window&&!a)return!1;this.isSelected||this.onCellFocus(t);const{clickHoldACell:l,focusAnEvent:r}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,l.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:s,cursorCoords:{y:h}}=this.vuecal.minutesAtCursor(t);this.timeAtCursor.setMinutes(s);const n=this.isDOMElementAnEvent(t.target);!n&&r._eid&&((this.view.events.find(_=>_._eid===r._eid)||{}).focused=!1),this.editEvents.create&&!n&&this.setUpEventCreation(t,h)},setUpEventCreation(t,e){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:a}=this.domEvents;if(a.startCursorY=e,a.split=this.splitsCount?this.getSplitAtCursor(t):null,a.start=this.timeAtCursor,this.options.snapToTime){let l=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const r=l+this.options.snapToTime/2;l=r-r%this.options.snapToTime,a.start.setHours(0,l,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(t)},setUpCellHoldTimer(t){const{clickHoldACell:e}=this.domEvents;e.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,e.split=this.splitsCount?this.getSplitAtCursor(t):null,e.timeoutId=setTimeout(()=>{if(e.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:a}=this.utils.event.createAnEvent(this.timeAtCursor,null,e.split?{split:e.split}:{});e.eventCreated=a}},e.timeout)},onCellTouchStart(t,e=null){this.onCellMouseDown(t,e,!0)},onCellClick(t){this.isDOMElementAnEvent(t.target)||this.selectCell(t)},onCellDblClick(t){const e=new Date(this.data.startDate);e.setMinutes(this.vuecal.minutesAtCursor(t).minutes);const a=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-dblclick",a?{date:e,split:a}:e),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(t){t.stopPropagation(),t.preventDefault();const e=new Date(this.data.startDate),{cursorCoords:a,minutes:l}=this.vuecal.minutesAtCursor(t);e.setMinutes(l);const r=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-contextmenu",{date:e,...a,...r||{},e:t})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:t}=this.options,{isYearsOrYearView:e}=this.vuecal;return t.length&&t.includes(this.data.formattedDate)&&!e?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let t=!1;const{selectedDate:e}=this.view;return this.view.id==="years"?t=e.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?t=e.getFullYear()===this.data.startDate.getFullYear()&&e.getMonth()===this.data.startDate.getMonth():t=e.getTime()===this.data.startDate.getTime(),t},set(t){this.view.selectedDate=t,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(t=>{let{from:e,to:a}=t;return e=Math.max(e,this.options.timeFrom),a=Math.min(a,this.options.timeTo),{...t,height:(a-e)*this.timeScale,top:(e-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:t,endDate:e}=this.data;let a=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(a=this.view.events.slice(0),this.view.id==="month"&&a.push(...this.view.outOfScopeEvents),a=a.filter(l=>this.utils.event.eventInRange(l,t,e)),this.options.showAllDayEvents&&this.view.id!=="month"&&(a=a.filter(l=>!!l.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:l,timeTo:r}=this.options;a=a.filter(s=>{const h=s.daysCount>1&&s.segments[this.data.formattedDate]||{},n=s.daysCount===1&&s.startTimeMinutes<r&&s.endTimeMinutes>l,_=s.daysCount>1&&h.startTimeMinutes<r&&h.endTimeMinutes>l,v=!1;return s.allDay||n||_||v})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&a.sort((l,r)=>l.start<r.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return a},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((t,e)=>{const a=this.events.filter(s=>s.split===t.id),[l,r]=this.utils.event.checkCellOverlappingEvents(a.filter(s=>!s.background&&!s.allDay),this.options);return{...t,overlaps:l,overlapsStreak:r,events:a}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:t,timeTo:e}=this.options;return this.data.today&&this.isWeekOrDayView&&t&&!this.allDay&&this.nowInMinutes<=e},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const t=this.nowInMinutes-this.options.timeFrom;return Math.round(t*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},Qs=It(ii,[["render",ai]]),li={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function ni(t,e,a,l,r,s){const h=Tt("vuecal-cell");return u(),m("div",{class:"vuecal__flex vuecal__all-day",style:P(a.cellOrSplitMinWidth&&{height:a.height})},[a.cellOrSplitMinWidth?D("",!0):(u(),m("div",li,[i("span",null,T(a.label),1)])),i("div",{class:he(["vuecal__flex vuecal__cells",`${s.view.id}-view`]),grow:"",style:P(a.cellOrSplitMinWidth?`min-width: ${a.cellOrSplitMinWidth}px`:"")},[(u(!0),m(me,null,ke(a.cells,(n,_)=>(u(),re(h,{key:_,options:a.options,"edit-events":s.editEvents,data:n,"all-day":!0,"cell-width":a.options.hideWeekdays.length&&(s.vuecal.isWeekView||s.vuecal.isMonthView)&&s.vuecal.cellWidth,"min-timestamp":a.options.minTimestamp,"max-timestamp":a.options.maxTimestamp,"cell-splits":a.daySplits},{event:E(({event:v,view:y})=>[se(t.$slots,"event",{view:y,event:v})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const oi={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":Qs},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},ri=It(oi,[["render",ni]]),di=["lang"],ui={class:"default"},ci={key:0,class:"vuecal__flex vuecal__body",grow:""},hi=["onBlur","innerHTML"],mi=["innerHTML"],vi=["innerHTML"],pi={class:"vuecal__flex",row:"",grow:""},fi={key:0,class:"vuecal__time-column"},yi={class:"vuecal__time-cell-label"},_i={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},gi=["wrap","column"],wi=["onBlur","innerHTML"],Di=["innerHTML"],bi=["innerHTML"],ki=["wrap"],Ti=["innerHTML"],Ci=["innerHTML"],Ei={key:2,class:"vuecal__cell-events-count"},Si={key:3,class:"vuecal__no-event"},xi=["onBlur","innerHTML"],Mi=["innerHTML"],Vi={key:2,class:"vuecal__event-time"},$i={key:0},Oi={key:1,class:"days-to-end"},Ai=["innerHTML"],Li={key:0,class:"vuecal__scrollbar-check"};function ji(t,e,a,l,r,s){const h=Tt("vuecal-header"),n=Tt("all-day-bar"),_=Tt("weekdays-headings"),v=Tt("vuecal-cell");return u(),m("div",{class:he(["vuecal__flex vuecal",s.cssClasses]),column:"",ref:"vuecal",lang:a.locale},[g(h,{options:t.$props,"edit-events":s.editEvents,"view-props":{views:s.views,weekDaysInHeader:s.weekDaysInHeader},"week-days":s.weekDays,"has-splits":s.hasSplits,"day-splits":s.daySplits,"switch-to-narrower-view":s.switchToNarrowerView},ks({"arrow-prev":E(()=>[se(t.$slots,"arrow-prev",{},()=>[e[0]||(e[0]=ce(" ")),e[1]||(e[1]=i("i",{class:"angle"},null,-1)),e[2]||(e[2]=ce(" "))])]),"arrow-next":E(()=>[se(t.$slots,"arrow-next",{},()=>[e[3]||(e[3]=ce(" ")),e[4]||(e[4]=i("i",{class:"angle"},null,-1)),e[5]||(e[5]=ce(" "))])]),"today-button":E(()=>[se(t.$slots,"today-button",{},()=>[i("span",ui,T(r.texts.today),1)])]),title:E(()=>[se(t.$slots,"title",{title:s.viewTitle,view:r.view},()=>[ce(T(s.viewTitle),1)])]),_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:E(({heading:y,view:S})=>[se(t.$slots,"weekday-heading",{heading:y,view:S})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:E(({split:y})=>[se(t.$slots,"split-label",{split:y,view:r.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),a.hideBody?D("",!0):(u(),m("div",ci,[g(hs,{name:`slide-fade--${r.transitionDirection}`,appear:a.transitions},{default:E(()=>[(u(),m("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:a.transitions?r.view.id:!1,column:""},[a.showAllDayEvents&&s.hasTimeColumn&&(!s.cellOrSplitMinWidth||s.isDayView&&!a.minSplitWidth)?(u(),re(n,Hs(Ws({key:0},s.allDayBar)),{event:E(({event:y,view:S})=>[se(t.$slots,"event",{view:S,event:y},()=>[s.editEvents.title&&y.titleEditable?(u(),m("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:M=>s.onEventTitleBlur(M,y),innerHTML:y.title},null,40,hi)):y.title?(u(),m("div",{key:1,class:"vuecal__event-title",innerHTML:y.title},null,8,mi)):D("",!0),y.content&&!s.hasShortEvents&&!s.isShortMonthView?(u(),m("div",{key:2,class:"vuecal__event-content",innerHTML:y.content},null,8,vi)):D("",!0)])]),_:3},16)):D("",!0),i("div",{class:he(["vuecal__bg",{vuecal__flex:!s.hasTimeColumn}]),column:""},[i("div",pi,[s.hasTimeColumn?(u(),m("div",fi,[a.showAllDayEvents&&s.cellOrSplitMinWidth&&!(s.isDayView&&!a.minSplitWidth)?(u(),m("div",{key:0,class:"vuecal__all-day-text",style:P({height:s.allDayBar.height})},[i("span",null,T(r.texts.allDay),1)],4)):D("",!0),(u(!0),m(me,null,ke(s.timeCells,(y,S)=>(u(),m("div",{class:"vuecal__time-cell",key:S,style:P(`height: ${a.timeCellHeight}px`)},[se(t.$slots,"time-cell",{hours:y.hours,minutes:y.minutes},()=>[e[6]||(e[6]=i("span",{class:"vuecal__time-cell-line"},null,-1)),i("span",yi,T(y.label),1)])],4))),128))])):D("",!0),a.showWeekNumbers&&s.isMonthView?(u(),m("div",_i,[(u(),m(me,null,ke(6,y=>i("div",{class:"vuecal__flex vuecal__week-number-cell",key:y,grow:""},[se(t.$slots,"week-number-cell",{week:s.getWeekNumber(y-1)},()=>[ce(T(s.getWeekNumber(y-1)),1)])])),64))])):D("",!0),i("div",{class:he(["vuecal__flex vuecal__cells",`${r.view.id}-view`]),grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,column:!!s.cellOrSplitMinWidth},[s.cellOrSplitMinWidth&&s.isWeekView?(u(),re(_,{key:0,"transition-direction":r.transitionDirection,"week-days":s.weekDays,"switch-to-narrower-view":s.switchToNarrowerView,style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},ks({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:E(({heading:y,view:S})=>[se(t.$slots,"weekday-heading",{heading:y,view:S})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:E(({split:y})=>[se(t.$slots,"split-label",{split:y,view:r.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):s.hasSplits&&a.stickySplitLabels&&a.minSplitWidth?(u(),m("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(u(!0),m(me,null,ke(s.daySplits,(y,S)=>(u(),m("div",{class:he(["day-split-header",y.class||!1]),key:S},[se(t.$slots,"split-label",{split:y,view:r.view.id},()=>[ce(T(y.label),1)])],2))),128))],4)):D("",!0),a.showAllDayEvents&&s.hasTimeColumn&&(s.isWeekView&&s.cellOrSplitMinWidth||s.isDayView&&s.hasSplits&&a.minSplitWidth)?(u(),re(n,Hs(Ws({key:2},s.allDayBar)),{event:E(({event:y,view:S})=>[se(t.$slots,"event",{view:S,event:y},()=>[s.editEvents.title&&y.titleEditable?(u(),m("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:M=>s.onEventTitleBlur(M,y),innerHTML:y.title},null,40,wi)):y.title?(u(),m("div",{key:1,class:"vuecal__event-title",innerHTML:y.title},null,8,Di)):D("",!0),y.content&&!s.hasShortEvents&&!s.isShortMonthView?(u(),m("div",{key:2,class:"vuecal__event-content",innerHTML:y.content},null,8,bi)):D("",!0)])]),_:3},16)):D("",!0),i("div",{class:"vuecal__flex",ref:y=>r.cellsEl=y,grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(u(!0),m(me,null,ke(s.viewCells,(y,S)=>(u(),re(v,{key:S,options:t.$props,"edit-events":s.editEvents,data:y,"cell-width":a.hideWeekdays.length&&(s.isWeekView||s.isMonthView)&&s.cellWidth,"min-timestamp":s.minTimestamp,"max-timestamp":s.maxTimestamp,"cell-splits":s.hasSplits&&s.daySplits||[]},{"cell-content":E(({events:M,split:B,selectCell:j})=>[se(t.$slots,"cell-content",{cell:y,view:r.view,goNarrower:j,events:M},()=>[B&&!a.stickySplitLabels?(u(),m("div",{key:0,class:"split-label",innerHTML:B.label},null,8,Ti)):D("",!0),y.content?(u(),m("div",{key:1,class:"vuecal__cell-date",innerHTML:y.content},null,8,Ci)):D("",!0),(s.isMonthView&&!a.eventsOnMonthView||s.isYearsOrYearView&&a.eventsCountOnYearView)&&M.length?(u(),m("div",Ei,[se(t.$slots,"events-count",{view:r.view,events:M},()=>[ce(T(M.length),1)])])):D("",!0),!s.cellOrSplitHasEvents(M,B)&&s.isWeekOrDayView?(u(),m("div",Si,[se(t.$slots,"no-event",{},()=>[ce(T(r.texts.noEvent),1)])])):D("",!0)])]),event:E(({event:M,view:B})=>[se(t.$slots,"event",{view:B,event:M},()=>[s.editEvents.title&&M.titleEditable?(u(),m("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:j=>s.onEventTitleBlur(j,M),innerHTML:M.title},null,40,xi)):M.title?(u(),m("div",{key:1,class:"vuecal__event-title",innerHTML:M.title},null,8,Mi)):D("",!0),a.time&&!M.allDay&&!(s.isMonthView&&(M.allDay||a.showAllDayEvents==="short"))&&!s.isShortMonthView?(u(),m("div",Vi,[ce(T(r.utils.date.formatTime(M.start,s.TimeFormat)),1),M.endTimeMinutes?(u(),m("span",$i," - "+T(r.utils.date.formatTime(M.end,s.TimeFormat,null,!0)),1)):D("",!0),M.daysCount>1&&(M.segments[y.formattedDate]||{}).isFirstDay?(u(),m("small",Oi," +"+T(M.daysCount-1)+T((r.texts.day[0]||"").toLowerCase()),1)):D("",!0)])):D("",!0),M.content&&!(s.isMonthView&&M.allDay&&a.showAllDayEvents==="short")&&!s.isShortMonthView?(u(),m("div",{key:3,class:"vuecal__event-content",innerHTML:M.content},null,8,Ai)):D("",!0)])]),"no-event":E(()=>[se(t.$slots,"no-event",{},()=>[ce(T(r.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,ki)],10,gi)])],2)]))]),_:3},8,["name","appear"]),r.ready?D("",!0):(u(),m("div",Li,e[7]||(e[7]=[i("div",null,null,-1)])))]))],10,di)}const Xt=24*60,cs={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},Ys=["years","year","month","week","day"],zs=new ba(cs),Ii={name:"vue-cal",components:{"vuecal-cell":Qs,"vuecal-header":Pa,WeekdaysHeadings:Zs,AllDayBar:ri},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:Xt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...cs},utils:{date:(this.disableDatePrototypes?zs.removePrototypes():!1)||zs,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(t){if(typeof this.locale=="object"){this.texts=Object.assign({},cs,t),this.utils.date.updateTexts(this.texts);return}const e=await Da(Object.assign({"./i18n/ar.json":()=>I(()=>import("./ar.es.1c5432ef.js"),[],import.meta.url),"./i18n/bg.json":()=>I(()=>import("./bg.es.133f1d79.js"),[],import.meta.url),"./i18n/bn.json":()=>I(()=>import("./bn.es.d6f1145b.js"),[],import.meta.url),"./i18n/bs.json":()=>I(()=>import("./bs.es.424f8392.js"),[],import.meta.url),"./i18n/ca.json":()=>I(()=>import("./ca.es.10691e62.js"),[],import.meta.url),"./i18n/cs.json":()=>I(()=>import("./cs.es.d467a362.js"),[],import.meta.url),"./i18n/da.json":()=>I(()=>import("./da.es.5c82d648.js"),[],import.meta.url),"./i18n/de.json":()=>I(()=>import("./de.es.fc3d5977.js"),[],import.meta.url),"./i18n/el.json":()=>I(()=>import("./el.es.09498e63.js"),[],import.meta.url),"./i18n/en.json":()=>I(()=>import("./en.es.cf2ff814.js"),[],import.meta.url),"./i18n/es.json":()=>I(()=>import("./es.es.1bcf8f87.js"),[],import.meta.url),"./i18n/et.json":()=>I(()=>import("./et.es.dfc4f817.js"),[],import.meta.url),"./i18n/fa.json":()=>I(()=>import("./fa.es.54e3e37f.js"),[],import.meta.url),"./i18n/fi.json":()=>I(()=>import("./fi.es.f02a3c28.js"),[],import.meta.url),"./i18n/fr.json":()=>I(()=>import("./fr.es.7cd25089.js"),[],import.meta.url),"./i18n/he.json":()=>I(()=>import("./he.es.a00ad66b.js"),[],import.meta.url),"./i18n/hr.json":()=>I(()=>import("./hr.es.c03853d7.js"),[],import.meta.url),"./i18n/hu.json":()=>I(()=>import("./hu.es.5447b096.js"),[],import.meta.url),"./i18n/id.json":()=>I(()=>import("./id.es.3384c049.js"),[],import.meta.url),"./i18n/is.json":()=>I(()=>import("./is.es.5855059c.js"),[],import.meta.url),"./i18n/it.json":()=>I(()=>import("./it.es.a2e39e6b.js"),[],import.meta.url),"./i18n/ja.json":()=>I(()=>import("./ja.es.549021b7.js"),[],import.meta.url),"./i18n/ka.json":()=>I(()=>import("./ka.es.b97af2c6.js"),[],import.meta.url),"./i18n/ko.json":()=>I(()=>import("./ko.es.65303d13.js"),[],import.meta.url),"./i18n/lt.json":()=>I(()=>import("./lt.es.6bd7ea81.js"),[],import.meta.url),"./i18n/mn.json":()=>I(()=>import("./mn.es.c0946de5.js"),[],import.meta.url),"./i18n/nl.json":()=>I(()=>import("./nl.es.fb098524.js"),[],import.meta.url),"./i18n/no.json":()=>I(()=>import("./no.es.00bfcb00.js"),[],import.meta.url),"./i18n/pl.json":()=>I(()=>import("./pl.es.d9683cfc.js"),[],import.meta.url),"./i18n/pt-br.json":()=>I(()=>import("./pt-br.es.a068d598.js"),[],import.meta.url),"./i18n/pt-pt.json":()=>I(()=>import("./pt-pt.es.a068d598.js"),[],import.meta.url),"./i18n/ro.json":()=>I(()=>import("./ro.es.c05b88b7.js"),[],import.meta.url),"./i18n/ru.json":()=>I(()=>import("./ru.es.18bbb6e3.js"),[],import.meta.url),"./i18n/sk.json":()=>I(()=>import("./sk.es.cf475731.js"),[],import.meta.url),"./i18n/sl.json":()=>I(()=>import("./sl.es.4f19bf30.js"),[],import.meta.url),"./i18n/sq.json":()=>I(()=>import("./sq.es.a264a995.js"),[],import.meta.url),"./i18n/sr.json":()=>I(()=>import("./sr.es.0d3cfbc7.js"),[],import.meta.url),"./i18n/sv.json":()=>I(()=>import("./sv.es.f64e2fa4.js"),[],import.meta.url),"./i18n/tr.json":()=>I(()=>import("./tr.es.576f73c9.js"),[],import.meta.url),"./i18n/uk.json":()=>I(()=>import("./uk.es.ed3c3f03.js"),[],import.meta.url),"./i18n/vi.json":()=>I(()=>import("./vi.es.4582ebe1.js"),[],import.meta.url),"./i18n/zh-cn.json":()=>I(()=>import("./zh-cn.es.50f64b69.js"),[],import.meta.url),"./i18n/zh-hk.json":()=>I(()=>import("./zh-hk.es.6da7777e.js"),[],import.meta.url)}),`./i18n/${t}.json`,3);this.texts=Object.assign({},cs,e),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){I(()=>import("./drag-and-drop.es.bedab85d.js"),[],import.meta.url).then(t=>{const{DragAndDrop:e}=t;this.modules.dnd=new e(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(t){return Ys.includes(t)||(console.error(`Vue Cal: invalid active-view parameter provided: "${t}".
A valid view must be one of: ${Ys.join(", ")}.`),t="week"),this.enabledViews.includes(t)||(console.warn(`Vue Cal: the provided active-view "${t}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),t=this.enabledViews[0]),t},switchToNarrowerView(t=null){this.transitionDirection="right";const e=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];e&&this.switchView(e,t)},switchView(t,e=null,a=!1){t=this.validateView(t);const l=this.utils.date,r=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&a){if(this.view.id===t)return;const n=this.enabledViews;this.transitionDirection=n.indexOf(this.view.id)>n.indexOf(t)?"left":"right"}const s=this.view.id;switch(this.view.events=[],this.view.id=t,this.view.firstCellDate=null,this.view.lastCellDate=null,e||(e=this.view.selectedDate||this.view.startDate),t){case"years":{this.view.startDate=new Date(Math.floor(e.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(e.getFullYear(),0,1),this.view.endDate=new Date(e.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(e.getFullYear(),e.getMonth(),1),this.view.endDate=new Date(e.getFullYear(),e.getMonth()+1,1),this.view.endDate.setSeconds(-1);let n=new Date(this.view.startDate);if(n.getDay()!==(this.startWeekOnSunday?0:1)&&(n=l.getPreviousFirstDayOfWeek(n,this.startWeekOnSunday)),this.view.firstCellDate=n,this.view.lastCellDate=l.addDays(n,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const _=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=l.addDays(this.view.firstCellDate,_)}if([0,6].includes(this.view.startDate.getDay())){const _=this.view.startDate.getDay()===6?2:1;this.view.startDate=l.addDays(this.view.startDate,_)}if([0,6].includes(this.view.lastCellDate.getDay())){const _=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=l.subtractDays(this.view.lastCellDate,_)}if([0,6].includes(this.view.endDate.getDay())){const _=this.view.endDate.getDay()===0?2:1;this.view.endDate=l.subtractDays(this.view.endDate,_)}}break}case"week":{e=l.getPreviousFirstDayOfWeek(e,this.startWeekOnSunday);const n=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?l.addDays(e,1):e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=l.addDays(e,n),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(e),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const h=this.view.startDate&&this.view.startDate.getTime();if(!(s===t&&h===r)&&(this.$emit("update:activeView",t),this.ready)){const n=this.view.startDate,_={view:t,startDate:n,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:l.getWeek(this.startWeekOnSunday?l.addDays(n,1):n)}:{}};this.$emit("view-change",_)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(t=!0){const e=this.utils.date;this.transitionDirection=t?"right":"left";const a=t?1:-1;let l=null;const{startDate:r,id:s}=this.view;switch(s){case"years":l=new Date(r.getFullYear()+25*a,0,1);break;case"year":l=new Date(r.getFullYear()+1*a,1,1);break;case"month":l=new Date(r.getFullYear(),r.getMonth()+1*a,1);break;case"week":l=e[t?"addDays":"subtractDays"](e.getPreviousFirstDayOfWeek(r,this.startWeekOnSunday),7);break;case"day":l=e[t?"addDays":"subtractDays"](r,1);const h=l.getDay(),n=this.startWeekOnSunday?h:(h||7)-1;if(this.weekDays[n].hide){const v=this.weekDays.map((S,M)=>({...S,i:M}));let y=0;t?([...v.slice(n),...v].find(S=>(y++,!S.hide)).i,y--):[...v,...v.slice(0,n)].reverse().find(S=>(y++,!S.hide)).i,l=e[t?"addDays":"subtractDays"](l,y)}break}l&&this.switchView(s,l)},addEventsToView(t=[]){const e=this.utils.event,{startDate:a,endDate:l,firstCellDate:r,lastCellDate:s}=this.view;if(t.length||(this.view.events=[]),t=t.length?t:[...this.mutableEvents],!t||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let h=t.filter(n=>e.eventInRange(n,a,l));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(h=h.map(n=>n.daysCount>1?e.createEventSegments(n,r||a,s||l):n)),this.view.events.push(...h),this.isMonthView&&(this.view.outOfScopeEvents=[],t.forEach(n=>{(e.eventInRange(n,r,a)||e.eventInRange(n,l,s))&&(this.view.events.some(_=>_._eid===n._eid)||this.view.outOfScopeEvents.push(n))}))},findAncestor(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t},isDOMElementAnEvent(t){return t.classList.contains("vuecal__event")||this.findAncestor(t,"vuecal__event")},onMouseMove(t){const{resizeAnEvent:e,dragAnEvent:a,dragCreateAnEvent:l}=this.domEvents;e._eid===null&&a._eid===null&&!l.start||(t.preventDefault(),e._eid?this.eventResizing(t):this.dragToCreateEvent&&l.start&&this.eventDragCreation(t))},onMouseUp(t){const{focusAnEvent:e,resizeAnEvent:a,clickHoldAnEvent:l,clickHoldACell:r,dragCreateAnEvent:s}=this.domEvents,{_eid:h}=l,{_eid:n}=a;let _=!1;const{event:v,start:y}=s,S=this.isDOMElementAnEvent(t.target),M=e.mousedUp;if(e.mousedUp=!1,S&&(this.domEvents.cancelClickEventCreation=!0),r.eventCreated)return;if(n){const{originalEnd:j,originalEndTimeMinutes:pe,endTimeMinutes:ae}=a,G=this.view.events.find(X=>X._eid===a._eid);if(_=ae&&ae!==pe,G&&G.end.getTime()!==j.getTime()){const X=this.mutableEvents.find(ie=>ie._eid===a._eid);X.endTimeMinutes=G.endTimeMinutes,X.end=G.end;const fe=this.cleanupEvent(G),k={...this.cleanupEvent(G),end:j,endTimeMinutes:G.originalEndTimeMinutes};this.$emit("event-duration-change",{event:fe,oldDate:a.originalEnd,originalEvent:k}),this.$emit("event-change",{event:fe,originalEvent:k})}G&&(G.resizing=!1),a._eid=null,a.start=null,a.split=null,a.segment=null,a.originalEndTimeMinutes=null,a.originalEnd=null,a.endTimeMinutes=null,a.startCell=null,a.endCell=null}else y&&(v&&(this.emitWithEvent("event-drag-create",v),s.event.resizing=!1),s.start=null,s.split=null,s.event=null);!S&&!n&&this.unfocusEvent(),l.timeoutId&&!h&&(clearTimeout(l.timeoutId),l.timeoutId=null),r.timeoutId&&(clearTimeout(r.timeoutId),r.timeoutId=null);const B=typeof this.onEventClick=="function";if(M&&!_&&!h&&!v&&B){let j=this.view.events.find(pe=>pe._eid===e._eid);return!j&&this.isMonthView&&(j=this.view.outOfScopeEvents.find(pe=>pe._eid===e._eid)),j&&this.onEventClick(j,t)}},onKeyUp(t){t.keyCode===27&&this.cancelDelete()},eventResizing(t){const{resizeAnEvent:e}=this.domEvents,a=this.view.events.find(v=>v._eid===e._eid)||{segments:{}},{minutes:l,cursorCoords:r}=this.minutesAtCursor(t),s=a.segments&&a.segments[e.segment],{date:h,event:n}=this.utils,_=Math.max(l,this.timeFrom+1,(s||a).startTimeMinutes+1);if(a.endTimeMinutes=e.endTimeMinutes=_,this.snapToTime){const v=a.endTimeMinutes+this.snapToTime/2;a.endTimeMinutes=v-v%this.snapToTime}if(s&&(s.endTimeMinutes=a.endTimeMinutes),a.end.setHours(0,a.endTimeMinutes,a.endTimeMinutes===Xt?-1:0,0),this.resizeX&&this.isWeekView){a.daysCount=h.countDays(a.start,a.end);const v=this.cellsEl,y=v.offsetWidth/v.childElementCount,S=Math.floor(r.x/y);if(e.startCell===null&&(e.startCell=S-(a.daysCount-1)),e.endCell!==S){e.endCell=S;const M=h.addDays(a.start,S-e.startCell),B=Math.max(h.countDays(a.start,M),1);if(B!==a.daysCount){let j=null;B>a.daysCount?j=n.addEventSegment(a):j=n.removeEventSegment(a),e.segment=j,a.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:a._eid,end:a.end,endTimeMinutes:a.endTimeMinutes})},eventDragCreation(t){const{dragCreateAnEvent:e}=this.domEvents,{start:a,startCursorY:l,split:r}=e,s=new Date(a),{minutes:h,cursorCoords:{y:n}}=this.minutesAtCursor(t);if(!(!e.event&&Math.abs(l-n)<this.dragToCreateThreshold))if(e.event){if(s.setHours(0,h,h===Xt?-1:0,0),this.snapToTime){let y=s.getHours()*60+s.getMinutes();const S=y+this.snapToTime/2;y=S-S%this.snapToTime,s.setHours(0,y,0,0)}const _=a<s,{event:v}=e;v.start=_?a:s,v.end=_?s:a,v.startTimeMinutes=v.start.getHours()*60+v.start.getMinutes(),v.endTimeMinutes=v.end.getHours()*60+v.end.getMinutes()}else{if(e.event=this.utils.event.createAnEvent(a,1,{split:r}),!e.event){e.start=null,e.split=null,e.event=null;return}e.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:t,clickHoldAnEvent:e}=this.domEvents,a=this.view.events.find(l=>l._eid===(t._eid||e._eid));t._eid=null,e._eid=null,a&&(a.focused=!1,a.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:t}=this.domEvents;if(t._eid){const e=this.view.events.find(a=>a._eid===t._eid);e&&(e.deleting=!1),t._eid=null,t.timeoutId=null}},onEventTitleBlur(t,e){if(e.title===t.target.innerHTML)return;const a=e.title;e.title=t.target.innerHTML;const l=this.cleanupEvent(e);this.$emit("event-title-change",{event:l,oldTitle:a}),this.$emit("event-change",{event:l,originalEvent:{...l,title:a}})},updateMutableEvents(){const t=this.utils.date;this.mutableEvents=[],this.events.forEach(e=>{const a=typeof e.start=="string"?t.stringToDate(e.start):e.start,l=t.formatDateLite(a),r=t.dateToMinutes(a);let s=null;typeof e.end=="string"&&e.end.includes("24:00")?(s=new Date(e.end.replace(" 24:00","")),s.setHours(23,59,59,0)):s=typeof e.end=="string"?t.stringToDate(e.end):e.end;let h=t.formatDateLite(s),n=t.dateToMinutes(s);(!n||n===Xt)&&(!this.time||typeof e.end=="string"&&e.end.length===10?s.setHours(23,59,59,0):s.setSeconds(s.getSeconds()-1),h=t.formatDateLite(s),n=Xt);const _=l!==h;e=Object.assign({...this.utils.event.eventDefaults},e,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:_?{}:null,start:a,startTimeMinutes:r,end:s,endTimeMinutes:n,daysCount:_?t.countDays(a,s):1,class:e.class}),this.mutableEvents.push(e)})},minutesAtCursor(t){return this.utils.cell.minutesAtCursor(t)},createEvent(t,e,a={}){return this.utils.event.createAnEvent(t,e,a)},cleanupEvent(t){return t={...t},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(a=>{a in t&&delete t[a]}),t.repeat||delete t.repeat,t},emitWithEvent(t,e){this.$emit(t,this.cleanupEvent(e))},updateSelectedDate(t){if(t&&typeof t=="string"?t=this.utils.date.stringToDate(t):t=new Date(t),t&&t instanceof Date){const{selectedDate:e}=this.view;e&&(this.transitionDirection=e.getTime()>t.getTime()?"left":"right"),t.setHours(0,0,0,0),(!e||e.getTime()!==t.getTime())&&(this.view.selectedDate=t),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(t){const e=this.utils.date,l=this.firstCellDateWeekNumber+t,r=this.startWeekOnSunday?1:0;return l>52?e.getWeek(e.addDays(this.view.firstCellDate,7*t+r)):l},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const t=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],e=t.offsetWidth-t.children[0].offsetWidth;if(e){const a=document.createElement("style");a.id="vuecal-align-with-scrollbar",a.type="text/css",a.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${e}px}`,document.head.appendChild(a)}},cellOrSplitHasEvents(t,e=null){return t.length&&(!e&&t.length||e&&t.some(a=>a.split===e.id))}},created(){this.utils.cell=new Ta(this),this.utils.event=new Ea(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const t=this.utils.date,e="ontouchstart"in window,{resize:a,drag:l,create:r,delete:s,title:h}=this.editEvents,n=this.onEventClick&&typeof this.onEventClick=="function";(a||l||r||s||h||n)&&window.addEventListener(e?"touchend":"mouseup",this.onMouseUp),(a||l||r&&this.dragToCreateEvent)&&window.addEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),h&&window.addEventListener("keyup",this.onKeyUp),e&&(this.$refs.vuecal.oncontextmenu=function(y){y.preventDefault(),y.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const _=this.view.startDate,v={view:this.view.id,startDate:_,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:t.getWeek(this.startWeekOnSunday?t.addDays(_,1):_)}:{}};this.$emit("ready",v),this.ready=!0},beforeUnmount(){const t="ontouchstart"in window;window.removeEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(t?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(t=>this.views[t].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const t=this.utils.date,e=this.view.firstCellDate;return t.getWeek(this.startWeekOnSunday?t.addDays(e,1):e)},timeCells(){const t=[];for(let e=this.timeFrom,a=this.timeTo;e<a;e+=this.timeStep)t.push({hours:Math.floor(e/60),minutes:e%60,label:this.utils.date.formatTime(e,this.TimeFormat),value:e});return t},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(t=>!t.hide)||[]).map((t,e)=>({...t,id:t.id||e+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let t=null;return this.hasSplits&&this.minSplitWidth?t=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(t=this.visibleDaysCount*this.minCellWidth),t},allDayBar(){let t=this.allDayBarHeight||null;return t&&!isNaN(t)&&(t+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:t}},minTimestamp(){let t=null;return this.minDate&&typeof this.minDate=="string"?t=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(t=this.minDate),t?t.getTime():null},maxTimestamp(){let t=null;return this.maxDate&&typeof this.maxDate=="string"?t=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(t=this.maxDate),t?t.getTime():null},weekDays(){let{weekDays:t,weekDaysShort:e=[]}=this.texts;return t=t.slice(0).map((a,l)=>({label:a,...e.length?{short:e[l]}:{},hide:this.hideWeekends&&l>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(l+1)})),this.startWeekOnSunday&&t.unshift(t.pop()),t},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(t=>({label:t}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((t,e)=>{let a=this.specialHours[e+1]||[];return Array.isArray(a)||(a=[a]),t=[],a.forEach(({from:l,to:r,class:s,label:h},n)=>{t[n]={day:e+1,from:[null,void 0].includes(l)?null:l*1,to:[null,void 0].includes(r)?null:r*1,class:s||"",label:h||""}}),t})},viewTitle(){const t=this.utils.date;let e="";const a=this.view.startDate,l=a.getFullYear(),r=a.getMonth();switch(this.view.id){case"years":{e=this.texts.years;break}case"year":{e=l;break}case"month":{e=`${this.months[r].label} ${l}`;break}case"week":{const s=this.view.endDate,h=a.getFullYear();let n=this.texts.months[a.getMonth()];this.xsmall&&(n=n.substring(0,3));let _=`${n} ${h}`;if(s.getMonth()!==a.getMonth()){const v=s.getFullYear();let y=this.texts.months[s.getMonth()];this.xsmall&&(y=y.substring(0,3)),h===v?_=`${n} - ${y} ${h}`:this.small?_=`${n.substring(0,3)} ${h} - ${y.substring(0,3)} ${v}`:_=`${n} ${h} - ${y} ${v}`}e=`${this.texts.week} ${t.getWeek(this.startWeekOnSunday?t.addDays(a,1):a)} (${_})`;break}case"day":{e=this.utils.date.formatDate(a,this.texts.dateFormat,this.texts);break}}return e},viewCells(){const t=this.utils.date;let e=[],a=null,l=!1;this.watchRealTime||(this.now=new Date);const r=this.now;switch(this.view.id){case"years":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(25)).map((s,h)=>{const n=new Date(a+h,0,1),_=new Date(a+h+1,0,1);return _.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:_,content:a+h,current:a+h===r.getFullYear()}});break}case"year":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(12)).map((s,h)=>{const n=new Date(a,h,1),_=new Date(a,h+1,1);return _.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:_,content:this.xsmall?this.months[h].label.substr(0,3):this.months[h].label,current:h===r.getMonth()&&a===r.getFullYear()}});break}case"month":{const s=this.view.startDate.getMonth(),h=new Date(this.view.firstCellDate);l=!1,e=Array.apply(null,Array(42)).map((n,_)=>{const v=t.addDays(h,_),y=new Date(v);y.setHours(23,59,59,0);const S=!l&&t.isToday(v)&&!l++;return{startDate:v,formattedDate:t.formatDateLite(v),endDate:y,content:v.getDate(),today:S,outOfScope:v.getMonth()!==s,class:`vuecal__cell--day${v.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(e=e.filter(n=>{const _=n.startDate.getDay()||7;return!(this.hideWeekends&&_>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(_))}));break}case"week":{l=!1;const s=this.view.startDate,h=this.weekDays;e=h.map((n,_)=>{const v=t.addDays(s,this.startWeekOnSunday&&this.hideWeekends?_-1:_),y=new Date(v);y.setHours(23,59,59,0);const S=(v.getDay()||7)-1;return{startDate:v,formattedDate:t.formatDateLite(v),endDate:y,today:!l&&t.isToday(v)&&!l++,specialHours:this.specialDayHours[S]||[]}}).filter((n,_)=>!h[_].hide);break}case"day":{const s=this.view.startDate,h=new Date(this.view.startDate);h.setHours(23,59,59,0);const n=(s.getDay()||7)-1;e=[{startDate:s,formattedDate:t.formatDateLite(s),endDate:h,today:t.isToday(s),specialHours:this.specialDayHours[n]||[]}];break}}return e},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((t,e)=>t+e.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:t,dragAnEvent:e,dragCreateAnEvent:a}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":t._eid,"vuecal--drag-creating-event":a.event,"vuecal--dragging-event":e._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(t,e){this.updateMutableEvents(t),this.addEventsToView()},deep:!0},locale(t){this.loadLocale(t)},selectedDate(t){this.updateSelectedDate(t)},activeView(t){this.switchView(t)}}},Hi=It(Ii,[["render",ji]]);const Wi={class:"filter-wrapper pb-2 mb-1"},Ui={class:"mb-2 relative"},Fi={class:"mb-2 relative"},Ni={class:"flex flex-wrap gap-1"},Bi={class:"view-btns"},Yi=i("i",{class:"pi pi-search"},null,-1),zi={key:0},Ri={class:"grid mt-2"},qi={class:"col-12 lg:col-6 xl:col-3"},Pi={class:"card mb-0",style:"border-left:6px solid #000;"},Ki={to:"/tags",class:"flex justify-content-between"},Ji=i("h4",{class:"mb-0 block text-xl font-semibold tracking-tight"},"Total Tasks",-1),Gi={class:"text-900 font-bold text-2xl"},Xi={to:"/tags",class:"flex justify-content-between"},Zi={class:"mb-0 text-xl font-semibold tracking-tight"},Qi={class:"text-900 font-bold text-2xl"},el={class:"col-12"},tl={class:"task-container"},sl=["onClick"],al={class:"title-group"},il={class:"rtitle line-clamp-1",style:{"font-weight":"600"}},ll={style:{"font-size":"12px"}},nl=i("strong",null,"Due Date:",-1),ol={class:"w-full flex justify-content-center"},rl=i("p",{class:"text-center font-medium font-italic"},"No data found",-1),dl=["onMouseenter"],ul=["onDblclick"],cl={class:"task-status"},hl={key:1},ml={class:"flex align-items-center"},vl=["onClick","title"],pl=["onsubmit"],fl=["onMouseenter"],yl={key:0,class:"flex gap-1 w-full h-full justify-content-center align-items-center"},_l=["onMouseenter"],gl={key:0,class:"flex justify-content-center assignee-wrapper"},wl=["src"],Dl={key:1},bl={class:"s-assignee"},kl={class:"flex justify-content-center align-items-center gap-2 cursor-pointer relative"},Tl=i("i",{class:"pi pi-user-plus pl-1 text-xl",style:{"padding-top":"0.1rem"}},null,-1),Cl=i("i",{class:"pi pi-angle-down text-sm mt-1"},null,-1),El={class:"assigneeSelect"},Sl={class:"relative h-full"},xl={key:0,class:"inline-block"},Ml={class:"task-status-2"},Vl={key:0,class:"flex align-items-center"},$l=["title"],Ol={key:1},Al={class:"flex align-items-center"},Ll={key:0,class:"pi pi-calendar",style:{"padding-top":"0.1rem"}},jl={key:0,class:"inline-block"},Il={class:"task-status-2 flex"},Hl=i("i",{class:"pi pi-flag pt-2"},null,-1),Wl={key:0,class:"flex align-items-center"},Ul={key:1,class:"pt-1"},Fl={key:1},Nl={class:"flex align-items-center"},Bl=["onMouseover","onMouseleave"],Yl=["onClick","onMouseleave"],zl={key:2,class:"main-container"},Rl={class:"content"},ql={class:"boardContainer",style:{display:"flex","overflow-x":"auto","align-items":"start"}},Pl={class:"column-container"},Kl={class:""},Jl=["onClick"],Gl={class:""},Xl={class:"font-semibold truncate-board text-sm title"},Zl={class:"flex align-items-center gap-2 mt-1"},Ql={class:"status text-sm"},en={key:0,class:"mt-2 flex align-items-center gap-2"},tn=i("i",{class:"pi pi-user text-lg"},null,-1),sn={class:"flex justify-content-start gap-1"},an=["src"],ln={key:1,class:"mt-2 flex align-items-center gap-2"},nn=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),on={key:2,class:"mt-2 flex align-items-center gap-2"},rn=i("i",{class:"pi pi-flag text-lg"},null,-1),dn={class:"text-sm"},un=["onClick"],cn=i("p",{class:"mb-1"},"Subtask",-1),hn={class:"text-sm font-semibold"},mn=["onClick"],vn={class:"font-semibold truncate-board text-sm title"},pn={class:"flex align-items-center gap-2 mt-1"},fn={class:"status text-sm"},yn={key:0,class:"mt-2 flex align-items-center gap-2"},_n=i("i",{class:"pi pi-user text-lg"},null,-1),gn={class:"flex justify-content-start gap-1"},wn=["src"],Dn={key:1,class:"mt-2 flex align-items-center gap-2"},bn=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),kn={key:2,class:"mt-2 flex align-items-center gap-2"},Tn=i("i",{class:"pi pi-flag text-lg"},null,-1),Cn={class:"text-sm"},En={class:"mt-2 flex align-items-center gap-2"},Sn=i("i",{class:"pi pi-angle-right text-lg"},null,-1),xn={class:"text-sm font-semibold"},Mn={key:3,class:""},Vn=["onClick","innerHTML"],$n={key:4},On={class:"commit-card-wrapper mb-2"},An={class:"flex justify-content-between align-items-center bb"},Ln={class:"flex align-items-center gap-2"},jn=i("div",{class:"pi pi-user"},null,-1),In={class:"m-0"},Hn={class:"font-light mt-2 mb-0 commit-title"},Wn={class:"text-right"},Un={class:"font-normal mb-0 text-mute"},Fn=["href"],Nn={key:1,class:"w-full flex justify-content-center my-1"},Bn=i("h4",null,[i("i",null,"No Commits Found")],-1),Yn=[Bn],zn={__name:"TaskTable",props:["kanbanTasks"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask"],setup(t,{emit:e}){var ns;const a=Gs(),l=We(),{getSingleProject:r,getTaskAssignModalData:s,editTask:h,createTask:n}=We(),{modStatusList:_,singleProject:v,statuslist:y,isTaskEdited:S,recentTaskData:M,countTasksByStatus:B,totalTaskCount:j,calendarTasks:pe,tasks:ae}=Ct(We()),G=f(vt("create_task")),X=f(vt("update_task")),fe=f(vt("delete_task")),k=f(vt("download_task")),ie=es(),$e=e,Ce=f(ae||[]),ee=(ns=ds().params)==null?void 0:ns.projects,H=f(),R=f(),O=f(),ue=f(),ye=f(),_e=f(),le=f({}),A=f("list"),L=f(null),de=w=>{A.value=w,w==="git"&&x()},ne=f([]);(async()=>{var q,Q;const w=pt("token"),{data:p,pending:$,error:N}=await Us("branchList",()=>$fetch(`${a.public.apiUrl}/gitlab/${ee}/branch`,{headers:{Authorization:`Bearer ${w.value}`}}));if(((q=p.value)==null?void 0:q.branch_list.length)>0){let ut=(Q=p.value.branch_list)==null?void 0:Q.map(V=>({label:V.name,name:V.name}));ne.value=[{label:"",name:"All"},...ut]}else ne.value=[{label:"No Branches",name:"No Branches"}]})();const Ue=f({label:"",name:"All"}),te=f([]),x=async()=>{var q;const w=pt("token"),{data:p,pending:$,error:N}=await Us("commitsList",()=>{var Q;return $fetch(`${a.public.apiUrl}/gitlab/${ee}/commit?branch=${Ue.value?(Q=Ue.value)==null?void 0:Q.label:""}`,{headers:{Authorization:`Bearer ${w.value}`}})});((q=p.value)==null?void 0:q.code)===200?te.value=p.value.commit_list:te.value=[]};A.value==="git"&&x();const oe=()=>{x()},xe=f([{name:"All",code:""},{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Ht=f([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Qe=w=>{const p=w,$=new Date(p),N=$.getFullYear(),q=String($.getMonth()+1).padStart(2,"0");return`${String($.getDate()).padStart(2,"0")}-${q}-${N}`},Fe=f({}),rt=f(null);Le(rt,(w,p)=>{w!==p&&(it.value=[])});const et=w=>{rt.value=w,Ne.value!==w&&(Se.value={...Se.value,[w]:!1},Ne.value=null)},Ne=f(null),Se=f({}),Be=f(null),Ge=f(!1),ft=w=>{Be.value=w.data.name;const p=document.getElementById(`inputTaskName${w.key}`);Ne.value=w.key,Se.value=Object.keys(Se.value).reduce(($,N)=>($[N]=!1,$),{}),Zt(()=>{p&&p.focus()}),Se.value={...Se.value,[w.key]:!0}},W=f(!1);Le(Be,(w,p)=>{p!==null&&(W.value=!0)});let Me=f(null);const Ye=w=>{Me.value&&(clearTimeout(Me.value),Me.value=null),Me.value=setTimeout(()=>{$e("handleTaskDetailView",w),Me.value=null},250)},tt=w=>{Me.value&&(clearTimeout(Me.value),Me.value=null),ft(w)},He=async w=>{if(w.key==="new"){if(L.value==null)return ie.add({severity:"warn",summary:"Error",detail:"Task name is required!",group:"br",life:3e3});const p={name:L.value,parent_task_id:Ie.value,project_id:ee};return await n(p),L.value="",U.value=!1}else{if(W.value!==!0)return ie.add({severity:"warn",summary:"Error",detail:"Change task name!",group:"br",life:3e3});await qt(Be.value,w.key),Se.value={...Se.value,[taskId]:!1},Be.value=null,Ne.value=null,W.value=!1}},yt=w=>{Fe.value={...Fe.value,[w]:!0}},st=w=>{Fe.value={...Fe.value,[w]:!1}},Et=w=>[{label:"Add Sub Task",icon:"pi pi-plus text-white",command:()=>{$e("openCreateSpace",w.key,"sub-task")},disabled:!G},{label:"Edit Task",icon:"pi pi-pencil text-white",command:()=>{$e("handleTaskEdit",w)},disabled:!X},{label:"Task Detail",icon:"pi pi-window-maximize text-white",command:()=>{$e("handleTaskDetailView",w)}},{label:"Delete Task",icon:"pi pi-trash text-white",command:()=>{$e("confirmDeleteTask",w.key)},disabled:!fe}],Wt=f(),Ut=f(),Ft=f(),Nt=f(),St=f(),Xe=f(),_t=f(null),gs=()=>{if(H.value||R.value||O.value||_e.value||ue.value||ye.value)H.value="",R.value="",O.value="",_e.value="",ue.value="",ye.value="",Wt.value="",Ut.value="",Ft.value="",Nt.value="",St.value="",Xe.value="",xt.value=!1,Mt.value=!1,Oe();else return},Oe=async()=>{Wt.value=H.value?H.value.map(w=>w.id):"",Ut.value=R.value?R.value.code:"",Ft.value=O.value?O.value.id:"",Nt.value=_e.value,St.value=ue.value,Xe.value=ye.value,r(ee,Wt.value,Ut.value,Ft.value,Nt.value,St.value,Xe.value)},xt=f(!1),Mt=f(!1),Ze=w=>{const p=new Date(w);ue.value=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate(),xt.value=!0,Oe()},dt=w=>{Mt.value=!0;const p=new Date(w);ye.value=p.getFullYear()+"-"+(p.getMonth()+1)+"-"+p.getDate(),Oe()},Bt=()=>{xt.value=!1,ue.value="",St.value="",Oe()},ws=()=>{Mt.value=!1,ye.value="",Xe.value="",Oe()},gt=f(!1),at=w=>{if(gt.value=!0,w.length>0){const p=`data:text/csv;charset=utf-8,"Serial No.","Task Name","Project","Assignee","Priority","Status","Time Tracked","Due Date","Overdue"
`+w.map((q,Q)=>{var nt,Ve;const ut=Q+1,V=q.data.name,wt=v.value.name,ve=q.data.assignee.split(", ").join("; "),we=(nt=q.data.priority)!=null&&nt.name?(Ve=q.data.priority)==null?void 0:Ve.name:"",Pe=q.data.status.name;let Ae=q.data.total_duration;const Dt=Math.floor(Ae/3600),ct=Math.floor(Ae%3600/60),ge=Ae%60;Dt>0?Ae=`${Dt} hr ${ct} min ${ge} sec`:ct>0?Ae=`${ct} min ${ge} sec`:Ae=`${ge} sec`;const c=q.data.dueDateValue,d=q.data.is_overdue?"Yes":"No";return`"${ut}","${V}","${wt}","${ve}","${we}","${Pe}","${Ae}","${c}","${d}"`}).join(`
`),$=encodeURI(p),N=document.createElement("a");N.setAttribute("href",$),N.setAttribute("download","tasks.csv"),document.body.appendChild(N),N.click(),document.body.removeChild(N),gt.value=!1}else gt.value=!1,ie.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})},Yt=f(!0);ys(async()=>{await r(ee),Yt.value=!1,ls()});async function zt(w,p){var $;try{const N=pt("token"),{data:q,pending:Q}=await us(`${a.public.apiUrl}/tasks/update/${p}`,{method:"POST",headers:{Authorization:`Bearer ${N.value}`},body:{status:w==null?void 0:w.id}},"$7UcE4NQ81w");(($=q.value)==null?void 0:$.app_message)==="success"?(ie.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),await r(ee)):ie.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(N){console.error("Error fetching data:",N)}}const it=f([]),Rt=f(!1),qt=async(w,p)=>{if(w instanceof Date){Rt.value=!0;let $;if(w){const q=new Date(w);q.setDate(q.getDate()+1),$=q.toISOString()}const N={id:p,dueDate:$?new Date(new Date($).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,project_id:ee};await h(N),S.value===!0?(Rt.value=!1,ie.add({severity:"success",summary:"Successful",detail:"Due date updated ",group:"br",life:3e3})):(Rt.value=!1,ie.add({severity:"error",summary:"Error",detail:"Unable to update due date!",group:"br",life:3e3}))}else if(w!=null&&w.name){const $={id:p,priority:w.name,project_id:ee};await h($),S.value===!0?ie.add({severity:"success",summary:"Successful",detail:"Priority updated ",group:"br",life:3e3}):ie.add({severity:"error",summary:"Error",detail:"Unable to update task priority!",group:"br",life:3e3})}else Ge.value=!0,await h({id:p,name:w,project_id:ee}),S.value===!0?(ie.add({severity:"success",summary:"Successful",detail:"Task name updated ",group:"br",life:3e3}),Ge.value=!1):(ie.add({severity:"error",summary:"Error",detail:"Unable to update task name!",group:"br",life:3e3}),Ge.value=!1)},Vt=f(!1),ss=async(w,p,$)=>{var N;if(w==="add"){Vt.value=!0;const q={id:$,assignees:(N=it.value)==null?void 0:N.map(Q=>Q.id),project_id:ee};await h(q),S.value===!0?(ie.add({severity:"success",summary:"Successful",detail:"Assignees updated ",group:"br",life:3e3}),it.value=[],Vt.value=!1):(ie.add({severity:"error",summary:"Error",detail:"Unable to update assignees!",group:"br",life:3e3}),Vt.value=!1)}if(w==="edit"){const q={id:$,assignees:p==null?void 0:p.map(Q=>Q.id),project_id:ee};await h(q)}},$t=f(),as=async(w,p)=>{p.node.data.dueDateValue;const $=new Date(w);$.setHours(23,59,0,0),$t.value=$;let N=new Date($t.value).toLocaleDateString("en-US",{month:"short",day:"2-digit"});p.node.data.dueDateValue=N,await qt($t.value,p.node.key)};function is(){const w="0123456789ABCDEF";let p="#";for(let $=0;$<6;$++)p+=w[Math.floor(Math.random()*10)];return p}function Ot(w){return{backgroundColor:is(),color:"white",borderRadius:"50%",border:"2px solid white"}}const Pt=f([]),ls=async()=>{await s(),le.value=l.users,Pt.value=l.users},C=f(!0),b=Ts(()=>({animation:250,group:"tasks",disabled:!C.value,ghostClass:"ghost"})),Y=Ts(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",padding:"12px 10px",margin:"8px 0px"})),Z=(w,p)=>{const{added:$,moved:N,removed:q}=w;$&&zt(p,w.added.element.key)},J=f({});f(null);const U=f(!1),F=f(""),Ie=f(null),qe=async()=>{U.value&&(At(Kt(Ce.value)),F.value="");const w={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:{},created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};U.value=!0,Ce.value=[w,...Ce.value],await Zt();const p=document.getElementById("newSubTask");p&&p.focus()},ze=async w=>{U.value&&At(Kt(Ce.value));const p=Kt(w.node);Ie.value=p.key;const $={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:{},created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};U.value=!0;const N=lt(p.key,$,Kt(Ce.value));Ce.value=structuredClone(N),F.value="",J.value[w.node.key]==!0||(J.value[w.node.key]=!0),await Zt();const q=document.getElementById("newSubTask");q&&q.focus()};function lt(w,p,$){for(const N of $){if(N.key===w)return N.children.unshift(p),$;if(lt(w,p,N.children))return $}return!1}function At(w=Kt(Ce.value)){const p=w.filter($=>$.key!=="new");return p.forEach($=>{$.children&&$.children.length>0&&($.children=At($.children))}),Ce.value=structuredClone(p)}return(w,p)=>{const $=vs,N=ps,q=fs,Q=Qt,ut=sa,V=qs,wt=aa,ve=ia,we=Ps,Pe=Cs,Ae=la,Dt=Ks,ct=na,ge=_s("tooltip");return u(),m(me,null,[i("div",Wi,[g($,{onChange:p[0]||(p[0]=c=>Oe()),modelValue:o(H),"onUpdate:modelValue":p[1]||(p[1]=c=>K(H)?H.value=c:null),options:o(le),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),g(N,{onChange:p[2]||(p[2]=c=>Oe()),modelValue:o(R),"onUpdate:modelValue":p[3]||(p[3]=c=>K(R)?R.value=c:null),options:o(xe),optionLabel:"name",placeholder:"Priority",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),g(N,{onChange:p[4]||(p[4]=c=>Oe()),modelValue:o(O),"onUpdate:modelValue":p[5]||(p[5]=c=>K(O)?O.value=c:null),options:o(_),optionLabel:"name",placeholder:"Status",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),i("div",Ui,[g(q,{onDateSelect:p[6]||(p[6]=c=>Ze(c)),modelValue:o(ue),"onUpdate:modelValue":p[7]||(p[7]=c=>K(ue)?ue.value=c:null),placeholder:"Start Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),o(xt)?(u(),m("p",{key:0,onClick:Bt,class:"pi pi-times absolute cursor-pointer"})):D("",!0)]),i("div",Fi,[g(q,{onDateSelect:p[8]||(p[8]=c=>dt(c)),modelValue:o(ye),"onUpdate:modelValue":p[9]||(p[9]=c=>K(ye)?ye.value=c:null),placeholder:"End Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),o(Mt)?(u(),m("p",{key:0,onClick:ws,class:"pi pi-times end-cross absolute cursor-pointer"})):D("",!0)]),g(Q,{onClick:gs,label:"Reset",class:"mr-2 w-full md:w-15rem mb-2",severity:"secondary"})]),g(ve,{class:"border-0 px-0"},{start:E(()=>[i("div",Ni,[o(G)?(u(),re(Q,{key:0,icon:"pi pi-plus",label:"Create Task",onClick:p[10]||(p[10]=c=>qe()),class:"mr-2",severity:"secondary"})):D("",!0),i("div",Bi,[g(Q,{icon:"pi pi-box",label:"Overview",onClick:p[11]||(p[11]=c=>de("overview")),class:he(["board-btn view-btn",{"bg-indigo-400 text-white":o(A)==="overview"}]),severity:"secondary"},null,8,["class"]),g(Q,{icon:"pi pi-list",label:"List",onClick:p[12]||(p[12]=c=>de("list")),class:he(["table-btn view-btn",{"bg-indigo-400 text-white":o(A)==="list"}]),severity:"secondary"},null,8,["class"]),g(Q,{icon:"pi pi-th-large",label:"Board",onClick:p[13]||(p[13]=c=>de("board")),class:he(["board-btn view-btn",{"bg-indigo-400 text-white":o(A)==="board"}]),severity:"secondary"},null,8,["class"]),g(Q,{icon:"pi pi-calendar",label:"Calendar",onClick:p[14]||(p[14]=c=>de("calendar")),class:he(["calendar-btn view-btn",{"bg-indigo-400 text-white":o(A)==="calendar"}]),severity:"secondary"},null,8,["class"])]),z(g(Q,{icon:"pi pi-github",onClick:p[15]||(p[15]=c=>de("git")),class:he(["px-4",{"bg-indigo-400 text-white":o(A)==="git"}]),severity:"secondary"},null,8,["class"]),[[ge,{value:"Git Commits"},void 0,{right:!0}]]),o(k)?z((u(),re(Q,{key:1,onClick:p[16]||(p[16]=c=>at(o(ae))),loading:o(gt),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"])),[[ge,{value:"Download Tasks"},void 0,{right:!0}]]):D("",!0)])]),end:E(()=>[g(wt,{iconPosition:"right",raised:""},{default:E(()=>[g(ut,null,{default:E(()=>[Yi]),_:1}),g(V,{onKeyup:p[17]||(p[17]=c=>Oe()),modelValue:o(_e),"onUpdate:modelValue":p[18]||(p[18]=c=>K(_e)?_e.value=c:null),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(A)==="overview"?(u(),m("div",zi,[i("div",Ri,[i("div",qi,[i("div",Pi,[i("div",Ki,[Ji,i("div",Gi,T(o(j)),1)])])]),(u(!0),m(me,null,ke(o(B),(c,d)=>(u(),m("div",{key:c,class:"col-12 lg:col-6 xl:col-3"},[i("div",{class:"card mb-0",style:P(`border-left:6px solid ${c.statusColor};`)},[i("div",Xi,[i("h4",Zi,T(c.statusName),1),i("div",Qi,T(c.taskCount),1)])],4)]))),128)),i("div",el,[g(we,{class:"h-full"},{title:E(()=>[ce("Recent Tasks")]),content:E(()=>[i("div",tl,[i("div",null,[(u(!0),m(me,null,ke(o(M),c=>(u(),m("div",{key:c,onClick:d=>w.$emit("handleTaskDetailView",c),class:"task-card"},[i("div",al,[z(i("div",{class:he("recenttaskstatus"),style:P(`background-color: ${c==null?void 0:c.statusColor};`)},null,4),[[ge,{value:`Status: ${c.statusName}`},void 0,{left:!0}]]),i("p",il,T(c==null?void 0:c.taskName),1)]),i("div",null,[i("i",null,[i("p",ll,[nl,ce(" "+T(c.dueDate?Qe(c==null?void 0:c.dueDate):"-- Not Set --"),1)])])])],8,sl))),128))]),i("div",ol,[w.currentPage<w.totalPages?(u(),re(Q,{key:0,onClick:p[19]||(p[19]=c=>w.loadMoreTasks("hide-loader")),loading:w.loadMoreLoading,label:"Load More",severity:"secondary"},null,8,["loading"])):D("",!0)])])]),_:1})])])])):D("",!0),o(A)==="list"?(u(),re(Dt,{key:1,class:"table-st",stripedRows:"",value:o(Ce),scrollable:"",scrollDirection:"both",expandedKeys:o(J),"onUpdate:expandedKeys":p[24]||(p[24]=c=>K(J)?J.value=c:null),lazy:!0,loading:o(Yt),filterDisplay:"menu",style:{overflow:"auto"},tableProps:{style:{minWidth:"1024px"}}},{empty:E(()=>[rl]),default:E(()=>[g(o(ht),{field:"name",header:"Name",class:"",expander:"",style:{width:"45%"},showAddButton:!0},{body:E(c=>[i("div",{class:"inline-block w-full align-items-center tasktitle-hover cursor-pointer relative",onMouseenter:d=>et(c.node.key)},[i("div",{onDblclick:d=>tt(c.node),class:"flex w-full"},[z((u(),m("div",cl,[g(N,{class:"mr-1 flex justify-content-center align-items-center",onChange:d=>zt(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":d=>c.node.data.status=d,options:o(y),disabled:!o(X),optionLabel:"name"},{value:E(d=>[d.value?(u(),m("div",{key:0,class:"flex align-items-center",style:P({backgroundColor:d.value.color_code})},[i("div",{style:P({backgroundColor:d.value.color_code}),class:"status-bg"},null,4)],4)):(u(),m("span",hl,T(d.placeholder),1))]),option:E(d=>[i("div",ml,[i("div",{style:P([{backgroundColor:d.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,T(d.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])),[[ge,{value:`${c.node.data.status.name}`},void 0,{top:!0}]]),i("span",{onClick:d=>Ye(c.node),style:P(o(Ne)===c.node.key?"display: none;":"display: block;"),class:"taskTitle cursor-pointer",title:c.node.data.name},T(c.node.data.name),13,vl),i("span",null,[g(V,{id:`inputTaskName${c.node.key}`,style:P(o(Ne)===c.node.key?"display: block;":"display: none;"),class:"inline-task-input",modelValue:o(Be),"onUpdate:modelValue":p[20]||(p[20]=d=>K(Be)?Be.value=d:null),type:"text",placeholder:"Edit task name"},null,8,["id","style","modelValue"])]),c.node.key=="new"?(u(),m("form",{key:0,onsubmit:d=>{d.preventDefault(),He(c.node)},action:""},[g(V,{id:"newSubTask",class:"inline-task-input",modelValue:o(L),"onUpdate:modelValue":p[21]||(p[21]=d=>K(L)?L.value=d:null),type:"text",placeholder:"Task Name",autocomplete:"off"},null,8,["modelValue"])],8,pl)):D("",!0)],40,ul)],40,dl)]),_:1}),g(o(ht),{field:"",header:"",style:{width:"5%",padding:"0.75rem 0rem"}},{body:E(c=>[i("div",{class:"w-full h-full flex align-items center",onMouseenter:d=>et(c.node.key)},[o(rt)===c.node.key?(u(),m("div",yl,[!o(Se)[c.node.key]&&c.node.key!=="new"?z((u(),re(Q,{key:0,onClick:d=>ft(c.node),severity:"secondary",icon:"pi pi-pencil",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,8,["onClick"])),[[ge,{value:"Edit Name",showDelay:500},void 0,{top:!0}]]):D("",!0),!o(Se)[c.node.key]&&c.node.key!=="new"?z((u(),re(Q,{key:1,onClick:d=>ze(c),severity:"secondary",icon:"pi pi-plus",class:"w-fit h-fit p-1",style:{"font-size":"0.2rem"}},null,8,["onClick"])),[[ge,{value:"Add Sub Task",showDelay:500},void 0,{top:!0}]]):D("",!0),o(Se)[c.node.key]||c.node.key=="new"?z((u(),re(Q,{key:2,onClick:d=>He(c.node),loading:o(Ge),severity:"secondary",label:c.node.key=="new"?"":"Save",icon:c.node.key=="new"?"pi pi-check":"",class:"p-1 w-fit h-full",style:P(c.node.key=="new"?"font-size: 0.8rem !important; height: fit-content !important;":"")},null,8,["onClick","loading","label","icon","style"])),[[ge,{value:c.node.key!=="new"?"Update Name":"Add Task"},void 0,{top:!0}]]):D("",!0),c.node.key=="new"?z((u(),re(Q,{key:3,onClick:p[22]||(p[22]=d=>At()),severity:"secondary",icon:"pi pi-minus",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,512)),[[ge,{value:"Cancel Task",showDelay:500},void 0,{top:!0}]]):D("",!0)])):D("",!0)],40,fl)]),_:1}),g(o(ht),{field:"assignee",header:"Assignee",style:{width:"16%"}},{body:E(c=>{var d,nt;return[c.node.key!=="new"?(u(),m("div",{key:0,class:"flex justify-content-start gap-1 userL",onMouseenter:Ve=>et(c.node.key)},[((d=c.node.data)==null?void 0:d.assigneeObj.length)>0?(u(),m("span",gl,[(u(!0),m(me,null,ke(c.node.data.assigneeObj,(Ve,bt)=>(u(),m("span",{key:bt,style:P({marginLeft:bt>0?"-20px":"0",zIndex:10-bt})},[Ve.image?z((u(),m("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Ve.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,wl)),[[ge,{value:`${Ve.name}`},void 0,{top:!0}]]):z((u(),re(Pe,{key:1,label:Ve.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},Ot(bt)])},null,8,["label","style"])),[[ge,{value:`${Ve.name}`},void 0,{top:!0}]])],4))),128))])):(u(),m("span",Dl,[i("div",bl,[i("div",kl,[Tl,Cl,o(it).length>0&&c.node.key!=="new"&&o(rt)===c.node.key?z((u(),re(Q,{key:0,onClick:Ve=>ss("add",0,c.node.key),severity:"secondary",icon:"pi pi-check",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important","z-index":"10"},id:`assigneeBtn${c.node.key}`,loading:o(Vt)},null,8,["onClick","id","loading"])),[[ge,{value:"Set Assigness",showDelay:500},void 0,{top:!0}]]):D("",!0),g($,{modelValue:o(it),"onUpdate:modelValue":p[23]||(p[23]=Ve=>K(it)?it.value=Ve:null),options:o(le),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full absolute",style:{opacity:"0"}},null,8,["modelValue","options"])])])])),i("div",El,[i("div",Sl,[((nt=c.node.data)==null?void 0:nt.assigneeObj.length)>0?z((u(),re(Q,{key:0,severity:"secondary",icon:"pi pi-user-edit",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,512)),[[ge,{value:"Edit Assignee",showDelay:500},void 0,{top:!0}]]):D("",!0),g($,{modelValue:c.node.data.assignee,"onUpdate:modelValue":Ve=>c.node.data.assignee=Ve,onChange:Ve=>ss("edit",c.node.data.assignee,c.node.key),options:o(Pt),filter:"",resetFilterOnHide:"true",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full absolute cursor-default",style:{opacity:"0",left:"0",top:"0"}},null,8,["modelValue","onUpdate:modelValue","onChange","options"])])])],40,_l)):D("",!0)]}),_:1}),g(o(ht),{field:"status",header:"Status",style:{width:"10%"}},{body:E(c=>[c.node.key!=="new"?(u(),m("div",xl,[i("div",Ml,[g(N,{class:"mr-1 flex justify-content-center align-items-center",onChange:d=>zt(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":d=>c.node.data.status=d,options:o(y),disabled:!o(X),optionLabel:"name"},{value:E(d=>[d.value?(u(),m("div",Vl,[i("div",{title:d.value.name,style:P({color:d.value.color_code,fontWeight:500}),class:"pt-1 status-truncate"},T(d.value.name),13,$l)])):(u(),m("span",Ol,T(d.placeholder),1))]),option:E(d=>[i("div",Al,[i("div",{style:P([{backgroundColor:d.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,T(d.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):D("",!0)]),_:1}),g(o(ht),{field:"dueDateValue",header:"Due Date",style:{textWrap:"nowrap",width:"9%",padding:"0.75rem 0.5rem"}},{body:E(c=>[c.node.key!=="new"?(u(),m("i",Ll)):D("",!0),c.node.key!=="new"?(u(),re(q,{key:1,onDateSelect:d=>as(d,c),class:he(["inline-calendar cursor-pointer",c.node.data.dueDateColor==="#087641"&&c.node.data.dueDateValue?"green-calendar":c.node.data.dueDateColor==="#b13a41"&&c.node.data.dueDateValue?"red-calendar":""]),placeholder:c.node.data.dueDateValue?c.node.data.dueDateValue:"--:--"},null,8,["onDateSelect","class","placeholder"])):D("",!0)]),_:1}),g(o(ht),{field:"priority",header:"Priority",style:{width:"9%"}},{body:E(c=>[c.node.key!=="new"?(u(),m("div",jl,[i("div",Il,[Hl,g(N,{class:"mr-1 flex justify-content-center align-items-center",onChange:d=>qt(c.node.data.priority,c.node.key),modelValue:c.node.data.priority,"onUpdate:modelValue":d=>c.node.data.priority=d,options:o(Ht),disabled:!o(X),optionLabel:"name",placeholder:"Set Priority"},{value:E(d=>[d.value?(u(),m("div",Wl,[d.value.name?(u(),m("div",{key:0,style:P({color:d.value.name==="Low"?"#e1aa1e":d.value.name==="Normal"?"#067bea":d.value.name==="High"?"#ff4928":d.value.name==="Urgent"?"crimson":"",fontWeight:500}),class:"pt-1"},T(d.value.name),5)):(u(),m("div",Ul,"-----"))])):(u(),m("span",Fl,T(d.placeholder),1))]),option:E(d=>[i("div",Nl,[i("div",null,T(d.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):D("",!0)]),_:1}),g(o(ht),{field:"action",header:"Action",style:{width:"6%",position:"relative"}},{body:E(c=>[c.node.key!=="new"?(u(),m("div",{key:0,class:"justify-content-start align-items-center webView-action",style:{width:"fit-content"},onMouseover:d=>yt(c.node.key),onMouseleave:d=>st(c.node.key)},[g(Ae,{visible:o(Fe)[c.node.key],"onUpdate:visible":d=>o(Fe)[c.node.key]=d,model:Et(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,Bl)):D("",!0),c.node.key!=="new"?(u(),m("div",{key:1,class:"justify-content-start align-items-center tabView-action",style:{width:"fit-content"},onClick:d=>yt(c.node.key),onMouseleave:d=>st(c.node.key)},[g(Ae,{visible:o(Fe)[c.node.key],"onUpdate:visible":d=>o(Fe)[c.node.key]=d,model:Et(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,Yl)):D("",!0)]),_:1})]),_:1},8,["value","expandedKeys","loading"])):D("",!0),o(A)==="board"?(u(),m("div",zl,[i("div",Rl,[i("div",null,[i("div",ql,[(u(!0),m(me,null,ke(t.kanbanTasks,c=>(u(),m("div",{key:c,class:"groupColumnContainer"},[i("div",Pl,[i("div",{style:P(`background-color: ${c.statusColor}; `),class:"column-header"},T(c.name)+" - "+T(c.content.length),5),g(o(ma),{modelValue:c.content,"onUpdate:modelValue":d=>c.content=d,options:o(b),disabled:!o(X),class:"draggable scrollbar",itemKey:"name",group:"cardItem",onChange:d=>Z(d,c.status)},{item:E(({element:d})=>{var nt,Ve,bt,Ms,Vs,$s;return[i("div",Kl,[(u(),m("div",{class:"task-card",style:P(o(Y)),key:d.id,onClick:Te=>w.$emit("handleTaskDetailView",d,c.content,c.name)},[i("div",Gl,[z((u(),m("p",Xl,[ce(T(d.data.name),1)])),[[ge,{value:`${d.data.name}`},void 0,{top:!0}]]),i("div",Zl,[i("div",{class:"status-icon",style:P(`background-color:${d.data.status.color_code}`)},null,4),i("p",Ql,T(d.data.status.name),1)]),((Ve=(nt=d.data)==null?void 0:nt.assigneeObj)==null?void 0:Ve.length)>0?(u(),m("div",en,[tn,i("div",sn,[(u(!0),m(me,null,ke(d.data.assigneeObj,(Te,kt)=>(u(),m("span",{key:kt,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:kt>0?"-20px":"0",zIndex:10-kt})},[Te.image?z((u(),m("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Te.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,an)),[[ge,{value:`${Te.name}`},void 0,{top:!0}]]):z((u(),re(Pe,{key:1,label:Te.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},Ot(kt)])},null,8,["label","style"])),[[ge,{value:`${Te.name}`},void 0,{top:!0}]])],4))),128))])])):D("",!0),(bt=d.data)!=null&&bt.dueDateValue?(u(),m("div",ln,[nn,i("p",{style:P(`color: ${d.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},T(d.data.dueDateValue),5)])):D("",!0),(Vs=(Ms=d.data)==null?void 0:Ms.priority)!=null&&Vs.name?(u(),m("div",on,[rn,i("p",dn,T(($s=d.data.priority)==null?void 0:$s.name),1)])):D("",!0),i("div",{class:"mt-2 flex align-items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-100",style:{"border-radius":"5px"},onClick:Te=>{Te.stopPropagation(),o(_t)==d.unique_id?_t.value=null:_t.value=d.unique_id}},[cn,i("i",{class:he(`pi ${o(_t)==d.unique_id?"pi-angle-down":"pi-angle-right"}  text-lg`)},null,2),i("p",hn,T(d.children.length),1)],8,un)]),ce(" "+T(d.t_name),1)],12,Jl)),i("div",{class:he(o(_t)===d.unique_id?"":"hidden")},[(u(!0),m(me,null,ke(d.children,Te=>{var kt,Os,As,Ls,js,Is;return u(),m("div",{key:Te.unique_id,class:"sub-card",onClick:Lt=>w.$emit("handleTaskDetailView",Te,c.content,c.name)},[i("p",vn,T(Te.data.name),1),i("div",pn,[i("div",{class:"status-icon",style:P(`background-color:${Te.data.status.color_code}`)},null,4),i("p",fn,T(Te.data.status.name),1)]),((Os=(kt=Te.data)==null?void 0:kt.assigneeObj)==null?void 0:Os.length)>0?(u(),m("div",yn,[_n,i("div",gn,[(u(!0),m(me,null,ke(Te.data.assigneeObj,(Lt,os)=>(u(),m("span",{key:os,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:os>0?"-20px":"0",zIndex:10-os})},[Lt.image?z((u(),m("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Lt.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,wn)),[[ge,{value:`${Lt.name}`},void 0,{top:!0}]]):z((u(),re(Pe,{key:1,label:Lt.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},Ot(os)])},null,8,["label","style"])),[[ge,{value:`${Lt.name}`},void 0,{top:!0}]])],4))),128))])])):D("",!0),(As=Te.data)!=null&&As.dueDateValue?(u(),m("div",Dn,[bn,i("p",{style:P(`color: ${Te.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},T(Te.data.dueDateValue),5)])):D("",!0),(js=(Ls=Te.data)==null?void 0:Ls.priority)!=null&&js.name?(u(),m("div",kn,[Tn,i("p",Cn,T((Is=Te.data.priority)==null?void 0:Is.name),1)])):D("",!0),i("div",En,[Sn,i("p",xn,T(Te.children.length),1)])],8,mn)}),128))],2)])]}),_:2},1032,["modelValue","onUpdate:modelValue","options","disabled","onChange"])])]))),128))])])])])):D("",!0),o(A)==="calendar"?(u(),m("div",Mn,[g(o(Hi),{events:o(pe),"selected-date":new Date().current,"time-from":8*60,"disable-views":["years","year","week"],"active-view":"month","events-on-month-view":"short",style:{height:"600px"}},{event:E(({event:c})=>[i("div",{onClick:d=>Ye(c),class:"vuecal__event",style:P({background:c.color}),innerHTML:c.title},null,12,Vn)]),_:1},8,["events","selected-date"])])):D("",!0),o(A)==="git"?(u(),m("div",$n,[g(we,null,{title:E(()=>[ce("Commit List")]),content:E(()=>[g(N,{onChange:oe,modelValue:o(Ue),"onUpdate:modelValue":p[25]||(p[25]=c=>K(Ue)?Ue.value=c:null),options:o(ne),optionLabel:"name",placeholder:"Branches",class:"w-full md:w-17rem mb-3 mt-2"},null,8,["modelValue","options"]),i("div",null,[i("div",On,[o(te).length>0?(u(),re(ct,{key:0,value:o(te)},{content:E(c=>[i("div",An,[i("div",null,[i("div",Ln,[jn,i("h6",In,T(c.item.author_name),1)]),i("div",null,[i("h6",Hn,"- "+T(c.item.title),1)])]),i("div",Wn,[i("p",Un,[i("small",null,T(c.item.authored_date),1)]),i("a",{href:c.item.web_url,target:"_blank",class:"font-small text-end"},[i("small",null,T(c.item.short_id),1)],8,Fn)])])]),_:1},8,["value"])):(u(),m("div",Nn,Yn))])])]),_:1})])):D("",!0)],64)}}};const Ke=t=>(Ss("data-v-cfeccfc4"),t=t(),xs(),t),Rn={class:"field flex flex-column"},qn=Ke(()=>i("label",{for:"name"},[ce("Set Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),Pn={class:"field"},Kn=Ke(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),Jn={class:"ql-formats flex justify-content-end mr-0"},Gn={class:"ql-bold"},Xn={class:"ql-italic"},Zn={class:"ql-underline"},Qn={class:"ql-strike"},eo=Ke(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),to=Ke(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),so=Ke(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),ao=Ke(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),io={class:"field"},lo=Ke(()=>i("label",null,"Assignees ",-1)),no={class:"field"},oo=Ke(()=>i("label",null,"Tags ",-1)),ro={class:"field"},uo=Ke(()=>i("label",null,"Due Date ",-1)),co={class:"field"},ho=Ke(()=>i("label",null,"Priority ",-1)),mo=Ke(()=>i("br",null,null,-1)),vo={key:0,class:"text-center",style:{color:"red"}},po={class:"create-btn-wrapper mb-0"},fo={__name:"CreateTask",props:["createTaskTitle","taskId","projects","usersLists","tagsLists"],emits:["closeCreateModal"],setup(t,{emit:e}){const{createTask:a}=We(),{isTaskCreated:l,detectDuplicateTask:r}=Ct(We()),{createTaskTitle:s,taskId:h,projects:n,usersLists:_,tagsLists:v}=t,y=es(),S=f(!1),M=f(h),B=f(!0),j=f(!1),pe=f(!1),ae=f(null),G=f(" ");Le(G,R=>{R.length===0&&(G.value=" ")});const X=f(null),fe=f(null),k=f(null),ie=f(null),$e=f(!1),Ce=f([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),je=e,ee=R=>{if(console.log("test druve"),$e.value)X.value=R;else{const O=new Date(R);O.setHours(23,59,0,0),X.value=O}};Le(X,(R,O)=>{R&&O&&R!==O&&($e.value=!0)});const H=async()=>{var R,O,ue;if(S.value=!0,ae.value===null)pe.value=!0,S.value=!1;else{pe.value=!1;let ye;if(X.value){const le=new Date(X.value);le.setDate(le.getDate()+1),ye=le.toISOString()}const _e={name:ae.value,description:G.value,dueDate:ye?new Date(new Date(ye).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,assignees:(R=fe.value)==null?void 0:R.map(le=>le.id),tags:(O=k.value)==null?void 0:O.map(le=>le.id),priority:(ue=ie.value)==null?void 0:ue.name,project_id:n,parent_task_id:h};if(ye){const le=new Date(ye);le.setDate(le.getDate()-1),X.value=le?new Date(le).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(_e),r.value===!0?(S.value=!1,y.add({severity:"error",summary:"Error",detail:"Task already exists!",group:"br",life:3e3})):l.value===!0?(S.value=!1,B.value=!1,j.value=!0,ae.value=null,je("closeCreateModal",!1),y.add({severity:"success",summary:"Successful",detail:"Task created Successfully",group:"br",life:3e3})):(S.value=!1,y.add({severity:"error",summary:"Error",detail:"Unable to create task!",group:"br",life:3e3}))}};return ys(()=>{const R=document.getElementById("createTaskName");Zt(()=>{R&&R.focus()})}),(R,O)=>{const ue=qs,ye=Xs,_e=vs,le=fs,A=ps,L=Qt,de=_s("tooltip");return u(),m("div",null,[g(ue,{type:"hidden",modelValue:o(M),"onUpdate:modelValue":O[0]||(O[0]=ne=>K(M)?M.value=ne:null)},null,8,["modelValue"]),i("div",Rn,[qn,g(ye,{id:"createTaskName",class:"border-gray-300",modelValue:o(ae),"onUpdate:modelValue":O[1]||(O[1]=ne=>K(ae)?ae.value=ne:null),invalid:R.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",Pn,[Kn,g(o(ms),{modelValue:o(G),"onUpdate:modelValue":O[2]||(O[2]=ne=>K(G)?G.value=ne:null),editorStyle:"height: 120px"},{toolbar:E(()=>[i("span",Jn,[z(i("button",Gn,null,512),[[de,"Bold",void 0,{bottom:!0}]]),z(i("button",Xn,null,512),[[de,"Italic",void 0,{bottom:!0}]]),z(i("button",Zn,null,512),[[de,"Underline",void 0,{bottom:!0}]]),z(i("button",Qn,null,512),[[de,"Strikethrough",void 0,{bottom:!0}]]),eo,to,so,ao])]),_:1},8,["modelValue"])]),i("div",io,[lo,g(_e,{display:"chip",modelValue:o(fe),"onUpdate:modelValue":O[3]||(O[3]=ne=>K(fe)?fe.value=ne:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",no,[oo,g(_e,{display:"chip",modelValue:o(k),"onUpdate:modelValue":O[4]||(O[4]=ne=>K(k)?k.value=ne:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",ro,[uo,g(le,{modelValue:o(X),"onUpdate:modelValue":O[5]||(O[5]=ne=>K(X)?X.value=ne:null),class:"w-full clndr",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:O[6]||(O[6]=ne=>ee(ne))},null,8,["modelValue"])]),i("div",co,[ho,g(A,{modelValue:o(ie),"onUpdate:modelValue":O[7]||(O[7]=ne=>K(ie)?ie.value=ne:null),options:o(Ce),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),mo,o(pe)?(u(),m("p",vo,"Please add task name")):D("",!0),i("div",po,[g(L,{label:"Save",icon:"pi pi-check",text:"",onClick:H,loading:o(S)},null,8,["loading"])])])}}},yo=Es(fo,[["__scopeId","data-v-cfeccfc4"]]);const Je=t=>(Ss("data-v-eeee4ee3"),t=t(),xs(),t),_o={class:"position-relative d-flex flex-column justify-content-between w-100 modal-container"},go={class:"field flex flex-column"},wo=Je(()=>i("label",{for:"name"},[ce("Edit Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),Do={class:"field"},bo=Je(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),ko={class:"ql-formats flex justify-content-end mr-0"},To={class:"ql-bold"},Co={class:"ql-italic"},Eo={class:"ql-underline"},So={class:"ql-strike"},xo=Je(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),Mo=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Vo=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),$o=Je(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Oo={class:"field"},Ao=Je(()=>i("label",null,"Assignees",-1)),Lo={class:"field"},jo=Je(()=>i("label",null,"Tags",-1)),Io={class:"field"},Ho=Je(()=>i("label",null,"Due Date",-1)),Wo={class:"field"},Uo=Je(()=>i("label",null,"Priority",-1)),Fo=Je(()=>i("br",null,null,-1)),No={key:0,class:"text-center",style:{color:"red"}},Bo={class:"edt-btn-wrapper mb-0"},Yo={__name:"EditTask",props:["singleTask","usersLists","tagsLists","projects"],emits:["closeEditModal"],setup(t,{emit:e}){var R,O,ue,ye,_e,le;const{editTask:a}=We(),{isTaskEdited:l,detectDuplicateTask:r}=Ct(We()),{singleTask:s,usersLists:h,tagsLists:n,projects:_}=t,v=es(),y=f(!1),S=f((R=s==null?void 0:s.data)==null?void 0:R.name),M=f(((O=s==null?void 0:s.data)==null?void 0:O.description)||" "),B=f(!1);Le(M,A=>{A.length===0&&(M.value=" "),B.value=!0});const j=f((ue=s==null?void 0:s.data)!=null&&ue.dueDate?new Date(s.data.dueDate).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),pe=f(!1),ae=f(null);ae.value=(ye=s==null?void 0:s.data)!=null&&ye.assigneeObj?(_e=s==null?void 0:s.data)==null?void 0:_e.assigneeObj.map(A=>({id:A.id,name:A.name})):"";const G=f(!1);Le(ae,A=>{G.value=!0});const X=f((le=s==null?void 0:s.data)==null?void 0:le.tagsObj),fe=f(!1);Le(X,A=>{fe.value=!0});const k=f(null);k.value=s.data.priority?{name:s.data.priority.name,code:s.data.priority.code}:"";const ie=f([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),$e=f(!1),Ce=e,je=A=>{if(console.log("test druve"),pe.value)j.value=A;else{const L=new Date(A);L.setHours(23,59,0,0),j.value=L}};Le(j,(A,L)=>{A&&L&&A!==L&&(pe.value=!0)});const ee=f(j.value);Le(j,(A,L)=>{A&&(ee.value=new Date(A).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const H=async()=>{var A;if(y.value=!0,S.value===null)$e.value=!0,y.value=!1;else{$e.value=!1;let L;if(j.value){const Ee=new Date(j.value);Ee.setDate(Ee.getDate()+1),L=Ee.toISOString()}const de=new Date((A=s==null?void 0:s.data)==null?void 0:A.dueDate).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),ne={id:s.key,name:S.value,...B.value===!0?{description:M.value}:{},priority:k.value.name,...ee.value!==de?{dueDate:L?new Date(new Date(L).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...G.value===!0?{assignees:ae.value.map(Ee=>Ee.id)}:{},...fe.value===!0?{tags:X.value.map(Ee=>Ee.id)}:{},project_id:_};if(L){const Ee=new Date(L);Ee.setDate(Ee.getDate()-1),j.value=Ee?new Date(Ee).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(ne),r.value===!0?(y.value=!1,v.add({severity:"error",summary:"Error",detail:"Cannnot edit, edited task name already exists!",group:"br",life:3e3})):l.value===!0?(y.value=!1,Ce("closeEditModal",!1),Ce("visibleEdit","visibleEdit"),v.add({severity:"success",summary:"Successful",detail:"Task updated Successfully",group:"br",life:3e3}),B.value===!0&&(B.value=!1,console.log("isDescriptionEdited Flagged")),G.value===!0&&(G.value=!1,console.log("isAsigneeEdited Flagged")),fe.value===!0&&(fe.value=!1,console.log("isTagsEdited Flagged"))):(y.value=!1,v.add({severity:"error",summary:"Error",detail:"Unable to update task!",group:"br",life:3e3}))}};return ys(()=>{const A=document.getElementById("editTaskName");Zt(()=>{A&&A.focus()})}),(A,L)=>{const de=Xs,ne=vs,Ee=fs,Ue=ps,te=Qt,x=_s("tooltip");return u(),m("div",_o,[i("div",null,[i("div",go,[wo,g(de,{id:"editTaskName",class:"border-gray-300",modelValue:o(S),"onUpdate:modelValue":L[0]||(L[0]=oe=>K(S)?S.value=oe:null),rows:"3",cols:"15",invalid:A.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",Do,[bo,g(o(ms),{modelValue:o(M),"onUpdate:modelValue":L[1]||(L[1]=oe=>K(M)?M.value=oe:null),editorStyle:"height: 120px"},{toolbar:E(()=>[i("span",ko,[z(i("button",To,null,512),[[x,"Bold",void 0,{bottom:!0}]]),z(i("button",Co,null,512),[[x,"Italic",void 0,{bottom:!0}]]),z(i("button",Eo,null,512),[[x,"Underline",void 0,{bottom:!0}]]),z(i("button",So,null,512),[[x,"Strikethrough",void 0,{bottom:!0}]]),xo,Mo,Vo,$o])]),_:1},8,["modelValue"])]),i("div",Oo,[Ao,g(ne,{display:"chip",modelValue:o(ae),"onUpdate:modelValue":L[2]||(L[2]=oe=>K(ae)?ae.value=oe:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",Lo,[jo,g(ne,{display:"chip",modelValue:o(X),"onUpdate:modelValue":L[3]||(L[3]=oe=>K(X)?X.value=oe:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",Io,[Ho,g(Ee,{modelValue:o(j),"onUpdate:modelValue":L[4]||(L[4]=oe=>K(j)?j.value=oe:null),class:"w-full",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:L[5]||(L[5]=oe=>je(oe))},null,8,["modelValue"])]),i("div",Wo,[Uo,g(Ue,{modelValue:o(k),"onUpdate:modelValue":L[6]||(L[6]=oe=>K(k)?k.value=oe:null),options:o(ie),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),Fo,o($e)?(u(),m("p",No,"Please add/fill/check up all the fields")):D("",!0),i("div",Bo,[g(te,{label:"Update",icon:"pi pi-check",text:"",onClick:H,loading:o(y)},null,8,["loading"])])])])}}},zo=Es(Yo,[["__scopeId","data-v-eeee4ee3"]]),Rs=da("fileUpload",()=>{const t=f(!1),e=f(!1),a=f(!1);async function l(s,h){e.value=!0;const n=new FormData;n.append("task_id",s),n.append("attachments",h);const _=pt("token");try{const v=await fetch("https://pbe.singularitybd.net/api/v1/tasks/attachment-upload",{method:"POST",headers:{Authorization:`Bearer ${_.value}`},body:n});if(!v.ok)throw new Error("Network response was not ok");const y=await v.json();console.log("upload data =>",y),(y==null?void 0:y.user_message)==="success"?t.value=!0:t.value=!1,e.value=!1}catch(v){console.error("Error uploading file:",v),t.value=!1,e.value=!1}}async function r(s){const h=pt("token");try{const n=await fetch(`https://pbe.singularitybd.net/api/v1/tasks/attachment-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${h.value}`}});if(!n.ok)throw new Error("Network response was not ok");const _=await n.json();console.log("delete data =>",_),(_==null?void 0:_.user_message)==="success"?a.value=!0:a.value=!1}catch(n){console.error("Error uploading file:",n),a.value=!1}}return{fileUpload:l,fileDelete:r,isFileUpload:t,isLoading:e,isFileDeleted:a}});const Ro={class:"grid"},qo={class:"col-12 flex justify-content-between"},Po={class:"m-0 detail-task-name cursor-pointer"},Ko={class:"flex gap-1"},Jo=i("span",{class:"ml-1 text-lg pi pi-copy my-auto cursor-pointer",style:{"padding-top":"1px"}},null,-1),Go=i("h5",{class:"m-0 ml-2"},"Activity",-1),Xo={class:"col-12 lg:col-7"},Zo={class:"task-wrapper card"},Qo={class:"task-det no-scrollbar"},er={class:"flex justify-content-between gap-2 flex-wrap align-items-center"},tr={class:"w-full lg:w-fit"},sr={class:"flex mt-2 justify-content-between gap-2 align-items-center task-detail-wrapper"},ar=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-calendar"}),i("p",{class:"text-nowrap"},"Due Date:")],-1),ir={class:"flex justify-content-between gap-2 align-items-centertask-detail-wrapper mt-3 mb-3"},lr=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-tags"}),i("p",null,"Tags:")],-1),nr={class:"w-full lg:w-fit"},or={class:"flex justify-content-between gap-2 align-items-center task-detail-wrapper"},rr=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",null,"Status:")],-1),dr={class:"flex mt-4 mb-3 justify-content-start gap-6 align-items-center task-detail-wrapper"},ur=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-stopwatch"}),i("p",{class:"text-nowrap"},"Track Time:")],-1),cr={class:"clock-wrapper relative"},hr={class:"border-round px-2 pt-3 pb-2"},mr={class:"flex justify-content-center align-items-center gap-3 manual-wrapper -mt-1"},vr=i("label",{for:"hours",class:"block mb-2 text-xs"},"Hours",-1),pr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),fr=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),yr=i("label",{for:"minutes",class:"block mb-2 text-xs"},"Minutes",-1),_r=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),gr=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),wr={class:"flex justify-content-center align-items-center",style:{"margin-top":"0.49rem !important"}},Dr=i("div",null,null,-1),br={class:"flex justify-content-between gap-2"},kr=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-user"}),i("p",null,"Assignee:")],-1),Tr={class:"field mt-3 flex flex-column"},Cr=i("div",{class:"flex justify-content-start gap-2 align-items-center mb-1 task-detail-property"},[i("span",{class:"pi pi-sliders-h"}),i("p",null,"Description:")],-1),Er={class:"ql-formats flex justify-content-end mr-0"},Sr={class:"ql-bold"},xr={class:"ql-italic"},Mr={class:"ql-underline"},Vr={class:"ql-strike"},$r=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),Or=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),Ar=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),Lr=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),jr={key:0,class:"flex justify-content-end"},Ir={class:"m-0"},Hr={class:"my-3 attach-sec flex align-items-center justify-content-start gap-2",style:{"overflow-x":"scroll"}},Wr={key:0,class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-5 attch-w",style:{"background-color":"#f7fafc"}},Ur=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),Fr=i("div",{class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},[i("div",{class:"text-xs"},"asdasd....asdme.extng"),i("div",{class:"text-xs"},"9 MAy, 2024")],-1),Nr=[Ur,Fr],Br=["href"],Yr=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),zr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Rr={class:"text-xs"},qr={class:"text-xs"},Pr=["href"],Kr=["src"],Jr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Gr={class:"text-xs"},Xr={class:"text-xs"},Zr=["href"],Qr=i("div",{class:"pi pi-video text-6xl attach-icon"},null,-1),ed={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},td={class:"text-xs"},sd={class:"text-xs"},ad=["href"],id=i("div",{class:"pi pi-file-pdf text-6xl text-danger attach-icon"},null,-1),ld={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},nd={class:"text-xs"},od={class:"text-xs"},rd=["href"],dd=i("div",{class:"pi pi-file-word text-6xl text-blue attach-icon"},null,-1),ud={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},cd={class:"text-xs"},hd={class:"text-xs"},md=["href"],vd=i("div",{class:"pi pi-file-excel text-6xl attach-icon",style:{color:"#04aa6d"}},null,-1),pd={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},fd={class:"text-xs"},yd={class:"text-xs"},_d=["onClick"],gd=i("i",{class:"pi pi-times text-xs text-white"},null,-1),wd=[gd],Dd={key:0,class:"flex gap-2 w-full justify-content-center"},bd=i("p",{class:"text-center"},"No Data found...",-1),kd=["onClick"],Td={class:"action-dropdown-det"},Cd={class:"action-dropdown-content-det"},Ed={class:"card"},Sd={class:"flex justify-content-start align-items-center task-detail-wrapper"},xd=i("div",{class:"flex justify-content-start gap-2 align-items-center bounce-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",{class:"text-nowrap"},"Bounce Status:")],-1),Md={class:"col-12 lg:col-5"},Vd={class:"comment-wrapper card no-scrollbar"},$d={class:"comments no-scrollbar"},Od={class:"my-2 text-surface-800"},Ad={key:0},Ld=["innerHTML"],jd={class:"my-2 text-surface-800"},Id={class:"flex justify-content-start align-items-center"},Hd=["src"],Wd={class:"text-lg"},Ud={key:0,class:"flex justify-content-start my-2"},Fd=["href"],Nd=i("div",{class:"pi pi-file"},null,-1),Bd={class:"attach-detail flex flex-column justify-content-center align-items-center"},Yd={class:"text-xs"},zd=["innerHTML"],Rd={style:{"line-height":"0"},class:"pb-1 float-right mt-3 mb-2"},qd={key:0,class:"text-sm font-semibold tracking-wide leading-3 bg-gray-300 px-3 py-2 flex align-itens-center mb-1 relative"},Pd=i("span",{class:"pi pi-file-import mr-2"},null,-1),Kd=i("i",{class:"pi pi-times"},null,-1),Jd=[Kd],Gd={class:"ql-formats flex justify-content-end mr-0"},Xd={class:"ql-bold"},Zd={class:"ql-italic"},Qd={class:"ql-underline"},eu={class:"ql-strike"},tu=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),su=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),au=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),iu=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),lu={__name:"TaskDetail",props:["usersLists","tagsLists","projID"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask","updateTaskTable"],setup(t,{emit:e}){var $t,as,is,Ot,Pt,ls;const a=Gs(),{fileUpload:l,fileDelete:r}=Rs(),{isFileUpload:s,isLoading:h,isFileDeleted:n}=Ct(Rs()),{getTaskTimerData:_,setManualTime:v,storeTaskTimer:y}=Fs();Ct(Fs());const{editTask:S,addTaskComment:M,getTaskDetails:B,getSingleProject:j}=We(),{isTaskEdited:pe,isTaskCommentCreated:ae,singleTaskComments:G,subTasks:X,taskStatus:fe,taskDetails:k,taskActivity:ie}=Ct(We());localStorage.setItem("taskDetailID",JSON.stringify(k.value.id));const{usersLists:$e,tagsLists:Ce,projID:je}=t,ee=e,H=es(),R=f(!1),O=f(vt("update_task")),ue=f(vt("edit_bounce")),ye=f(vt("create_task")),_e=f(null);_e.value=(as=($t=k.value)==null?void 0:$t.assignee)==null?void 0:as.map(C=>({id:C.id,name:C.name}));const le=f(!1);Le(_e,C=>{le.value=!0});const A=f((Ot=(is=k.value)==null?void 0:is.tags)==null?void 0:Ot.map(C=>({id:C.id,name:C.name}))),L=f(!1);Le(A,C=>{L.value=!0});const de=f((Pt=k.value)!=null&&Pt.due_date?new Date(k.value.due_date).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),ne=f(!1),Ee=C=>{if(console.log("test druve"),ne.value)de.value=C;else{const b=new Date(C);b.setHours(23,59,0,0),de.value=b}};Le(de,(C,b)=>{C&&b&&C!==b&&(ne.value=!0)});const Ue=f(de.value);Le(de,(C,b)=>{C&&(Ue.value=new Date(C).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const te=f(),x=ua(),oe=f(null),xe=f(null),Ht=f(!1),Qe=f(!1),Fe=async C=>{var Y,Z;Qe.value=!0;let b;if(oe.value>0||xe.value>0){b=oe.value*3600+xe.value*60,console.log("totalSeconds",b);const J=await v((Y=k.value)==null?void 0:Y.id,b);(J==null?void 0:J.code)===200?(await B((Z=k.value)==null?void 0:Z.id),Qe.value=!1,H.add({severity:"success",summary:"Duration Added",detail:`Duration: ${oe.value?oe.value:0} hours and ${xe.value?xe.value:0} minutes`,group:"br",life:3e3}),oe.value=null,xe.value=null,C()):(Qe.value=!1,H.add({severity:"error",summary:"Error",detail:"Unable to add duration",group:"br",life:3e3})),console.log("responseData",J)}else Qe.value=!1,H.add({severity:"error",summary:"Error",detail:"Please add duration",group:"br",life:3e3});b=null},rt=C=>{var b;console.log(C.detail),C.detail===3&&((b=k.value)==null?void 0:b.is_timer_start)==="false"&&x.require({target:C.currentTarget,group:"headless",message:"Set task duration:",accept:()=>{H.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{}})},et=f("00:00:00");let Ne=null;const Se=f(!1),Be=async()=>{var C,b,Y,Z,J,U,F,Ie,qe,ze;if(k.value.id,Se.value=!0,((C=k.value)==null?void 0:C.is_timer_start)==="false"){await _("start",(b=k.value)==null?void 0:b.id),await B((Y=k.value)==null?void 0:Y.id),Ge(),Se.value=!1,localStorage.setItem("storeTaskID",JSON.stringify((Z=k.value)==null?void 0:Z.id)),localStorage.setItem("storeTaskProjectID",JSON.stringify(Number(je))),localStorage.setItem("storeTaskSpaceID",JSON.stringify((J=k.value)==null?void 0:J.project.space_id)),localStorage.setItem("storeTaskCompanyID",JSON.stringify((U=k.value)==null?void 0:U.project.company_id)),localStorage.setItem("storeTaskTimerStartTime",JSON.stringify(k.value.taskTimer.start_time));let lt={task_id:k.value.id,project_id:je,space_id:k.value.project.space_id,company_id:k.value.project.company_id,timerStartTime:k.value.taskTimer.start_time};await y(lt),H.add({severity:"success",summary:"Task Timer",detail:"Timer Started",group:"br",life:3e3}),await j(je)}else await _("stop",(F=k.value)==null?void 0:F.id,(qe=(Ie=k.value)==null?void 0:Ie.taskTimer)==null?void 0:qe.id),await B((ze=k.value)==null?void 0:ze.id),ft(),Se.value=!1,localStorage.removeItem("storeTaskID"),localStorage.removeItem("storeTaskProjectID"),localStorage.removeItem("storeTaskSpaceID"),localStorage.removeItem("storeTaskCompanyID"),localStorage.removeItem("storeTaskTimerStartTime"),await y({task_id:null,project_id:null,space_id:null,company_id:null}),H.add({severity:"success",summary:"Task Timer",detail:"Timer Stopped",group:"br",life:3e3}),await j(je)},Ge=()=>{k.value.id,console.log("taskDetails.value.taskTimer.start_time",k.value.taskTimer.start_time);const C=new Date(k.value.taskTimer.start_time).getTime();Ne=setInterval(()=>{const b=Math.floor((Date.now()-C)/1e3);et.value=Bt(b)},1e3)},ft=()=>{clearInterval(Ne),et.value=Bt(k.value.total_duration)},W=f([{is_bounce:"No"},{is_bounce:"Yes"}]),Me=f(),Ye=f(((ls=k.value)==null?void 0:ls.description)||" "),tt=f(!1);Le(Ye,C=>{C.length===0&&(Ye.value=" "),tt.value=!0});const He=f(null),yt=f(),st=f(!0),Et=f(!1),Wt=()=>{Et.value=!0,st.value=!1},Ut=()=>{Et.value=!1,st.value=!0},Ft=async()=>{var C;if(He.value===null||He.value===""){H.add({severity:"warn",summary:"Warn",detail:"Comment required",group:"br",life:3e3});return}R.value=!0,await M((C=k.value)==null?void 0:C.id,He.value,at.value),ae.value===!0?(H.add({severity:"success",summary:"Successful",detail:"Comment added Successfully",group:"br",life:3e3}),He.value=null,R.value=!1,at.value=null):(H.add({severity:"error",summary:"Error",detail:"Unable to add comment",group:"br",life:3e3}),R.value=!1)},Nt=C=>{const b=new Date(C),Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][b.getMonth()],J=b.getDate(),U=b.getFullYear().toString().substr(-2),F=b.getHours(),Ie=b.getMinutes(),qe=F>=12?"PM":"AM",ze=F%12||12,lt=Ie<10?"0"+Ie:Ie;return`${J} ${Z}'${U}, ${ze}:${lt}${qe}`},St=async()=>{var Z,J;let C;if(de.value){const U=new Date(de.value);U.setDate(U.getDate()+1),C=U.toISOString()}const b=new Date((Z=k.value)==null?void 0:Z.due_date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),Y={id:(J=k.value)==null?void 0:J.id,...tt.value===!0?{description:Ye.value}:{},project_id:je,...Ue.value!==b?{dueDate:C?new Date(new Date(C).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...le.value===!0?{assignees:_e.value.map(U=>U.id)}:{},...L.value===!0?{tags:A.value.map(U=>U.id)}:{}};if(C){const U=new Date(C);U.setDate(U.getDate()-1),de.value=U?new Date(U).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await S(Y),pe.value===!0?(H.add({severity:"success",summary:"Successful",detail:"Task detail updated",group:"br",life:3e3}),yt.value=null,tt.value===!0&&(tt.value=!1,console.log("isDescriptionEdited Flagged")),le.value===!0&&(le.value=!1,console.log("isAsigneeEdited Flagged")),L.value===!0&&(L.value=!1,console.log("isTagsEdited Flagged"))):H.add({severity:"error",summary:"Error",detail:"Unable to upadte task detail",group:"br",life:3e3})},Xe=f(null),_t=C=>{Xe.value=C.target.files[0]},gs=async()=>{var C,b;Xe.value&&console.log("file =>",Xe.value),await l((C=k.value)==null?void 0:C.id,Xe.value),s.value===!0?(H.add({severity:"success",summary:"Successfull",detail:"File Upload successfully!",group:"br",life:3e3}),B((b=k.value)==null?void 0:b.id),document.getElementById("attachInput").value=null,Xe.value=null):H.add({severity:"error",summary:"Error",detail:"Unable to upload file!",group:"br",life:3e3})},Oe=C=>{const b=["jpg","JPG","jpeg","png","gif","bmp","svg","webp","ico","tiff","tif","heic","heif"],Y=["mp4","avi","flv","wmv","mov","3gp","mkv"],Z=["pdf","PDF","ppt","pptx"],J=["doc","docx","rtf"],U=["xls","xlsx","csv"];return b.some(F=>C.endsWith("."+F))?"image":Y.some(F=>C.endsWith("."+F))?"video":Z.some(F=>C.endsWith("."+F))?"pdf":J.some(F=>C.endsWith("."+F))?"word":U.some(F=>C.endsWith("."+F))?"excel":"file"};ys(async()=>{var Y,Z;await B((Y=k.value)==null?void 0:Y.id);const C={name:k.value.status_name,code:k.value.status};te.value=C;const b={is_bounce:k.value.is_bounce};Me.value=b,((Z=k.value)==null?void 0:Z.is_timer_start)==="true"&&Ge()});async function xt(C){var b,Y,Z;try{const J=pt("token"),{data:U,pending:F}=await us(`${a.public.apiUrl}/tasks/update/${(b=k.value)==null?void 0:b.id}`,{method:"POST",headers:{Authorization:`Bearer ${J.value}`},body:{status:C.code}},"$nwfJLeTGBC");((Y=U.value)==null?void 0:Y.app_message)==="success"?(B((Z=k.value)==null?void 0:Z.id),H.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),ee("updateTaskTable")):H.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(J){console.error("Error fetching data:",J)}}async function Mt(C){var b,Y,Z;try{const J=pt("token"),{data:U,pending:F}=await us(`${a.public.apiUrl}/tasks/update/${(b=k.value)==null?void 0:b.id}`,{method:"POST",headers:{Authorization:`Bearer ${J.value}`},body:{is_bounce:C.is_bounce}},"$np1kf0qdb3");console.log("dataBO",U),((Y=U.value)==null?void 0:Y.app_message)==="success"?(B((Z=k.value)==null?void 0:Z.id),H.add({severity:"success",summary:"Successfull",detail:"Bounce Status Changed",group:"br",life:3e3})):H.add({severity:"error",summary:"Error",detail:"Unable to change bounce status",group:"br",life:3e3})}catch(J){console.error("Error fetching data:",J)}}const Ze=C=>{const Y=C.split("/");return Y[Y.length-1]},dt=C=>{const b=["Jan","Feb","Mar","Apr","MAy","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Y=C,Z=new Date(Y),J={year:"numeric",month:"long",day:"numeric"},F=Z.toLocaleDateString("en-US",J).split(" "),Ie=b.indexOf(F[0]);return Ie!==-1&&(F[0]=b[Ie]),F.join(" ")};function Bt(C){const b=Math.floor(C/3600).toString().padStart(2,"0"),Y=Math.floor(C%3600/60).toString().padStart(2,"0"),Z=(C%60).toString().padStart(2,"0");return`${b}:${Y}:${Z}`}const ws=async C=>{var b;await r(C),n.value===!0?(H.add({severity:"success",summary:"Successful",detail:"File Deleted successfully!",group:"br",life:3e3}),B((b=k.value)==null?void 0:b.id)):H.add({severity:"error",summary:"Error",detail:"Unable to delete file!",group:"br",life:3e3})},gt=f(null),at=f(null),Yt=f(""),zt=C=>{at.value=C.target.files[0],Yt.value=at.value?at.value.name:""},it=()=>{gt.value.click()},Rt=async()=>{at.value=null},qt=async()=>{var J;const C=pt("token"),{data:b,pending:Y,error:Z}=await us(`${a.public.apiUrl}/tasks/share/${(J=k.value)==null?void 0:J.id}`,{method:"GET",headers:{Authorization:`Bearer ${C.value}`}},"$yuqoLxhdIO");if(Z.value){H.add({severity:"error",summary:"Error",detail:"Failed to share",life:3e3});return}else{const U=document.createElement("textarea");U.value=b.value.shared_web_link,document.body.appendChild(U),U.select(),document.execCommand("copy"),document.body.removeChild(U),H.add({severity:"success",summary:"Share successful",detail:"Shared link copied",group:"br",life:3e3});return}},Vt=Ts(()=>{var C;return(C=k.value)!=null&&C.unique_id?k.value.unique_id.slice(0,6)+"...":""}),ss=()=>{var C,b;if((C=k.value)!=null&&C.id){const Y=document.createElement("textarea");Y.value=(b=k.value)==null?void 0:b.unique_id,document.body.appendChild(Y),Y.select(),document.execCommand("copy"),document.body.removeChild(Y),H.add({severity:"success",summary:"Task ID copied",detail:"Task ID copied to clipboard",group:"br",life:3e3})}else H.add({severity:"error",summary:"Error",detail:"Task ID not found",group:"br",life:3e3})};return(C,b)=>{var $,N,q,Q,ut;const Y=va,Z=vs,J=ps,U=pa,F=Qt,Ie=fa,qe=ya,ze=ht,lt=Ks,At=_a,ns=Cs,w=Ps,p=_s("tooltip");return u(),m("div",Ro,[i("div",qo,[i("h5",Po,T(o(k).name),1),i("div",Ko,[z((u(),m("div",{onClick:ss,class:"flex justify-content-start gap-2 align-items-center cursor-pointer uniq-id-wrapper share-btn"},[Jo,i("span",null,T(o(Vt)),1)])),[[p,{value:"Copy Task ID"},void 0,{top:!0}]]),z(i("span",{onClick:qt,class:"pi pi-share-alt my-auto cursor-pointer ml-2 share-btn"},null,512),[[p,{value:"Share Task"},void 0,{top:!0}]]),Go])]),i("div",Xo,[i("div",null,[i("div",Zo,[i("div",Qo,[i("form",{onSubmit:mt(St,["prevent"]),class:"mt-2 task-detail ml-2"},[i("div",er,[i("div",tr,[i("div",sr,[ar,g(Y,{class:"input-fields"},{default:E(()=>[g(o(fs),{style:"width: 164.94px; border-radius:7px;height:36px",modelValue:o(de),"onUpdate:modelValue":b[0]||(b[0]=V=>K(de)?de.value=V:null),placeholder:"Set Due Date",showTime:"",hourFormat:"12",onDateSelect:b[1]||(b[1]=V=>Ee(V))},null,8,["modelValue"])]),_:1})]),i("div",ir,[lr,g(Y,{class:"input-fields",style:{width:"168px"}},{default:E(()=>[g(Z,{display:"chip",modelValue:o(A),"onUpdate:modelValue":b[2]||(b[2]=V=>K(A)?A.value=V:null),filter:"",resetFilterOnHide:"",options:t.tagsLists,optionLabel:"name",placeholder:"Select Tags",class:"w-full"},null,8,["modelValue","options"])]),_:1})])]),i("div",nr,[i("div",or,[rr,g(J,{onChange:b[3]||(b[3]=V=>xt(o(te))),modelValue:o(te),"onUpdate:modelValue":b[4]||(b[4]=V=>K(te)?te.value=V:null),options:o(fe),optionLabel:"name",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["modelValue","options"])]),i("div",dr,[ur,i("div",cr,[g(Ie,{close:o(Ht),group:"headless"},{container:E(({message:V,acceptCallback:wt,rejectCallback:ve})=>[i("div",hr,[i("div",mr,[i("div",null,[vr,g(U,{modelValue:o(oe),"onUpdate:modelValue":b[5]||(b[5]=we=>K(oe)?oe.value=we:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:23,id:"hours"},{incrementbuttonicon:E(()=>[pr]),decrementbuttonicon:E(()=>[fr]),_:1},8,["modelValue"])]),i("div",null,[yr,g(U,{modelValue:o(xe),"onUpdate:modelValue":b[6]||(b[6]=we=>K(xe)?xe.value=we:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:59,id:"minutes"},{incrementbuttonicon:E(()=>[_r]),decrementbuttonicon:E(()=>[gr]),_:1},8,["modelValue"])])]),i("div",wr,[g(F,{icon:"pi pi-check px-2 py-0 text-sm",label:"",class:"border-none w-full mx-3",loading:o(Qe),onClick:we=>Fe(ve),size:"small"},null,8,["loading","onClick"])])])]),_:1},8,["close"]),z(g(F,{loading:o(Se),class:"clock-btn",onClick:Be,icon:(($=o(k))==null?void 0:$.is_timer_start)=="true"?"pi pi-stop":"pi pi-play",severity:((N=o(k))==null?void 0:N.is_timer_start)=="true"?" stop-color":"",rounded:"","aria-label":"Filter"},null,8,["loading","icon","severity"]),[[p,{value:((q=o(k))==null?void 0:q.is_timer_start)=="true"?"Stop":"Start"},void 0,{top:!0}]]),i("div",{class:"text-sm absolute",onClick:b[7]||(b[7]=V=>rt(V))},T(((Q=o(k))==null?void 0:Q.is_timer_start)=="true"?o(et):Bt((ut=o(k))==null?void 0:ut.total_duration)),1)]),Dr])])]),i("div",br,[kr,g(Y,{style:{width:"100%"},class:"input-fields"},{default:E(()=>[g(Z,{display:"chip",modelValue:o(_e),"onUpdate:modelValue":b[8]||(b[8]=V=>K(_e)?_e.value=V:null),filter:"",resetFilterOnHide:"",options:t.usersLists,optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),_:1})]),i("div",Tr,[Cr,g(o(ms),{modelValue:o(Ye),"onUpdate:modelValue":b[9]||(b[9]=V=>K(Ye)?Ye.value=V:null),editorStyle:"height: 150px",readonly:!o(O)},{toolbar:E(()=>[i("span",Er,[z(i("button",Sr,null,512),[[p,"Bold",void 0,{bottom:!0}]]),z(i("button",xr,null,512),[[p,"Italic",void 0,{bottom:!0}]]),z(i("button",Mr,null,512),[[p,"Underline",void 0,{bottom:!0}]]),z(i("button",Vr,null,512),[[p,"Strikethrough",void 0,{bottom:!0}]]),$r,Or,Ar,Lr])]),_:1},8,["modelValue","readonly"])]),o(O)?(u(),m("div",jr,[g(F,{type:"submit",label:"Save"})])):D("",!0)],32),g(At,{class:"mt-3"},{default:E(()=>{var V,wt;return[g(qe,{class:"file-upload",header:"Detail"},{default:E(()=>{var ve,we,Pe,Ae,Dt,ct,ge,c;return[i("p",Ir,"Attachments: "+T((ve=o(k))!=null&&ve.attachments&&((Pe=(we=o(k))==null?void 0:we.attachments)==null?void 0:Pe.length)>0?(Dt=(Ae=o(k))==null?void 0:Ae.attachments)==null?void 0:Dt.length:0),1),i("div",Hr,[(ct=o(k))!=null&&ct.attachments&&((ge=o(k))==null?void 0:ge.attachments.length)===0?(u(),m("div",Wr,Nr)):D("",!0),(u(!0),m(me,null,ke((c=o(k))==null?void 0:c.attachments,d=>(u(),m("div",{key:d,target:"_blank",class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-2 relative",style:{"background-color":"#f7fafc"}},[Oe(d==null?void 0:d.file)==="file"?(u(),m("a",{key:0,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:d==null?void 0:d.file},[Yr,i("div",zr,[i("div",Rr,T(Ze(d==null?void 0:d.file)),1),i("div",qr,T(dt(d==null?void 0:d.created_at)),1)])],8,Br)):D("",!0),Oe(d==null?void 0:d.file)==="image"?(u(),m("a",{key:1,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 relative",href:d==null?void 0:d.file},[i("img",{src:d==null?void 0:d.file,alt:"",style:{width:"90%",height:"80px","border-radius":"10px","border-top-left-radius":"10px","object-fit":"cover"}},null,8,Kr),i("div",Jr,[i("div",Gr,T(Ze(d==null?void 0:d.file)),1),i("div",Xr,T(dt(d==null?void 0:d.created_at)),1)])],8,Pr)):D("",!0),Oe(d==null?void 0:d.file)==="video"?(u(),m("a",{key:2,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:d==null?void 0:d.file},[Qr,i("div",ed,[i("div",td,T(Ze(d==null?void 0:d.file)),1),i("div",sd,T(dt(d==null?void 0:d.created_at)),1)])],8,Zr)):D("",!0),Oe(d==null?void 0:d.file)==="pdf"?(u(),m("a",{key:3,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:d==null?void 0:d.file},[id,i("div",ld,[i("div",nd,T(Ze(d==null?void 0:d.file)),1),i("div",od,T(dt(d==null?void 0:d.created_at)),1)])],8,ad)):D("",!0),Oe(d==null?void 0:d.file)==="word"?(u(),m("a",{key:4,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:d==null?void 0:d.file},[dd,i("div",ud,[i("div",cd,T(Ze(d==null?void 0:d.file)),1),i("div",hd,T(dt(d==null?void 0:d.created_at)),1)])],8,rd)):D("",!0),Oe(d==null?void 0:d.file)==="excel"?(u(),m("a",{key:5,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:d==null?void 0:d.file},[vd,i("div",pd,[i("div",fd,T(Ze(d==null?void 0:d.file)),1),i("div",yd,T(dt(d==null?void 0:d.created_at)),1)])],8,md)):D("",!0),i("div",{onClick:nt=>ws(d==null?void 0:d.id),class:"absolute bg-red-500 text-white p-2 flex align-items-center justify-content-center close-btn"},wd,8,_d)]))),128))]),o(O)?(u(),m("div",Dd,[i("input",{onChange:_t,id:"attachInput",class:"float-right file-up-btn",type:"file",placeholder:"+"},null,32),g(F,{type:"button",loading:o(h),onClick:gs,label:"Upload"},null,8,["loading"])])):D("",!0)]}),_:1}),g(qe,{header:`Sub Tasks ${(V=o(X))!=null&&V.length?o(X).length:0}`},{default:E(()=>[o(ye)?z((u(),re(F,{key:0,icon:"pi pi-plus",label:"Create",onClick:b[10]||(b[10]=ve=>{var we;return ee("openCreateSpace",(we=o(k))==null?void 0:we.id,"sub-task")}),class:"mr-2 sub-create",severity:"secondary"},null,512)),[[p,{value:"Create Sub Task"},void 0,{right:!0}]]):D("",!0),g(lt,{class:"tree-table",value:o(X),lazy:!0,tableProps:{style:{minWidth:"650px"}},style:{overflow:"auto"}},{empty:E(()=>[bd]),default:E(()=>[g(ze,{class:"cursor-pointer toneS",field:"name",header:"Name",expander:"",style:{width:"45%"}},{body:E(ve=>[z((u(),m("span",{class:"subtaskTitle",onClick:we=>ee("handleTaskDetailView",ve.node)},[ce(T(ve.node.data.name),1)],8,kd)),[[p,{value:`${ve.node.data.name}`},void 0,{left:!0}]])]),_:1}),g(ze,{field:"assignee",header:"Assignee",style:{width:"25%"}}),g(ze,{field:"dueDateValue",header:"Due Date",style:P([{width:"11.5%"},{"text-wrap":"nowrap"}])}),g(ze,{field:"priority",header:"Priority",style:{width:"10%"}},{body:E(ve=>{var we,Pe,Ae;return[i("span",{class:he(["text-xs",((we=ve.node.data.priority)==null?void 0:we.name)==="High"?"text-danger":((Pe=ve.node.data.priority)==null?void 0:Pe.name)==="Medium"?"text-warning":"text-success"])},T((Ae=ve.node.data.priority)==null?void 0:Ae.name),3)]}),_:1}),g(ze,{field:"action",header:"Action"},{body:E(ve=>[i("div",Td,[g(F,{style:{width:"30px",height:"30px","border-radius":"50%"},icon:"pi pi-ellipsis-v",class:"action-dropdown-det-toggle"}),i("div",Cd,[g(F,{icon:"pi pi-trash",class:"mr-1 ac-btn dlt-action",severity:"warning",rounded:"",onClick:we=>ee("confirmDeleteTask",ve.node.key)},null,8,["onClick"]),g(F,{icon:"pi pi-cog",class:"mr-1 ac-btn view-action",severity:"info",onClick:we=>ee("handleTaskDetailView",ve.node),rounded:""},null,8,["onClick"]),g(F,{icon:"pi pi-pencil",class:"mr-1 ac-btn edit-action",severity:"success",onClick:we=>ee("handleTaskEdit",ve.node),rounded:""},null,8,["onClick"]),g(F,{icon:"pi pi-plus",class:"ac-btn sub-action",severity:"success",onClick:we=>ee("openCreateSpace",ve.node.key,"sub-task"),rounded:""},null,8,["onClick"])])])]),_:1})]),_:1},8,["value"])]),_:1},8,["header"]),g(qe,{header:`Bounce ${((wt=o(Me))==null?void 0:wt.is_bounce)==="Yes"?"1":""}`},{default:E(()=>[i("div",Ed,[i("div",Sd,[xd,g(J,{onChange:b[11]||(b[11]=ve=>Mt(o(Me))),disabled:!o(ue),modelValue:o(Me),"onUpdate:modelValue":b[12]||(b[12]=ve=>K(Me)?Me.value=ve:null),options:o(W),optionLabel:"is_bounce",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["disabled","modelValue","options"])])])]),_:1},8,["header"])]}),_:1})])])])]),i("div",Md,[i("div",null,[i("div",Vd,[i("div",$d,[i("div",Od,[o(st)?(u(),re(F,{key:0,onClick:Wt,label:"↓  Show More",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})):D("",!0)]),o(Et)?(u(),m("div",Ad,[(u(!0),m(me,null,ke(o(ie),V=>(u(),m("ul",{key:V,style:{"margin-left":"-15px","margin-top":"-6px"}},[i("li",{innerHTML:V.title,style:{"font-size":"smaller !important"}},null,8,Ld)]))),128)),i("div",jd,[g(F,{onClick:Ut,label:"↑ Hide",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})])])):D("",!0),(u(!0),m(me,null,ke(o(G),V=>(u(),re(w,{class:"mb-2",key:V.id},{title:E(()=>[i("div",Id,[V.commentator_image?(u(),m("img",{key:0,class:"mr-2",src:V.commentator_image,alt:"",style:{width:"28px",height:"28px","border-radius":"50%"}},null,8,Hd)):(u(),re(ns,{key:1,label:V.commentator_name.charAt(),class:"mr-2 capitalize",size:"small",style:{"background-color":"gray",color:"#ededed","border-radius":"50%"}},null,8,["label"])),i("p",Wd,T(V.commentator_name),1)])]),content:E(()=>[Ze(V==null?void 0:V.file)?(u(),m("div",Ud,[i("a",{href:V==null?void 0:V.file,target:"_blank",class:"bg-gray-200 attachment-wrapper cursor-pointer flex align-items-center px-3 py-3 gap-2 comment-file",style:{"background-color":"#f7fafc"}},[Nd,i("div",Bd,[i("div",Yd,T(Ze(V==null?void 0:V.file)),1)])],8,Fd)])):D("",!0),i("p",{innerHTML:V!=null&&V.comment?V==null?void 0:V.comment:"",class:"m-0 ml-1",style:{"font-size":"0.9rem"}},null,8,zd),i("i",Rd,T(Nt(V.time)),1)]),_:2},1024))),128))]),i("form",{onSubmit:mt(Ft,["prevent"]),class:"comment-add"},[o(at)?(u(),m("div",qd,[i("div",null,[Pd,ce(),i("span",null,T(o(Yt)),1)]),i("div",{onClick:Rt,class:"close-comment"},Jd)])):D("",!0),i("div",null,[g(o(ms),{class:"mb-2",placeholder:"Add comment",modelValue:o(He),"onUpdate:modelValue":b[13]||(b[13]=V=>K(He)?He.value=V:null),editorStyle:"height: 76px"},{toolbar:E(()=>[i("span",Gd,[z(i("button",Xd,null,512),[[p,"Bold",void 0,{bottom:!0}]]),z(i("button",Zd,null,512),[[p,"Italic",void 0,{bottom:!0}]]),z(i("button",Qd,null,512),[[p,"Underline",void 0,{bottom:!0}]]),z(i("button",eu,null,512),[[p,"Strikethrough",void 0,{bottom:!0}]]),tu,su,au,iu])]),_:1},8,["modelValue"]),i("input",{class:"hidden",type:"file",ref_key:"fileInput",ref:gt,onChange:zt},null,544),g(F,{icon:"pi pi-cloud-upload",onClick:it,"aria-label":"Filter"}),g(F,{class:"ml-2",type:"submit",icon:"pi pi-plus",label:"Add",loading:o(R)},null,8,["loading"])])],32)])])])])}}};const ts=t=>(Ss("data-v-efb466c3"),t=t(),xs(),t),nu={class:"card"},ou={class:"d-flex create-space-btn-wrapper mb-3 mr-2"},ru={class:"breadCrumWrap"},du=ts(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),uu=ts(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),cu=ts(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),hu=ts(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),mu={class:"text cursor-pointer"},vu={class:"inline-flex align-items-center justify-content-center gap-2"},pu={class:"white-space-nowrap"},fu=ts(()=>i("p",null,"Are you sure you want to delete?",-1)),yu={__name:"index",setup(t){const e=f(vt("read_task")),a=We(),l=We(),{getSingleProject:r,deleteTask:s,getTaskAssignModalData:h,getTagsAssignModalData:n,getTaskDetails:_}=We(),{singleProject:v,isTaskDeleted:y,tasks:S,kanbanTasks:M,taskDetails:B}=Ct(We()),j=f({}),pe=f(!0),ae=es(),G=f(!1),X=f(null),fe=ds().query.task_key,{projects:k}=ds().params,ie=f(!1),$e=f(null),Ce=f(null),je=f(null),ee=f([]),H=f([]),R=f(!1),O=f(!1),ue=f(!1),ye=async(te,x)=>{te?Ce.value=te:Ce.value="",x=="sub-task"?je.value="Create Sub Task":je.value="Create Task",ie.value=!0,await h(),ee.value=a.users,await n(),H.value=l.tags},_e=async te=>{X.value=te,document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const x=document.createElement("div");x.style.position="absolute",x.style.top="0",x.style.left="0",x.style.width="100%",x.style.height="100%",x.style.backgroundColor="rgba(0, 0, 0, 0)",x.style.zIndex="1000000",document.documentElement.appendChild(x),await h(),ee.value=a.users,await n(),H.value=l.tags,R.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(x)},le=te=>{$e.value=te,O.value=!0},A=async()=>{G.value=!0,await s($e.value,k),y.value===!0?(G.value=!1,ae.add({severity:"success",summary:"Successful",detail:"Task Deleted Successfully",group:"br",life:3e3}),O.value=!1):(G.value=!1,ae.add({severity:"error",summary:"Error",detail:"Unable to delete task",group:"br",life:3e3}))},L=async te=>{var oe,xe;document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const x=document.createElement("div");x.style.position="absolute",x.style.top="0",x.style.left="0",x.style.width="100%",x.style.height="100%",x.style.backgroundColor="rgba(0, 0, 0, 0)",x.style.zIndex="100000010",document.documentElement.appendChild(x),ue.value&&(ue.value=!1),await _(te.key),await h(),ee.value=a.users,await n(),H.value=l.tags,ue.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(x),console.log((xe=(oe=B==null?void 0:B.value)==null?void 0:oe.project)==null?void 0:xe.name,"taskDetails")};Le(ue,te=>{if(te===!0)return 0;localStorage.removeItem("taskDetailID")}),(()=>{j.value={global:{value:null,matchMode:ha.CONTAINS}}})();const ne=te=>{ie.value=te},Ee=te=>{R.value=te},Ue=()=>{r(k)};return Le(()=>ds().query.task_key,te=>{te&&L({key:te})}),fe&&L({key:fe}),ca(()=>{pe.value=!1}),(te,x)=>{var Se,Be,Ge,ft;const oe=ea,xe=ta,Ht=zn,Qe=yo,Fe=zo,rt=Cs,et=lu,Ne=Qt;return u(),m("div",nu,[g(oe,{position:"bottom-right",group:"br"}),i("div",ou,[i("div",ru,[g(xe,{to:"/",class:"text pi pi-home"}),du,g(xe,{to:"/companies",class:"text"},{default:E(()=>[ce("Companies")]),_:1}),uu,g(xe,{to:`/companies/${(Se=o(v))==null?void 0:Se.company_id}`,class:"text"},{default:E(()=>{var W;return[ce("Company - "+T((W=o(v))==null?void 0:W.company_name),1)]}),_:1},8,["to"]),cu,g(xe,{to:`/companies/${(Be=o(v))==null?void 0:Be.company_id}/spaces/${(Ge=o(v))==null?void 0:Ge.space_id}`,class:"text"},{default:E(()=>{var W;return[ce(" Space - "+T((W=o(v))==null?void 0:W.space_name),1)]}),_:1},8,["to"]),hu,i("p",mu,"Project - "+T((ft=o(v))==null?void 0:ft.name),1)])]),o(e)?(u(),re(Ht,{key:0,kanbanTasks:o(M),tasks:o(S),onOpenCreateSpace:ye,onHandleTaskEdit:x[0]||(x[0]=W=>_e(W)),onHandleTaskDetailView:x[1]||(x[1]=W=>L(W)),onConfirmDeleteTask:x[2]||(x[2]=W=>le(W))},null,8,["kanbanTasks","tasks"])):D("",!0),g(o(rs),{visible:o(ie),"onUpdate:visible":x[4]||(x[4]=W=>K(ie)?ie.value=W:null),modal:"",header:o(je),style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw","330px":"98vw"}},{default:E(()=>[g(Qe,{usersLists:o(ee),tagsLists:o(H),taskId:o(Ce),projects:o(k),onCloseCreateModal:x[3]||(x[3]=W=>ne(W))},null,8,["usersLists","tagsLists","taskId","projects"])]),_:1},8,["visible","header"]),g(o(rs),{visible:o(R),"onUpdate:visible":x[6]||(x[6]=W=>K(R)?R.value=W:null),modal:"",header:"Edit Task",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:E(()=>[g(Fe,{singleTask:o(X),usersLists:o(ee),tagsLists:o(H),projects:o(k),onCloseEditModal:x[5]||(x[5]=W=>Ee(W))},null,8,["singleTask","usersLists","tagsLists","projects"])]),_:1},8,["visible"]),g(o(rs),{visible:o(ue),"onUpdate:visible":x[10]||(x[10]=W=>K(ue)?ue.value=W:null),modal:"",header:"Task Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{header:E(()=>{var W,Me,Ye,tt,He,yt,st;return[i("div",vu,[g(rt,{label:(Ye=(Me=(W=o(B))==null?void 0:W.project)==null?void 0:Me.space_name)==null?void 0:Ye.charAt(0),class:"capitalize p-0",size:"small",style:{"background-color":["#ededed"],color:["#000"],width:["1.4rem"],height:["1.4rem"],text:["12px"]}},null,8,["label"]),i("span",pu,[ce(T((He=(tt=o(B))==null?void 0:tt.project)==null?void 0:He.space_name)+" / ",1),i("strong",null,T((st=(yt=o(B))==null?void 0:yt.project)==null?void 0:st.name),1)])])]}),default:E(()=>[g(et,{usersLists:o(ee),tagsLists:o(H),projID:o(k),onOpenCreateSpace:ye,onHandleTaskEdit:x[7]||(x[7]=W=>_e(W)),onHandleTaskDetailView:x[8]||(x[8]=W=>L(W)),onConfirmDeleteTask:x[9]||(x[9]=W=>le(W)),onUpdateTaskTable:Ue},null,8,["usersLists","tagsLists","projID"])]),_:1},8,["visible"]),g(o(rs),{visible:o(O),"onUpdate:visible":x[12]||(x[12]=W=>K(O)?O.value=W:null),header:" ",style:{width:"25rem"}},{default:E(()=>[fu,g(Ne,{label:"No",icon:"pi pi-times",text:"",onClick:x[11]||(x[11]=W=>O.value=!1)}),g(Ne,{label:"Yes",icon:"pi pi-check",loading:o(G),text:"",onClick:A},null,8,["loading"])]),_:1},8,["visible"])])}}},kc=Es(yu,[["__scopeId","data-v-efb466c3"]]);export{kc as default};
