import N from"./button.esm.1264fc6e.js";import se from"./column.esm.41e7eaa1.js";import oe from"./datatable.esm.e567532f.js";import W from"./dialog.esm.6bbccd90.js";import j from"./multiselect.esm.81997571.js";import{a2 as G,a3 as J,a4 as K,$ as r,ar as le,a as Q,o as $,b as q,c as ae,w as v,l as i,i as e,u as p,bO as ie,t as A,F as L,f as H,e as ne,a7 as F,s as g,a8 as X,a9 as Y,ca as Z,a5 as re}from"./entry.a40096a8.js";import{u as C,a as O}from"./cookie.485eaee6.js";import{u as P}from"./workCompany.f2e9ce49.js";import{s as ee}from"./editor.esm.c67fcaa1.js";import"./badge.esm.c0dc83b4.js";import"./basecomponent.esm.c4f27d1d.js";import"./index.esm.05856a9a.js";import"./baseicon.esm.736218cc.js";import"./paginator.esm.1608d48f.js";import"./index.esm.791125ad.js";import"./dropdown.esm.9aa4b677.js";import"./index.esm.f0d87989.js";import"./index.esm.20c38a74.js";import"./index.esm.a1e1a920.js";import"./index.esm.56a885ad.js";import"./overlayeventbus.esm.8016e95d.js";import"./portal.esm.eae3179a.js";import"./virtualscroller.esm.f6de4929.js";import"./inputnumber.esm.15452dc1.js";import"./index.esm.6e88d65e.js";import"./index.esm.d49a14c5.js";import"./inputtext.esm.e6ba4603.js";import"./index.esm.9118282b.js";import"./index.esm.136585bc.js";import"./index.esm.7260ec9a.js";import"./checkbox.esm.7ba74cbd.js";import"./radiobutton.esm.fe2f8e1d.js";import"./index.esm.a393f6da.js";import"./index.esm.0c5ec8d6.js";import"./index.esm.de05ea4a.js";const w=d=>(X("data-v-54d8a99d"),d=d(),Y(),d),de=["onClick"],ce={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},ue={class:""},pe={class:"title"},me=w(()=>e("p",{class:""},"Participants:",-1)),be={class:""},_e={class:"perticipants"},ve={class:"flex gap-1"},fe={class:""},he=["innerHTML"],ye={class:"flex-auto"},ge=w(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Se={class:"ql-formats flex justify-content-end mr-0"},ke={class:"ql-bold"},$e={class:"ql-italic"},we={class:"ql-underline"},xe={class:"ql-strike"},Me=w(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),De=w(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),qe=w(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Ue=w(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ce={class:"flex-auto"},Ve=w(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Be={__name:"ScrumTable",props:["scrumData","fetchData","employees"],setup(d){const{scrumData:z,fetchData:U,employees:V}=d;J(P());const c=K(),f=r(!1),M=r(!1),h=r(!1),D=r([]),m=r(null),b=r(" "),_=r(""),B=Z(),y=t=>{console.log(t),m.value=t,f.value=!0},l=async t=>{try{const s=C("token"),o=await $fetch(`${B.public.apiUrl}/scrum-meeting/delete/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s.value}`}});return M.value=!1,c.add({severity:"success",summary:"Meeting Minutes",detail:"Deleted successfully!",group:"br",life:3e3}),U()}catch(s){console.error("Submission failed:",s),c.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to Delete Meeting Minutes",group:"br",life:3e3})}finally{M.value=!1}},u=async t=>{t.preventDefault(),isSubmitting.value=!0;try{const s=C("token"),o=new FormData;o.append("space_id",selectedSpace.value.id),o.append("description",b.value),_.value.forEach(I=>o.append("user_ids[]",I.id));const n=await $fetch(`${B.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`},body:o});console.log("Submission successful:",n),createModal.value=!1,c.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(s){console.error("Submission failed:",s),c.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}},S=async t=>{console.log(t),console.log("employees",V),m.value=t.data,h.value=!0,b.value=t.data.description,_.value=t.data.user_ids,D.value=t.data.space_id};return le(b,t=>{t.length===0&&(b.value=" ")}),(t,s)=>{const o=se,n=N,I=oe,R=W,te=j,T=Q("tooltip");return $(),q(L,null,[d.scrumData&&d.scrumData.length>0?($(),ae(I,{key:0,class:"table-st",value:d.scrumData,rowHover:!0,paginator:"",rows:30,stripedRows:"",tableStyle:"min-width: 50rem"},{default:v(()=>[i(o,{style:{width:"2%"},field:"id",header:"Serial"}),i(o,{style:{width:"10%"},field:"meeting_date",header:"Date"},{body:v(a=>[e("div",{class:"cursor-pointer",onClick:()=>y(("toRaw"in t?t.toRaw:p(ie))(a.data))},A(a.data.meeting_date),9,de)]),_:1}),i(o,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:v(a=>[e("div",ce,[($(!0),q(L,null,H(a.data.user_ids,k=>($(),q("div",{class:"border rounded",key:k.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",ue,A(k.name),1)]))),128))])]),_:1}),i(o,{style:{width:"3%"},field:"actions",header:"Actions"},{body:v(a=>[i(n,{severity:"info",rounded:"",text:"",type:"button",onClick:k=>S(a),icon:"pi pi-pencil",class:""},null,8,["onClick"]),i(n,{severity:"danger",rounded:"",text:"",type:"button",onClick:k=>{var E;return l((E=a==null?void 0:a.data)==null?void 0:E.id)},icon:"pi pi-trash",class:""},null,8,["onClick"])]),_:1})]),_:1},8,["value"])):ne("",!0),i(R,{lazy:"true",visible:p(f),"onUpdate:visible":s[0]||(s[0]=a=>F(f)?f.value=a:null),modal:"",header:"Scrum Details",style:{minWidth:"35vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>{var a;return[e("div",pe,[me,e("p",be,A(p(m).meeting_date),1)]),e("div",_e,[e("div",ve,[($(!0),q(L,null,H(p(m).user_ids,k=>($(),q("div",{class:"border rounded",key:k.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",fe,A(k.name),1)]))),128))])]),e("div",{class:"details",innerHTML:(a=p(m))==null?void 0:a.description},null,8,he)]}),_:1},8,["visible"]),i(R,{lazy:"true",visible:p(h),"onUpdate:visible":s[3]||(s[3]=a=>F(h)?h.value=a:null),modal:"",header:"Update Scrum",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:u,class:"form",action:""},[e("div",ye,[ge,i(p(ee),{modelValue:p(b),"onUpdate:modelValue":s[1]||(s[1]=a=>F(b)?b.value=a:null),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",Se,[g(e("button",ke,null,512),[[T,"Bold",void 0,{bottom:!0}]]),g(e("button",$e,null,512),[[T,"Italic",void 0,{bottom:!0}]]),g(e("button",we,null,512),[[T,"Underline",void 0,{bottom:!0}]]),g(e("button",xe,null,512),[[T,"Strikethrough",void 0,{bottom:!0}]]),Me,De,qe,Ue])]),_:1},8,["modelValue"])]),e("div",Ce,[Ve,i(te,{id:"members",display:"chip",modelValue:p(_),"onUpdate:modelValue":s[2]||(s[2]=a=>F(_)?_.value=a:null),options:d.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),i(n,{label:t.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:t.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Te=G(Be,[["__scopeId","data-v-54d8a99d"]]);const x=d=>(X("data-v-2600d216"),d=d(),Y(),d),Ae={class:"card"},Fe={class:"header"},Le=x(()=>e("h3",null,"Meeting Minutes",-1)),ze={class:"flex-auto"},Ie=x(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Re={class:"ql-formats flex justify-content-end mr-0"},Ee={class:"ql-bold"},He={class:"ql-italic"},Oe={class:"ql-underline"},Ne={class:"ql-strike"},We=x(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),je=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Ge=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Je=x(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ke={class:"flex-auto"},Qe=x(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Xe={__name:"index",setup(d){const z=K();J(P());const U=Z(),V=r([]),c=r(!1),f=r([]),M=r("");r("");const h=r(""),D=r(!1),m=r(!0),b=async y=>{y.preventDefault(),D.value=!0;try{const l=C("token"),u=new FormData;u.append("description",h.value),M.value.forEach(t=>u.append("user_ids[]",t.id));const S=await $fetch(`${U.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${l.value}`},body:u});console.log("Submission successful:",S),c.value=!1,z.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),_()}catch(l){console.error("Submission failed:",l),z.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{D.value=!1}},_=async()=>{var t,s,o;m.value=!0;const y=C("token"),{data:l,pending:u,error:S}=await O("scrumData",()=>$fetch(`${U.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${y.value}`}}));return((s=(t=l.value)==null?void 0:t.data)==null?void 0:s.length)>0&&(V.value=(o=l.value)==null?void 0:o.data),m.value=!1},B=async()=>{var t,s,o;const y=C("token"),{data:l,pending:u,error:S}=await O("taskAssignModalData",()=>$fetch(`${U.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${y.value}`}}));((s=(t=l.value)==null?void 0:t.data)==null?void 0:s.length)>0&&(f.value=(o=l.value)==null?void 0:o.data.map(n=>({name:n.name,id:n.id})))};return re(()=>{B(),_(),console.log("call")}),(y,l)=>{const u=N,S=Te,t=j,s=W,o=Q("tooltip");return $(),q(L,null,[e("div",Ae,[e("header",Fe,[Le,i(u,{onClick:l[0]||(l[0]=n=>c.value=!c.value),icon:"pi pi-plus",severity:"secondary"})]),i(S,{scrumData:V.value,fetchData:_,employees:f.value},null,8,["scrumData","employees"])]),i(s,{lazy:"true",loading:m.value,visible:c.value,"onUpdate:visible":l[3]||(l[3]=n=>c.value=n),modal:"",header:"New Scrum",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:b,class:"form",action:""},[e("div",ze,[Ie,i(p(ee),{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=n=>h.value=n),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",Re,[g(e("button",Ee,null,512),[[o,"Bold",void 0,{bottom:!0}]]),g(e("button",He,null,512),[[o,"Italic",void 0,{bottom:!0}]]),g(e("button",Oe,null,512),[[o,"Underline",void 0,{bottom:!0}]]),g(e("button",Ne,null,512),[[o,"Strikethrough",void 0,{bottom:!0}]]),We,je,Ge,Je])]),_:1},8,["modelValue"])]),e("div",Ke,[Qe,i(t,{id:"members",display:"chip",modelValue:M.value,"onUpdate:modelValue":l[2]||(l[2]=n=>M.value=n),options:f.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),i(u,{label:D.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:D.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},Bt=G(Xe,[["__scopeId","data-v-2600d216"]]);export{Bt as default};
