import Gs from"./toast.esm.bd226d9a.js";import{_ as Xs}from"./nuxt-link.a08cf38a.js";import ds from"./multiselect.esm.26803072.js";import us from"./dropdown.esm.07682d7a.js";import cs from"./calendar.esm.30ebebcc.js";import Kt from"./button.esm.8c1f7487.js";import Zs from"./inputicon.esm.6ea3233b.js";import Bs from"./inputtext.esm.1cde6a35.js";import Qs from"./iconfield.esm.a3f1bfe3.js";import ea from"./toolbar.esm.ba0f0e68.js";import Ys from"./card.esm.600bab4d.js";import ws from"./avatar.esm.b81ee4b7.js";import ta from"./speeddial.esm.3965b479.js";import zs from"./treetable.esm.3ee8a612.js";import sa from"./timeline.esm.3ca1b7c6.js";import{r as wt,o as d,b as h,l as _,p as gs,w as C,h as te,q as ve,i,t as T,c as ce,n as Os,m as As,e as b,k as pe,K as q,F as fe,f as ke,T as os,_ as W,j as aa,G as Rs,Q as ia,I as ht,a3 as Dt,$ as v,a4 as Jt,aa as is,ar as Le,a5 as hs,V as Ls,a as ms,u as r,a7 as K,s as X,a6 as Pt,bO as Yt,ca as qs,a2 as Ds,a8 as bs,a9 as ks,ao as la,cb as na,ac as oa,P as ra}from"./entry.5b48de2c.js";import{u as vt,a as js}from"./cookie.176eb22b.js";import{u as ls}from"./fetch.fa55c2bd.js";import{d as da}from"./vuedraggable.umd.24ced6a1.js";import{u as Fe}from"./company.73e446f2.js";import{a as mt}from"./usePermission.cc855e97.js";import ct from"./column.esm.6146cae7.js";import Ps from"./textarea.esm.a71165b7.js";import{s as rs}from"./editor.esm.e823bd37.js";import ua from"./floatlabel.esm.d7576e09.js";import ca from"./inputnumber.esm.d495f16a.js";import ha from"./confirmpopup.esm.afba718e.js";import ma from"./tabpanel.esm.77233e64.js";import va from"./tabview.esm.254e5751.js";import{u as Is}from"./clock.62b38bbe.js";import"./inplace.esm.2187c7e5.js";import as from"./dialog.esm.1c3209b4.js";import"./portal.esm.9672152d.js";import"./basecomponent.esm.0814e763.js";import"./index.esm.90145e47.js";import"./baseicon.esm.f47fb25e.js";import"./index.esm.ddf2f268.js";import"./index.esm.03e51172.js";import"./index.esm.1771daa2.js";import"./checkbox.esm.e4fc8bac.js";import"./index.esm.69aebbe9.js";import"./index.esm.581e9f43.js";import"./index.esm.0b057fe3.js";import"./overlayeventbus.esm.68792cfe.js";import"./virtualscroller.esm.a2e37262.js";import"./index.esm.acd31b41.js";import"./index.esm.795f82f7.js";import"./index.esm.ca1873b8.js";import"./badge.esm.1ad4ee89.js";import"./index.esm.b1cd826b.js";import"./paginator.esm.b6022d23.js";import"./index.esm.5faa77dc.js";import"./index.esm.01cd45e6.js";import"./index.esm.3fa60beb.js";import"./index.esm.5bd17045.js";import"./index.esm.fd373751.js";import"./index.esm.d7d384f2.js";import"./_commonjsHelpers.87174ba5.js";import"./workCompany.049c8fd3.js";var pa=Object.defineProperty,fa=(t,e,a)=>e in t?pa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,nt=(t,e,a)=>fa(t,typeof e!="symbol"?e+"":e,a);const ya=(t,e,a)=>{const l=t[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})};let zt,Hs,Ws,qe,Rt={},Vt={};class _a{constructor(e,a=!1){nt(this,"texts",{}),nt(this,"dateToMinutes",l=>l.getHours()*60+l.getMinutes()),qe=this,this._texts=e,!a&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(e){return qe.addDays(this,e)},Date.prototype.subtractDays=function(e){return qe.subtractDays(this,e)},Date.prototype.addHours=function(e){return qe.addHours(this,e)},Date.prototype.subtractHours=function(e){return qe.subtractHours(this,e)},Date.prototype.addMinutes=function(e){return qe.addMinutes(this,e)},Date.prototype.subtractMinutes=function(e){return qe.subtractMinutes(this,e)},Date.prototype.getWeek=function(){return qe.getWeek(this)},Date.prototype.isToday=function(){return qe.isToday(this)},Date.prototype.isLeapYear=function(){return qe.isLeapYear(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return qe.formatDate(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return qe.formatTime(this,e)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(e){this._texts=e}_todayFormatted(){return Hs!==new Date().getDate()&&(zt=new Date,Hs=zt.getDate(),Ws=`${zt.getFullYear()}-${zt.getMonth()}-${zt.getDate()}`),Ws}addDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()+a),l}subtractDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()-a),l}addHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()+a),l}subtractHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()-a),l}addMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()+a),l}subtractMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()-a),l}getWeek(e){const a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),l=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-l);const o=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a-o)/864e5+1)/7)}isToday(e){return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===this._todayFormatted()}isLeapYear(e){const a=e.getFullYear();return!(a%400)||a%100&&!(a%4)}getPreviousFirstDayOfWeek(e=null,a){const l=e&&new Date(e.valueOf())||new Date,o=a?7:6;return l.setDate(l.getDate()-(l.getDay()+o)%7),l}stringToDate(e){return e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/")))}countDays(e,a){typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof a=="string"&&(a=a.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),a=new Date(a).setHours(0,0,1,0);const l=(new Date(a).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((a-e-l)/(24*3600*1e3))}datesInSameTimeStep(e,a,l){return Math.abs(e.getTime()-a.getTime())<=l*60*1e3}formatDate(e,a="YYYY-MM-DD",l=null){if(l||(l=this._texts),a||(a="YYYY-MM-DD"),a==="YYYY-MM-DD")return this.formatDateLite(e);Rt={},Vt={};const o={YYYY:()=>this._hydrateDateObject(e,l).YYYY,YY:()=>this._hydrateDateObject(e,l).YY(),M:()=>this._hydrateDateObject(e,l).M,MM:()=>this._hydrateDateObject(e,l).MM(),MMM:()=>this._hydrateDateObject(e,l).MMM(),MMMM:()=>this._hydrateDateObject(e,l).MMMM(),MMMMG:()=>this._hydrateDateObject(e,l).MMMMG(),D:()=>this._hydrateDateObject(e,l).D,DD:()=>this._hydrateDateObject(e,l).DD(),S:()=>this._hydrateDateObject(e,l).S(),d:()=>this._hydrateDateObject(e,l).d,dd:()=>this._hydrateDateObject(e,l).dd(),ddd:()=>this._hydrateDateObject(e,l).ddd(),dddd:()=>this._hydrateDateObject(e,l).dddd(),HH:()=>this._hydrateTimeObject(e,l).HH,H:()=>this._hydrateTimeObject(e,l).H,hh:()=>this._hydrateTimeObject(e,l).hh,h:()=>this._hydrateTimeObject(e,l).h,am:()=>this._hydrateTimeObject(e,l).am,AM:()=>this._hydrateTimeObject(e,l).AM,mm:()=>this._hydrateTimeObject(e,l).mm,m:()=>this._hydrateTimeObject(e,l).m};return a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(s,u)=>{const n=o[u.replace(/\{|\}/g,"")];return n!==void 0?n():u})}formatDateLite(e){const a=e.getMonth()+1,l=e.getDate();return`${e.getFullYear()}-${a<10?"0":""}${a}-${l<10?"0":""}${l}`}formatTime(e,a="HH:mm",l=null,o=!1){let s=!1;if(o){const[f,m,p]=[e.getHours(),e.getMinutes(),e.getSeconds()];f+m+p===23+59+59&&(s=!0)}if(e instanceof Date&&a==="HH:mm")return s?"24:00":this.formatTimeLite(e);Vt={},l||(l=this._texts);const u=this._hydrateTimeObject(e,l),n=a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(f,m)=>{const p=u[m.replace(/\{|\}/g,"")];return p!==void 0?p:m});return s?n.replace("23:59","24:00"):n}formatTimeLite(e){const a=e.getHours(),l=e.getMinutes();return`${(a<10?"0":"")+a}:${(l<10?"0":"")+l}`}_nth(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(e,a){if(Rt.D)return Rt;const l=e.getFullYear(),o=e.getMonth()+1,s=e.getDate(),n=(e.getDay()-1+7)%7;return Rt={YYYY:l,YY:()=>l.toString().substring(2),M:o,MM:()=>(o<10?"0":"")+o,MMM:()=>a.months[o-1].substring(0,3),MMMM:()=>a.months[o-1],MMMMG:()=>(a.monthsGenitive||a.months)[o-1],D:s,DD:()=>(s<10?"0":"")+s,S:()=>this._nth(s),d:n+1,dd:()=>a.weekDays[n][0],ddd:()=>a.weekDays[n].substr(0,3),dddd:()=>a.weekDays[n]},Rt}_hydrateTimeObject(e,a){if(Vt.am)return Vt;let l,o;e instanceof Date?(l=e.getHours(),o=e.getMinutes()):(l=Math.floor(e/60),o=Math.floor(e%60));const s=l%12?l%12:12,u=(a||{am:"am",pm:"pm"})[l===24||l<12?"am":"pm"];return Vt={H:l,h:s,HH:(l<10?"0":"")+l,hh:(s<10?"0":"")+s,am:u,AM:u.toUpperCase(),m:o,mm:(o<10?"0":"")+o},Vt}}const ga=24*60;class wa{constructor(e){nt(this,"_vuecal",null),nt(this,"selectCell",(a=!1,l,o)=>{this._vuecal.$emit("cell-click",o?{date:l,split:o}:l),this._vuecal.clickToNavigate||a?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",o?{date:l,split:o}:l)))}),nt(this,"keyPressEnterCell",(a,l)=>{this._vuecal.$emit("cell-keypress-enter",l?{date:a,split:l}:a),this._vuecal.switchToNarrowerView()}),nt(this,"getPosition",a=>{const{left:l,top:o}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:s,clientY:u}="ontouchstart"in window&&a.touches?a.touches[0]:a;return{x:s-l,y:u-o}}),nt(this,"minutesAtCursor",a=>{let l=0,o={x:0,y:0};const{timeStep:s,timeCellHeight:u,timeFrom:n}=this._vuecal.$props;return typeof a=="number"?l=a:typeof a=="object"&&(o=this.getPosition(a),l=Math.round(o.y*s/parseInt(u)+n)),{minutes:Math.max(Math.min(l,ga),0),cursorCoords:o}}),this._vuecal=e}}const Da=2,ys=24*60;let De,be,_s;class ba{constructor(e,a){nt(this,"_vuecal",null),nt(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=e,De=a}createAnEvent(e,a,l){if(typeof e=="string"&&(e=De.stringToDate(e)),!(e instanceof Date))return!1;const o=De.dateToMinutes(e);a=a*1||Da*60;const s=o+a,u=De.addMinutes(new Date(e),a);l.end&&(typeof l.end=="string"&&(l.end=De.stringToDate(l.end)),l.endTimeMinutes=De.dateToMinutes(l.end));const n={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:e,startTimeMinutes:o,end:u,endTimeMinutes:s,segments:null,...l};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(n,()=>this.deleteAnEvent(n))))return n.startDateF!==n.endDateF&&(n.daysCount=De.countDays(n.start,n.end)),this._vuecal.mutableEvents.push(n),this._vuecal.addEventsToView([n]),this._vuecal.emitWithEvent("event-create",n),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(n),originalEvent:null}),n}addEventSegment(e){e.segments||(e.segments={},e.segments[De.formatDateLite(e.start)]={start:e.start,startTimeMinutes:e.startTimeMinutes,endTimeMinutes:ys,isFirstDay:!0,isLastDay:!1});const a=e.segments[De.formatDateLite(e.end)];a&&(a.isLastDay=!1,a.endTimeMinutes=ys);const l=De.addDays(e.end,1),o=De.formatDateLite(l);return l.setHours(0,0,0,0),e.segments[o]={start:l,startTimeMinutes:0,endTimeMinutes:e.endTimeMinutes,isFirstDay:!1,isLastDay:!0},e.end=De.addMinutes(l,e.endTimeMinutes),e.daysCount=Object.keys(e.segments).length,o}removeEventSegment(e){let a=Object.keys(e.segments).length;if(a<=1)return De.formatDateLite(e.end);delete e.segments[De.formatDateLite(e.end)],a--;const l=De.subtractDays(e.end,1),o=De.formatDateLite(l),s=e.segments[o];return a?s&&(s.isLastDay=!0,s.endTimeMinutes=e.endTimeMinutes):e.segments=null,e.daysCount=a||1,e.end=l,o}createEventSegments(e,a,l){const o=a.getTime(),s=l.getTime();let u=e.start.getTime(),n=e.end.getTime(),f=!1,m,p,x;for(!e.end.getHours()&&!e.end.getMinutes()&&(n-=1e3),e.segments={},e.repeat?(m=o,p=Math.min(s,e.repeat.until?De.stringToDate(e.repeat.until).getTime():s)):(m=Math.max(o,u),p=Math.min(s,n));m<=p;){let V=!1;const N=De.addDays(new Date(m),1).setHours(0,0,0,0);let H,ye,se,J;if(e.repeat){const G=new Date(m),_e=De.formatDateLite(G);(f||e.occurrences&&e.occurrences[_e])&&(f||(u=e.occurrences[_e].start,x=new Date(u).setHours(0,0,0,0),n=e.occurrences[_e].end),f=!0,V=!0),H=m===x,ye=_e===De.formatDateLite(new Date(n)),se=new Date(H?u:m),J=De.formatDateLite(se),ye&&(f=!1)}else V=!0,H=m===u,ye=p===n&&N>p,se=H?e.start:new Date(m),J=De.formatDateLite(H?e.start:se);V&&(e.segments[J]={start:se,startTimeMinutes:H?e.startTimeMinutes:0,endTimeMinutes:ye?e.endTimeMinutes:ys,isFirstDay:H,isLastDay:ye}),m=N}return e}deleteAnEvent(e){this._vuecal.emitWithEvent("event-delete",e),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(a=>a._eid!==e._eid),this._vuecal.view.events=this._vuecal.view.events.filter(a=>a._eid!==e._eid)}checkCellOverlappingEvents(e,a){_s=e.slice(0),be={},e.forEach(o=>{_s.shift(),be[o._eid]||(be[o._eid]={overlaps:[],start:o.start,position:0}),be[o._eid].position=0,_s.forEach(s=>{be[s._eid]||(be[s._eid]={overlaps:[],start:s.start,position:0});const u=this.eventInRange(s,o.start,o.end),n=a.overlapsPerTimeStep?De.datesInSameTimeStep(o.start,s.start,a.timeStep):1;if(!o.background&&!o.allDay&&!s.background&&!s.allDay&&u&&n)be[o._eid].overlaps.push(s._eid),be[o._eid].overlaps=[...new Set(be[o._eid].overlaps)],be[s._eid].overlaps.push(o._eid),be[s._eid].overlaps=[...new Set(be[s._eid].overlaps)],be[s._eid].position++;else{let f,m;(f=(be[o._eid]||{overlaps:[]}).overlaps.indexOf(s._eid))>-1&&be[o._eid].overlaps.splice(f,1),(m=(be[s._eid]||{overlaps:[]}).overlaps.indexOf(o._eid))>-1&&be[s._eid].overlaps.splice(m,1),be[s._eid].position--}})});let l=0;for(const o in be){const s=be[o],u=s.overlaps.map(n=>({id:n,start:be[n].start}));u.push({id:o,start:s.start}),u.sort((n,f)=>n.start<f.start?-1:n.start>f.start?1:n.id>f.id?-1:1),s.position=u.findIndex(n=>n.id===o),l=Math.max(this.getOverlapsStreak(s,be),l)}return[be,l]}getOverlapsStreak(e,a={}){let l=e.overlaps.length+1,o=[];return e.overlaps.forEach(s=>{o.includes(s)||e.overlaps.filter(n=>n!==s).forEach(n=>{a[n].overlaps.includes(s)||o.push(n)})}),o=[...new Set(o)],l-=o.length,l}eventInRange(e,a,l){if(e.allDay||!this._vuecal.time){const u=new Date(e.start).setHours(0,0,0,0);return new Date(e.end).setHours(23,59,0,0)>=new Date(a).setHours(0,0,0,0)&&u<=new Date(l).setHours(0,0,0,0)}const o=e.start.getTime(),s=e.end.getTime();return o<l.getTime()&&s>a.getTime()}}const ka={class:"vuecal__flex vuecal__weekdays-headings"},Ta=["onClick"],Ca={class:"vuecal__flex weekday-label",grow:""},Ea={class:"full"},Sa={class:"small"},xa={class:"xsmall"},Ma={key:0},Va={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function $a(t,e,a,l,o,s){return d(),h("div",ka,[(d(!0),h(fe,null,ke(s.headings,(u,n)=>(d(),h(fe,{key:n},[u.hide?b("",!0):(d(),h("div",{key:0,class:pe(["vuecal__flex vuecal__heading",{today:u.today,clickable:s.cellHeadingsClickable}]),style:q(s.weekdayCellStyles),onClick:f=>s.view.id==="week"&&s.selectCell(u.date,f),onDblclick:e[0]||(e[0]=f=>s.view.id==="week"&&s.vuecal.dblclickToNavigate&&a.switchToNarrowerView())},[_(os,{name:`slide-fade--${a.transitionDirection}`,appear:s.vuecal.transitions},{default:C(()=>[(d(),h("div",{class:"vuecal__flex",column:"",key:s.vuecal.transitions?`${n}-${u.dayOfMonth}`:!1},[i("div",Ca,[te(t.$slots,"weekday-heading",{heading:s.cleanupHeading(u),view:s.view},()=>[i("span",Ea,T(u.full),1),i("span",Sa,T(u.small),1),i("span",xa,T(u.xsmall),1),u.dayOfMonth?(d(),h("span",Ma," "+T(u.dayOfMonth),1)):b("",!0)])]),s.vuecal.hasSplits&&s.vuecal.stickySplitLabels?(d(),h("div",Va,[(d(!0),h(fe,null,ke(s.vuecal.daySplits,(f,m)=>(d(),h("div",{class:pe(["day-split-header",f.class||!1]),key:m},[te(t.$slots,"split-label",{split:f,view:s.view},()=>[ve(T(f.label),1)])],2))),128))])):b("",!0)]))]),_:2},1032,["name","appear"])],46,Ta))],64))),128))])}const $t=(t,e)=>{const a=t.__vccOpts||t;for(const[l,o]of e)a[l]=o;return a},Oa={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(t,e){t.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=t),this.utils.cell.selectCell(!1,t,e)},cleanupHeading:t=>({label:t.full,date:t.date,...t.today?{today:t.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let t=!1;return this.weekDays.map((a,l)=>{const o=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?l-1:l);return{hide:a.hide,full:a.label,small:a.short||a.label.substr(0,3),xsmall:a.short||a.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:o.getDate(),date:o,today:!t&&this.utils.date.isToday(o)&&!t++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((t,e)=>t+e.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Ks=$t(Oa,[["render",$a]]),Aa={class:"vuecal__header"},La={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},ja=["onDragenter","onDragleave","onClick","aria-label"],Ia={key:1,class:"vuecal__title-bar"},Ha=["aria-label"],Wa={class:"vuecal__flex vuecal__title",grow:""},Fa=["aria-label"],Ua={key:0,class:"vuecal__flex vuecal__split-days-headers"};function Na(t,e,a,l,o,s){const u=wt("weekdays-headings");return d(),h("div",Aa,[a.options.hideViewSelector?b("",!0):(d(),h("div",La,[(d(!0),h(fe,null,ke(a.viewProps.views,(n,f)=>(d(),h(fe,{key:f},[n.enabled?(d(),h("button",{key:0,class:pe(["vuecal__view-btn",{"vuecal__view-btn--active":s.view.id===f,"vuecal__view-btn--highlighted":t.highlightedControl===f}]),type:"button",onDragenter:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(m,f,t.$data),onDragleave:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(m,f,t.$data),onClick:m=>s.switchView(f,null,!0),"aria-label":`${n.label} view`},T(n.label),43,ja)):b("",!0)],64))),128))])),a.options.hideTitleBar?b("",!0):(d(),h("div",Ia,[i("button",{class:pe(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":t.highlightedControl==="previous"}]),type:"button",onClick:e[0]||(e[0]=(...n)=>s.previous&&s.previous(...n)),onDragenter:e[1]||(e[1]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"previous",t.$data)),onDragleave:e[2]||(e[2]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"previous",t.$data)),"aria-label":`Previous ${s.view.id}`},[te(t.$slots,"arrow-prev")],42,Ha),i("div",Wa,[_(os,{name:a.options.transitions?`slide-fade--${s.transitionDirection}`:""},{default:C(()=>[(d(),ce(aa(s.broaderView?"button":"span"),{type:!!s.broaderView&&"button",key:`${s.view.id}${s.view.startDate.toString()}`,onClick:e[3]||(e[3]=n=>!!s.broaderView&&s.switchToBroaderView()),"aria-label":!!s.broaderView&&`Go to ${s.broaderView} view`},{default:C(()=>[te(t.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),a.options.todayButton?(d(),h("button",{key:0,class:pe(["vuecal__today-btn",{"vuecal__today-btn--highlighted":t.highlightedControl==="today"}]),type:"button",onClick:e[4]||(e[4]=(...n)=>s.goToToday&&s.goToToday(...n)),onDragenter:e[5]||(e[5]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"today",t.$data)),onDragleave:e[6]||(e[6]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"today",t.$data)),"aria-label":"Today"},[te(t.$slots,"today-button")],34)):b("",!0),i("button",{class:pe(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":t.highlightedControl==="next"}]),type:"button",onClick:e[7]||(e[7]=(...n)=>s.next&&s.next(...n)),onDragenter:e[8]||(e[8]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"next",t.$data)),onDragleave:e[9]||(e[9]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"next",t.$data)),"aria-label":`Next ${s.view.id}`},[te(t.$slots,"arrow-next")],42,Fa)])),a.viewProps.weekDaysInHeader?(d(),ce(u,{key:2,"week-days":a.weekDays,"transition-direction":s.transitionDirection,"switch-to-narrower-view":a.switchToNarrowerView},gs({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:C(({heading:n,view:f})=>[te(t.$slots,"weekday-heading",{heading:n,view:f})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:C(({split:n})=>[te(t.$slots,"split-label",{split:n,view:s.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):b("",!0),_(os,{name:`slide-fade--${s.transitionDirection}`},{default:C(()=>[s.showDaySplits?(d(),h("div",Ua,[(d(!0),h(fe,null,ke(a.daySplits,(n,f)=>(d(),h("div",{class:pe(["day-split-header",n.class||!1]),key:f},[te(t.$slots,"split-label",{split:n,view:s.view.id},()=>[ve(T(n.label),1)])],2))),128))])):b("",!0)]),_:3},8,["name"])])}const Ba={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Ks},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(t){this.vuecal.transitionDirection=t}},broaderView(){const{enabledViews:t}=this.vuecal;return t[t.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},Ya=$t(Ba,[["render",Na]]),za=["draggable"];function Ra(t,e,a,l,o,s){return d(),h("div",{class:pe(["vuecal__event",s.eventClasses]),style:q(s.eventStyles),tabindex:"0",onFocus:e[4]||(e[4]=(...u)=>s.focusEvent&&s.focusEvent(...u)),onKeypress:e[5]||(e[5]=Rs(ht((...u)=>s.onEnterKeypress&&s.onEnterKeypress(...u),["stop"]),["enter"])),onMouseenter:e[6]||(e[6]=(...u)=>s.onMouseEnter&&s.onMouseEnter(...u)),onMouseleave:e[7]||(e[7]=(...u)=>s.onMouseLeave&&s.onMouseLeave(...u)),onTouchstart:e[8]||(e[8]=ht((...u)=>s.onTouchStart&&s.onTouchStart(...u),["stop"])),onMousedown:e[9]||(e[9]=u=>s.onMouseDown(u)),onMouseup:e[10]||(e[10]=(...u)=>s.onMouseUp&&s.onMouseUp(...u)),onTouchend:e[11]||(e[11]=(...u)=>s.onMouseUp&&s.onMouseUp(...u)),onTouchmove:e[12]||(e[12]=(...u)=>s.onTouchMove&&s.onTouchMove(...u)),onDblclick:e[13]||(e[13]=(...u)=>s.onDblClick&&s.onDblClick(...u)),draggable:s.draggable,onDragstart:e[14]||(e[14]=u=>s.draggable&&s.onDragStart(u)),onDragend:e[15]||(e[15]=u=>s.draggable&&s.onDragEnd())},[s.vuecal.editEvents.delete&&a.event.deletable?(d(),h("div",{key:0,class:"vuecal__event-delete",onClick:e[0]||(e[0]=ht((...u)=>s.deleteEvent&&s.deleteEvent(...u),["stop"])),onTouchstart:e[1]||(e[1]=ht((...u)=>s.touchDeleteEvent&&s.touchDeleteEvent(...u),["stop"]))},T(s.vuecal.texts.deleteEvent),33)):b("",!0),te(t.$slots,"event",{event:a.event,view:s.view.id}),s.resizable?(d(),h("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:e[2]||(e[2]=ht((...u)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...u),["stop","prevent"])),onTouchstart:e[3]||(e[3]=ht((...u)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...u),["stop","prevent"]))},null,32)):b("",!0)],46,za)}const qa={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(t,e=!1){if("ontouchstart"in window&&!e)return!1;const{clickHoldAnEvent:a,focusAnEvent:l,resizeAnEvent:o,dragAnEvent:s}=this.domEvents;if(l._eid===this.event._eid&&a._eid===this.event._eid)return!0;this.focusEvent(),a._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(a.timeoutId=setTimeout(()=>{!o._eid&&!s._eid&&(a._eid=this.event._eid,this.event.deleting=!0)},a.timeout))},onMouseUp(t){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(t){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:e,clientY:a}=t.touches[0],{startX:l,startY:o,dragThreshold:s}=this.touch;(Math.abs(e-l)>s||Math.abs(a-o)>s)&&(this.touch.dragged=!0)},onTouchStart(t){this.touch.startX=t.touches[0].clientX,this.touch.startY=t.touches[0].clientY,this.onMouseDown(t,!0)},onEnterKeypress(t){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,t)},onDblClick(t){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,t)},onDragStart(t){this.dnd&&this.dnd.eventDragStart(t,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(t=!1){if("ontouchstart"in window&&!t)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(t){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:t}=this.domEvents,e=t._eid;if(e!==this.event._eid){if(e){const a=this.view.events.find(l=>l._eid===e);a&&(a.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),t._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:t,endTimeMinutes:e}=this.segment||this.event;let a=t-this.vuecal.timeFrom;const l=Math.max(Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);a=Math.min(e,this.vuecal.timeTo)-this.vuecal.timeFrom;const o=Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),s=Math.max(o-l,5);return{top:l,height:s}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let t=100/Math.min(this.overlaps.length+1,this.overlapsStreak),e=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&t<this.vuecal.minEventWidth&&(t=this.vuecal.minEventWidth,e=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:a,height:l}=this.eventDimensions;return{top:`${a}px`,height:`${l}px`,width:`${t}%`,left:this.event.left&&`${this.event.left}px`||`${e}%`}},eventClasses(){const{isFirstDay:t,isLastDay:e}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&t&&!e,"event-middle":this.segment&&!t&&!e,"event-end":this.segment&&e&&!t}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:t,background:e,daysCount:a}=this.event;return this.vuecal.editEvents.drag&&t&&!e&&a===1},resizable(){const{editEvents:t,time:e}=this.vuecal;return t.resize&&this.event.resizable&&e&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Pa=$t(qa,[["render",Ra]]),Ka=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],Ja={key:0,class:"cell-time-labels"},Ga=["innerHTML"],Xa={key:2,class:"vuecal__cell-events"},Za=["title"];function Qa(t,e,a,l,o,s){const u=wt("event");return d(),ce(ia,{class:pe(["vuecal__cell",s.cellClasses]),name:`slide-fade--${s.transitionDirection}`,tag:"div",appear:a.options.transitions,style:q(s.cellStyles)},{default:C(()=>[(d(!0),h(fe,null,ke(s.splitsCount?s.splits:1,(n,f)=>(d(),h("div",{class:pe(["vuecal__flex vuecal__cell-content",s.splitsCount&&s.splitClasses(n)]),key:a.options.transitions?`${s.view.id}-${a.data.content}-${f}`:f,"data-split":s.splitsCount?n.id:!1,column:"",tabindex:"0","aria-label":a.data.content,onFocus:e[0]||(e[0]=m=>s.onCellFocus(m)),onKeypress:e[1]||(e[1]=Rs(m=>s.onCellkeyPressEnter(m),["enter"])),onTouchstart:m=>!s.isDisabled&&s.onCellTouchStart(m,s.splitsCount?n.id:null),onMousedown:m=>!s.isDisabled&&s.onCellMouseDown(m,s.splitsCount?n.id:null),onClick:e[2]||(e[2]=m=>!s.isDisabled&&s.onCellClick(m)),onDblclick:e[3]||(e[3]=m=>!s.isDisabled&&s.onCellDblClick(m)),onContextmenu:e[4]||(e[4]=m=>!s.isDisabled&&a.options.cellContextmenu&&s.onCellContextMenu(m)),onDragenter:e[5]||(e[5]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragEnter(m,t.$data,a.data.startDate)),onDragover:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragOver(m,t.$data,a.data.startDate,s.splitsCount?n.id:null),onDragleave:e[6]||(e[6]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragLeave(m,t.$data,a.data.startDate)),onDrop:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragDrop(m,t.$data,a.data.startDate,s.splitsCount?n.id:null)},[a.options.showTimeInCells&&a.options.time&&s.isWeekOrDayView&&!a.allDay?(d(),h("div",Ja,[(d(!0),h(fe,null,ke(s.vuecal.timeCells,(m,p)=>(d(),h("span",{class:"cell-time-label",key:p},T(m.label),1))),128))])):b("",!0),s.isWeekOrDayView&&!a.allDay&&s.specialHours.length?(d(!0),h(fe,{key:1},ke(s.specialHours,(m,p)=>(d(),h("div",{class:pe(["vuecal__special-hours",`vuecal__special-hours--day${m.day} ${m.class}`]),style:q(`height: ${m.height}px;top: ${m.top}px`)},[m.label?(d(),h("div",{key:0,class:"special-hours-label",innerHTML:m.label},null,8,Ga)):b("",!0)],6))),256)):b("",!0),te(t.$slots,"cell-content",{events:s.events,selectCell:m=>s.selectCell(m,!0),split:s.splitsCount?n:!1}),s.eventsCount&&(s.isWeekOrDayView||s.view.id==="month"&&a.options.eventsOnMonthView)?(d(),h("div",Xa,[(d(!0),h(fe,null,ke(s.splitsCount?n.events:s.events,(m,p)=>(d(),ce(u,{key:p,"cell-formatted-date":a.data.formattedDate,event:m,"all-day":a.allDay,"cell-events":s.splitsCount?n.events:s.events,overlaps:((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).overlaps,"event-position":((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).position,"overlaps-streak":s.splitsCount?n.overlapsStreak:t.cellOverlapsStreak},{event:C(({event:x,view:V})=>[te(t.$slots,"event",{view:V,event:x})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):b("",!0)],42,Ka))),128)),s.timelineVisible?(d(),h("div",{class:"vuecal__now-line",style:q(`top: ${s.todaysTimePosition}px`),key:a.options.transitions?`${s.view.id}-now-line`:"now-line",title:s.utils.date.formatTime(s.vuecal.now)},null,12,Za)):b("",!0)]),_:3},8,["class","name","appear","style"])}const ei={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Pa},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:t}){let a=t.classList.contains("vuecal__cell-split")?t:this.vuecal.findAncestor(t,"vuecal__cell-split");return a&&(a=a.attributes["data-split"].value,parseInt(a).toString()===a.toString()&&(a=parseInt(a))),a||null},splitClasses(t){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===t.id,[t.class]:!!t.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(t){return this.vuecal.isDOMElementAnEvent(t)},selectCell(t,e=!1){const a=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.selectCell(e,this.timeAtCursor,a),this.timeAtCursor=null},onCellkeyPressEnter(t){this.isSelected||this.onCellFocus(t);const e=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,e),this.timeAtCursor=null},onCellFocus(t){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const e=this.splitsCount?this.getSplitAtCursor(t):null,a=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",e?{date:a,split:e}:a)}},onCellMouseDown(t,e=null,a=!1){if("ontouchstart"in window&&!a)return!1;this.isSelected||this.onCellFocus(t);const{clickHoldACell:l,focusAnEvent:o}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,l.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:s,cursorCoords:{y:u}}=this.vuecal.minutesAtCursor(t);this.timeAtCursor.setMinutes(s);const n=this.isDOMElementAnEvent(t.target);!n&&o._eid&&((this.view.events.find(f=>f._eid===o._eid)||{}).focused=!1),this.editEvents.create&&!n&&this.setUpEventCreation(t,u)},setUpEventCreation(t,e){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:a}=this.domEvents;if(a.startCursorY=e,a.split=this.splitsCount?this.getSplitAtCursor(t):null,a.start=this.timeAtCursor,this.options.snapToTime){let l=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const o=l+this.options.snapToTime/2;l=o-o%this.options.snapToTime,a.start.setHours(0,l,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(t)},setUpCellHoldTimer(t){const{clickHoldACell:e}=this.domEvents;e.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,e.split=this.splitsCount?this.getSplitAtCursor(t):null,e.timeoutId=setTimeout(()=>{if(e.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:a}=this.utils.event.createAnEvent(this.timeAtCursor,null,e.split?{split:e.split}:{});e.eventCreated=a}},e.timeout)},onCellTouchStart(t,e=null){this.onCellMouseDown(t,e,!0)},onCellClick(t){this.isDOMElementAnEvent(t.target)||this.selectCell(t)},onCellDblClick(t){const e=new Date(this.data.startDate);e.setMinutes(this.vuecal.minutesAtCursor(t).minutes);const a=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-dblclick",a?{date:e,split:a}:e),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(t){t.stopPropagation(),t.preventDefault();const e=new Date(this.data.startDate),{cursorCoords:a,minutes:l}=this.vuecal.minutesAtCursor(t);e.setMinutes(l);const o=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-contextmenu",{date:e,...a,...o||{},e:t})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:t}=this.options,{isYearsOrYearView:e}=this.vuecal;return t.length&&t.includes(this.data.formattedDate)&&!e?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let t=!1;const{selectedDate:e}=this.view;return this.view.id==="years"?t=e.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?t=e.getFullYear()===this.data.startDate.getFullYear()&&e.getMonth()===this.data.startDate.getMonth():t=e.getTime()===this.data.startDate.getTime(),t},set(t){this.view.selectedDate=t,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(t=>{let{from:e,to:a}=t;return e=Math.max(e,this.options.timeFrom),a=Math.min(a,this.options.timeTo),{...t,height:(a-e)*this.timeScale,top:(e-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:t,endDate:e}=this.data;let a=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(a=this.view.events.slice(0),this.view.id==="month"&&a.push(...this.view.outOfScopeEvents),a=a.filter(l=>this.utils.event.eventInRange(l,t,e)),this.options.showAllDayEvents&&this.view.id!=="month"&&(a=a.filter(l=>!!l.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:l,timeTo:o}=this.options;a=a.filter(s=>{const u=s.daysCount>1&&s.segments[this.data.formattedDate]||{},n=s.daysCount===1&&s.startTimeMinutes<o&&s.endTimeMinutes>l,f=s.daysCount>1&&u.startTimeMinutes<o&&u.endTimeMinutes>l,m=!1;return s.allDay||n||f||m})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&a.sort((l,o)=>l.start<o.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return a},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((t,e)=>{const a=this.events.filter(s=>s.split===t.id),[l,o]=this.utils.event.checkCellOverlappingEvents(a.filter(s=>!s.background&&!s.allDay),this.options);return{...t,overlaps:l,overlapsStreak:o,events:a}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:t,timeTo:e}=this.options;return this.data.today&&this.isWeekOrDayView&&t&&!this.allDay&&this.nowInMinutes<=e},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const t=this.nowInMinutes-this.options.timeFrom;return Math.round(t*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},Js=$t(ei,[["render",Qa]]),ti={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function si(t,e,a,l,o,s){const u=wt("vuecal-cell");return d(),h("div",{class:"vuecal__flex vuecal__all-day",style:q(a.cellOrSplitMinWidth&&{height:a.height})},[a.cellOrSplitMinWidth?b("",!0):(d(),h("div",ti,[i("span",null,T(a.label),1)])),i("div",{class:pe(["vuecal__flex vuecal__cells",`${s.view.id}-view`]),grow:"",style:q(a.cellOrSplitMinWidth?`min-width: ${a.cellOrSplitMinWidth}px`:"")},[(d(!0),h(fe,null,ke(a.cells,(n,f)=>(d(),ce(u,{key:f,options:a.options,"edit-events":s.editEvents,data:n,"all-day":!0,"cell-width":a.options.hideWeekdays.length&&(s.vuecal.isWeekView||s.vuecal.isMonthView)&&s.vuecal.cellWidth,"min-timestamp":a.options.minTimestamp,"max-timestamp":a.options.maxTimestamp,"cell-splits":a.daySplits},{event:C(({event:m,view:p})=>[te(t.$slots,"event",{view:p,event:m})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const ai={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":Js},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},ii=$t(ai,[["render",si]]),li=["lang"],ni={class:"default"},oi={key:0,class:"vuecal__flex vuecal__body",grow:""},ri=["onBlur","innerHTML"],di=["innerHTML"],ui=["innerHTML"],ci={class:"vuecal__flex",row:"",grow:""},hi={key:0,class:"vuecal__time-column"},mi={class:"vuecal__time-cell-label"},vi={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},pi=["wrap","column"],fi=["onBlur","innerHTML"],yi=["innerHTML"],_i=["innerHTML"],gi=["wrap"],wi=["innerHTML"],Di=["innerHTML"],bi={key:2,class:"vuecal__cell-events-count"},ki={key:3,class:"vuecal__no-event"},Ti=["onBlur","innerHTML"],Ci=["innerHTML"],Ei={key:2,class:"vuecal__event-time"},Si={key:0},xi={key:1,class:"days-to-end"},Mi=["innerHTML"],Vi={key:0,class:"vuecal__scrollbar-check"};function $i(t,e,a,l,o,s){const u=wt("vuecal-header"),n=wt("all-day-bar"),f=wt("weekdays-headings"),m=wt("vuecal-cell");return d(),h("div",{class:pe(["vuecal__flex vuecal",s.cssClasses]),column:"",ref:"vuecal",lang:a.locale},[_(u,{options:t.$props,"edit-events":s.editEvents,"view-props":{views:s.views,weekDaysInHeader:s.weekDaysInHeader},"week-days":s.weekDays,"has-splits":s.hasSplits,"day-splits":s.daySplits,"switch-to-narrower-view":s.switchToNarrowerView},gs({"arrow-prev":C(()=>[te(t.$slots,"arrow-prev",{},()=>[e[0]||(e[0]=ve(" ")),e[1]||(e[1]=i("i",{class:"angle"},null,-1)),e[2]||(e[2]=ve(" "))])]),"arrow-next":C(()=>[te(t.$slots,"arrow-next",{},()=>[e[3]||(e[3]=ve(" ")),e[4]||(e[4]=i("i",{class:"angle"},null,-1)),e[5]||(e[5]=ve(" "))])]),"today-button":C(()=>[te(t.$slots,"today-button",{},()=>[i("span",ni,T(o.texts.today),1)])]),title:C(()=>[te(t.$slots,"title",{title:s.viewTitle,view:o.view},()=>[ve(T(s.viewTitle),1)])]),_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:C(({heading:p,view:x})=>[te(t.$slots,"weekday-heading",{heading:p,view:x})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:C(({split:p})=>[te(t.$slots,"split-label",{split:p,view:o.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),a.hideBody?b("",!0):(d(),h("div",oi,[_(os,{name:`slide-fade--${o.transitionDirection}`,appear:a.transitions},{default:C(()=>[(d(),h("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:a.transitions?o.view.id:!1,column:""},[a.showAllDayEvents&&s.hasTimeColumn&&(!s.cellOrSplitMinWidth||s.isDayView&&!a.minSplitWidth)?(d(),ce(n,Os(As({key:0},s.allDayBar)),{event:C(({event:p,view:x})=>[te(t.$slots,"event",{view:x,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:V=>s.onEventTitleBlur(V,p),innerHTML:p.title},null,40,ri)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,di)):b("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,ui)):b("",!0)])]),_:3},16)):b("",!0),i("div",{class:pe(["vuecal__bg",{vuecal__flex:!s.hasTimeColumn}]),column:""},[i("div",ci,[s.hasTimeColumn?(d(),h("div",hi,[a.showAllDayEvents&&s.cellOrSplitMinWidth&&!(s.isDayView&&!a.minSplitWidth)?(d(),h("div",{key:0,class:"vuecal__all-day-text",style:q({height:s.allDayBar.height})},[i("span",null,T(o.texts.allDay),1)],4)):b("",!0),(d(!0),h(fe,null,ke(s.timeCells,(p,x)=>(d(),h("div",{class:"vuecal__time-cell",key:x,style:q(`height: ${a.timeCellHeight}px`)},[te(t.$slots,"time-cell",{hours:p.hours,minutes:p.minutes},()=>[e[6]||(e[6]=i("span",{class:"vuecal__time-cell-line"},null,-1)),i("span",mi,T(p.label),1)])],4))),128))])):b("",!0),a.showWeekNumbers&&s.isMonthView?(d(),h("div",vi,[(d(),h(fe,null,ke(6,p=>i("div",{class:"vuecal__flex vuecal__week-number-cell",key:p,grow:""},[te(t.$slots,"week-number-cell",{week:s.getWeekNumber(p-1)},()=>[ve(T(s.getWeekNumber(p-1)),1)])])),64))])):b("",!0),i("div",{class:pe(["vuecal__flex vuecal__cells",`${o.view.id}-view`]),grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,column:!!s.cellOrSplitMinWidth},[s.cellOrSplitMinWidth&&s.isWeekView?(d(),ce(f,{key:0,"transition-direction":o.transitionDirection,"week-days":s.weekDays,"switch-to-narrower-view":s.switchToNarrowerView,style:q(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},gs({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:C(({heading:p,view:x})=>[te(t.$slots,"weekday-heading",{heading:p,view:x})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:C(({split:p})=>[te(t.$slots,"split-label",{split:p,view:o.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):s.hasSplits&&a.stickySplitLabels&&a.minSplitWidth?(d(),h("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:q(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(fe,null,ke(s.daySplits,(p,x)=>(d(),h("div",{class:pe(["day-split-header",p.class||!1]),key:x},[te(t.$slots,"split-label",{split:p,view:o.view.id},()=>[ve(T(p.label),1)])],2))),128))],4)):b("",!0),a.showAllDayEvents&&s.hasTimeColumn&&(s.isWeekView&&s.cellOrSplitMinWidth||s.isDayView&&s.hasSplits&&a.minSplitWidth)?(d(),ce(n,Os(As({key:2},s.allDayBar)),{event:C(({event:p,view:x})=>[te(t.$slots,"event",{view:x,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:V=>s.onEventTitleBlur(V,p),innerHTML:p.title},null,40,fi)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,yi)):b("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,_i)):b("",!0)])]),_:3},16)):b("",!0),i("div",{class:"vuecal__flex",ref:p=>o.cellsEl=p,grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,style:q(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(fe,null,ke(s.viewCells,(p,x)=>(d(),ce(m,{key:x,options:t.$props,"edit-events":s.editEvents,data:p,"cell-width":a.hideWeekdays.length&&(s.isWeekView||s.isMonthView)&&s.cellWidth,"min-timestamp":s.minTimestamp,"max-timestamp":s.maxTimestamp,"cell-splits":s.hasSplits&&s.daySplits||[]},{"cell-content":C(({events:V,split:N,selectCell:H})=>[te(t.$slots,"cell-content",{cell:p,view:o.view,goNarrower:H,events:V},()=>[N&&!a.stickySplitLabels?(d(),h("div",{key:0,class:"split-label",innerHTML:N.label},null,8,wi)):b("",!0),p.content?(d(),h("div",{key:1,class:"vuecal__cell-date",innerHTML:p.content},null,8,Di)):b("",!0),(s.isMonthView&&!a.eventsOnMonthView||s.isYearsOrYearView&&a.eventsCountOnYearView)&&V.length?(d(),h("div",bi,[te(t.$slots,"events-count",{view:o.view,events:V},()=>[ve(T(V.length),1)])])):b("",!0),!s.cellOrSplitHasEvents(V,N)&&s.isWeekOrDayView?(d(),h("div",ki,[te(t.$slots,"no-event",{},()=>[ve(T(o.texts.noEvent),1)])])):b("",!0)])]),event:C(({event:V,view:N})=>[te(t.$slots,"event",{view:N,event:V},()=>[s.editEvents.title&&V.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:H=>s.onEventTitleBlur(H,V),innerHTML:V.title},null,40,Ti)):V.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:V.title},null,8,Ci)):b("",!0),a.time&&!V.allDay&&!(s.isMonthView&&(V.allDay||a.showAllDayEvents==="short"))&&!s.isShortMonthView?(d(),h("div",Ei,[ve(T(o.utils.date.formatTime(V.start,s.TimeFormat)),1),V.endTimeMinutes?(d(),h("span",Si," - "+T(o.utils.date.formatTime(V.end,s.TimeFormat,null,!0)),1)):b("",!0),V.daysCount>1&&(V.segments[p.formattedDate]||{}).isFirstDay?(d(),h("small",xi," +"+T(V.daysCount-1)+T((o.texts.day[0]||"").toLowerCase()),1)):b("",!0)])):b("",!0),V.content&&!(s.isMonthView&&V.allDay&&a.showAllDayEvents==="short")&&!s.isShortMonthView?(d(),h("div",{key:3,class:"vuecal__event-content",innerHTML:V.content},null,8,Mi)):b("",!0)])]),"no-event":C(()=>[te(t.$slots,"no-event",{},()=>[ve(T(o.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,gi)],10,pi)])],2)]))]),_:3},8,["name","appear"]),o.ready?b("",!0):(d(),h("div",Vi,e[7]||(e[7]=[i("div",null,null,-1)])))]))],10,li)}const qt=24*60,ns={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},Fs=["years","year","month","week","day"],Us=new _a(ns),Oi={name:"vue-cal",components:{"vuecal-cell":Js,"vuecal-header":Ya,WeekdaysHeadings:Ks,AllDayBar:ii},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:qt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...ns},utils:{date:(this.disableDatePrototypes?Us.removePrototypes():!1)||Us,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(t){if(typeof this.locale=="object"){this.texts=Object.assign({},ns,t),this.utils.date.updateTexts(this.texts);return}const e=await ya(Object.assign({"./i18n/ar.json":()=>W(()=>import("./ar.es.1c5432ef.js"),[],import.meta.url),"./i18n/bg.json":()=>W(()=>import("./bg.es.133f1d79.js"),[],import.meta.url),"./i18n/bn.json":()=>W(()=>import("./bn.es.d6f1145b.js"),[],import.meta.url),"./i18n/bs.json":()=>W(()=>import("./bs.es.424f8392.js"),[],import.meta.url),"./i18n/ca.json":()=>W(()=>import("./ca.es.10691e62.js"),[],import.meta.url),"./i18n/cs.json":()=>W(()=>import("./cs.es.d467a362.js"),[],import.meta.url),"./i18n/da.json":()=>W(()=>import("./da.es.5c82d648.js"),[],import.meta.url),"./i18n/de.json":()=>W(()=>import("./de.es.fc3d5977.js"),[],import.meta.url),"./i18n/el.json":()=>W(()=>import("./el.es.09498e63.js"),[],import.meta.url),"./i18n/en.json":()=>W(()=>import("./en.es.cf2ff814.js"),[],import.meta.url),"./i18n/es.json":()=>W(()=>import("./es.es.1bcf8f87.js"),[],import.meta.url),"./i18n/et.json":()=>W(()=>import("./et.es.dfc4f817.js"),[],import.meta.url),"./i18n/fa.json":()=>W(()=>import("./fa.es.54e3e37f.js"),[],import.meta.url),"./i18n/fi.json":()=>W(()=>import("./fi.es.f02a3c28.js"),[],import.meta.url),"./i18n/fr.json":()=>W(()=>import("./fr.es.7cd25089.js"),[],import.meta.url),"./i18n/he.json":()=>W(()=>import("./he.es.a00ad66b.js"),[],import.meta.url),"./i18n/hr.json":()=>W(()=>import("./hr.es.c03853d7.js"),[],import.meta.url),"./i18n/hu.json":()=>W(()=>import("./hu.es.5447b096.js"),[],import.meta.url),"./i18n/id.json":()=>W(()=>import("./id.es.3384c049.js"),[],import.meta.url),"./i18n/is.json":()=>W(()=>import("./is.es.5855059c.js"),[],import.meta.url),"./i18n/it.json":()=>W(()=>import("./it.es.a2e39e6b.js"),[],import.meta.url),"./i18n/ja.json":()=>W(()=>import("./ja.es.549021b7.js"),[],import.meta.url),"./i18n/ka.json":()=>W(()=>import("./ka.es.b97af2c6.js"),[],import.meta.url),"./i18n/ko.json":()=>W(()=>import("./ko.es.65303d13.js"),[],import.meta.url),"./i18n/lt.json":()=>W(()=>import("./lt.es.6bd7ea81.js"),[],import.meta.url),"./i18n/mn.json":()=>W(()=>import("./mn.es.c0946de5.js"),[],import.meta.url),"./i18n/nl.json":()=>W(()=>import("./nl.es.fb098524.js"),[],import.meta.url),"./i18n/no.json":()=>W(()=>import("./no.es.00bfcb00.js"),[],import.meta.url),"./i18n/pl.json":()=>W(()=>import("./pl.es.d9683cfc.js"),[],import.meta.url),"./i18n/pt-br.json":()=>W(()=>import("./pt-br.es.a068d598.js"),[],import.meta.url),"./i18n/pt-pt.json":()=>W(()=>import("./pt-pt.es.a068d598.js"),[],import.meta.url),"./i18n/ro.json":()=>W(()=>import("./ro.es.c05b88b7.js"),[],import.meta.url),"./i18n/ru.json":()=>W(()=>import("./ru.es.18bbb6e3.js"),[],import.meta.url),"./i18n/sk.json":()=>W(()=>import("./sk.es.cf475731.js"),[],import.meta.url),"./i18n/sl.json":()=>W(()=>import("./sl.es.4f19bf30.js"),[],import.meta.url),"./i18n/sq.json":()=>W(()=>import("./sq.es.a264a995.js"),[],import.meta.url),"./i18n/sr.json":()=>W(()=>import("./sr.es.0d3cfbc7.js"),[],import.meta.url),"./i18n/sv.json":()=>W(()=>import("./sv.es.f64e2fa4.js"),[],import.meta.url),"./i18n/tr.json":()=>W(()=>import("./tr.es.576f73c9.js"),[],import.meta.url),"./i18n/uk.json":()=>W(()=>import("./uk.es.ed3c3f03.js"),[],import.meta.url),"./i18n/vi.json":()=>W(()=>import("./vi.es.4582ebe1.js"),[],import.meta.url),"./i18n/zh-cn.json":()=>W(()=>import("./zh-cn.es.50f64b69.js"),[],import.meta.url),"./i18n/zh-hk.json":()=>W(()=>import("./zh-hk.es.6da7777e.js"),[],import.meta.url)}),`./i18n/${t}.json`,3);this.texts=Object.assign({},ns,e),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){W(()=>import("./drag-and-drop.es.bedab85d.js"),[],import.meta.url).then(t=>{const{DragAndDrop:e}=t;this.modules.dnd=new e(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(t){return Fs.includes(t)||(console.error(`Vue Cal: invalid active-view parameter provided: "${t}".
A valid view must be one of: ${Fs.join(", ")}.`),t="week"),this.enabledViews.includes(t)||(console.warn(`Vue Cal: the provided active-view "${t}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),t=this.enabledViews[0]),t},switchToNarrowerView(t=null){this.transitionDirection="right";const e=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];e&&this.switchView(e,t)},switchView(t,e=null,a=!1){t=this.validateView(t);const l=this.utils.date,o=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&a){if(this.view.id===t)return;const n=this.enabledViews;this.transitionDirection=n.indexOf(this.view.id)>n.indexOf(t)?"left":"right"}const s=this.view.id;switch(this.view.events=[],this.view.id=t,this.view.firstCellDate=null,this.view.lastCellDate=null,e||(e=this.view.selectedDate||this.view.startDate),t){case"years":{this.view.startDate=new Date(Math.floor(e.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(e.getFullYear(),0,1),this.view.endDate=new Date(e.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(e.getFullYear(),e.getMonth(),1),this.view.endDate=new Date(e.getFullYear(),e.getMonth()+1,1),this.view.endDate.setSeconds(-1);let n=new Date(this.view.startDate);if(n.getDay()!==(this.startWeekOnSunday?0:1)&&(n=l.getPreviousFirstDayOfWeek(n,this.startWeekOnSunday)),this.view.firstCellDate=n,this.view.lastCellDate=l.addDays(n,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const f=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=l.addDays(this.view.firstCellDate,f)}if([0,6].includes(this.view.startDate.getDay())){const f=this.view.startDate.getDay()===6?2:1;this.view.startDate=l.addDays(this.view.startDate,f)}if([0,6].includes(this.view.lastCellDate.getDay())){const f=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=l.subtractDays(this.view.lastCellDate,f)}if([0,6].includes(this.view.endDate.getDay())){const f=this.view.endDate.getDay()===0?2:1;this.view.endDate=l.subtractDays(this.view.endDate,f)}}break}case"week":{e=l.getPreviousFirstDayOfWeek(e,this.startWeekOnSunday);const n=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?l.addDays(e,1):e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=l.addDays(e,n),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(e),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const u=this.view.startDate&&this.view.startDate.getTime();if(!(s===t&&u===o)&&(this.$emit("update:activeView",t),this.ready)){const n=this.view.startDate,f={view:t,startDate:n,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:l.getWeek(this.startWeekOnSunday?l.addDays(n,1):n)}:{}};this.$emit("view-change",f)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(t=!0){const e=this.utils.date;this.transitionDirection=t?"right":"left";const a=t?1:-1;let l=null;const{startDate:o,id:s}=this.view;switch(s){case"years":l=new Date(o.getFullYear()+25*a,0,1);break;case"year":l=new Date(o.getFullYear()+1*a,1,1);break;case"month":l=new Date(o.getFullYear(),o.getMonth()+1*a,1);break;case"week":l=e[t?"addDays":"subtractDays"](e.getPreviousFirstDayOfWeek(o,this.startWeekOnSunday),7);break;case"day":l=e[t?"addDays":"subtractDays"](o,1);const u=l.getDay(),n=this.startWeekOnSunday?u:(u||7)-1;if(this.weekDays[n].hide){const m=this.weekDays.map((x,V)=>({...x,i:V}));let p=0;t?([...m.slice(n),...m].find(x=>(p++,!x.hide)).i,p--):[...m,...m.slice(0,n)].reverse().find(x=>(p++,!x.hide)).i,l=e[t?"addDays":"subtractDays"](l,p)}break}l&&this.switchView(s,l)},addEventsToView(t=[]){const e=this.utils.event,{startDate:a,endDate:l,firstCellDate:o,lastCellDate:s}=this.view;if(t.length||(this.view.events=[]),t=t.length?t:[...this.mutableEvents],!t||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let u=t.filter(n=>e.eventInRange(n,a,l));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(u=u.map(n=>n.daysCount>1?e.createEventSegments(n,o||a,s||l):n)),this.view.events.push(...u),this.isMonthView&&(this.view.outOfScopeEvents=[],t.forEach(n=>{(e.eventInRange(n,o,a)||e.eventInRange(n,l,s))&&(this.view.events.some(f=>f._eid===n._eid)||this.view.outOfScopeEvents.push(n))}))},findAncestor(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t},isDOMElementAnEvent(t){return t.classList.contains("vuecal__event")||this.findAncestor(t,"vuecal__event")},onMouseMove(t){const{resizeAnEvent:e,dragAnEvent:a,dragCreateAnEvent:l}=this.domEvents;e._eid===null&&a._eid===null&&!l.start||(t.preventDefault(),e._eid?this.eventResizing(t):this.dragToCreateEvent&&l.start&&this.eventDragCreation(t))},onMouseUp(t){const{focusAnEvent:e,resizeAnEvent:a,clickHoldAnEvent:l,clickHoldACell:o,dragCreateAnEvent:s}=this.domEvents,{_eid:u}=l,{_eid:n}=a;let f=!1;const{event:m,start:p}=s,x=this.isDOMElementAnEvent(t.target),V=e.mousedUp;if(e.mousedUp=!1,x&&(this.domEvents.cancelClickEventCreation=!0),o.eventCreated)return;if(n){const{originalEnd:H,originalEndTimeMinutes:ye,endTimeMinutes:se}=a,J=this.view.events.find(G=>G._eid===a._eid);if(f=se&&se!==ye,J&&J.end.getTime()!==H.getTime()){const G=this.mutableEvents.find(oe=>oe._eid===a._eid);G.endTimeMinutes=J.endTimeMinutes,G.end=J.end;const _e=this.cleanupEvent(J),E={...this.cleanupEvent(J),end:H,endTimeMinutes:J.originalEndTimeMinutes};this.$emit("event-duration-change",{event:_e,oldDate:a.originalEnd,originalEvent:E}),this.$emit("event-change",{event:_e,originalEvent:E})}J&&(J.resizing=!1),a._eid=null,a.start=null,a.split=null,a.segment=null,a.originalEndTimeMinutes=null,a.originalEnd=null,a.endTimeMinutes=null,a.startCell=null,a.endCell=null}else p&&(m&&(this.emitWithEvent("event-drag-create",m),s.event.resizing=!1),s.start=null,s.split=null,s.event=null);!x&&!n&&this.unfocusEvent(),l.timeoutId&&!u&&(clearTimeout(l.timeoutId),l.timeoutId=null),o.timeoutId&&(clearTimeout(o.timeoutId),o.timeoutId=null);const N=typeof this.onEventClick=="function";if(V&&!f&&!u&&!m&&N){let H=this.view.events.find(ye=>ye._eid===e._eid);return!H&&this.isMonthView&&(H=this.view.outOfScopeEvents.find(ye=>ye._eid===e._eid)),H&&this.onEventClick(H,t)}},onKeyUp(t){t.keyCode===27&&this.cancelDelete()},eventResizing(t){const{resizeAnEvent:e}=this.domEvents,a=this.view.events.find(m=>m._eid===e._eid)||{segments:{}},{minutes:l,cursorCoords:o}=this.minutesAtCursor(t),s=a.segments&&a.segments[e.segment],{date:u,event:n}=this.utils,f=Math.max(l,this.timeFrom+1,(s||a).startTimeMinutes+1);if(a.endTimeMinutes=e.endTimeMinutes=f,this.snapToTime){const m=a.endTimeMinutes+this.snapToTime/2;a.endTimeMinutes=m-m%this.snapToTime}if(s&&(s.endTimeMinutes=a.endTimeMinutes),a.end.setHours(0,a.endTimeMinutes,a.endTimeMinutes===qt?-1:0,0),this.resizeX&&this.isWeekView){a.daysCount=u.countDays(a.start,a.end);const m=this.cellsEl,p=m.offsetWidth/m.childElementCount,x=Math.floor(o.x/p);if(e.startCell===null&&(e.startCell=x-(a.daysCount-1)),e.endCell!==x){e.endCell=x;const V=u.addDays(a.start,x-e.startCell),N=Math.max(u.countDays(a.start,V),1);if(N!==a.daysCount){let H=null;N>a.daysCount?H=n.addEventSegment(a):H=n.removeEventSegment(a),e.segment=H,a.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:a._eid,end:a.end,endTimeMinutes:a.endTimeMinutes})},eventDragCreation(t){const{dragCreateAnEvent:e}=this.domEvents,{start:a,startCursorY:l,split:o}=e,s=new Date(a),{minutes:u,cursorCoords:{y:n}}=this.minutesAtCursor(t);if(!(!e.event&&Math.abs(l-n)<this.dragToCreateThreshold))if(e.event){if(s.setHours(0,u,u===qt?-1:0,0),this.snapToTime){let p=s.getHours()*60+s.getMinutes();const x=p+this.snapToTime/2;p=x-x%this.snapToTime,s.setHours(0,p,0,0)}const f=a<s,{event:m}=e;m.start=f?a:s,m.end=f?s:a,m.startTimeMinutes=m.start.getHours()*60+m.start.getMinutes(),m.endTimeMinutes=m.end.getHours()*60+m.end.getMinutes()}else{if(e.event=this.utils.event.createAnEvent(a,1,{split:o}),!e.event){e.start=null,e.split=null,e.event=null;return}e.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:t,clickHoldAnEvent:e}=this.domEvents,a=this.view.events.find(l=>l._eid===(t._eid||e._eid));t._eid=null,e._eid=null,a&&(a.focused=!1,a.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:t}=this.domEvents;if(t._eid){const e=this.view.events.find(a=>a._eid===t._eid);e&&(e.deleting=!1),t._eid=null,t.timeoutId=null}},onEventTitleBlur(t,e){if(e.title===t.target.innerHTML)return;const a=e.title;e.title=t.target.innerHTML;const l=this.cleanupEvent(e);this.$emit("event-title-change",{event:l,oldTitle:a}),this.$emit("event-change",{event:l,originalEvent:{...l,title:a}})},updateMutableEvents(){const t=this.utils.date;this.mutableEvents=[],this.events.forEach(e=>{const a=typeof e.start=="string"?t.stringToDate(e.start):e.start,l=t.formatDateLite(a),o=t.dateToMinutes(a);let s=null;typeof e.end=="string"&&e.end.includes("24:00")?(s=new Date(e.end.replace(" 24:00","")),s.setHours(23,59,59,0)):s=typeof e.end=="string"?t.stringToDate(e.end):e.end;let u=t.formatDateLite(s),n=t.dateToMinutes(s);(!n||n===qt)&&(!this.time||typeof e.end=="string"&&e.end.length===10?s.setHours(23,59,59,0):s.setSeconds(s.getSeconds()-1),u=t.formatDateLite(s),n=qt);const f=l!==u;e=Object.assign({...this.utils.event.eventDefaults},e,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:f?{}:null,start:a,startTimeMinutes:o,end:s,endTimeMinutes:n,daysCount:f?t.countDays(a,s):1,class:e.class}),this.mutableEvents.push(e)})},minutesAtCursor(t){return this.utils.cell.minutesAtCursor(t)},createEvent(t,e,a={}){return this.utils.event.createAnEvent(t,e,a)},cleanupEvent(t){return t={...t},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(a=>{a in t&&delete t[a]}),t.repeat||delete t.repeat,t},emitWithEvent(t,e){this.$emit(t,this.cleanupEvent(e))},updateSelectedDate(t){if(t&&typeof t=="string"?t=this.utils.date.stringToDate(t):t=new Date(t),t&&t instanceof Date){const{selectedDate:e}=this.view;e&&(this.transitionDirection=e.getTime()>t.getTime()?"left":"right"),t.setHours(0,0,0,0),(!e||e.getTime()!==t.getTime())&&(this.view.selectedDate=t),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(t){const e=this.utils.date,l=this.firstCellDateWeekNumber+t,o=this.startWeekOnSunday?1:0;return l>52?e.getWeek(e.addDays(this.view.firstCellDate,7*t+o)):l},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const t=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],e=t.offsetWidth-t.children[0].offsetWidth;if(e){const a=document.createElement("style");a.id="vuecal-align-with-scrollbar",a.type="text/css",a.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${e}px}`,document.head.appendChild(a)}},cellOrSplitHasEvents(t,e=null){return t.length&&(!e&&t.length||e&&t.some(a=>a.split===e.id))}},created(){this.utils.cell=new wa(this),this.utils.event=new ba(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const t=this.utils.date,e="ontouchstart"in window,{resize:a,drag:l,create:o,delete:s,title:u}=this.editEvents,n=this.onEventClick&&typeof this.onEventClick=="function";(a||l||o||s||u||n)&&window.addEventListener(e?"touchend":"mouseup",this.onMouseUp),(a||l||o&&this.dragToCreateEvent)&&window.addEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),u&&window.addEventListener("keyup",this.onKeyUp),e&&(this.$refs.vuecal.oncontextmenu=function(p){p.preventDefault(),p.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const f=this.view.startDate,m={view:this.view.id,startDate:f,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:t.getWeek(this.startWeekOnSunday?t.addDays(f,1):f)}:{}};this.$emit("ready",m),this.ready=!0},beforeUnmount(){const t="ontouchstart"in window;window.removeEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(t?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(t=>this.views[t].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const t=this.utils.date,e=this.view.firstCellDate;return t.getWeek(this.startWeekOnSunday?t.addDays(e,1):e)},timeCells(){const t=[];for(let e=this.timeFrom,a=this.timeTo;e<a;e+=this.timeStep)t.push({hours:Math.floor(e/60),minutes:e%60,label:this.utils.date.formatTime(e,this.TimeFormat),value:e});return t},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(t=>!t.hide)||[]).map((t,e)=>({...t,id:t.id||e+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let t=null;return this.hasSplits&&this.minSplitWidth?t=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(t=this.visibleDaysCount*this.minCellWidth),t},allDayBar(){let t=this.allDayBarHeight||null;return t&&!isNaN(t)&&(t+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:t}},minTimestamp(){let t=null;return this.minDate&&typeof this.minDate=="string"?t=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(t=this.minDate),t?t.getTime():null},maxTimestamp(){let t=null;return this.maxDate&&typeof this.maxDate=="string"?t=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(t=this.maxDate),t?t.getTime():null},weekDays(){let{weekDays:t,weekDaysShort:e=[]}=this.texts;return t=t.slice(0).map((a,l)=>({label:a,...e.length?{short:e[l]}:{},hide:this.hideWeekends&&l>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(l+1)})),this.startWeekOnSunday&&t.unshift(t.pop()),t},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(t=>({label:t}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((t,e)=>{let a=this.specialHours[e+1]||[];return Array.isArray(a)||(a=[a]),t=[],a.forEach(({from:l,to:o,class:s,label:u},n)=>{t[n]={day:e+1,from:[null,void 0].includes(l)?null:l*1,to:[null,void 0].includes(o)?null:o*1,class:s||"",label:u||""}}),t})},viewTitle(){const t=this.utils.date;let e="";const a=this.view.startDate,l=a.getFullYear(),o=a.getMonth();switch(this.view.id){case"years":{e=this.texts.years;break}case"year":{e=l;break}case"month":{e=`${this.months[o].label} ${l}`;break}case"week":{const s=this.view.endDate,u=a.getFullYear();let n=this.texts.months[a.getMonth()];this.xsmall&&(n=n.substring(0,3));let f=`${n} ${u}`;if(s.getMonth()!==a.getMonth()){const m=s.getFullYear();let p=this.texts.months[s.getMonth()];this.xsmall&&(p=p.substring(0,3)),u===m?f=`${n} - ${p} ${u}`:this.small?f=`${n.substring(0,3)} ${u} - ${p.substring(0,3)} ${m}`:f=`${n} ${u} - ${p} ${m}`}e=`${this.texts.week} ${t.getWeek(this.startWeekOnSunday?t.addDays(a,1):a)} (${f})`;break}case"day":{e=this.utils.date.formatDate(a,this.texts.dateFormat,this.texts);break}}return e},viewCells(){const t=this.utils.date;let e=[],a=null,l=!1;this.watchRealTime||(this.now=new Date);const o=this.now;switch(this.view.id){case"years":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(25)).map((s,u)=>{const n=new Date(a+u,0,1),f=new Date(a+u+1,0,1);return f.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:f,content:a+u,current:a+u===o.getFullYear()}});break}case"year":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(12)).map((s,u)=>{const n=new Date(a,u,1),f=new Date(a,u+1,1);return f.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:f,content:this.xsmall?this.months[u].label.substr(0,3):this.months[u].label,current:u===o.getMonth()&&a===o.getFullYear()}});break}case"month":{const s=this.view.startDate.getMonth(),u=new Date(this.view.firstCellDate);l=!1,e=Array.apply(null,Array(42)).map((n,f)=>{const m=t.addDays(u,f),p=new Date(m);p.setHours(23,59,59,0);const x=!l&&t.isToday(m)&&!l++;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,content:m.getDate(),today:x,outOfScope:m.getMonth()!==s,class:`vuecal__cell--day${m.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(e=e.filter(n=>{const f=n.startDate.getDay()||7;return!(this.hideWeekends&&f>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(f))}));break}case"week":{l=!1;const s=this.view.startDate,u=this.weekDays;e=u.map((n,f)=>{const m=t.addDays(s,this.startWeekOnSunday&&this.hideWeekends?f-1:f),p=new Date(m);p.setHours(23,59,59,0);const x=(m.getDay()||7)-1;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,today:!l&&t.isToday(m)&&!l++,specialHours:this.specialDayHours[x]||[]}}).filter((n,f)=>!u[f].hide);break}case"day":{const s=this.view.startDate,u=new Date(this.view.startDate);u.setHours(23,59,59,0);const n=(s.getDay()||7)-1;e=[{startDate:s,formattedDate:t.formatDateLite(s),endDate:u,today:t.isToday(s),specialHours:this.specialDayHours[n]||[]}];break}}return e},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((t,e)=>t+e.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:t,dragAnEvent:e,dragCreateAnEvent:a}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":t._eid,"vuecal--drag-creating-event":a.event,"vuecal--dragging-event":e._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(t,e){this.updateMutableEvents(t),this.addEventsToView()},deep:!0},locale(t){this.loadLocale(t)},selectedDate(t){this.updateSelectedDate(t)},activeView(t){this.switchView(t)}}},Ai=$t(Oi,[["render",$i]]);const Li={class:"filter-wrapper pb-2 mb-1"},ji={class:"mb-2 relative"},Ii={class:"mb-2 relative"},Hi={class:"flex flex-wrap gap-1"},Wi={class:"view-btns"},Fi=i("i",{class:"pi pi-search"},null,-1),Ui={key:0},Ni={class:"grid mt-2"},Bi={class:"col-12 lg:col-6 xl:col-3"},Yi={class:"card mb-0",style:"border-left:6px solid #000;"},zi={to:"/tags",class:"flex justify-content-between"},Ri=i("h4",{class:"mb-0 block text-xl font-semibold tracking-tight"},"Total Tasks",-1),qi={class:"text-900 font-bold text-2xl"},Pi={to:"/tags",class:"flex justify-content-between"},Ki={class:"mb-0 text-xl font-semibold tracking-tight"},Ji={class:"text-900 font-bold text-2xl"},Gi={class:"col-12"},Xi={class:"task-container"},Zi=["onClick"],Qi={class:"title-group"},el={class:"rtitle line-clamp-1",style:{"font-weight":"600"}},tl={style:{"font-size":"12px"}},sl=i("strong",null,"Due Date:",-1),al={class:"w-full flex justify-content-center"},il=i("p",{class:"text-center font-medium font-italic"},"No data found",-1),ll=["onMouseenter"],nl=["onDblclick"],ol={class:"task-status"},rl={key:1},dl={class:"flex align-items-center"},ul=["onClick","title"],cl=["onsubmit"],hl=["onMouseenter"],ml={key:0,class:"flex gap-1 w-full h-full justify-content-center align-items-center"},vl={class:"flex justify-content-start gap-1"},pl=["src"],fl={key:0,class:"inline-block"},yl={class:"task-status-2"},_l={key:0,class:"flex align-items-center"},gl=["title"],wl={key:1},Dl={class:"flex align-items-center"},bl={key:0,class:"pi pi-calendar",style:{"padding-top":"0.1rem"}},kl={key:0,class:"inline-block"},Tl={class:"task-status-2 flex"},Cl=i("i",{class:"pi pi-flag pt-2"},null,-1),El={key:0,class:"flex align-items-center"},Sl={key:1,class:"pt-1"},xl={key:1},Ml={class:"flex align-items-center"},Vl=["onMouseover","onMouseleave"],$l=["onClick","onMouseleave"],Ol={key:2,class:"main-container"},Al={class:"content"},Ll={class:"boardContainer",style:{display:"flex","overflow-x":"auto","align-items":"start"}},jl={class:"column-container"},Il={class:""},Hl=["onClick"],Wl={class:""},Fl={class:"font-semibold truncate-board text-sm title"},Ul={class:"flex align-items-center gap-2 mt-1"},Nl={class:"status text-sm"},Bl={key:0,class:"mt-2 flex align-items-center gap-2"},Yl=i("i",{class:"pi pi-user text-lg"},null,-1),zl={class:"flex justify-content-start gap-1"},Rl=["src"],ql={key:1,class:"mt-2 flex align-items-center gap-2"},Pl=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),Kl={key:2,class:"mt-2 flex align-items-center gap-2"},Jl=i("i",{class:"pi pi-flag text-lg"},null,-1),Gl={class:"text-sm"},Xl=["onClick"],Zl=i("p",{class:"mb-1"},"Subtask",-1),Ql={class:"text-sm font-semibold"},en=["onClick"],tn={class:"font-semibold truncate-board text-sm title"},sn={class:"flex align-items-center gap-2 mt-1"},an={class:"status text-sm"},ln={key:0,class:"mt-2 flex align-items-center gap-2"},nn=i("i",{class:"pi pi-user text-lg"},null,-1),on={class:"flex justify-content-start gap-1"},rn=["src"],dn={key:1,class:"mt-2 flex align-items-center gap-2"},un=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),cn={key:2,class:"mt-2 flex align-items-center gap-2"},hn=i("i",{class:"pi pi-flag text-lg"},null,-1),mn={class:"text-sm"},vn={class:"mt-2 flex align-items-center gap-2"},pn=i("i",{class:"pi pi-angle-right text-lg"},null,-1),fn={class:"text-sm font-semibold"},yn={key:3,class:""},_n=["onClick","innerHTML"],gn={key:4},wn={class:"commit-card-wrapper mb-2"},Dn={class:"flex justify-content-between align-items-center bb"},bn={class:"flex align-items-center gap-2"},kn=i("div",{class:"pi pi-user"},null,-1),Tn={class:"m-0"},Cn={class:"font-light mt-2 mb-0 commit-title"},En={class:"text-right"},Sn={class:"font-normal mb-0 text-mute"},xn=["href"],Mn={key:1,class:"w-full flex justify-content-center my-1"},Vn=i("h4",null,[i("i",null,"No Commits Found")],-1),$n=[Vn],On={__name:"TaskTable",props:["kanbanTasks"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask"],setup(t,{emit:e}){var lt;const a=qs(),l=Fe(),{getSingleProject:o,getTaskAssignModalData:s,editTask:u,createTask:n}=Fe(),{modStatusList:f,singleProject:m,statuslist:p,isTaskEdited:x,recentTaskData:V,countTasksByStatus:N,totalTaskCount:H,calendarTasks:ye,tasks:se}=Dt(Fe()),J=v(mt("create_task")),G=v(mt("update_task")),_e=v(mt("delete_task")),E=v(mt("download_task")),oe=Jt(),$e=e,Ee=v(se||[]),ae=(lt=is().params)==null?void 0:lt.projects,F=v(),Y=v(),O=v(),he=v(),ge=v(),we=v(),re=v({}),A=v("list"),L=v(null),de=w=>{A.value=w,w==="git"&&M()},ie=v([]);(async()=>{var Q,me;const w=vt("token"),{data:y,pending:I,error:j}=await js("branchList",()=>$fetch(`${a.public.apiUrl}/gitlab/${ae}/branch`,{headers:{Authorization:`Bearer ${w.value}`}}));if(((Q=y.value)==null?void 0:Q.branch_list.length)>0){let dt=(me=y.value.branch_list)==null?void 0:me.map(Pe=>({label:Pe.name,name:Pe.name}));ie.value=[{label:"",name:"All"},...dt]}else ie.value=[{label:"No Branches",name:"No Branches"}]})();const Ue=v({label:"",name:"All"}),ee=v([]),M=async()=>{var Q;const w=vt("token"),{data:y,pending:I,error:j}=await js("commitsList",()=>{var me;return $fetch(`${a.public.apiUrl}/gitlab/${ae}/commit?branch=${Ue.value?(me=Ue.value)==null?void 0:me.label:""}`,{headers:{Authorization:`Bearer ${w.value}`}})});((Q=y.value)==null?void 0:Q.code)===200?ee.value=y.value.commit_list:ee.value=[]};A.value==="git"&&M();const le=()=>{M()},Me=v([{name:"All",code:""},{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Ot=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),tt=w=>{const y=w,I=new Date(y),j=I.getFullYear(),Q=String(I.getMonth()+1).padStart(2,"0");return`${String(I.getDate()).padStart(2,"0")}-${Q}-${j}`},Ne=v({}),bt=v(null),ot=w=>{bt.value=w,Be.value!==w&&(xe.value={...xe.value,[w]:!1},Be.value=null)},Be=v(null),xe=v({}),Ye=v(null),Xe=v(!1),pt=w=>{Ye.value=w.data.name;const y=document.getElementById(`inputTaskName${w.key}`);Be.value=w.key,xe.value=Object.keys(xe.value).reduce((I,j)=>(I[j]=!1,I),{}),Pt(()=>{y&&y.focus()}),xe.value={...xe.value,[w.key]:!0}},U=v(!1);Le(Ye,(w,y)=>{y!==null&&(U.value=!0)});let Ve=v(null);const ze=w=>{Ve.value&&(clearTimeout(Ve.value),Ve.value=null),Ve.value=setTimeout(()=>{$e("handleTaskDetailView",w),Ve.value=null},250)},st=w=>{Ve.value&&(clearTimeout(Ve.value),Ve.value=null),pt(w)},Ie=async w=>{if(w.key==="new"){if(L.value==null)return oe.add({severity:"warn",summary:"Error",detail:"Task name is required!",group:"br",life:3e3});const y={name:L.value,parent_task_id:P.value,project_id:ae};return await n(y),L.value="",R.value=!1}else{if(U.value!==!0)return oe.add({severity:"warn",summary:"Error",detail:"Change task name!",group:"br",life:3e3});await Nt(Ye.value,w.key),xe.value={...xe.value,[taskId]:!1},Ye.value=null,Be.value=null,U.value=!1}},ft=w=>{Ne.value={...Ne.value,[w]:!0}},at=w=>{Ne.value={...Ne.value,[w]:!1}},kt=w=>[{label:"Add Sub Task",icon:"pi pi-plus text-white",command:()=>{$e("openCreateSpace",w.key,"sub-task")},disabled:!J},{label:"Edit Task",icon:"pi pi-pencil text-white",command:()=>{$e("handleTaskEdit",w)},disabled:!G},{label:"Task Detail",icon:"pi pi-window-maximize text-white",command:()=>{$e("handleTaskDetailView",w)}},{label:"Delete Task",icon:"pi pi-trash text-white",command:()=>{$e("confirmDeleteTask",w.key)},disabled:!_e}],At=v(),Lt=v(),jt=v(),It=v(),Tt=v(),Ze=v(),yt=v(null),vs=()=>{if(F.value||Y.value||O.value||we.value||he.value||ge.value)F.value="",Y.value="",O.value="",we.value="",he.value="",ge.value="",At.value="",Lt.value="",jt.value="",It.value="",Tt.value="",Ze.value="",Ct.value=!1,Et.value=!1,Oe();else return},Oe=async()=>{At.value=F.value?F.value.map(w=>w.id):"",Lt.value=Y.value?Y.value.code:"",jt.value=O.value?O.value.id:"",It.value=we.value,Tt.value=he.value,Ze.value=ge.value,o(ae,At.value,Lt.value,jt.value,It.value,Tt.value,Ze.value)},Ct=v(!1),Et=v(!1),Qe=w=>{const y=new Date(w);he.value=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate(),Ct.value=!0,Oe()},rt=w=>{Et.value=!0;const y=new Date(w);ge.value=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate(),Oe()},Ht=()=>{Ct.value=!1,he.value="",Tt.value="",Oe()},ps=()=>{Et.value=!1,ge.value="",Ze.value="",Oe()},_t=v(!1),it=w=>{if(_t.value=!0,w.length>0){const y=`data:text/csv;charset=utf-8,"Serial No.","Task Name","Project","Assignee","Priority","Status","Time Tracked","Due Date","Overdue"
`+w.map((Q,me)=>{var We,D;const dt=me+1,Pe=Q.data.name,xt=m.value.name,$=Q.data.assignee.split(", ").join("; "),ut=(We=Q.data.priority)!=null&&We.name?(D=Q.data.priority)==null?void 0:D.name:"",ue=Q.data.status.name;let ne=Q.data.total_duration;const et=Math.floor(ne/3600),Ke=Math.floor(ne%3600/60),Te=ne%60;et>0?ne=`${et} hr ${Ke} min ${Te} sec`:Ke>0?ne=`${Ke} min ${Te} sec`:ne=`${Te} sec`;const c=Q.data.dueDateValue,g=Q.data.is_overdue?"Yes":"No";return`"${dt}","${Pe}","${xt}","${$}","${ut}","${ue}","${ne}","${c}","${g}"`}).join(`
`),I=encodeURI(y),j=document.createElement("a");j.setAttribute("href",I),j.setAttribute("download","tasks.csv"),document.body.appendChild(j),j.click(),document.body.removeChild(j),_t.value=!1}else _t.value=!1,oe.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})},Wt=v(!0);hs(async()=>{await o(ae),Wt.value=!1,Qt()});async function Ft(w,y){var I;try{const j=vt("token"),{data:Q,pending:me}=await ls(`${a.public.apiUrl}/tasks/update/${y}`,{method:"POST",headers:{Authorization:`Bearer ${j.value}`},body:{status:w==null?void 0:w.id}},"$7UcE4NQ81w");((I=Q.value)==null?void 0:I.app_message)==="success"?(oe.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),await o(ae)):oe.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(j){console.error("Error fetching data:",j)}}const Ut=v(!1),Nt=async(w,y)=>{if(w instanceof Date){Ut.value=!0;let I;if(w){const Q=new Date(w);Q.setDate(Q.getDate()+1),I=Q.toISOString()}const j={id:y,dueDate:I?new Date(new Date(I).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,project_id:ae};await u(j),x.value===!0?(Ut.value=!1,oe.add({severity:"success",summary:"Successful",detail:"Due date updated ",group:"br",life:3e3})):(Ut.value=!1,oe.add({severity:"error",summary:"Error",detail:"Unable to update due date!",group:"br",life:3e3}))}else if(w!=null&&w.name){const I={id:y,priority:w.name,project_id:ae};await u(I),x.value===!0?oe.add({severity:"success",summary:"Successful",detail:"Priority updated ",group:"br",life:3e3}):oe.add({severity:"error",summary:"Error",detail:"Unable to update task priority!",group:"br",life:3e3})}else Xe.value=!0,await u({id:y,name:w,project_id:ae}),x.value===!0?(oe.add({severity:"success",summary:"Successful",detail:"Task name updated ",group:"br",life:3e3}),Xe.value=!1):(oe.add({severity:"error",summary:"Error",detail:"Unable to update task name!",group:"br",life:3e3}),Xe.value=!1)},Bt=v(),Xt=async(w,y)=>{y.node.data.dueDateValue;const I=new Date(w);I.setHours(23,59,0,0),Bt.value=I;let j=new Date(Bt.value).toLocaleDateString("en-US",{month:"short",day:"2-digit"});y.node.data.dueDateValue=j,await Nt(Bt.value,y.node.key)};function Zt(){const w="0123456789ABCDEF";let y="#";for(let I=0;I<6;I++)y+=w[Math.floor(Math.random()*10)];return y}function St(w){return{backgroundColor:Zt(),color:"white",borderRadius:"50%",border:"2px solid white"}}const Qt=async()=>{await s(),re.value=l.users},es=v(!0),ts=Ls(()=>({animation:250,group:"tasks",disabled:!es.value,ghostClass:"ghost"})),S=Ls(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",padding:"12px 10px",margin:"8px 0px"})),k=(w,y)=>{const{added:I,moved:j,removed:Q}=w;I&&Ft(y,w.added.element.key)},z=v({});v(null);const R=v(!1),Z=v(""),P=v(null),B=async()=>{R.value&&(Ae(Yt(Ee.value)),Z.value="");const w={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:"",created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};R.value=!0,Ee.value=[w,...Ee.value],await Pt();const y=document.getElementById("newSubTask");y&&y.focus()},He=async w=>{R.value&&Ae(Yt(Ee.value));const y=Yt(w.node);P.value=y.key;const I={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:"",created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};R.value=!0;const j=Re(y.key,I,Yt(Ee.value));Ee.value=structuredClone(j),Z.value="",z.value[w.node.key]==!0||(z.value[w.node.key]=!0),await Pt();const Q=document.getElementById("newSubTask");Q&&Q.focus()};function Re(w,y,I){for(const j of I){if(j.key===w)return j.children.unshift(y),I;if(Re(w,y,j.children))return I}return!1}function Ae(w=Yt(Ee.value)){const y=w.filter(I=>I.key!=="new");return y.forEach(I=>{I.children&&I.children.length>0&&(I.children=Ae(I.children))}),Ee.value=structuredClone(y)}return(w,y)=>{const I=ds,j=us,Q=cs,me=Kt,dt=Zs,Pe=Bs,xt=Qs,$=ea,ut=Ys,ue=ws,ne=ta,et=zs,Ke=sa,Te=ms("tooltip");return d(),h(fe,null,[i("div",Li,[_(I,{onChange:y[0]||(y[0]=c=>Oe()),modelValue:r(F),"onUpdate:modelValue":y[1]||(y[1]=c=>K(F)?F.value=c:null),options:r(re),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(j,{onChange:y[2]||(y[2]=c=>Oe()),modelValue:r(Y),"onUpdate:modelValue":y[3]||(y[3]=c=>K(Y)?Y.value=c:null),options:r(Me),optionLabel:"name",placeholder:"Priority",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(j,{onChange:y[4]||(y[4]=c=>Oe()),modelValue:r(O),"onUpdate:modelValue":y[5]||(y[5]=c=>K(O)?O.value=c:null),options:r(f),optionLabel:"name",placeholder:"Status",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),i("div",ji,[_(Q,{onDateSelect:y[6]||(y[6]=c=>Qe(c)),modelValue:r(he),"onUpdate:modelValue":y[7]||(y[7]=c=>K(he)?he.value=c:null),placeholder:"Start Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),r(Ct)?(d(),h("p",{key:0,onClick:Ht,class:"pi pi-times absolute cursor-pointer"})):b("",!0)]),i("div",Ii,[_(Q,{onDateSelect:y[8]||(y[8]=c=>rt(c)),modelValue:r(ge),"onUpdate:modelValue":y[9]||(y[9]=c=>K(ge)?ge.value=c:null),placeholder:"End Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),r(Et)?(d(),h("p",{key:0,onClick:ps,class:"pi pi-times end-cross absolute cursor-pointer"})):b("",!0)]),_(me,{onClick:vs,label:"Reset",class:"mr-2 w-full md:w-15rem mb-2",severity:"secondary"})]),_($,{class:"border-0 px-0"},{start:C(()=>[i("div",Hi,[r(J)?(d(),ce(me,{key:0,icon:"pi pi-plus",label:"Create Task",onClick:y[10]||(y[10]=c=>B()),class:"mr-2",severity:"secondary"})):b("",!0),i("div",Wi,[_(me,{icon:"pi pi-box",label:"Overview",onClick:y[11]||(y[11]=c=>de("overview")),class:pe(["board-btn view-btn",{"bg-indigo-400 text-white":r(A)==="overview"}]),severity:"secondary"},null,8,["class"]),_(me,{icon:"pi pi-list",label:"List",onClick:y[12]||(y[12]=c=>de("list")),class:pe(["table-btn view-btn",{"bg-indigo-400 text-white":r(A)==="list"}]),severity:"secondary"},null,8,["class"]),_(me,{icon:"pi pi-th-large",label:"Board",onClick:y[13]||(y[13]=c=>de("board")),class:pe(["board-btn view-btn",{"bg-indigo-400 text-white":r(A)==="board"}]),severity:"secondary"},null,8,["class"]),_(me,{icon:"pi pi-calendar",label:"Calendar",onClick:y[14]||(y[14]=c=>de("calendar")),class:pe(["calendar-btn view-btn",{"bg-indigo-400 text-white":r(A)==="calendar"}]),severity:"secondary"},null,8,["class"])]),X(_(me,{icon:"pi pi-github",onClick:y[15]||(y[15]=c=>de("git")),class:pe(["px-4",{"bg-indigo-400 text-white":r(A)==="git"}]),severity:"secondary"},null,8,["class"]),[[Te,{value:"Git Commits"},void 0,{right:!0}]]),r(E)?X((d(),ce(me,{key:1,onClick:y[16]||(y[16]=c=>it(r(se))),loading:r(_t),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"])),[[Te,{value:"Download Tasks"},void 0,{right:!0}]]):b("",!0)])]),end:C(()=>[_(xt,{iconPosition:"right",raised:""},{default:C(()=>[_(dt,null,{default:C(()=>[Fi]),_:1}),_(Pe,{onKeyup:y[17]||(y[17]=c=>Oe()),modelValue:r(we),"onUpdate:modelValue":y[18]||(y[18]=c=>K(we)?we.value=c:null),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),r(A)==="overview"?(d(),h("div",Ui,[i("div",Ni,[i("div",Bi,[i("div",Yi,[i("div",zi,[Ri,i("div",qi,T(r(H)),1)])])]),(d(!0),h(fe,null,ke(r(N),(c,g)=>(d(),h("div",{key:c,class:"col-12 lg:col-6 xl:col-3"},[i("div",{class:"card mb-0",style:q(`border-left:6px solid ${c.statusColor};`)},[i("div",Pi,[i("h4",Ki,T(c.statusName),1),i("div",Ji,T(c.taskCount),1)])],4)]))),128)),i("div",Gi,[_(ut,{class:"h-full"},{title:C(()=>[ve("Recent Tasks")]),content:C(()=>[i("div",Xi,[i("div",null,[(d(!0),h(fe,null,ke(r(V),c=>(d(),h("div",{key:c,onClick:g=>w.$emit("handleTaskDetailView",c),class:"task-card"},[i("div",Qi,[X(i("div",{class:pe("recenttaskstatus"),style:q(`background-color: ${c==null?void 0:c.statusColor};`)},null,4),[[Te,{value:`Status: ${c.statusName}`},void 0,{left:!0}]]),i("p",el,T(c==null?void 0:c.taskName),1)]),i("div",null,[i("i",null,[i("p",tl,[sl,ve(" "+T(c.dueDate?tt(c==null?void 0:c.dueDate):"-- Not Set --"),1)])])])],8,Zi))),128))]),i("div",al,[w.currentPage<w.totalPages?(d(),ce(me,{key:0,onClick:y[19]||(y[19]=c=>w.loadMoreTasks("hide-loader")),loading:w.loadMoreLoading,label:"Load More",severity:"secondary"},null,8,["loading"])):b("",!0)])])]),_:1})])])])):b("",!0),r(A)==="list"?(d(),ce(et,{key:1,class:"table-st",stripedRows:"",value:r(Ee),scrollable:"",scrollDirection:"both",expandedKeys:r(z),"onUpdate:expandedKeys":y[23]||(y[23]=c=>K(z)?z.value=c:null),lazy:!0,loading:r(Wt),filterDisplay:"menu",style:{overflow:"auto"},tableProps:{style:{minWidth:"1024px"}}},{empty:C(()=>[il]),default:C(()=>[_(r(ct),{field:"name",header:"Name",class:"",expander:"",style:{width:"45%"},showAddButton:!0},{body:C(c=>[i("div",{class:"inline-block w-full align-items-center tasktitle-hover cursor-pointer relative",onMouseenter:g=>ot(c.node.key)},[i("div",{onDblclick:g=>st(c.node),class:"flex w-full"},[X((d(),h("div",ol,[_(j,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Ft(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":g=>c.node.data.status=g,options:r(p),disabled:!r(G),optionLabel:"name"},{value:C(g=>[g.value?(d(),h("div",{key:0,class:"flex align-items-center",style:q({backgroundColor:g.value.color_code})},[i("div",{style:q({backgroundColor:g.value.color_code}),class:"status-bg"},null,4)],4)):(d(),h("span",rl,T(g.placeholder),1))]),option:C(g=>[i("div",dl,[i("div",{style:q([{backgroundColor:g.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,T(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])),[[Te,{value:`${c.node.data.status.name}`},void 0,{top:!0}]]),i("span",{onClick:g=>ze(c.node),style:q(r(Be)===c.node.key?"display: none;":"display: block;"),class:"taskTitle cursor-pointer",title:c.node.data.name},T(c.node.data.name),13,ul),i("span",null,[_(Pe,{id:`inputTaskName${c.node.key}`,style:q(r(Be)===c.node.key?"display: block;":"display: none;"),class:"inline-task-input",modelValue:r(Ye),"onUpdate:modelValue":y[20]||(y[20]=g=>K(Ye)?Ye.value=g:null),type:"text",placeholder:"Edit task name"},null,8,["id","style","modelValue"])]),c.node.key=="new"?(d(),h("form",{key:0,onsubmit:g=>{g.preventDefault(),Ie(c.node)},action:""},[_(Pe,{id:"newSubTask",class:"inline-task-input",modelValue:r(L),"onUpdate:modelValue":y[21]||(y[21]=g=>K(L)?L.value=g:null),type:"text",placeholder:"Task Name",autocomplete:"off"},null,8,["modelValue"])],8,cl)):b("",!0)],40,nl)],40,ll)]),_:1}),_(r(ct),{field:"",header:"",style:{width:"5%",padding:"0.75rem 0rem"}},{body:C(c=>[i("div",{class:"w-full h-full flex align-items center",onMouseenter:g=>ot(c.node.key)},[r(bt)===c.node.key?(d(),h("div",ml,[!r(xe)[c.node.key]&&c.node.key!=="new"?X((d(),ce(me,{key:0,onClick:g=>pt(c.node),severity:"secondary",icon:"pi pi-pencil",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,8,["onClick"])),[[Te,{value:"Edit Name",showDelay:500},void 0,{top:!0}]]):b("",!0),!r(xe)[c.node.key]&&c.node.key!=="new"?X((d(),ce(me,{key:1,onClick:g=>He(c),severity:"secondary",icon:"pi pi-plus",class:"w-fit h-fit p-1",style:{"font-size":"0.2rem"}},null,8,["onClick"])),[[Te,{value:"Add Sub Task",showDelay:500},void 0,{top:!0}]]):b("",!0),r(xe)[c.node.key]||c.node.key=="new"?X((d(),ce(me,{key:2,onClick:g=>Ie(c.node),loading:r(Xe),severity:"secondary",label:c.node.key=="new"?"":"Save",icon:c.node.key=="new"?"pi pi-check":"",class:"p-1 w-fit h-full",style:q(c.node.key=="new"?"font-size: 0.8rem !important; height: fit-content !important;":"")},null,8,["onClick","loading","label","icon","style"])),[[Te,{value:c.node.key!=="new"?"Update Name":"Add Task"},void 0,{top:!0}]]):b("",!0),c.node.key=="new"?X((d(),ce(me,{key:3,onClick:y[22]||(y[22]=g=>Ae()),severity:"secondary",icon:"pi pi-minus",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,512)),[[Te,{value:"Cancel Task",showDelay:500},void 0,{top:!0}]]):b("",!0)])):b("",!0)],40,hl)]),_:1}),_(r(ct),{field:"assignee",header:"Assignee",style:{width:"16%"}},{body:C(c=>[i("div",vl,[(d(!0),h(fe,null,ke(c.node.data.assigneeObj,(g,We)=>(d(),h("span",{key:We,class:"flex justify-content-center assignee-wrapper",style:q({marginLeft:We>0?"-20px":"0",zIndex:10-We})},[g.image?X((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:g.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,pl)),[[Te,{value:`${g.name}`},void 0,{top:!0}]]):X((d(),ce(ue,{key:1,label:g.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:q([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},St(We)])},null,8,["label","style"])),[[Te,{value:`${g.name}`},void 0,{top:!0}]])],4))),128))])]),_:1}),_(r(ct),{field:"status",header:"Status",style:{width:"10%"}},{body:C(c=>[c.node.key!=="new"?(d(),h("div",fl,[i("div",yl,[_(j,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Ft(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":g=>c.node.data.status=g,options:r(p),disabled:!r(G),optionLabel:"name"},{value:C(g=>[g.value?(d(),h("div",_l,[i("div",{title:g.value.name,style:q({color:g.value.color_code,fontWeight:500}),class:"pt-1 status-truncate"},T(g.value.name),13,gl)])):(d(),h("span",wl,T(g.placeholder),1))]),option:C(g=>[i("div",Dl,[i("div",{style:q([{backgroundColor:g.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,T(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):b("",!0)]),_:1}),_(r(ct),{field:"dueDateValue",header:"Due Date",style:{textWrap:"nowrap",width:"9%",padding:"0.75rem 0.5rem"}},{body:C(c=>[c.node.key!=="new"?(d(),h("i",bl)):b("",!0),c.node.key!=="new"?(d(),ce(Q,{key:1,onDateSelect:g=>Xt(g,c),class:pe(["inline-calendar cursor-pointer",c.node.data.dueDateColor==="#087641"&&c.node.data.dueDateValue?"green-calendar":c.node.data.dueDateColor==="#b13a41"&&c.node.data.dueDateValue?"red-calendar":""]),placeholder:c.node.data.dueDateValue?c.node.data.dueDateValue:"--:--"},null,8,["onDateSelect","class","placeholder"])):b("",!0)]),_:1}),_(r(ct),{field:"priority",header:"Priority",style:{width:"9%"}},{body:C(c=>[c.node.key!=="new"?(d(),h("div",kl,[i("div",Tl,[Cl,_(j,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Nt(c.node.data.priority,c.node.key),modelValue:c.node.data.priority,"onUpdate:modelValue":g=>c.node.data.priority=g,options:r(Ot),disabled:!r(G),optionLabel:"name",placeholder:"Set Priority"},{value:C(g=>[g.value?(d(),h("div",El,[g.value.name?(d(),h("div",{key:0,style:q({color:g.value.name==="Low"?"#e1aa1e":g.value.name==="Normal"?"#067bea":g.value.name==="High"?"#ff4928":g.value.name==="Urgent"?"crimson":"",fontWeight:500}),class:"pt-1"},T(g.value.name),5)):(d(),h("div",Sl,"-----"))])):(d(),h("span",xl,T(g.placeholder),1))]),option:C(g=>[i("div",Ml,[i("div",null,T(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):b("",!0)]),_:1}),_(r(ct),{field:"action",header:"Action",style:{width:"6%",position:"relative"}},{body:C(c=>[c.node.key!=="new"?(d(),h("div",{key:0,class:"justify-content-start align-items-center webView-action",style:{width:"fit-content"},onMouseover:g=>ft(c.node.key),onMouseleave:g=>at(c.node.key)},[_(ne,{visible:r(Ne)[c.node.key],"onUpdate:visible":g=>r(Ne)[c.node.key]=g,model:kt(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,Vl)):b("",!0),c.node.key!=="new"?(d(),h("div",{key:1,class:"justify-content-start align-items-center tabView-action",style:{width:"fit-content"},onClick:g=>ft(c.node.key),onMouseleave:g=>at(c.node.key)},[_(ne,{visible:r(Ne)[c.node.key],"onUpdate:visible":g=>r(Ne)[c.node.key]=g,model:kt(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,$l)):b("",!0)]),_:1})]),_:1},8,["value","expandedKeys","loading"])):b("",!0),r(A)==="board"?(d(),h("div",Ol,[i("div",Al,[i("div",null,[i("div",Ll,[(d(!0),h(fe,null,ke(t.kanbanTasks,c=>(d(),h("div",{key:c,class:"groupColumnContainer"},[i("div",jl,[i("div",{style:q(`background-color: ${c.statusColor}; `),class:"column-header"},T(c.name)+" - "+T(c.content.length),5),_(r(da),{modelValue:c.content,"onUpdate:modelValue":g=>c.content=g,options:r(ts),disabled:!r(G),class:"draggable scrollbar",itemKey:"name",group:"cardItem",onChange:g=>k(g,c.status)},{item:C(({element:g})=>{var We,D,fs,Ts,Cs,Es;return[i("div",Il,[(d(),h("div",{class:"task-card",style:q(r(S)),key:g.id,onClick:Ce=>w.$emit("handleTaskDetailView",g,c.content,c.name)},[i("div",Wl,[X((d(),h("p",Fl,[ve(T(g.data.name),1)])),[[Te,{value:`${g.data.name}`},void 0,{top:!0}]]),i("div",Ul,[i("div",{class:"status-icon",style:q(`background-color:${g.data.status.color_code}`)},null,4),i("p",Nl,T(g.data.status.name),1)]),((D=(We=g.data)==null?void 0:We.assigneeObj)==null?void 0:D.length)>0?(d(),h("div",Bl,[Yl,i("div",zl,[(d(!0),h(fe,null,ke(g.data.assigneeObj,(Ce,gt)=>(d(),h("span",{key:gt,class:"flex justify-content-center assignee-wrapper",style:q({marginLeft:gt>0?"-20px":"0",zIndex:10-gt})},[Ce.image?X((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Ce.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,Rl)),[[Te,{value:`${Ce.name}`},void 0,{top:!0}]]):X((d(),ce(ue,{key:1,label:Ce.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:q([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},St(gt)])},null,8,["label","style"])),[[Te,{value:`${Ce.name}`},void 0,{top:!0}]])],4))),128))])])):b("",!0),(fs=g.data)!=null&&fs.dueDateValue?(d(),h("div",ql,[Pl,i("p",{style:q(`color: ${g.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},T(g.data.dueDateValue),5)])):b("",!0),(Cs=(Ts=g.data)==null?void 0:Ts.priority)!=null&&Cs.name?(d(),h("div",Kl,[Jl,i("p",Gl,T((Es=g.data.priority)==null?void 0:Es.name),1)])):b("",!0),i("div",{class:"mt-2 flex align-items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-100",style:{"border-radius":"5px"},onClick:Ce=>{Ce.stopPropagation(),r(yt)==g.unique_id?yt.value=null:yt.value=g.unique_id}},[Zl,i("i",{class:pe(`pi ${r(yt)==g.unique_id?"pi-angle-down":"pi-angle-right"}  text-lg`)},null,2),i("p",Ql,T(g.children.length),1)],8,Xl)]),ve(" "+T(g.t_name),1)],12,Hl)),i("div",{class:pe(r(yt)===g.unique_id?"":"hidden")},[(d(!0),h(fe,null,ke(g.children,Ce=>{var gt,Ss,xs,Ms,Vs,$s;return d(),h("div",{key:Ce.unique_id,class:"sub-card",onClick:Mt=>w.$emit("handleTaskDetailView",Ce,c.content,c.name)},[i("p",tn,T(Ce.data.name),1),i("div",sn,[i("div",{class:"status-icon",style:q(`background-color:${Ce.data.status.color_code}`)},null,4),i("p",an,T(Ce.data.status.name),1)]),((Ss=(gt=Ce.data)==null?void 0:gt.assigneeObj)==null?void 0:Ss.length)>0?(d(),h("div",ln,[nn,i("div",on,[(d(!0),h(fe,null,ke(Ce.data.assigneeObj,(Mt,ss)=>(d(),h("span",{key:ss,class:"flex justify-content-center assignee-wrapper",style:q({marginLeft:ss>0?"-20px":"0",zIndex:10-ss})},[Mt.image?X((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Mt.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,rn)),[[Te,{value:`${Mt.name}`},void 0,{top:!0}]]):X((d(),ce(ue,{key:1,label:Mt.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:q([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},St(ss)])},null,8,["label","style"])),[[Te,{value:`${Mt.name}`},void 0,{top:!0}]])],4))),128))])])):b("",!0),(xs=Ce.data)!=null&&xs.dueDateValue?(d(),h("div",dn,[un,i("p",{style:q(`color: ${Ce.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},T(Ce.data.dueDateValue),5)])):b("",!0),(Vs=(Ms=Ce.data)==null?void 0:Ms.priority)!=null&&Vs.name?(d(),h("div",cn,[hn,i("p",mn,T(($s=Ce.data.priority)==null?void 0:$s.name),1)])):b("",!0),i("div",vn,[pn,i("p",fn,T(Ce.children.length),1)])],8,en)}),128))],2)])]}),_:2},1032,["modelValue","onUpdate:modelValue","options","disabled","onChange"])])]))),128))])])])])):b("",!0),r(A)==="calendar"?(d(),h("div",yn,[_(r(Ai),{events:r(ye),"selected-date":new Date().current,"time-from":8*60,"disable-views":["years","year","week"],"active-view":"month","events-on-month-view":"short",style:{height:"600px"}},{event:C(({event:c})=>[i("div",{onClick:g=>ze(c),class:"vuecal__event",style:q({background:c.color}),innerHTML:c.title},null,12,_n)]),_:1},8,["events","selected-date"])])):b("",!0),r(A)==="git"?(d(),h("div",gn,[_(ut,null,{title:C(()=>[ve("Commit List")]),content:C(()=>[_(j,{onChange:le,modelValue:r(Ue),"onUpdate:modelValue":y[24]||(y[24]=c=>K(Ue)?Ue.value=c:null),options:r(ie),optionLabel:"name",placeholder:"Branches",class:"w-full md:w-17rem mb-3 mt-2"},null,8,["modelValue","options"]),i("div",null,[i("div",wn,[r(ee).length>0?(d(),ce(Ke,{key:0,value:r(ee)},{content:C(c=>[i("div",Dn,[i("div",null,[i("div",bn,[kn,i("h6",Tn,T(c.item.author_name),1)]),i("div",null,[i("h6",Cn,"- "+T(c.item.title),1)])]),i("div",En,[i("p",Sn,[i("small",null,T(c.item.authored_date),1)]),i("a",{href:c.item.web_url,target:"_blank",class:"font-small text-end"},[i("small",null,T(c.item.short_id),1)],8,xn)])])]),_:1},8,["value"])):(d(),h("div",Mn,$n))])])]),_:1})])):b("",!0)],64)}}};const Je=t=>(bs("data-v-cfeccfc4"),t=t(),ks(),t),An={class:"field flex flex-column"},Ln=Je(()=>i("label",{for:"name"},[ve("Set Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),jn={class:"field"},In=Je(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),Hn={class:"ql-formats flex justify-content-end mr-0"},Wn={class:"ql-bold"},Fn={class:"ql-italic"},Un={class:"ql-underline"},Nn={class:"ql-strike"},Bn=Je(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),Yn=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),zn=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Rn=Je(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),qn={class:"field"},Pn=Je(()=>i("label",null,"Assignees ",-1)),Kn={class:"field"},Jn=Je(()=>i("label",null,"Tags ",-1)),Gn={class:"field"},Xn=Je(()=>i("label",null,"Due Date ",-1)),Zn={class:"field"},Qn=Je(()=>i("label",null,"Priority ",-1)),eo=Je(()=>i("br",null,null,-1)),to={key:0,class:"text-center",style:{color:"red"}},so={class:"create-btn-wrapper mb-0"},ao={__name:"CreateTask",props:["createTaskTitle","taskId","projects","usersLists","tagsLists"],emits:["closeCreateModal"],setup(t,{emit:e}){const{createTask:a}=Fe(),{isTaskCreated:l,detectDuplicateTask:o}=Dt(Fe()),{createTaskTitle:s,taskId:u,projects:n,usersLists:f,tagsLists:m}=t,p=Jt(),x=v(!1),V=v(u),N=v(!0),H=v(!1),ye=v(!1),se=v(null),J=v(" ");Le(J,Y=>{Y.length===0&&(J.value=" ")});const G=v(null),_e=v(null),E=v(null),oe=v(null),$e=v(!1),Ee=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),je=e,ae=Y=>{if(console.log("test druve"),$e.value)G.value=Y;else{const O=new Date(Y);O.setHours(23,59,0,0),G.value=O}};Le(G,(Y,O)=>{Y&&O&&Y!==O&&($e.value=!0)});const F=async()=>{var Y,O,he;if(x.value=!0,se.value===null)ye.value=!0,x.value=!1;else{ye.value=!1;let ge;if(G.value){const re=new Date(G.value);re.setDate(re.getDate()+1),ge=re.toISOString()}const we={name:se.value,description:J.value,dueDate:ge?new Date(new Date(ge).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,assignees:(Y=_e.value)==null?void 0:Y.map(re=>re.id),tags:(O=E.value)==null?void 0:O.map(re=>re.id),priority:(he=oe.value)==null?void 0:he.name,project_id:n,parent_task_id:u};if(ge){const re=new Date(ge);re.setDate(re.getDate()-1),G.value=re?new Date(re).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(we),o.value===!0?(x.value=!1,p.add({severity:"error",summary:"Error",detail:"Task already exists!",group:"br",life:3e3})):l.value===!0?(x.value=!1,N.value=!1,H.value=!0,se.value=null,je("closeCreateModal",!1),p.add({severity:"success",summary:"Successful",detail:"Task created Successfully",group:"br",life:3e3})):(x.value=!1,p.add({severity:"error",summary:"Error",detail:"Unable to create task!",group:"br",life:3e3}))}};return hs(()=>{const Y=document.getElementById("createTaskName");Pt(()=>{Y&&Y.focus()})}),(Y,O)=>{const he=Bs,ge=Ps,we=ds,re=cs,A=us,L=Kt,de=ms("tooltip");return d(),h("div",null,[_(he,{type:"hidden",modelValue:r(V),"onUpdate:modelValue":O[0]||(O[0]=ie=>K(V)?V.value=ie:null)},null,8,["modelValue"]),i("div",An,[Ln,_(ge,{id:"createTaskName",class:"border-gray-300",modelValue:r(se),"onUpdate:modelValue":O[1]||(O[1]=ie=>K(se)?se.value=ie:null),invalid:Y.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",jn,[In,_(r(rs),{modelValue:r(J),"onUpdate:modelValue":O[2]||(O[2]=ie=>K(J)?J.value=ie:null),editorStyle:"height: 120px"},{toolbar:C(()=>[i("span",Hn,[X(i("button",Wn,null,512),[[de,"Bold",void 0,{bottom:!0}]]),X(i("button",Fn,null,512),[[de,"Italic",void 0,{bottom:!0}]]),X(i("button",Un,null,512),[[de,"Underline",void 0,{bottom:!0}]]),X(i("button",Nn,null,512),[[de,"Strikethrough",void 0,{bottom:!0}]]),Bn,Yn,zn,Rn])]),_:1},8,["modelValue"])]),i("div",qn,[Pn,_(we,{display:"chip",modelValue:r(_e),"onUpdate:modelValue":O[3]||(O[3]=ie=>K(_e)?_e.value=ie:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",Kn,[Jn,_(we,{display:"chip",modelValue:r(E),"onUpdate:modelValue":O[4]||(O[4]=ie=>K(E)?E.value=ie:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",Gn,[Xn,_(re,{modelValue:r(G),"onUpdate:modelValue":O[5]||(O[5]=ie=>K(G)?G.value=ie:null),class:"w-full clndr",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:O[6]||(O[6]=ie=>ae(ie))},null,8,["modelValue"])]),i("div",Zn,[Qn,_(A,{modelValue:r(oe),"onUpdate:modelValue":O[7]||(O[7]=ie=>K(oe)?oe.value=ie:null),options:r(Ee),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),eo,r(ye)?(d(),h("p",to,"Please add task name")):b("",!0),i("div",so,[_(L,{label:"Save",icon:"pi pi-check",text:"",onClick:F,loading:r(x)},null,8,["loading"])])])}}},io=Ds(ao,[["__scopeId","data-v-cfeccfc4"]]);const Ge=t=>(bs("data-v-eeee4ee3"),t=t(),ks(),t),lo={class:"position-relative d-flex flex-column justify-content-between w-100 modal-container"},no={class:"field flex flex-column"},oo=Ge(()=>i("label",{for:"name"},[ve("Edit Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),ro={class:"field"},uo=Ge(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),co={class:"ql-formats flex justify-content-end mr-0"},ho={class:"ql-bold"},mo={class:"ql-italic"},vo={class:"ql-underline"},po={class:"ql-strike"},fo=Ge(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),yo=Ge(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),_o=Ge(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),go=Ge(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),wo={class:"field"},Do=Ge(()=>i("label",null,"Assignees",-1)),bo={class:"field"},ko=Ge(()=>i("label",null,"Tags",-1)),To={class:"field"},Co=Ge(()=>i("label",null,"Due Date",-1)),Eo={class:"field"},So=Ge(()=>i("label",null,"Priority",-1)),xo=Ge(()=>i("br",null,null,-1)),Mo={key:0,class:"text-center",style:{color:"red"}},Vo={class:"edt-btn-wrapper mb-0"},$o={__name:"EditTask",props:["singleTask","usersLists","tagsLists","projects"],emits:["closeEditModal"],setup(t,{emit:e}){var Y,O,he,ge,we,re;const{editTask:a}=Fe(),{isTaskEdited:l,detectDuplicateTask:o}=Dt(Fe()),{singleTask:s,usersLists:u,tagsLists:n,projects:f}=t,m=Jt(),p=v(!1),x=v((Y=s==null?void 0:s.data)==null?void 0:Y.name),V=v(((O=s==null?void 0:s.data)==null?void 0:O.description)||" "),N=v(!1);Le(V,A=>{A.length===0&&(V.value=" "),N.value=!0});const H=v((he=s==null?void 0:s.data)!=null&&he.dueDate?new Date(s.data.dueDate).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),ye=v(!1),se=v(null);se.value=(ge=s==null?void 0:s.data)!=null&&ge.assigneeObj?(we=s==null?void 0:s.data)==null?void 0:we.assigneeObj.map(A=>({id:A.id,name:A.name})):"";const J=v(!1);Le(se,A=>{J.value=!0});const G=v((re=s==null?void 0:s.data)==null?void 0:re.tagsObj),_e=v(!1);Le(G,A=>{_e.value=!0});const E=v(null);E.value=s.data.priority?{name:s.data.priority.name,code:s.data.priority.code}:"";const oe=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),$e=v(!1),Ee=e,je=A=>{if(console.log("test druve"),ye.value)H.value=A;else{const L=new Date(A);L.setHours(23,59,0,0),H.value=L}};Le(H,(A,L)=>{A&&L&&A!==L&&(ye.value=!0)});const ae=v(H.value);Le(H,(A,L)=>{A&&(ae.value=new Date(A).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const F=async()=>{var A;if(p.value=!0,x.value===null)$e.value=!0,p.value=!1;else{$e.value=!1;let L;if(H.value){const Se=new Date(H.value);Se.setDate(Se.getDate()+1),L=Se.toISOString()}const de=new Date((A=s==null?void 0:s.data)==null?void 0:A.dueDate).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),ie={id:s.key,name:x.value,...N.value===!0?{description:V.value}:{},priority:E.value.name,...ae.value!==de?{dueDate:L?new Date(new Date(L).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...J.value===!0?{assignees:se.value.map(Se=>Se.id)}:{},..._e.value===!0?{tags:G.value.map(Se=>Se.id)}:{},project_id:f};if(L){const Se=new Date(L);Se.setDate(Se.getDate()-1),H.value=Se?new Date(Se).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(ie),o.value===!0?(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Cannnot edit, edited task name already exists!",group:"br",life:3e3})):l.value===!0?(p.value=!1,Ee("closeEditModal",!1),Ee("visibleEdit","visibleEdit"),m.add({severity:"success",summary:"Successful",detail:"Task updated Successfully",group:"br",life:3e3}),N.value===!0&&(N.value=!1,console.log("isDescriptionEdited Flagged")),J.value===!0&&(J.value=!1,console.log("isAsigneeEdited Flagged")),_e.value===!0&&(_e.value=!1,console.log("isTagsEdited Flagged"))):(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Unable to update task!",group:"br",life:3e3}))}};return hs(()=>{const A=document.getElementById("editTaskName");Pt(()=>{A&&A.focus()})}),(A,L)=>{const de=Ps,ie=ds,Se=cs,Ue=us,ee=Kt,M=ms("tooltip");return d(),h("div",lo,[i("div",null,[i("div",no,[oo,_(de,{id:"editTaskName",class:"border-gray-300",modelValue:r(x),"onUpdate:modelValue":L[0]||(L[0]=le=>K(x)?x.value=le:null),rows:"3",cols:"15",invalid:A.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",ro,[uo,_(r(rs),{modelValue:r(V),"onUpdate:modelValue":L[1]||(L[1]=le=>K(V)?V.value=le:null),editorStyle:"height: 120px"},{toolbar:C(()=>[i("span",co,[X(i("button",ho,null,512),[[M,"Bold",void 0,{bottom:!0}]]),X(i("button",mo,null,512),[[M,"Italic",void 0,{bottom:!0}]]),X(i("button",vo,null,512),[[M,"Underline",void 0,{bottom:!0}]]),X(i("button",po,null,512),[[M,"Strikethrough",void 0,{bottom:!0}]]),fo,yo,_o,go])]),_:1},8,["modelValue"])]),i("div",wo,[Do,_(ie,{display:"chip",modelValue:r(se),"onUpdate:modelValue":L[2]||(L[2]=le=>K(se)?se.value=le:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",bo,[ko,_(ie,{display:"chip",modelValue:r(G),"onUpdate:modelValue":L[3]||(L[3]=le=>K(G)?G.value=le:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",To,[Co,_(Se,{modelValue:r(H),"onUpdate:modelValue":L[4]||(L[4]=le=>K(H)?H.value=le:null),class:"w-full",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:L[5]||(L[5]=le=>je(le))},null,8,["modelValue"])]),i("div",Eo,[So,_(Ue,{modelValue:r(E),"onUpdate:modelValue":L[6]||(L[6]=le=>K(E)?E.value=le:null),options:r(oe),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),xo,r($e)?(d(),h("p",Mo,"Please add/fill/check up all the fields")):b("",!0),i("div",Vo,[_(ee,{label:"Update",icon:"pi pi-check",text:"",onClick:F,loading:r(p)},null,8,["loading"])])])])}}},Oo=Ds($o,[["__scopeId","data-v-eeee4ee3"]]),Ns=la("fileUpload",()=>{const t=v(!1),e=v(!1),a=v(!1);async function l(s,u){e.value=!0;const n=new FormData;n.append("task_id",s),n.append("attachments",u);const f=vt("token");try{const m=await fetch("https://pbe.singularitybd.net/api/v1/tasks/attachment-upload",{method:"POST",headers:{Authorization:`Bearer ${f.value}`},body:n});if(!m.ok)throw new Error("Network response was not ok");const p=await m.json();console.log("upload data =>",p),(p==null?void 0:p.user_message)==="success"?t.value=!0:t.value=!1,e.value=!1}catch(m){console.error("Error uploading file:",m),t.value=!1,e.value=!1}}async function o(s){const u=vt("token");try{const n=await fetch(`https://pbe.singularitybd.net/api/v1/tasks/attachment-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${u.value}`}});if(!n.ok)throw new Error("Network response was not ok");const f=await n.json();console.log("delete data =>",f),(f==null?void 0:f.user_message)==="success"?a.value=!0:a.value=!1}catch(n){console.error("Error uploading file:",n),a.value=!1}}return{fileUpload:l,fileDelete:o,isFileUpload:t,isLoading:e,isFileDeleted:a}});const Ao={class:"grid"},Lo={class:"col-12 flex justify-content-between"},jo={class:"m-0 detail-task-name cursor-pointer"},Io={class:"flex gap-1"},Ho=i("h5",{class:"m-0 ml-2"},"Activity",-1),Wo={class:"col-12 lg:col-7"},Fo={class:"task-wrapper card"},Uo={class:"task-det no-scrollbar"},No={class:"flex justify-content-between gap-2 flex-wrap align-items-center"},Bo={class:"w-full lg:w-fit"},Yo={class:"flex mt-2 justify-content-between gap-2 align-items-center task-detail-wrapper"},zo=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-calendar"}),i("p",{class:"text-nowrap"},"Due Date:")],-1),Ro={class:"flex justify-content-between gap-2 align-items-centertask-detail-wrapper mt-3 mb-3"},qo=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-tags"}),i("p",null,"Tags:")],-1),Po={class:"w-full lg:w-fit"},Ko={class:"flex justify-content-between gap-2 align-items-center task-detail-wrapper"},Jo=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",null,"Status:")],-1),Go={class:"flex mt-4 mb-3 justify-content-start gap-6 align-items-center task-detail-wrapper"},Xo=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-stopwatch"}),i("p",{class:"text-nowrap"},"Track Time:")],-1),Zo={class:"clock-wrapper relative"},Qo={class:"border-round px-2 pt-3 pb-2"},er={class:"flex justify-content-center align-items-center gap-3 manual-wrapper -mt-1"},tr=i("label",{for:"hours",class:"block mb-2 text-xs"},"Hours",-1),sr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),ar=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),ir=i("label",{for:"minutes",class:"block mb-2 text-xs"},"Minutes",-1),lr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),nr=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),or={class:"flex justify-content-center align-items-center",style:{"margin-top":"0.49rem !important"}},rr=i("div",null,null,-1),dr={class:"flex justify-content-between gap-2"},ur=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-user"}),i("p",null,"Assignee:")],-1),cr={class:"field mt-3 flex flex-column"},hr=i("div",{class:"flex justify-content-start gap-2 align-items-center mb-1 task-detail-property"},[i("span",{class:"pi pi-sliders-h"}),i("p",null,"Description:")],-1),mr={class:"ql-formats flex justify-content-end mr-0"},vr={class:"ql-bold"},pr={class:"ql-italic"},fr={class:"ql-underline"},yr={class:"ql-strike"},_r=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),gr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),wr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),Dr=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),br={key:0,class:"flex justify-content-end"},kr={class:"m-0"},Tr={class:"my-3 attach-sec flex align-items-center justify-content-start gap-2",style:{"overflow-x":"scroll"}},Cr={key:0,class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-5 attch-w",style:{"background-color":"#f7fafc"}},Er=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),Sr=i("div",{class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},[i("div",{class:"text-xs"},"asdasd....asdme.extng"),i("div",{class:"text-xs"},"9 MAy, 2024")],-1),xr=[Er,Sr],Mr=["href"],Vr=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),$r={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Or={class:"text-xs"},Ar={class:"text-xs"},Lr=["href"],jr=["src"],Ir={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Hr={class:"text-xs"},Wr={class:"text-xs"},Fr=["href"],Ur=i("div",{class:"pi pi-video text-6xl attach-icon"},null,-1),Nr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Br={class:"text-xs"},Yr={class:"text-xs"},zr=["href"],Rr=i("div",{class:"pi pi-file-pdf text-6xl text-danger attach-icon"},null,-1),qr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Pr={class:"text-xs"},Kr={class:"text-xs"},Jr=["href"],Gr=i("div",{class:"pi pi-file-word text-6xl text-blue attach-icon"},null,-1),Xr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Zr={class:"text-xs"},Qr={class:"text-xs"},ed=["href"],td=i("div",{class:"pi pi-file-excel text-6xl attach-icon",style:{color:"#04aa6d"}},null,-1),sd={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},ad={class:"text-xs"},id={class:"text-xs"},ld=["onClick"],nd=i("i",{class:"pi pi-times text-xs text-white"},null,-1),od=[nd],rd={key:0,class:"flex gap-2 w-full justify-content-center"},dd=i("p",{class:"text-center"},"No Data found...",-1),ud=["onClick"],cd={class:"action-dropdown-det"},hd={class:"action-dropdown-content-det"},md={class:"card"},vd={class:"flex justify-content-start align-items-center task-detail-wrapper"},pd=i("div",{class:"flex justify-content-start gap-2 align-items-center bounce-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",{class:"text-nowrap"},"Bounce Status:")],-1),fd={class:"col-12 lg:col-5"},yd={class:"comment-wrapper card no-scrollbar"},_d={class:"comments no-scrollbar"},gd={class:"my-2 text-surface-800"},wd={key:0},Dd=["innerHTML"],bd={class:"my-2 text-surface-800"},kd={class:"flex justify-content-start align-items-center"},Td=["src"],Cd={class:"text-lg"},Ed={key:0,class:"flex justify-content-start my-2"},Sd=["href"],xd=i("div",{class:"pi pi-file"},null,-1),Md={class:"attach-detail flex flex-column justify-content-center align-items-center"},Vd={class:"text-xs"},$d=["innerHTML"],Od={style:{"line-height":"0"},class:"pb-1 float-right mt-3 mb-2"},Ad={key:0,class:"text-sm font-semibold tracking-wide leading-3 bg-gray-300 px-3 py-2 flex align-itens-center mb-1 relative"},Ld=i("span",{class:"pi pi-file-import mr-2"},null,-1),jd=i("i",{class:"pi pi-times"},null,-1),Id=[jd],Hd={class:"ql-formats flex justify-content-end mr-0"},Wd={class:"ql-bold"},Fd={class:"ql-italic"},Ud={class:"ql-underline"},Nd={class:"ql-strike"},Bd=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),Yd=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),zd=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),Rd=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),qd={__name:"TaskDetail",props:["usersLists","tagsLists","projID"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask","updateTaskTable"],setup(t,{emit:e}){var Xt,Zt,St,Qt,es,ts;const a=qs(),{fileUpload:l,fileDelete:o}=Ns(),{isFileUpload:s,isLoading:u,isFileDeleted:n}=Dt(Ns()),{getTaskTimerData:f,setManualTime:m,storeTaskTimer:p}=Is();Dt(Is());const{editTask:x,addTaskComment:V,getTaskDetails:N,getSingleProject:H}=Fe(),{isTaskEdited:ye,isTaskCommentCreated:se,singleTaskComments:J,subTasks:G,taskStatus:_e,taskDetails:E,taskActivity:oe}=Dt(Fe());localStorage.setItem("taskDetailID",JSON.stringify(E.value.id));const{usersLists:$e,tagsLists:Ee,projID:je}=t,ae=e,F=Jt(),Y=v(!1),O=v(mt("update_task")),he=v(mt("edit_bounce")),ge=v(mt("create_task")),we=v(null);we.value=(Zt=(Xt=E.value)==null?void 0:Xt.assignee)==null?void 0:Zt.map(S=>({id:S.id,name:S.name}));const re=v(!1);Le(we,S=>{re.value=!0});const A=v((Qt=(St=E.value)==null?void 0:St.tags)==null?void 0:Qt.map(S=>({id:S.id,name:S.name}))),L=v(!1);Le(A,S=>{L.value=!0});const de=v((es=E.value)!=null&&es.due_date?new Date(E.value.due_date).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),ie=v(!1),Se=S=>{if(console.log("test druve"),ie.value)de.value=S;else{const k=new Date(S);k.setHours(23,59,0,0),de.value=k}};Le(de,(S,k)=>{S&&k&&S!==k&&(ie.value=!0)});const Ue=v(de.value);Le(de,(S,k)=>{S&&(Ue.value=new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const ee=v(),M=na(),le=v(null),Me=v(null),Ot=v(!1),tt=v(!1),Ne=async S=>{var z,R;tt.value=!0;let k;if(le.value>0||Me.value>0){k=le.value*3600+Me.value*60,console.log("totalSeconds",k);const Z=await m((z=E.value)==null?void 0:z.id,k);(Z==null?void 0:Z.code)===200?(await N((R=E.value)==null?void 0:R.id),tt.value=!1,F.add({severity:"success",summary:"Duration Added",detail:`Duration: ${le.value?le.value:0} hours and ${Me.value?Me.value:0} minutes`,group:"br",life:3e3}),le.value=null,Me.value=null,S()):(tt.value=!1,F.add({severity:"error",summary:"Error",detail:"Unable to add duration",group:"br",life:3e3})),console.log("responseData",Z)}else tt.value=!1,F.add({severity:"error",summary:"Error",detail:"Please add duration",group:"br",life:3e3});k=null},bt=S=>{var k;console.log(S.detail),S.detail===3&&((k=E.value)==null?void 0:k.is_timer_start)==="false"&&M.require({target:S.currentTarget,group:"headless",message:"Set task duration:",accept:()=>{F.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{}})},ot=v("00:00:00");let Be=null;const xe=v(!1),Ye=async()=>{var S,k,z,R,Z,P,B,He,Re,Ae;if(E.value.id,xe.value=!0,((S=E.value)==null?void 0:S.is_timer_start)==="false"){await f("start",(k=E.value)==null?void 0:k.id),await N((z=E.value)==null?void 0:z.id),Xe(),xe.value=!1,localStorage.setItem("storeTaskID",JSON.stringify((R=E.value)==null?void 0:R.id)),localStorage.setItem("storeTaskProjectID",JSON.stringify(Number(je))),localStorage.setItem("storeTaskSpaceID",JSON.stringify((Z=E.value)==null?void 0:Z.project.space_id)),localStorage.setItem("storeTaskCompanyID",JSON.stringify((P=E.value)==null?void 0:P.project.company_id)),localStorage.setItem("storeTaskTimerStartTime",JSON.stringify(E.value.taskTimer.start_time));let lt={task_id:E.value.id,project_id:je,space_id:E.value.project.space_id,company_id:E.value.project.company_id,timerStartTime:E.value.taskTimer.start_time};await p(lt),F.add({severity:"success",summary:"Task Timer",detail:"Timer Started",group:"br",life:3e3}),await H(je)}else await f("stop",(B=E.value)==null?void 0:B.id,(Re=(He=E.value)==null?void 0:He.taskTimer)==null?void 0:Re.id),await N((Ae=E.value)==null?void 0:Ae.id),pt(),xe.value=!1,localStorage.removeItem("storeTaskID"),localStorage.removeItem("storeTaskProjectID"),localStorage.removeItem("storeTaskSpaceID"),localStorage.removeItem("storeTaskCompanyID"),localStorage.removeItem("storeTaskTimerStartTime"),await p({task_id:null,project_id:null,space_id:null,company_id:null}),F.add({severity:"success",summary:"Task Timer",detail:"Timer Stopped",group:"br",life:3e3}),await H(je)},Xe=()=>{E.value.id,console.log("taskDetails.value.taskTimer.start_time",E.value.taskTimer.start_time);const S=new Date(E.value.taskTimer.start_time).getTime();Be=setInterval(()=>{const k=Math.floor((Date.now()-S)/1e3);ot.value=Ht(k)},1e3)},pt=()=>{clearInterval(Be),ot.value=Ht(E.value.total_duration)},U=v([{is_bounce:"No"},{is_bounce:"Yes"}]),Ve=v(),ze=v(((ts=E.value)==null?void 0:ts.description)||" "),st=v(!1);Le(ze,S=>{S.length===0&&(ze.value=" "),st.value=!0});const Ie=v(null),ft=v(),at=v(!0),kt=v(!1),At=()=>{kt.value=!0,at.value=!1},Lt=()=>{kt.value=!1,at.value=!0},jt=async()=>{var S;if(Ie.value===null||Ie.value===""){F.add({severity:"warn",summary:"Warn",detail:"Comment required",group:"br",life:3e3});return}Y.value=!0,await V((S=E.value)==null?void 0:S.id,Ie.value,it.value),se.value===!0?(F.add({severity:"success",summary:"Successful",detail:"Comment added Successfully",group:"br",life:3e3}),Ie.value=null,Y.value=!1,it.value=null):(F.add({severity:"error",summary:"Error",detail:"Unable to add comment",group:"br",life:3e3}),Y.value=!1)},It=S=>{const k=new Date(S),R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][k.getMonth()],Z=k.getDate(),P=k.getFullYear().toString().substr(-2),B=k.getHours(),He=k.getMinutes(),Re=B>=12?"PM":"AM",Ae=B%12||12,lt=He<10?"0"+He:He;return`${Z} ${R}'${P}, ${Ae}:${lt}${Re}`},Tt=async()=>{var R,Z;let S;if(de.value){const P=new Date(de.value);P.setDate(P.getDate()+1),S=P.toISOString()}const k=new Date((R=E.value)==null?void 0:R.due_date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),z={id:(Z=E.value)==null?void 0:Z.id,...st.value===!0?{description:ze.value}:{},project_id:je,...Ue.value!==k?{dueDate:S?new Date(new Date(S).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...re.value===!0?{assignees:we.value.map(P=>P.id)}:{},...L.value===!0?{tags:A.value.map(P=>P.id)}:{}};if(S){const P=new Date(S);P.setDate(P.getDate()-1),de.value=P?new Date(P).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await x(z),ye.value===!0?(F.add({severity:"success",summary:"Successful",detail:"Task detail updated",group:"br",life:3e3}),ft.value=null,st.value===!0&&(st.value=!1,console.log("isDescriptionEdited Flagged")),re.value===!0&&(re.value=!1,console.log("isAsigneeEdited Flagged")),L.value===!0&&(L.value=!1,console.log("isTagsEdited Flagged"))):F.add({severity:"error",summary:"Error",detail:"Unable to upadte task detail",group:"br",life:3e3})},Ze=v(null),yt=S=>{Ze.value=S.target.files[0]},vs=async()=>{var S,k;Ze.value&&console.log("file =>",Ze.value),await l((S=E.value)==null?void 0:S.id,Ze.value),s.value===!0?(F.add({severity:"success",summary:"Successfull",detail:"File Upload successfully!",group:"br",life:3e3}),N((k=E.value)==null?void 0:k.id),document.getElementById("attachInput").value=null,Ze.value=null):F.add({severity:"error",summary:"Error",detail:"Unable to upload file!",group:"br",life:3e3})},Oe=S=>{const k=["jpg","JPG","jpeg","png","gif","bmp","svg","webp","ico","tiff","tif","heic","heif"],z=["mp4","avi","flv","wmv","mov","3gp","mkv"],R=["pdf","PDF","ppt","pptx"],Z=["doc","docx","rtf"],P=["xls","xlsx","csv"];return k.some(B=>S.endsWith("."+B))?"image":z.some(B=>S.endsWith("."+B))?"video":R.some(B=>S.endsWith("."+B))?"pdf":Z.some(B=>S.endsWith("."+B))?"word":P.some(B=>S.endsWith("."+B))?"excel":"file"};hs(async()=>{var z,R;await N((z=E.value)==null?void 0:z.id);const S={name:E.value.status_name,code:E.value.status};ee.value=S;const k={is_bounce:E.value.is_bounce};Ve.value=k,((R=E.value)==null?void 0:R.is_timer_start)==="true"&&Xe()});async function Ct(S){var k,z,R;try{const Z=vt("token"),{data:P,pending:B}=await ls(`${a.public.apiUrl}/tasks/update/${(k=E.value)==null?void 0:k.id}`,{method:"POST",headers:{Authorization:`Bearer ${Z.value}`},body:{status:S.code}},"$nwfJLeTGBC");((z=P.value)==null?void 0:z.app_message)==="success"?(N((R=E.value)==null?void 0:R.id),F.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),ae("updateTaskTable")):F.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(Z){console.error("Error fetching data:",Z)}}async function Et(S){var k,z,R;try{const Z=vt("token"),{data:P,pending:B}=await ls(`${a.public.apiUrl}/tasks/update/${(k=E.value)==null?void 0:k.id}`,{method:"POST",headers:{Authorization:`Bearer ${Z.value}`},body:{is_bounce:S.is_bounce}},"$np1kf0qdb3");console.log("dataBO",P),((z=P.value)==null?void 0:z.app_message)==="success"?(N((R=E.value)==null?void 0:R.id),F.add({severity:"success",summary:"Successfull",detail:"Bounce Status Changed",group:"br",life:3e3})):F.add({severity:"error",summary:"Error",detail:"Unable to change bounce status",group:"br",life:3e3})}catch(Z){console.error("Error fetching data:",Z)}}const Qe=S=>{const z=S.split("/");return z[z.length-1]},rt=S=>{const k=["Jan","Feb","Mar","Apr","MAy","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],z=S,R=new Date(z),Z={year:"numeric",month:"long",day:"numeric"},B=R.toLocaleDateString("en-US",Z).split(" "),He=k.indexOf(B[0]);return He!==-1&&(B[0]=k[He]),B.join(" ")};function Ht(S){const k=Math.floor(S/3600).toString().padStart(2,"0"),z=Math.floor(S%3600/60).toString().padStart(2,"0"),R=(S%60).toString().padStart(2,"0");return`${k}:${z}:${R}`}const ps=async S=>{var k;await o(S),n.value===!0?(F.add({severity:"success",summary:"Successful",detail:"File Deleted successfully!",group:"br",life:3e3}),N((k=E.value)==null?void 0:k.id)):F.add({severity:"error",summary:"Error",detail:"Unable to delete file!",group:"br",life:3e3})},_t=v(null),it=v(null),Wt=v(""),Ft=S=>{it.value=S.target.files[0],Wt.value=it.value?it.value.name:""},Ut=()=>{_t.value.click()},Nt=async()=>{it.value=null},Bt=async()=>{var Z;const S=vt("token"),{data:k,pending:z,error:R}=await ls(`${a.public.apiUrl}/tasks/share/${(Z=E.value)==null?void 0:Z.id}`,{method:"GET",headers:{Authorization:`Bearer ${S.value}`}},"$yuqoLxhdIO");if(R.value){F.add({severity:"error",summary:"Error",detail:"Failed to share",life:3e3});return}else{const P=document.createElement("textarea");P.value=k.value.shared_web_link,document.body.appendChild(P),P.select(),document.execCommand("copy"),document.body.removeChild(P),F.add({severity:"success",summary:"Share successful",detail:"Shared link copied",group:"br",life:3e3});return}};return(S,k)=>{var Q,me,dt,Pe,xt;const z=ua,R=ds,Z=us,P=ca,B=Kt,He=ha,Re=ma,Ae=ct,lt=zs,w=va,y=ws,I=Ys,j=ms("tooltip");return d(),h("div",Ao,[i("div",Lo,[i("h5",jo,T(r(E).name),1),i("div",Io,[X(i("span",{onClick:Bt,class:"pi pi-share-alt my-auto cursor-pointer ml-2 share-btn"},null,512),[[j,{value:"Share Task"},void 0,{top:!0}]]),Ho])]),i("div",Wo,[i("div",null,[i("div",Fo,[i("div",Uo,[i("form",{onSubmit:ht(Tt,["prevent"]),class:"mt-2 task-detail ml-2"},[i("div",No,[i("div",Bo,[i("div",Yo,[zo,_(z,{class:"input-fields"},{default:C(()=>[_(r(cs),{style:"width: 164.94px; border-radius:7px;height:36px",modelValue:r(de),"onUpdate:modelValue":k[0]||(k[0]=$=>K(de)?de.value=$:null),placeholder:"Set Due Date",showTime:"",hourFormat:"12",onDateSelect:k[1]||(k[1]=$=>Se($))},null,8,["modelValue"])]),_:1})]),i("div",Ro,[qo,_(z,{class:"input-fields",style:{width:"168px"}},{default:C(()=>[_(R,{display:"chip",modelValue:r(A),"onUpdate:modelValue":k[2]||(k[2]=$=>K(A)?A.value=$:null),filter:"",resetFilterOnHide:"",options:t.tagsLists,optionLabel:"name",placeholder:"Select Tags",class:"w-full"},null,8,["modelValue","options"])]),_:1})])]),i("div",Po,[i("div",Ko,[Jo,_(Z,{onChange:k[3]||(k[3]=$=>Ct(r(ee))),modelValue:r(ee),"onUpdate:modelValue":k[4]||(k[4]=$=>K(ee)?ee.value=$:null),options:r(_e),optionLabel:"name",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["modelValue","options"])]),i("div",Go,[Xo,i("div",Zo,[_(He,{close:r(Ot),group:"headless"},{container:C(({message:$,acceptCallback:ut,rejectCallback:ue})=>[i("div",Qo,[i("div",er,[i("div",null,[tr,_(P,{modelValue:r(le),"onUpdate:modelValue":k[5]||(k[5]=ne=>K(le)?le.value=ne:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:23,id:"hours"},{incrementbuttonicon:C(()=>[sr]),decrementbuttonicon:C(()=>[ar]),_:1},8,["modelValue"])]),i("div",null,[ir,_(P,{modelValue:r(Me),"onUpdate:modelValue":k[6]||(k[6]=ne=>K(Me)?Me.value=ne:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:59,id:"minutes"},{incrementbuttonicon:C(()=>[lr]),decrementbuttonicon:C(()=>[nr]),_:1},8,["modelValue"])])]),i("div",or,[_(B,{icon:"pi pi-check px-2 py-0 text-sm",label:"",class:"border-none w-full mx-3",loading:r(tt),onClick:ne=>Ne(ue),size:"small"},null,8,["loading","onClick"])])])]),_:1},8,["close"]),X(_(B,{loading:r(xe),class:"clock-btn",onClick:Ye,icon:((Q=r(E))==null?void 0:Q.is_timer_start)=="true"?"pi pi-stop":"pi pi-play",severity:((me=r(E))==null?void 0:me.is_timer_start)=="true"?" stop-color":"",rounded:"","aria-label":"Filter"},null,8,["loading","icon","severity"]),[[j,{value:((dt=r(E))==null?void 0:dt.is_timer_start)=="true"?"Stop":"Start"},void 0,{top:!0}]]),i("div",{class:"text-sm absolute",onClick:k[7]||(k[7]=$=>bt($))},T(((Pe=r(E))==null?void 0:Pe.is_timer_start)=="true"?r(ot):Ht((xt=r(E))==null?void 0:xt.total_duration)),1)]),rr])])]),i("div",dr,[ur,_(z,{style:{width:"100%"},class:"input-fields"},{default:C(()=>[_(R,{display:"chip",modelValue:r(we),"onUpdate:modelValue":k[8]||(k[8]=$=>K(we)?we.value=$:null),filter:"",resetFilterOnHide:"",options:t.usersLists,optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),_:1})]),i("div",cr,[hr,_(r(rs),{modelValue:r(ze),"onUpdate:modelValue":k[9]||(k[9]=$=>K(ze)?ze.value=$:null),editorStyle:"height: 150px",readonly:!r(O)},{toolbar:C(()=>[i("span",mr,[X(i("button",vr,null,512),[[j,"Bold",void 0,{bottom:!0}]]),X(i("button",pr,null,512),[[j,"Italic",void 0,{bottom:!0}]]),X(i("button",fr,null,512),[[j,"Underline",void 0,{bottom:!0}]]),X(i("button",yr,null,512),[[j,"Strikethrough",void 0,{bottom:!0}]]),_r,gr,wr,Dr])]),_:1},8,["modelValue","readonly"])]),r(O)?(d(),h("div",br,[_(B,{type:"submit",label:"Save"})])):b("",!0)],32),_(w,{class:"mt-3"},{default:C(()=>{var $,ut;return[_(Re,{class:"file-upload",header:"Detail"},{default:C(()=>{var ue,ne,et,Ke,Te,c,g,We;return[i("p",kr,"Attachments: "+T((ue=r(E))!=null&&ue.attachments&&((et=(ne=r(E))==null?void 0:ne.attachments)==null?void 0:et.length)>0?(Te=(Ke=r(E))==null?void 0:Ke.attachments)==null?void 0:Te.length:0),1),i("div",Tr,[(c=r(E))!=null&&c.attachments&&((g=r(E))==null?void 0:g.attachments.length)===0?(d(),h("div",Cr,xr)):b("",!0),(d(!0),h(fe,null,ke((We=r(E))==null?void 0:We.attachments,D=>(d(),h("div",{key:D,target:"_blank",class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-2 relative",style:{"background-color":"#f7fafc"}},[Oe(D==null?void 0:D.file)==="file"?(d(),h("a",{key:0,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[Vr,i("div",$r,[i("div",Or,T(Qe(D==null?void 0:D.file)),1),i("div",Ar,T(rt(D==null?void 0:D.created_at)),1)])],8,Mr)):b("",!0),Oe(D==null?void 0:D.file)==="image"?(d(),h("a",{key:1,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 relative",href:D==null?void 0:D.file},[i("img",{src:D==null?void 0:D.file,alt:"",style:{width:"90%",height:"80px","border-radius":"10px","border-top-left-radius":"10px","object-fit":"cover"}},null,8,jr),i("div",Ir,[i("div",Hr,T(Qe(D==null?void 0:D.file)),1),i("div",Wr,T(rt(D==null?void 0:D.created_at)),1)])],8,Lr)):b("",!0),Oe(D==null?void 0:D.file)==="video"?(d(),h("a",{key:2,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[Ur,i("div",Nr,[i("div",Br,T(Qe(D==null?void 0:D.file)),1),i("div",Yr,T(rt(D==null?void 0:D.created_at)),1)])],8,Fr)):b("",!0),Oe(D==null?void 0:D.file)==="pdf"?(d(),h("a",{key:3,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[Rr,i("div",qr,[i("div",Pr,T(Qe(D==null?void 0:D.file)),1),i("div",Kr,T(rt(D==null?void 0:D.created_at)),1)])],8,zr)):b("",!0),Oe(D==null?void 0:D.file)==="word"?(d(),h("a",{key:4,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[Gr,i("div",Xr,[i("div",Zr,T(Qe(D==null?void 0:D.file)),1),i("div",Qr,T(rt(D==null?void 0:D.created_at)),1)])],8,Jr)):b("",!0),Oe(D==null?void 0:D.file)==="excel"?(d(),h("a",{key:5,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[td,i("div",sd,[i("div",ad,T(Qe(D==null?void 0:D.file)),1),i("div",id,T(rt(D==null?void 0:D.created_at)),1)])],8,ed)):b("",!0),i("div",{onClick:fs=>ps(D==null?void 0:D.id),class:"absolute bg-red-500 text-white p-2 flex align-items-center justify-content-center close-btn"},od,8,ld)]))),128))]),r(O)?(d(),h("div",rd,[i("input",{onChange:yt,id:"attachInput",class:"float-right file-up-btn",type:"file",placeholder:"+"},null,32),_(B,{type:"button",loading:r(u),onClick:vs,label:"Upload"},null,8,["loading"])])):b("",!0)]}),_:1}),_(Re,{header:`Sub Tasks ${($=r(G))!=null&&$.length?r(G).length:0}`},{default:C(()=>[r(ge)?X((d(),ce(B,{key:0,icon:"pi pi-plus",label:"Create",onClick:k[10]||(k[10]=ue=>{var ne;return ae("openCreateSpace",(ne=r(E))==null?void 0:ne.id,"sub-task")}),class:"mr-2 sub-create",severity:"secondary"},null,512)),[[j,{value:"Create Sub Task"},void 0,{right:!0}]]):b("",!0),_(lt,{class:"tree-table",value:r(G),lazy:!0,tableProps:{style:{minWidth:"650px"}},style:{overflow:"auto"}},{empty:C(()=>[dd]),default:C(()=>[_(Ae,{class:"cursor-pointer toneS",field:"name",header:"Name",expander:"",style:{width:"45%"}},{body:C(ue=>[X((d(),h("span",{class:"subtaskTitle",onClick:ne=>ae("handleTaskDetailView",ue.node)},[ve(T(ue.node.data.name),1)],8,ud)),[[j,{value:`${ue.node.data.name}`},void 0,{left:!0}]])]),_:1}),_(Ae,{field:"assignee",header:"Assignee",style:{width:"25%"}}),_(Ae,{field:"dueDateValue",header:"Due Date",style:q([{width:"11.5%"},{"text-wrap":"nowrap"}])}),_(Ae,{field:"priority",header:"Priority",style:{width:"10%"}},{body:C(ue=>{var ne,et,Ke;return[i("span",{class:pe(["text-xs",((ne=ue.node.data.priority)==null?void 0:ne.name)==="High"?"text-danger":((et=ue.node.data.priority)==null?void 0:et.name)==="Medium"?"text-warning":"text-success"])},T((Ke=ue.node.data.priority)==null?void 0:Ke.name),3)]}),_:1}),_(Ae,{field:"action",header:"Action"},{body:C(ue=>[i("div",cd,[_(B,{style:{width:"30px",height:"30px","border-radius":"50%"},icon:"pi pi-ellipsis-v",class:"action-dropdown-det-toggle"}),i("div",hd,[_(B,{icon:"pi pi-trash",class:"mr-1 ac-btn dlt-action",severity:"warning",rounded:"",onClick:ne=>ae("confirmDeleteTask",ue.node.key)},null,8,["onClick"]),_(B,{icon:"pi pi-cog",class:"mr-1 ac-btn view-action",severity:"info",onClick:ne=>ae("handleTaskDetailView",ue.node),rounded:""},null,8,["onClick"]),_(B,{icon:"pi pi-pencil",class:"mr-1 ac-btn edit-action",severity:"success",onClick:ne=>ae("handleTaskEdit",ue.node),rounded:""},null,8,["onClick"]),_(B,{icon:"pi pi-plus",class:"ac-btn sub-action",severity:"success",onClick:ne=>ae("openCreateSpace",ue.node.key,"sub-task"),rounded:""},null,8,["onClick"])])])]),_:1})]),_:1},8,["value"])]),_:1},8,["header"]),_(Re,{header:`Bounce ${((ut=r(Ve))==null?void 0:ut.is_bounce)==="Yes"?"1":""}`},{default:C(()=>[i("div",md,[i("div",vd,[pd,_(Z,{onChange:k[11]||(k[11]=ue=>Et(r(Ve))),disabled:!r(he),modelValue:r(Ve),"onUpdate:modelValue":k[12]||(k[12]=ue=>K(Ve)?Ve.value=ue:null),options:r(U),optionLabel:"is_bounce",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["disabled","modelValue","options"])])])]),_:1},8,["header"])]}),_:1})])])])]),i("div",fd,[i("div",null,[i("div",yd,[i("div",_d,[i("div",gd,[r(at)?(d(),ce(B,{key:0,onClick:At,label:"↓  Show More",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})):b("",!0)]),r(kt)?(d(),h("div",wd,[(d(!0),h(fe,null,ke(r(oe),$=>(d(),h("ul",{key:$,style:{"margin-left":"-15px","margin-top":"-6px"}},[i("li",{innerHTML:$.title,style:{"font-size":"smaller !important"}},null,8,Dd)]))),128)),i("div",bd,[_(B,{onClick:Lt,label:"↑ Hide",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})])])):b("",!0),(d(!0),h(fe,null,ke(r(J),$=>(d(),ce(I,{class:"mb-2",key:$.id},{title:C(()=>[i("div",kd,[$.commentator_image?(d(),h("img",{key:0,class:"mr-2",src:$.commentator_image,alt:"",style:{width:"28px",height:"28px","border-radius":"50%"}},null,8,Td)):(d(),ce(y,{key:1,label:$.commentator_name.charAt(),class:"mr-2 capitalize",size:"small",style:{"background-color":"gray",color:"#ededed","border-radius":"50%"}},null,8,["label"])),i("p",Cd,T($.commentator_name),1)])]),content:C(()=>[Qe($==null?void 0:$.file)?(d(),h("div",Ed,[i("a",{href:$==null?void 0:$.file,target:"_blank",class:"bg-gray-200 attachment-wrapper cursor-pointer flex align-items-center px-3 py-3 gap-2 comment-file",style:{"background-color":"#f7fafc"}},[xd,i("div",Md,[i("div",Vd,T(Qe($==null?void 0:$.file)),1)])],8,Sd)])):b("",!0),i("p",{innerHTML:$!=null&&$.comment?$==null?void 0:$.comment:"",class:"m-0 ml-1",style:{"font-size":"0.9rem"}},null,8,$d),i("i",Od,T(It($.time)),1)]),_:2},1024))),128))]),i("form",{onSubmit:ht(jt,["prevent"]),class:"comment-add"},[r(it)?(d(),h("div",Ad,[i("div",null,[Ld,ve(),i("span",null,T(r(Wt)),1)]),i("div",{onClick:Nt,class:"close-comment"},Id)])):b("",!0),i("div",null,[_(r(rs),{class:"mb-2",placeholder:"Add comment",modelValue:r(Ie),"onUpdate:modelValue":k[13]||(k[13]=$=>K(Ie)?Ie.value=$:null),editorStyle:"height: 76px"},{toolbar:C(()=>[i("span",Hd,[X(i("button",Wd,null,512),[[j,"Bold",void 0,{bottom:!0}]]),X(i("button",Fd,null,512),[[j,"Italic",void 0,{bottom:!0}]]),X(i("button",Ud,null,512),[[j,"Underline",void 0,{bottom:!0}]]),X(i("button",Nd,null,512),[[j,"Strikethrough",void 0,{bottom:!0}]]),Bd,Yd,zd,Rd])]),_:1},8,["modelValue"]),i("input",{class:"hidden",type:"file",ref_key:"fileInput",ref:_t,onChange:Ft},null,544),_(B,{icon:"pi pi-cloud-upload",onClick:Ut,"aria-label":"Filter"}),_(B,{class:"ml-2",type:"submit",icon:"pi pi-plus",label:"Add",loading:r(Y)},null,8,["loading"])])],32)])])])])}}};const Gt=t=>(bs("data-v-efb466c3"),t=t(),ks(),t),Pd={class:"card"},Kd={class:"d-flex create-space-btn-wrapper mb-3 mr-2"},Jd={class:"breadCrumWrap"},Gd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Xd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Zd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Qd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),eu={class:"text cursor-pointer"},tu={class:"inline-flex align-items-center justify-content-center gap-2"},su={class:"white-space-nowrap"},au=Gt(()=>i("p",null,"Are you sure you want to delete?",-1)),iu={__name:"index",setup(t){const e=v(mt("read_task")),a=Fe(),l=Fe(),{getSingleProject:o,deleteTask:s,getTaskAssignModalData:u,getTagsAssignModalData:n,getTaskDetails:f}=Fe(),{singleProject:m,isTaskDeleted:p,tasks:x,kanbanTasks:V,taskDetails:N}=Dt(Fe()),H=v({}),ye=v(!0),se=Jt(),J=v(!1),G=v(null),_e=is().query.task_key,{projects:E}=is().params,oe=v(!1),$e=v(null),Ee=v(null),je=v(null),ae=v([]),F=v([]),Y=v(!1),O=v(!1),he=v(!1),ge=async(ee,M)=>{ee?Ee.value=ee:Ee.value="",M=="sub-task"?je.value="Create Sub Task":je.value="Create Task",oe.value=!0,await u(),ae.value=a.users,await n(),F.value=l.tags},we=async ee=>{G.value=ee,document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const M=document.createElement("div");M.style.position="absolute",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="100%",M.style.backgroundColor="rgba(0, 0, 0, 0)",M.style.zIndex="1000000",document.documentElement.appendChild(M),await u(),ae.value=a.users,await n(),F.value=l.tags,Y.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(M)},re=ee=>{$e.value=ee,O.value=!0},A=async()=>{J.value=!0,await s($e.value,E),p.value===!0?(J.value=!1,se.add({severity:"success",summary:"Successful",detail:"Task Deleted Successfully",group:"br",life:3e3}),O.value=!1):(J.value=!1,se.add({severity:"error",summary:"Error",detail:"Unable to delete task",group:"br",life:3e3}))},L=async ee=>{var le,Me;document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const M=document.createElement("div");M.style.position="absolute",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="100%",M.style.backgroundColor="rgba(0, 0, 0, 0)",M.style.zIndex="100000010",document.documentElement.appendChild(M),he.value&&(he.value=!1),await f(ee.key),await u(),ae.value=a.users,await n(),F.value=l.tags,he.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(M),console.log((Me=(le=N==null?void 0:N.value)==null?void 0:le.project)==null?void 0:Me.name,"taskDetails")};Le(he,ee=>{if(ee===!0)return 0;localStorage.removeItem("taskDetailID")}),(()=>{H.value={global:{value:null,matchMode:ra.CONTAINS}}})();const ie=ee=>{oe.value=ee},Se=ee=>{Y.value=ee},Ue=()=>{o(E)};return Le(()=>is().query.task_key,ee=>{ee&&L({key:ee})}),_e&&L({key:_e}),oa(()=>{ye.value=!1}),(ee,M)=>{var xe,Ye,Xe,pt;const le=Gs,Me=Xs,Ot=On,tt=io,Ne=Oo,bt=ws,ot=qd,Be=Kt;return d(),h("div",Pd,[_(le,{position:"bottom-right",group:"br"}),i("div",Kd,[i("div",Jd,[_(Me,{to:"/",class:"text pi pi-home"}),Gd,_(Me,{to:"/companies",class:"text"},{default:C(()=>[ve("Companies")]),_:1}),Xd,_(Me,{to:`/companies/${(xe=r(m))==null?void 0:xe.company_id}`,class:"text"},{default:C(()=>{var U;return[ve("Company - "+T((U=r(m))==null?void 0:U.company_name),1)]}),_:1},8,["to"]),Zd,_(Me,{to:`/companies/${(Ye=r(m))==null?void 0:Ye.company_id}/spaces/${(Xe=r(m))==null?void 0:Xe.space_id}`,class:"text"},{default:C(()=>{var U;return[ve(" Space - "+T((U=r(m))==null?void 0:U.space_name),1)]}),_:1},8,["to"]),Qd,i("p",eu,"Project - "+T((pt=r(m))==null?void 0:pt.name),1)])]),r(e)?(d(),ce(Ot,{key:0,kanbanTasks:r(V),tasks:r(x),onOpenCreateSpace:ge,onHandleTaskEdit:M[0]||(M[0]=U=>we(U)),onHandleTaskDetailView:M[1]||(M[1]=U=>L(U)),onConfirmDeleteTask:M[2]||(M[2]=U=>re(U))},null,8,["kanbanTasks","tasks"])):b("",!0),_(r(as),{visible:r(oe),"onUpdate:visible":M[4]||(M[4]=U=>K(oe)?oe.value=U:null),modal:"",header:r(je),style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw","330px":"98vw"}},{default:C(()=>[_(tt,{usersLists:r(ae),tagsLists:r(F),taskId:r(Ee),projects:r(E),onCloseCreateModal:M[3]||(M[3]=U=>ie(U))},null,8,["usersLists","tagsLists","taskId","projects"])]),_:1},8,["visible","header"]),_(r(as),{visible:r(Y),"onUpdate:visible":M[6]||(M[6]=U=>K(Y)?Y.value=U:null),modal:"",header:"Edit Task",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:C(()=>[_(Ne,{singleTask:r(G),usersLists:r(ae),tagsLists:r(F),projects:r(E),onCloseEditModal:M[5]||(M[5]=U=>Se(U))},null,8,["singleTask","usersLists","tagsLists","projects"])]),_:1},8,["visible"]),_(r(as),{visible:r(he),"onUpdate:visible":M[10]||(M[10]=U=>K(he)?he.value=U:null),modal:"",header:"Task Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{header:C(()=>{var U,Ve,ze,st,Ie,ft,at;return[i("div",tu,[_(bt,{label:(ze=(Ve=(U=r(N))==null?void 0:U.project)==null?void 0:Ve.space_name)==null?void 0:ze.charAt(0),class:"capitalize p-0",size:"small",style:{"background-color":["#ededed"],color:["#000"],width:["1.4rem"],height:["1.4rem"],text:["12px"]}},null,8,["label"]),i("span",su,[ve(T((Ie=(st=r(N))==null?void 0:st.project)==null?void 0:Ie.space_name)+" / ",1),i("strong",null,T((at=(ft=r(N))==null?void 0:ft.project)==null?void 0:at.name),1)])])]}),default:C(()=>[_(ot,{usersLists:r(ae),tagsLists:r(F),projID:r(E),onOpenCreateSpace:ge,onHandleTaskEdit:M[7]||(M[7]=U=>we(U)),onHandleTaskDetailView:M[8]||(M[8]=U=>L(U)),onConfirmDeleteTask:M[9]||(M[9]=U=>re(U)),onUpdateTaskTable:Ue},null,8,["usersLists","tagsLists","projID"])]),_:1},8,["visible"]),_(r(as),{visible:r(O),"onUpdate:visible":M[12]||(M[12]=U=>K(O)?O.value=U:null),header:" ",style:{width:"25rem"}},{default:C(()=>[au,_(Be,{label:"No",icon:"pi pi-times",text:"",onClick:M[11]||(M[11]=U=>O.value=!1)}),_(Be,{label:"Yes",icon:"pi pi-check",loading:r(J),text:"",onClick:A},null,8,["loading"])]),_:1},8,["visible"])])}}},uc=Ds(iu,[["__scopeId","data-v-efb466c3"]]);export{uc as default};
