import Ie from"./toast.esm.377c0294.js";import te from"./button.esm.d3de2cb4.js";import Ce from"./multiselect.esm.f5deb6e5.js";import Se from"./inputicon.esm.672e8dc6.js";import oe from"./inputtext.esm.d2ed1013.js";import Ne from"./iconfield.esm.cc3a23bc.js";import Le from"./toolbar.esm.182a3c50.js";import Me from"./progressspinner.esm.ce1ddf4f.js";import{a2 as se,$ as l,a4 as ae,a5 as ie,a6 as ce,o as $,b as q,i as t,l as o,u as e,a7 as _,e as P,a8 as ne,a9 as re,q as L,ca as de,c as T,w as I,P as Pe,a as De,s as Be,t as Te}from"./entry.6ba041bf.js";import{u as z,a as fe}from"./cookie.3bc34ce6.js";import{u as ue}from"./fetch.773b5ca7.js";import{_ as Ae}from"./excel-export-icon.842d44a4.js";import Y from"./column.esm.007d60ae.js";import Fe from"./datatable.esm.2c5cef05.js";import _e from"./textarea.esm.e074e7d0.js";import Oe from"./password.esm.6f43a0b5.js";import pe from"./dropdown.esm.301107b0.js";import{a as ee}from"./usePermission.4dbe1b0d.js";import le from"./dialog.esm.626f6ed5.js";import"./portal.esm.b296c789.js";import"./basecomponent.esm.19c83d7f.js";import"./index.esm.1c033539.js";import"./baseicon.esm.f6241ef2.js";import"./index.esm.1c985e6c.js";import"./index.esm.1387be6f.js";import"./index.esm.a4c423a9.js";import"./badge.esm.4bb7f42c.js";import"./index.esm.96bbbac9.js";import"./checkbox.esm.e77e2fea.js";import"./index.esm.d782d6f7.js";import"./index.esm.87fd5dea.js";import"./overlayeventbus.esm.f1a5c88a.js";import"./virtualscroller.esm.9bf0dc15.js";import"./paginator.esm.cee69934.js";import"./index.esm.df0f4f18.js";import"./inputnumber.esm.a0ad6bd1.js";import"./index.esm.143a5e72.js";import"./index.esm.7ee4a4bf.js";import"./index.esm.03d8c592.js";import"./index.esm.9b1be29b.js";import"./index.esm.45008443.js";import"./radiobutton.esm.bf509652.js";import"./index.esm.fcf04c40.js";import"./index.esm.4591863d.js";import"./index.esm.9243c0fb.js";const K=d=>(ne("data-v-c22831e2"),d=d(),re(),d),Re={class:"field"},He=K(()=>t("label",{for:"company"},[L("Name"),t("i",{class:"text-red-400 text-italic"},"*"),L(" >")],-1)),ze={class:"field"},qe=K(()=>t("label",{for:"email"},[L("Email address"),t("i",{class:"text-red-400"},"*")],-1)),je={class:"field"},Ge=K(()=>t("label",{for:"phoneNo"},"Phone ",-1)),Ye={class:"field"},Ke=K(()=>t("label",{for:"company"},"Address ",-1)),Xe={class:"field"},Ze=K(()=>t("label",{for:"company"},[L("Password"),t("i",{class:"text-red-400"},"*")],-1)),Je={class:"field flex flex-column"},Qe=K(()=>t("label",null,[L("Role"),t("i",{class:"text-red-400"},"*")],-1)),We={key:0,style:{color:"red"}},el={class:"create-btn-wrapper mb-0"},ll={__name:"CreateEmployee",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(d,{emit:D}){const F=de(),M=l(d.param.rolesLists),E=l([]),v=ae(),u=l(""),c=l(""),y=l(""),x=l(""),p=l("");l("");const h=l(!1),w=l(!0),b=D,n=l(!1),B=async()=>{var m,a,g;if(n.value=!0,u.value===""||c.value===""||p.value===""||E.value.length===0){h.value=!0,n.value=!1;return}else if(h.value=!1,!h.value){const U=z("token"),{data:k,error:f,pending:V}=await ue(`${F.public.apiUrl}/users/create`,{method:"POST",headers:{Authorization:`Bearer ${U.value}`},body:{name:u.value,email:c.value,address:x.value,phone:y.value,password:p.value,password_confirmation:p.value,role:E.value.name}},"$HYNtwi2ZAs");if(f!=null&&f.value){if(((a=(m=f==null?void 0:f.value)==null?void 0:m.data)==null?void 0:a.code)===422){n.value=!1,v.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=k==null?void 0:k.value)==null?void 0:g.code)===201){n.value=!1,u.value=null,c.value=null,y.value=null,x.value=null,p.value=null,w.value=!1,b("closeCreateModal",!1),v.add({severity:"success",summary:"Success",detail:"Employee created successfully!",group:"br",life:3e3});return}else{n.value=!1,v.add({severity:"error",summary:"Error",detail:"Failed to create employee!",group:"br",life:3e3});return}}};return ie(()=>{const m=document.getElementById("createEmployeeName");ce(()=>{m&&m.focus()})}),(m,a)=>{const g=oe,U=_e,k=Oe,f=pe,V=te;return $(),q("div",null,[t("div",Re,[He,o(g,{id:"createEmployeeName",modelValue:e(u),"onUpdate:modelValue":a[0]||(a[0]=C=>_(u)?u.value=C:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",ze,[qe,o(g,{type:"email",modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=C=>_(c)?c.value=C:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",je,[Ge,o(g,{modelValue:e(y),"onUpdate:modelValue":a[2]||(a[2]=C=>_(y)?y.value=C:null),inputId:"worktype",type:"tel",class:"w-full",maxlength:"14",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",Ye,[Ke,o(U,{modelValue:e(x),"onUpdate:modelValue":a[3]||(a[3]=C=>_(x)?x.value=C:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",Xe,[Ze,o(k,{modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=C=>_(p)?p.value=C:null),placeholder:"Enter password",feedback:!1,invalid:m.confirmPassError,toggleMask:"",class:"w-full",inputClass:"w-full"},null,8,["modelValue","invalid"])]),t("div",Je,[Qe,o(f,{modelValue:e(E),"onUpdate:modelValue":a[5]||(a[5]=C=>_(E)?E.value=C:null),options:e(M),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?($(),q("p",We,"Please fill/check up all the fields")):P("",!0),t("div",el,[o(V,{loading:e(n),label:"Save",icon:"pi pi-check",text:"",onClick:B},null,8,["loading"])])])}}},tl=se(ll,[["__scopeId","data-v-c22831e2"]]);const Q=d=>(ne("data-v-a1134ad4"),d=d(),re(),d),ol={class:"field"},sl=Q(()=>t("label",{for:"company"},[L("Name"),t("i",{class:"text-red-500"},"*")],-1)),al={class:"field"},il=Q(()=>t("label",{for:"email"},[L("Email address"),t("i",{class:"text-red-500"},"*")],-1)),nl={class:"field"},rl=Q(()=>t("label",{for:"worktype"},"Phone",-1)),dl={class:"field"},ul=Q(()=>t("label",{for:"company"},"Address",-1)),cl={class:"field flex flex-column"},pl=Q(()=>t("label",null,[L("Role"),t("i",{class:"text-red-500"},"*")],-1)),ml={key:0,style:{color:"red"}},vl={class:"create-btn-wrappe"},fl={__name:"EditEmployee",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(d,{emit:D}){const F=de(),S=d,M=ae(),E=l(S.param.id),v=l(S.param.name),u=l(S.param.email),c=l(S.param.phone),y=l(S.param.address),x=l(S.param.rolesLists),p=l(S.param.user_type),h=l(!1),w=l(!0),b=D,n=l(!1),B=async()=>{var m,a,g;if(n.value=!0,v.value===""||u.value===""){h.value=!0,n.value=!1;return}else if(h.value=!1,!h.value){const U=z("token"),{data:k,error:f,pending:V}=await ue(`${F.public.apiUrl}/users/update/${E.value}`,{method:"POST",headers:{Authorization:`Bearer ${U.value}`},body:{name:v.value,email:u.value,address:y.value,phone:c.value,role:p.value.name}},"$D8HfpvkorG");if(f!=null&&f.value){if(((a=(m=f==null?void 0:f.value)==null?void 0:m.data)==null?void 0:a.code)===500){n.value=!1,M.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=k==null?void 0:k.value)==null?void 0:g.code)===200){n.value=!1,w.value=!1,b("closeEditModal",!1),M.add({severity:"success",summary:"Success",detail:"Employee Updated successfully!",group:"br",life:3e3});return}else{n.value=!1,M.add({severity:"error",summary:"Error",detail:"Failed to update employee!",group:"br",life:3e3});return}}};return ie(()=>{const m=document.getElementById("editEmployeeName");ce(()=>{m&&m.focus()})}),(m,a)=>{const g=oe,U=_e,k=pe,f=te;return $(),q("div",null,[t("div",ol,[sl,o(g,{id:"editEmployeeName",modelValue:e(v),"onUpdate:modelValue":a[0]||(a[0]=V=>_(v)?v.value=V:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",al,[il,o(g,{type:"email",modelValue:e(u),"onUpdate:modelValue":a[1]||(a[1]=V=>_(u)?u.value=V:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",nl,[rl,o(g,{modelValue:e(c),"onUpdate:modelValue":a[2]||(a[2]=V=>_(c)?c.value=V:null),type:"tel",class:"w-full",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",dl,[ul,o(U,{modelValue:e(y),"onUpdate:modelValue":a[3]||(a[3]=V=>_(y)?y.value=V:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",cl,[pl,o(k,{modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=V=>_(p)?p.value=V:null),options:e(x),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?($(),q("p",ml,"Please fill/check up all the fields")):P("",!0),t("div",vl,[o(f,{label:"Update",icon:"pi pi-check",text:"",onClick:B,loading:e(n)},null,8,["loading"])])])}}},_l=se(fl,[["__scopeId","data-v-a1134ad4"]]);const ye=d=>(ne("data-v-d515e90e"),d=d(),re(),d),yl={class:"field"},hl=ye(()=>t("label",{for:"email"},[L("Email address"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),bl={class:"field flex flex-column"},El=ye(()=>t("label",null,[L("Role"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),gl={key:0,style:{color:"red"}},$l={class:"create-btn-wrapper"},xl={__name:"InviteGuest",props:{param:{type:Object,required:!0}},emits:["closeInviteModal"],setup(d,{emit:D}){const F=de(),M=l(d.param.rolesLists),E=l([]),v=ae(),u=l(""),c=l(!1),y=l("false"),x=l(!0),p=D,h=async()=>{var w;if(u.value===""||E.value.length===0){c.value=!0;return}else if(y.value=!0,c.value=!1,!c.value){const b=z("token"),{data:n,pending:B}=await ue(`${F.public.apiUrl}/invite-user`,{method:"POST",headers:{Authorization:`Bearer ${b.value}`},body:{email:u.value,role:E.value.name}},"$uaOzqXhdzF");((w=n==null?void 0:n.value)==null?void 0:w.code)===201?(u.value=null,x.value=!1,p("closeInviteModal",!1),y.value=!1,v.add({severity:"success",summary:"Success",detail:"Employee invitation sent!",group:"br",life:3e3})):v.add({severity:"error",summary:"Error",detail:"Employee invitation failed!",group:"br",life:3e3})}};return ie(()=>{const w=document.getElementById("inviteEmail");ce(()=>{w&&w.focus()})}),(w,b)=>{const n=oe,B=pe,m=te;return $(),q("div",null,[t("div",yl,[hl,o(n,{id:"inviteEmail",type:"email",modelValue:e(u),"onUpdate:modelValue":b[0]||(b[0]=a=>_(u)?u.value=a:null),class:"w-full"},null,8,["modelValue"])]),t("div",bl,[El,o(B,{modelValue:e(E),"onUpdate:modelValue":b[1]||(b[1]=a=>_(E)?E.value=a:null),options:e(M),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(c)?($(),q("p",gl,"Please fill/check up all the fields")):P("",!0),t("div",$l,[e(y)=="false"?($(),T(m,{key:0,label:"Send",icon:"pi pi-check",text:"",onClick:h})):($(),T(m,{key:1,label:"Sending...",icon:"pi pi-spin pi-spinner",text:"",disabled:""}))])])}}},wl=se(xl,[["__scopeId","data-v-d515e90e"]]);const W=d=>(ne("data-v-9c9990c5"),d=d(),re(),d),kl={key:0,class:"card"},Vl={class:"d-flex mr-2"},Ul=W(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Employees")],-1)),Il=W(()=>t("img",{src:Ae},null,-1)),Cl=W(()=>t("i",{class:"pi pi-search"},null,-1)),Sl=W(()=>t("p",{class:"text-center"},"No Data found...",-1)),Nl=W(()=>t("p",null,"Are you sure you want to delete?",-1)),Ll={__name:"index",setup(d){const D=de(),F=l(ee("read_user")),S=l(ee("create_user")),M=l(ee("update_user")),E=l(ee("delete_user")),v=l(),u=l(!0),c=l(!1),y=ae(),x=l(!1),p=l(!1),h=l(!1),w=l([]),b=l(!1),n=l(""),B=l(""),m=l(""),a=l(""),g=l(""),U=l([]),k=l([]),f=r=>{x.value=!1,j()},V=r=>{h.value=!1,j()},C=()=>{x.value=!0},he=()=>{p.value=!0},be=r=>{p.value=!1,j()},X=l([]),me=l([]),Ee=r=>{h.value=!0,n.value=r.id,B.value=r.name,m.value=r.email,a.value=r.phone,g.value=r.address,k.value=r.user_type,U.value.map(s=>{s.name===r.user_type&&(k.value=s)})},ge=r=>{b.value=!0,n.value=r},$e=async()=>{c.value=!0;const r=z("token"),{data:s,pending:G}=await ue(`${D.public.apiUrl}/users/delete/${n.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.value}`}},"$BmbV2j3TY3");s.value.code===200?(b.value=!1,y.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),c.value=!1,j()):(y.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),c.value=!1)},ve=l(),xe=async()=>{ve.value=X.value?X.value.map(r=>r.id):"",j(ve.value)},j=async r=>{var O,R,H;const s=z("token"),{data:G,pending:N,error:Z}=await fe("taskAssignModalData",()=>$fetch(`${D.public.apiUrl}/users/list${r?`?role_id=${r}`:""}`,{headers:{Authorization:`Bearer ${s.value}`}}));((R=(O=G.value)==null?void 0:O.data)==null?void 0:R.length)>0&&(w.value=(H=G.value)==null?void 0:H.data.map((A,J)=>({...A,index:J+1})))},we=async()=>{var Z,O,R,H;const r=z("token"),{data:s,pending:G,error:N}=await fe("roleLiist",()=>$fetch(`${D.public.apiUrl}/roles/list`,{headers:{Authorization:`Bearer ${r.value}`}}));((O=(Z=s.value)==null?void 0:Z.data)==null?void 0:O.length)>0&&(U.value=(R=s.value)==null?void 0:R.data.map((A,J)=>({...A,index:J+1})),me.value=(H=s.value)==null?void 0:H.data.map(A=>({name:A.name,id:A.id})),console.log("rolesLists",U.value))},ke=()=>{v.value={global:{value:null,matchMode:Pe.CONTAINS}}};return z("rolePermission"),ie(()=>{j(),we(),u.value=!1}),ke(),(r,s)=>{const G=Ie,N=te,Z=Ce,O=Se,R=oe,H=Ne,A=Le,J=Me,Ve=De("tooltip");return e(F)?($(),q("div",kl,[t("div",Vl,[o(G,{position:"bottom-right",group:"br"}),Ul]),o(A,{class:"border-0 px-0"},{start:I(()=>[e(S)?($(),T(N,{key:0,icon:"pi pi-plus",label:"Create",onClick:C,class:"mr-2",severity:"secondary"})):P("",!0),e(S)?($(),T(N,{key:1,icon:"pi pi-users",onClick:he,label:"Invite a guest",severity:"secondary"})):P("",!0)]),end:I(()=>[Be(($(),T(N,{onClick:s[0]||(s[0]=i=>r.downloadTaskSheet(r.tasks)),class:"excel-export-btn"},{default:I(()=>[Il]),_:1})),[[Ve,{value:"Download Employee List"},void 0,{left:!0}]]),o(Z,{onChange:s[1]||(s[1]=i=>xe()),modelValue:e(X),"onUpdate:modelValue":s[2]||(s[2]=i=>_(X)?X.value=i:null),options:e(me),display:"chip",filter:"",resetFilterOnHide:"",maxSelectedLabels:2,optionLabel:"name",placeholder:"Filter User Type",class:"w-full mx-2"},null,8,["modelValue","options"]),o(H,{iconPosition:"right",raised:""},{default:I(()=>[o(O,null,{default:I(()=>[Cl]),_:1}),o(R,{modelValue:e(v).global.value,"onUpdate:modelValue":s[3]||(s[3]=i=>e(v).global.value=i),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(Fe),{filters:e(v),"onUpdate:filters":s[4]||(s[4]=i=>_(v)?v.value=i:null),class:"table-st",value:e(w),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(u)},{empty:I(()=>[Sl]),loading:I(()=>[o(J,{style:{width:"50px",height:"50px"}})]),footer:I(()=>[L(" In total there are "+Te(e(w)?e(w).length:0)+" rows. ",1)]),default:I(()=>[o(e(Y),{field:"index",header:"Serial",sortable:""}),o(e(Y),{field:"name",header:"Employee Name"}),o(e(Y),{field:"email",header:"Email Address"}),o(e(Y),{field:"phone",header:"Phone"}),o(e(Y),{field:"user_type",header:"User Type"}),o(e(Y),{field:"action",header:"Action"},{body:I(i=>[e(M)?($(),T(N,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:Ue=>Ee(i.data)},null,8,["onClick"])):P("",!0),e(M)?P("",!0):($(),T(N,{key:1,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(E)?($(),T(N,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:Ue=>ge(i.data.id)},null,8,["onClick"])):P("",!0),e(E)?P("",!0):($(),T(N,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(e(le),{visible:e(x),"onUpdate:visible":s[6]||(s[6]=i=>_(x)?x.value=i:null),modal:"",header:"Create Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:I(()=>[o(tl,{param:{rolesLists:e(U)},onCloseCreateModal:s[5]||(s[5]=i=>f(i))},null,8,["param"])]),_:1},8,["visible"]),o(e(le),{visible:e(h),"onUpdate:visible":s[8]||(s[8]=i=>_(h)?h.value=i:null),modal:"",header:"Edit Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:I(()=>[o(_l,{param:{id:e(n),name:e(B),address:e(g),phone:e(a),email:e(m),user_type:e(k),rolesLists:e(U)},onCloseEditModal:s[7]||(s[7]=i=>V(i))},null,8,["param"])]),_:1},8,["visible"]),o(e(le),{visible:e(b),"onUpdate:visible":s[10]||(s[10]=i=>_(b)?b.value=i:null),header:" ",style:{width:"25rem"}},{default:I(()=>[Nl,o(N,{label:"No",icon:"pi pi-times",text:"",onClick:s[9]||(s[9]=i=>b.value=!1)}),o(N,{label:"Yes",icon:"pi pi-check",text:"",onClick:$e,loading:e(c)},null,8,["loading"])]),_:1},8,["visible"]),o(e(le),{visible:e(p),"onUpdate:visible":s[12]||(s[12]=i=>_(p)?p.value=i:null),modal:"",header:"Invite Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:I(()=>[o(wl,{param:{rolesLists:e(U)},onCloseInviteModal:s[11]||(s[11]=i=>be(i))},null,8,["param"])]),_:1},8,["visible"])])):P("",!0)}}},wt=se(Ll,[["__scopeId","data-v-9c9990c5"]]);export{wt as default};
