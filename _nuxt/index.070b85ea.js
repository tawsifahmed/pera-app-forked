import Xs from"./toast.esm.46c96757.js";import{_ as Zs}from"./nuxt-link.447b825d.js";import ds from"./multiselect.esm.63e693cf.js";import us from"./dropdown.esm.20af5602.js";import cs from"./calendar.esm.6c76f049.js";import Kt from"./button.esm.24be1221.js";import Qs from"./inputicon.esm.f710510f.js";import zs from"./inputtext.esm.79b87a80.js";import ea from"./iconfield.esm.5d2a041f.js";import ta from"./toolbar.esm.ef7486f0.js";import Rs from"./card.esm.35ca4850.js";import ws from"./avatar.esm.f6f487df.js";import sa from"./speeddial.esm.d6e3b112.js";import qs from"./treetable.esm.60094eca.js";import aa from"./timeline.esm.dfaebc06.js";import{r as wt,o as d,b as h,l as _,p as gs,w as E,h as ee,q as ve,i,t as T,c as ce,n as Ls,m as js,e as b,k as pe,K as P,F as fe,f as ke,T as rs,_ as H,j as ia,G as Ps,Q as la,I as ht,a3 as Dt,$ as v,a4 as Jt,aa as ls,ar as Ae,a5 as hs,V as Is,a as ms,u as r,a7 as K,s as te,a6 as Pt,bO as Yt,ca as Ks,a2 as Ds,a8 as bs,a9 as ks,ao as na,cb as oa,ac as ra,P as da}from"./entry.7d0de8f8.js";import{u as vt,a as Hs}from"./cookie.602dcf02.js";import{u as ns}from"./fetch.958bd54e.js";import{d as ua}from"./vuedraggable.umd.8f431ae4.js";import{u as We}from"./company.b4baabea.js";import{a as mt}from"./usePermission.4dc575b9.js";import ct from"./column.esm.1916d107.js";import Ts from"./textarea.esm.51217ede.js";import{s as Cs}from"./editor.esm.5c2a7734.js";import ca from"./floatlabel.esm.bd952f12.js";import ha from"./inputnumber.esm.ced02501.js";import ma from"./confirmpopup.esm.a4a20022.js";import va from"./tabpanel.esm.69d30103.js";import pa from"./tabview.esm.6bd89aa3.js";import{u as Ws}from"./clock.2592d7f8.js";import"./inplace.esm.7875ffb0.js";import is from"./dialog.esm.74271b16.js";import"./portal.esm.a777f937.js";import"./basecomponent.esm.166d21b9.js";import"./index.esm.f76f3b9c.js";import"./baseicon.esm.e844f981.js";import"./index.esm.6d852ce0.js";import"./index.esm.5b4292c4.js";import"./index.esm.8dbe4986.js";import"./checkbox.esm.3e5532f6.js";import"./index.esm.6d85901a.js";import"./index.esm.84f01e8f.js";import"./index.esm.cc716b71.js";import"./overlayeventbus.esm.51a48e97.js";import"./virtualscroller.esm.6b04bb08.js";import"./index.esm.7d550639.js";import"./index.esm.399a0f91.js";import"./index.esm.728ec6b0.js";import"./badge.esm.77eb1e8d.js";import"./index.esm.1125ac60.js";import"./paginator.esm.790d1338.js";import"./index.esm.8a54231b.js";import"./index.esm.355712bc.js";import"./index.esm.c04e4d92.js";import"./index.esm.8d10b82d.js";import"./index.esm.79bd1c74.js";import"./index.esm.d43e6c81.js";import"./_commonjsHelpers.87174ba5.js";import"./workCompany.901debb0.js";var fa=Object.defineProperty,ya=(t,e,a)=>e in t?fa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,nt=(t,e,a)=>ya(t,typeof e!="symbol"?e+"":e,a);const _a=(t,e,a)=>{const l=t[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})};let zt,Fs,Us,ze,Rt={},Vt={};class ga{constructor(e,a=!1){nt(this,"texts",{}),nt(this,"dateToMinutes",l=>l.getHours()*60+l.getMinutes()),ze=this,this._texts=e,!a&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(e){return ze.addDays(this,e)},Date.prototype.subtractDays=function(e){return ze.subtractDays(this,e)},Date.prototype.addHours=function(e){return ze.addHours(this,e)},Date.prototype.subtractHours=function(e){return ze.subtractHours(this,e)},Date.prototype.addMinutes=function(e){return ze.addMinutes(this,e)},Date.prototype.subtractMinutes=function(e){return ze.subtractMinutes(this,e)},Date.prototype.getWeek=function(){return ze.getWeek(this)},Date.prototype.isToday=function(){return ze.isToday(this)},Date.prototype.isLeapYear=function(){return ze.isLeapYear(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return ze.formatDate(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return ze.formatTime(this,e)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(e){this._texts=e}_todayFormatted(){return Fs!==new Date().getDate()&&(zt=new Date,Fs=zt.getDate(),Us=`${zt.getFullYear()}-${zt.getMonth()}-${zt.getDate()}`),Us}addDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()+a),l}subtractDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()-a),l}addHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()+a),l}subtractHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()-a),l}addMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()+a),l}subtractMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()-a),l}getWeek(e){const a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),l=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-l);const o=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a-o)/864e5+1)/7)}isToday(e){return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===this._todayFormatted()}isLeapYear(e){const a=e.getFullYear();return!(a%400)||a%100&&!(a%4)}getPreviousFirstDayOfWeek(e=null,a){const l=e&&new Date(e.valueOf())||new Date,o=a?7:6;return l.setDate(l.getDate()-(l.getDay()+o)%7),l}stringToDate(e){return e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/")))}countDays(e,a){typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof a=="string"&&(a=a.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),a=new Date(a).setHours(0,0,1,0);const l=(new Date(a).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((a-e-l)/(24*3600*1e3))}datesInSameTimeStep(e,a,l){return Math.abs(e.getTime()-a.getTime())<=l*60*1e3}formatDate(e,a="YYYY-MM-DD",l=null){if(l||(l=this._texts),a||(a="YYYY-MM-DD"),a==="YYYY-MM-DD")return this.formatDateLite(e);Rt={},Vt={};const o={YYYY:()=>this._hydrateDateObject(e,l).YYYY,YY:()=>this._hydrateDateObject(e,l).YY(),M:()=>this._hydrateDateObject(e,l).M,MM:()=>this._hydrateDateObject(e,l).MM(),MMM:()=>this._hydrateDateObject(e,l).MMM(),MMMM:()=>this._hydrateDateObject(e,l).MMMM(),MMMMG:()=>this._hydrateDateObject(e,l).MMMMG(),D:()=>this._hydrateDateObject(e,l).D,DD:()=>this._hydrateDateObject(e,l).DD(),S:()=>this._hydrateDateObject(e,l).S(),d:()=>this._hydrateDateObject(e,l).d,dd:()=>this._hydrateDateObject(e,l).dd(),ddd:()=>this._hydrateDateObject(e,l).ddd(),dddd:()=>this._hydrateDateObject(e,l).dddd(),HH:()=>this._hydrateTimeObject(e,l).HH,H:()=>this._hydrateTimeObject(e,l).H,hh:()=>this._hydrateTimeObject(e,l).hh,h:()=>this._hydrateTimeObject(e,l).h,am:()=>this._hydrateTimeObject(e,l).am,AM:()=>this._hydrateTimeObject(e,l).AM,mm:()=>this._hydrateTimeObject(e,l).mm,m:()=>this._hydrateTimeObject(e,l).m};return a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(s,u)=>{const n=o[u.replace(/\{|\}/g,"")];return n!==void 0?n():u})}formatDateLite(e){const a=e.getMonth()+1,l=e.getDate();return`${e.getFullYear()}-${a<10?"0":""}${a}-${l<10?"0":""}${l}`}formatTime(e,a="HH:mm",l=null,o=!1){let s=!1;if(o){const[f,m,p]=[e.getHours(),e.getMinutes(),e.getSeconds()];f+m+p===23+59+59&&(s=!0)}if(e instanceof Date&&a==="HH:mm")return s?"24:00":this.formatTimeLite(e);Vt={},l||(l=this._texts);const u=this._hydrateTimeObject(e,l),n=a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(f,m)=>{const p=u[m.replace(/\{|\}/g,"")];return p!==void 0?p:m});return s?n.replace("23:59","24:00"):n}formatTimeLite(e){const a=e.getHours(),l=e.getMinutes();return`${(a<10?"0":"")+a}:${(l<10?"0":"")+l}`}_nth(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(e,a){if(Rt.D)return Rt;const l=e.getFullYear(),o=e.getMonth()+1,s=e.getDate(),n=(e.getDay()-1+7)%7;return Rt={YYYY:l,YY:()=>l.toString().substring(2),M:o,MM:()=>(o<10?"0":"")+o,MMM:()=>a.months[o-1].substring(0,3),MMMM:()=>a.months[o-1],MMMMG:()=>(a.monthsGenitive||a.months)[o-1],D:s,DD:()=>(s<10?"0":"")+s,S:()=>this._nth(s),d:n+1,dd:()=>a.weekDays[n][0],ddd:()=>a.weekDays[n].substr(0,3),dddd:()=>a.weekDays[n]},Rt}_hydrateTimeObject(e,a){if(Vt.am)return Vt;let l,o;e instanceof Date?(l=e.getHours(),o=e.getMinutes()):(l=Math.floor(e/60),o=Math.floor(e%60));const s=l%12?l%12:12,u=(a||{am:"am",pm:"pm"})[l===24||l<12?"am":"pm"];return Vt={H:l,h:s,HH:(l<10?"0":"")+l,hh:(s<10?"0":"")+s,am:u,AM:u.toUpperCase(),m:o,mm:(o<10?"0":"")+o},Vt}}const wa=24*60;class Da{constructor(e){nt(this,"_vuecal",null),nt(this,"selectCell",(a=!1,l,o)=>{this._vuecal.$emit("cell-click",o?{date:l,split:o}:l),this._vuecal.clickToNavigate||a?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",o?{date:l,split:o}:l)))}),nt(this,"keyPressEnterCell",(a,l)=>{this._vuecal.$emit("cell-keypress-enter",l?{date:a,split:l}:a),this._vuecal.switchToNarrowerView()}),nt(this,"getPosition",a=>{const{left:l,top:o}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:s,clientY:u}="ontouchstart"in window&&a.touches?a.touches[0]:a;return{x:s-l,y:u-o}}),nt(this,"minutesAtCursor",a=>{let l=0,o={x:0,y:0};const{timeStep:s,timeCellHeight:u,timeFrom:n}=this._vuecal.$props;return typeof a=="number"?l=a:typeof a=="object"&&(o=this.getPosition(a),l=Math.round(o.y*s/parseInt(u)+n)),{minutes:Math.max(Math.min(l,wa),0),cursorCoords:o}}),this._vuecal=e}}const ba=2,ys=24*60;let De,be,_s;class ka{constructor(e,a){nt(this,"_vuecal",null),nt(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=e,De=a}createAnEvent(e,a,l){if(typeof e=="string"&&(e=De.stringToDate(e)),!(e instanceof Date))return!1;const o=De.dateToMinutes(e);a=a*1||ba*60;const s=o+a,u=De.addMinutes(new Date(e),a);l.end&&(typeof l.end=="string"&&(l.end=De.stringToDate(l.end)),l.endTimeMinutes=De.dateToMinutes(l.end));const n={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:e,startTimeMinutes:o,end:u,endTimeMinutes:s,segments:null,...l};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(n,()=>this.deleteAnEvent(n))))return n.startDateF!==n.endDateF&&(n.daysCount=De.countDays(n.start,n.end)),this._vuecal.mutableEvents.push(n),this._vuecal.addEventsToView([n]),this._vuecal.emitWithEvent("event-create",n),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(n),originalEvent:null}),n}addEventSegment(e){e.segments||(e.segments={},e.segments[De.formatDateLite(e.start)]={start:e.start,startTimeMinutes:e.startTimeMinutes,endTimeMinutes:ys,isFirstDay:!0,isLastDay:!1});const a=e.segments[De.formatDateLite(e.end)];a&&(a.isLastDay=!1,a.endTimeMinutes=ys);const l=De.addDays(e.end,1),o=De.formatDateLite(l);return l.setHours(0,0,0,0),e.segments[o]={start:l,startTimeMinutes:0,endTimeMinutes:e.endTimeMinutes,isFirstDay:!1,isLastDay:!0},e.end=De.addMinutes(l,e.endTimeMinutes),e.daysCount=Object.keys(e.segments).length,o}removeEventSegment(e){let a=Object.keys(e.segments).length;if(a<=1)return De.formatDateLite(e.end);delete e.segments[De.formatDateLite(e.end)],a--;const l=De.subtractDays(e.end,1),o=De.formatDateLite(l),s=e.segments[o];return a?s&&(s.isLastDay=!0,s.endTimeMinutes=e.endTimeMinutes):e.segments=null,e.daysCount=a||1,e.end=l,o}createEventSegments(e,a,l){const o=a.getTime(),s=l.getTime();let u=e.start.getTime(),n=e.end.getTime(),f=!1,m,p,x;for(!e.end.getHours()&&!e.end.getMinutes()&&(n-=1e3),e.segments={},e.repeat?(m=o,p=Math.min(s,e.repeat.until?De.stringToDate(e.repeat.until).getTime():s)):(m=Math.max(o,u),p=Math.min(s,n));m<=p;){let V=!1;const Y=De.addDays(new Date(m),1).setHours(0,0,0,0);let I,ye,se,J;if(e.repeat){const G=new Date(m),_e=De.formatDateLite(G);(f||e.occurrences&&e.occurrences[_e])&&(f||(u=e.occurrences[_e].start,x=new Date(u).setHours(0,0,0,0),n=e.occurrences[_e].end),f=!0,V=!0),I=m===x,ye=_e===De.formatDateLite(new Date(n)),se=new Date(I?u:m),J=De.formatDateLite(se),ye&&(f=!1)}else V=!0,I=m===u,ye=p===n&&Y>p,se=I?e.start:new Date(m),J=De.formatDateLite(I?e.start:se);V&&(e.segments[J]={start:se,startTimeMinutes:I?e.startTimeMinutes:0,endTimeMinutes:ye?e.endTimeMinutes:ys,isFirstDay:I,isLastDay:ye}),m=Y}return e}deleteAnEvent(e){this._vuecal.emitWithEvent("event-delete",e),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(a=>a._eid!==e._eid),this._vuecal.view.events=this._vuecal.view.events.filter(a=>a._eid!==e._eid)}checkCellOverlappingEvents(e,a){_s=e.slice(0),be={},e.forEach(o=>{_s.shift(),be[o._eid]||(be[o._eid]={overlaps:[],start:o.start,position:0}),be[o._eid].position=0,_s.forEach(s=>{be[s._eid]||(be[s._eid]={overlaps:[],start:s.start,position:0});const u=this.eventInRange(s,o.start,o.end),n=a.overlapsPerTimeStep?De.datesInSameTimeStep(o.start,s.start,a.timeStep):1;if(!o.background&&!o.allDay&&!s.background&&!s.allDay&&u&&n)be[o._eid].overlaps.push(s._eid),be[o._eid].overlaps=[...new Set(be[o._eid].overlaps)],be[s._eid].overlaps.push(o._eid),be[s._eid].overlaps=[...new Set(be[s._eid].overlaps)],be[s._eid].position++;else{let f,m;(f=(be[o._eid]||{overlaps:[]}).overlaps.indexOf(s._eid))>-1&&be[o._eid].overlaps.splice(f,1),(m=(be[s._eid]||{overlaps:[]}).overlaps.indexOf(o._eid))>-1&&be[s._eid].overlaps.splice(m,1),be[s._eid].position--}})});let l=0;for(const o in be){const s=be[o],u=s.overlaps.map(n=>({id:n,start:be[n].start}));u.push({id:o,start:s.start}),u.sort((n,f)=>n.start<f.start?-1:n.start>f.start?1:n.id>f.id?-1:1),s.position=u.findIndex(n=>n.id===o),l=Math.max(this.getOverlapsStreak(s,be),l)}return[be,l]}getOverlapsStreak(e,a={}){let l=e.overlaps.length+1,o=[];return e.overlaps.forEach(s=>{o.includes(s)||e.overlaps.filter(n=>n!==s).forEach(n=>{a[n].overlaps.includes(s)||o.push(n)})}),o=[...new Set(o)],l-=o.length,l}eventInRange(e,a,l){if(e.allDay||!this._vuecal.time){const u=new Date(e.start).setHours(0,0,0,0);return new Date(e.end).setHours(23,59,0,0)>=new Date(a).setHours(0,0,0,0)&&u<=new Date(l).setHours(0,0,0,0)}const o=e.start.getTime(),s=e.end.getTime();return o<l.getTime()&&s>a.getTime()}}const Ta={class:"vuecal__flex vuecal__weekdays-headings"},Ca=["onClick"],Ea={class:"vuecal__flex weekday-label",grow:""},Sa={class:"full"},xa={class:"small"},Ma={class:"xsmall"},Va={key:0},$a={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function Oa(t,e,a,l,o,s){return d(),h("div",Ta,[(d(!0),h(fe,null,ke(s.headings,(u,n)=>(d(),h(fe,{key:n},[u.hide?b("",!0):(d(),h("div",{key:0,class:pe(["vuecal__flex vuecal__heading",{today:u.today,clickable:s.cellHeadingsClickable}]),style:P(s.weekdayCellStyles),onClick:f=>s.view.id==="week"&&s.selectCell(u.date,f),onDblclick:e[0]||(e[0]=f=>s.view.id==="week"&&s.vuecal.dblclickToNavigate&&a.switchToNarrowerView())},[_(rs,{name:`slide-fade--${a.transitionDirection}`,appear:s.vuecal.transitions},{default:E(()=>[(d(),h("div",{class:"vuecal__flex",column:"",key:s.vuecal.transitions?`${n}-${u.dayOfMonth}`:!1},[i("div",Ea,[ee(t.$slots,"weekday-heading",{heading:s.cleanupHeading(u),view:s.view},()=>[i("span",Sa,T(u.full),1),i("span",xa,T(u.small),1),i("span",Ma,T(u.xsmall),1),u.dayOfMonth?(d(),h("span",Va," "+T(u.dayOfMonth),1)):b("",!0)])]),s.vuecal.hasSplits&&s.vuecal.stickySplitLabels?(d(),h("div",$a,[(d(!0),h(fe,null,ke(s.vuecal.daySplits,(f,m)=>(d(),h("div",{class:pe(["day-split-header",f.class||!1]),key:m},[ee(t.$slots,"split-label",{split:f,view:s.view},()=>[ve(T(f.label),1)])],2))),128))])):b("",!0)]))]),_:2},1032,["name","appear"])],46,Ca))],64))),128))])}const $t=(t,e)=>{const a=t.__vccOpts||t;for(const[l,o]of e)a[l]=o;return a},Aa={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(t,e){t.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=t),this.utils.cell.selectCell(!1,t,e)},cleanupHeading:t=>({label:t.full,date:t.date,...t.today?{today:t.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let t=!1;return this.weekDays.map((a,l)=>{const o=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?l-1:l);return{hide:a.hide,full:a.label,small:a.short||a.label.substr(0,3),xsmall:a.short||a.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:o.getDate(),date:o,today:!t&&this.utils.date.isToday(o)&&!t++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((t,e)=>t+e.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Js=$t(Aa,[["render",Oa]]),La={class:"vuecal__header"},ja={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},Ia=["onDragenter","onDragleave","onClick","aria-label"],Ha={key:1,class:"vuecal__title-bar"},Wa=["aria-label"],Fa={class:"vuecal__flex vuecal__title",grow:""},Ua=["aria-label"],Na={key:0,class:"vuecal__flex vuecal__split-days-headers"};function Ba(t,e,a,l,o,s){const u=wt("weekdays-headings");return d(),h("div",La,[a.options.hideViewSelector?b("",!0):(d(),h("div",ja,[(d(!0),h(fe,null,ke(a.viewProps.views,(n,f)=>(d(),h(fe,{key:f},[n.enabled?(d(),h("button",{key:0,class:pe(["vuecal__view-btn",{"vuecal__view-btn--active":s.view.id===f,"vuecal__view-btn--highlighted":t.highlightedControl===f}]),type:"button",onDragenter:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(m,f,t.$data),onDragleave:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(m,f,t.$data),onClick:m=>s.switchView(f,null,!0),"aria-label":`${n.label} view`},T(n.label),43,Ia)):b("",!0)],64))),128))])),a.options.hideTitleBar?b("",!0):(d(),h("div",Ha,[i("button",{class:pe(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":t.highlightedControl==="previous"}]),type:"button",onClick:e[0]||(e[0]=(...n)=>s.previous&&s.previous(...n)),onDragenter:e[1]||(e[1]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"previous",t.$data)),onDragleave:e[2]||(e[2]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"previous",t.$data)),"aria-label":`Previous ${s.view.id}`},[ee(t.$slots,"arrow-prev")],42,Wa),i("div",Fa,[_(rs,{name:a.options.transitions?`slide-fade--${s.transitionDirection}`:""},{default:E(()=>[(d(),ce(ia(s.broaderView?"button":"span"),{type:!!s.broaderView&&"button",key:`${s.view.id}${s.view.startDate.toString()}`,onClick:e[3]||(e[3]=n=>!!s.broaderView&&s.switchToBroaderView()),"aria-label":!!s.broaderView&&`Go to ${s.broaderView} view`},{default:E(()=>[ee(t.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),a.options.todayButton?(d(),h("button",{key:0,class:pe(["vuecal__today-btn",{"vuecal__today-btn--highlighted":t.highlightedControl==="today"}]),type:"button",onClick:e[4]||(e[4]=(...n)=>s.goToToday&&s.goToToday(...n)),onDragenter:e[5]||(e[5]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"today",t.$data)),onDragleave:e[6]||(e[6]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"today",t.$data)),"aria-label":"Today"},[ee(t.$slots,"today-button")],34)):b("",!0),i("button",{class:pe(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":t.highlightedControl==="next"}]),type:"button",onClick:e[7]||(e[7]=(...n)=>s.next&&s.next(...n)),onDragenter:e[8]||(e[8]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"next",t.$data)),onDragleave:e[9]||(e[9]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"next",t.$data)),"aria-label":`Next ${s.view.id}`},[ee(t.$slots,"arrow-next")],42,Ua)])),a.viewProps.weekDaysInHeader?(d(),ce(u,{key:2,"week-days":a.weekDays,"transition-direction":s.transitionDirection,"switch-to-narrower-view":a.switchToNarrowerView},gs({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:E(({heading:n,view:f})=>[ee(t.$slots,"weekday-heading",{heading:n,view:f})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:E(({split:n})=>[ee(t.$slots,"split-label",{split:n,view:s.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):b("",!0),_(rs,{name:`slide-fade--${s.transitionDirection}`},{default:E(()=>[s.showDaySplits?(d(),h("div",Na,[(d(!0),h(fe,null,ke(a.daySplits,(n,f)=>(d(),h("div",{class:pe(["day-split-header",n.class||!1]),key:f},[ee(t.$slots,"split-label",{split:n,view:s.view.id},()=>[ve(T(n.label),1)])],2))),128))])):b("",!0)]),_:3},8,["name"])])}const Ya={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Js},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(t){this.vuecal.transitionDirection=t}},broaderView(){const{enabledViews:t}=this.vuecal;return t[t.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},za=$t(Ya,[["render",Ba]]),Ra=["draggable"];function qa(t,e,a,l,o,s){return d(),h("div",{class:pe(["vuecal__event",s.eventClasses]),style:P(s.eventStyles),tabindex:"0",onFocus:e[4]||(e[4]=(...u)=>s.focusEvent&&s.focusEvent(...u)),onKeypress:e[5]||(e[5]=Ps(ht((...u)=>s.onEnterKeypress&&s.onEnterKeypress(...u),["stop"]),["enter"])),onMouseenter:e[6]||(e[6]=(...u)=>s.onMouseEnter&&s.onMouseEnter(...u)),onMouseleave:e[7]||(e[7]=(...u)=>s.onMouseLeave&&s.onMouseLeave(...u)),onTouchstart:e[8]||(e[8]=ht((...u)=>s.onTouchStart&&s.onTouchStart(...u),["stop"])),onMousedown:e[9]||(e[9]=u=>s.onMouseDown(u)),onMouseup:e[10]||(e[10]=(...u)=>s.onMouseUp&&s.onMouseUp(...u)),onTouchend:e[11]||(e[11]=(...u)=>s.onMouseUp&&s.onMouseUp(...u)),onTouchmove:e[12]||(e[12]=(...u)=>s.onTouchMove&&s.onTouchMove(...u)),onDblclick:e[13]||(e[13]=(...u)=>s.onDblClick&&s.onDblClick(...u)),draggable:s.draggable,onDragstart:e[14]||(e[14]=u=>s.draggable&&s.onDragStart(u)),onDragend:e[15]||(e[15]=u=>s.draggable&&s.onDragEnd())},[s.vuecal.editEvents.delete&&a.event.deletable?(d(),h("div",{key:0,class:"vuecal__event-delete",onClick:e[0]||(e[0]=ht((...u)=>s.deleteEvent&&s.deleteEvent(...u),["stop"])),onTouchstart:e[1]||(e[1]=ht((...u)=>s.touchDeleteEvent&&s.touchDeleteEvent(...u),["stop"]))},T(s.vuecal.texts.deleteEvent),33)):b("",!0),ee(t.$slots,"event",{event:a.event,view:s.view.id}),s.resizable?(d(),h("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:e[2]||(e[2]=ht((...u)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...u),["stop","prevent"])),onTouchstart:e[3]||(e[3]=ht((...u)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...u),["stop","prevent"]))},null,32)):b("",!0)],46,Ra)}const Pa={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(t,e=!1){if("ontouchstart"in window&&!e)return!1;const{clickHoldAnEvent:a,focusAnEvent:l,resizeAnEvent:o,dragAnEvent:s}=this.domEvents;if(l._eid===this.event._eid&&a._eid===this.event._eid)return!0;this.focusEvent(),a._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(a.timeoutId=setTimeout(()=>{!o._eid&&!s._eid&&(a._eid=this.event._eid,this.event.deleting=!0)},a.timeout))},onMouseUp(t){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(t){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:e,clientY:a}=t.touches[0],{startX:l,startY:o,dragThreshold:s}=this.touch;(Math.abs(e-l)>s||Math.abs(a-o)>s)&&(this.touch.dragged=!0)},onTouchStart(t){this.touch.startX=t.touches[0].clientX,this.touch.startY=t.touches[0].clientY,this.onMouseDown(t,!0)},onEnterKeypress(t){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,t)},onDblClick(t){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,t)},onDragStart(t){this.dnd&&this.dnd.eventDragStart(t,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(t=!1){if("ontouchstart"in window&&!t)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(t){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:t}=this.domEvents,e=t._eid;if(e!==this.event._eid){if(e){const a=this.view.events.find(l=>l._eid===e);a&&(a.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),t._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:t,endTimeMinutes:e}=this.segment||this.event;let a=t-this.vuecal.timeFrom;const l=Math.max(Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);a=Math.min(e,this.vuecal.timeTo)-this.vuecal.timeFrom;const o=Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),s=Math.max(o-l,5);return{top:l,height:s}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let t=100/Math.min(this.overlaps.length+1,this.overlapsStreak),e=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&t<this.vuecal.minEventWidth&&(t=this.vuecal.minEventWidth,e=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:a,height:l}=this.eventDimensions;return{top:`${a}px`,height:`${l}px`,width:`${t}%`,left:this.event.left&&`${this.event.left}px`||`${e}%`}},eventClasses(){const{isFirstDay:t,isLastDay:e}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&t&&!e,"event-middle":this.segment&&!t&&!e,"event-end":this.segment&&e&&!t}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:t,background:e,daysCount:a}=this.event;return this.vuecal.editEvents.drag&&t&&!e&&a===1},resizable(){const{editEvents:t,time:e}=this.vuecal;return t.resize&&this.event.resizable&&e&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Ka=$t(Pa,[["render",qa]]),Ja=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],Ga={key:0,class:"cell-time-labels"},Xa=["innerHTML"],Za={key:2,class:"vuecal__cell-events"},Qa=["title"];function ei(t,e,a,l,o,s){const u=wt("event");return d(),ce(la,{class:pe(["vuecal__cell",s.cellClasses]),name:`slide-fade--${s.transitionDirection}`,tag:"div",appear:a.options.transitions,style:P(s.cellStyles)},{default:E(()=>[(d(!0),h(fe,null,ke(s.splitsCount?s.splits:1,(n,f)=>(d(),h("div",{class:pe(["vuecal__flex vuecal__cell-content",s.splitsCount&&s.splitClasses(n)]),key:a.options.transitions?`${s.view.id}-${a.data.content}-${f}`:f,"data-split":s.splitsCount?n.id:!1,column:"",tabindex:"0","aria-label":a.data.content,onFocus:e[0]||(e[0]=m=>s.onCellFocus(m)),onKeypress:e[1]||(e[1]=Ps(m=>s.onCellkeyPressEnter(m),["enter"])),onTouchstart:m=>!s.isDisabled&&s.onCellTouchStart(m,s.splitsCount?n.id:null),onMousedown:m=>!s.isDisabled&&s.onCellMouseDown(m,s.splitsCount?n.id:null),onClick:e[2]||(e[2]=m=>!s.isDisabled&&s.onCellClick(m)),onDblclick:e[3]||(e[3]=m=>!s.isDisabled&&s.onCellDblClick(m)),onContextmenu:e[4]||(e[4]=m=>!s.isDisabled&&a.options.cellContextmenu&&s.onCellContextMenu(m)),onDragenter:e[5]||(e[5]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragEnter(m,t.$data,a.data.startDate)),onDragover:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragOver(m,t.$data,a.data.startDate,s.splitsCount?n.id:null),onDragleave:e[6]||(e[6]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragLeave(m,t.$data,a.data.startDate)),onDrop:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragDrop(m,t.$data,a.data.startDate,s.splitsCount?n.id:null)},[a.options.showTimeInCells&&a.options.time&&s.isWeekOrDayView&&!a.allDay?(d(),h("div",Ga,[(d(!0),h(fe,null,ke(s.vuecal.timeCells,(m,p)=>(d(),h("span",{class:"cell-time-label",key:p},T(m.label),1))),128))])):b("",!0),s.isWeekOrDayView&&!a.allDay&&s.specialHours.length?(d(!0),h(fe,{key:1},ke(s.specialHours,(m,p)=>(d(),h("div",{class:pe(["vuecal__special-hours",`vuecal__special-hours--day${m.day} ${m.class}`]),style:P(`height: ${m.height}px;top: ${m.top}px`)},[m.label?(d(),h("div",{key:0,class:"special-hours-label",innerHTML:m.label},null,8,Xa)):b("",!0)],6))),256)):b("",!0),ee(t.$slots,"cell-content",{events:s.events,selectCell:m=>s.selectCell(m,!0),split:s.splitsCount?n:!1}),s.eventsCount&&(s.isWeekOrDayView||s.view.id==="month"&&a.options.eventsOnMonthView)?(d(),h("div",Za,[(d(!0),h(fe,null,ke(s.splitsCount?n.events:s.events,(m,p)=>(d(),ce(u,{key:p,"cell-formatted-date":a.data.formattedDate,event:m,"all-day":a.allDay,"cell-events":s.splitsCount?n.events:s.events,overlaps:((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).overlaps,"event-position":((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).position,"overlaps-streak":s.splitsCount?n.overlapsStreak:t.cellOverlapsStreak},{event:E(({event:x,view:V})=>[ee(t.$slots,"event",{view:V,event:x})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):b("",!0)],42,Ja))),128)),s.timelineVisible?(d(),h("div",{class:"vuecal__now-line",style:P(`top: ${s.todaysTimePosition}px`),key:a.options.transitions?`${s.view.id}-now-line`:"now-line",title:s.utils.date.formatTime(s.vuecal.now)},null,12,Qa)):b("",!0)]),_:3},8,["class","name","appear","style"])}const ti={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Ka},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:t}){let a=t.classList.contains("vuecal__cell-split")?t:this.vuecal.findAncestor(t,"vuecal__cell-split");return a&&(a=a.attributes["data-split"].value,parseInt(a).toString()===a.toString()&&(a=parseInt(a))),a||null},splitClasses(t){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===t.id,[t.class]:!!t.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(t){return this.vuecal.isDOMElementAnEvent(t)},selectCell(t,e=!1){const a=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.selectCell(e,this.timeAtCursor,a),this.timeAtCursor=null},onCellkeyPressEnter(t){this.isSelected||this.onCellFocus(t);const e=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,e),this.timeAtCursor=null},onCellFocus(t){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const e=this.splitsCount?this.getSplitAtCursor(t):null,a=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",e?{date:a,split:e}:a)}},onCellMouseDown(t,e=null,a=!1){if("ontouchstart"in window&&!a)return!1;this.isSelected||this.onCellFocus(t);const{clickHoldACell:l,focusAnEvent:o}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,l.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:s,cursorCoords:{y:u}}=this.vuecal.minutesAtCursor(t);this.timeAtCursor.setMinutes(s);const n=this.isDOMElementAnEvent(t.target);!n&&o._eid&&((this.view.events.find(f=>f._eid===o._eid)||{}).focused=!1),this.editEvents.create&&!n&&this.setUpEventCreation(t,u)},setUpEventCreation(t,e){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:a}=this.domEvents;if(a.startCursorY=e,a.split=this.splitsCount?this.getSplitAtCursor(t):null,a.start=this.timeAtCursor,this.options.snapToTime){let l=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const o=l+this.options.snapToTime/2;l=o-o%this.options.snapToTime,a.start.setHours(0,l,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(t)},setUpCellHoldTimer(t){const{clickHoldACell:e}=this.domEvents;e.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,e.split=this.splitsCount?this.getSplitAtCursor(t):null,e.timeoutId=setTimeout(()=>{if(e.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:a}=this.utils.event.createAnEvent(this.timeAtCursor,null,e.split?{split:e.split}:{});e.eventCreated=a}},e.timeout)},onCellTouchStart(t,e=null){this.onCellMouseDown(t,e,!0)},onCellClick(t){this.isDOMElementAnEvent(t.target)||this.selectCell(t)},onCellDblClick(t){const e=new Date(this.data.startDate);e.setMinutes(this.vuecal.minutesAtCursor(t).minutes);const a=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-dblclick",a?{date:e,split:a}:e),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(t){t.stopPropagation(),t.preventDefault();const e=new Date(this.data.startDate),{cursorCoords:a,minutes:l}=this.vuecal.minutesAtCursor(t);e.setMinutes(l);const o=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-contextmenu",{date:e,...a,...o||{},e:t})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:t}=this.options,{isYearsOrYearView:e}=this.vuecal;return t.length&&t.includes(this.data.formattedDate)&&!e?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let t=!1;const{selectedDate:e}=this.view;return this.view.id==="years"?t=e.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?t=e.getFullYear()===this.data.startDate.getFullYear()&&e.getMonth()===this.data.startDate.getMonth():t=e.getTime()===this.data.startDate.getTime(),t},set(t){this.view.selectedDate=t,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(t=>{let{from:e,to:a}=t;return e=Math.max(e,this.options.timeFrom),a=Math.min(a,this.options.timeTo),{...t,height:(a-e)*this.timeScale,top:(e-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:t,endDate:e}=this.data;let a=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(a=this.view.events.slice(0),this.view.id==="month"&&a.push(...this.view.outOfScopeEvents),a=a.filter(l=>this.utils.event.eventInRange(l,t,e)),this.options.showAllDayEvents&&this.view.id!=="month"&&(a=a.filter(l=>!!l.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:l,timeTo:o}=this.options;a=a.filter(s=>{const u=s.daysCount>1&&s.segments[this.data.formattedDate]||{},n=s.daysCount===1&&s.startTimeMinutes<o&&s.endTimeMinutes>l,f=s.daysCount>1&&u.startTimeMinutes<o&&u.endTimeMinutes>l,m=!1;return s.allDay||n||f||m})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&a.sort((l,o)=>l.start<o.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return a},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((t,e)=>{const a=this.events.filter(s=>s.split===t.id),[l,o]=this.utils.event.checkCellOverlappingEvents(a.filter(s=>!s.background&&!s.allDay),this.options);return{...t,overlaps:l,overlapsStreak:o,events:a}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:t,timeTo:e}=this.options;return this.data.today&&this.isWeekOrDayView&&t&&!this.allDay&&this.nowInMinutes<=e},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const t=this.nowInMinutes-this.options.timeFrom;return Math.round(t*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},Gs=$t(ti,[["render",ei]]),si={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function ai(t,e,a,l,o,s){const u=wt("vuecal-cell");return d(),h("div",{class:"vuecal__flex vuecal__all-day",style:P(a.cellOrSplitMinWidth&&{height:a.height})},[a.cellOrSplitMinWidth?b("",!0):(d(),h("div",si,[i("span",null,T(a.label),1)])),i("div",{class:pe(["vuecal__flex vuecal__cells",`${s.view.id}-view`]),grow:"",style:P(a.cellOrSplitMinWidth?`min-width: ${a.cellOrSplitMinWidth}px`:"")},[(d(!0),h(fe,null,ke(a.cells,(n,f)=>(d(),ce(u,{key:f,options:a.options,"edit-events":s.editEvents,data:n,"all-day":!0,"cell-width":a.options.hideWeekdays.length&&(s.vuecal.isWeekView||s.vuecal.isMonthView)&&s.vuecal.cellWidth,"min-timestamp":a.options.minTimestamp,"max-timestamp":a.options.maxTimestamp,"cell-splits":a.daySplits},{event:E(({event:m,view:p})=>[ee(t.$slots,"event",{view:p,event:m})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const ii={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":Gs},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},li=$t(ii,[["render",ai]]),ni=["lang"],oi={class:"default"},ri={key:0,class:"vuecal__flex vuecal__body",grow:""},di=["onBlur","innerHTML"],ui=["innerHTML"],ci=["innerHTML"],hi={class:"vuecal__flex",row:"",grow:""},mi={key:0,class:"vuecal__time-column"},vi={class:"vuecal__time-cell-label"},pi={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},fi=["wrap","column"],yi=["onBlur","innerHTML"],_i=["innerHTML"],gi=["innerHTML"],wi=["wrap"],Di=["innerHTML"],bi=["innerHTML"],ki={key:2,class:"vuecal__cell-events-count"},Ti={key:3,class:"vuecal__no-event"},Ci=["onBlur","innerHTML"],Ei=["innerHTML"],Si={key:2,class:"vuecal__event-time"},xi={key:0},Mi={key:1,class:"days-to-end"},Vi=["innerHTML"],$i={key:0,class:"vuecal__scrollbar-check"};function Oi(t,e,a,l,o,s){const u=wt("vuecal-header"),n=wt("all-day-bar"),f=wt("weekdays-headings"),m=wt("vuecal-cell");return d(),h("div",{class:pe(["vuecal__flex vuecal",s.cssClasses]),column:"",ref:"vuecal",lang:a.locale},[_(u,{options:t.$props,"edit-events":s.editEvents,"view-props":{views:s.views,weekDaysInHeader:s.weekDaysInHeader},"week-days":s.weekDays,"has-splits":s.hasSplits,"day-splits":s.daySplits,"switch-to-narrower-view":s.switchToNarrowerView},gs({"arrow-prev":E(()=>[ee(t.$slots,"arrow-prev",{},()=>[e[0]||(e[0]=ve(" ")),e[1]||(e[1]=i("i",{class:"angle"},null,-1)),e[2]||(e[2]=ve(" "))])]),"arrow-next":E(()=>[ee(t.$slots,"arrow-next",{},()=>[e[3]||(e[3]=ve(" ")),e[4]||(e[4]=i("i",{class:"angle"},null,-1)),e[5]||(e[5]=ve(" "))])]),"today-button":E(()=>[ee(t.$slots,"today-button",{},()=>[i("span",oi,T(o.texts.today),1)])]),title:E(()=>[ee(t.$slots,"title",{title:s.viewTitle,view:o.view},()=>[ve(T(s.viewTitle),1)])]),_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:E(({heading:p,view:x})=>[ee(t.$slots,"weekday-heading",{heading:p,view:x})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:E(({split:p})=>[ee(t.$slots,"split-label",{split:p,view:o.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),a.hideBody?b("",!0):(d(),h("div",ri,[_(rs,{name:`slide-fade--${o.transitionDirection}`,appear:a.transitions},{default:E(()=>[(d(),h("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:a.transitions?o.view.id:!1,column:""},[a.showAllDayEvents&&s.hasTimeColumn&&(!s.cellOrSplitMinWidth||s.isDayView&&!a.minSplitWidth)?(d(),ce(n,Ls(js({key:0},s.allDayBar)),{event:E(({event:p,view:x})=>[ee(t.$slots,"event",{view:x,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:V=>s.onEventTitleBlur(V,p),innerHTML:p.title},null,40,di)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,ui)):b("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,ci)):b("",!0)])]),_:3},16)):b("",!0),i("div",{class:pe(["vuecal__bg",{vuecal__flex:!s.hasTimeColumn}]),column:""},[i("div",hi,[s.hasTimeColumn?(d(),h("div",mi,[a.showAllDayEvents&&s.cellOrSplitMinWidth&&!(s.isDayView&&!a.minSplitWidth)?(d(),h("div",{key:0,class:"vuecal__all-day-text",style:P({height:s.allDayBar.height})},[i("span",null,T(o.texts.allDay),1)],4)):b("",!0),(d(!0),h(fe,null,ke(s.timeCells,(p,x)=>(d(),h("div",{class:"vuecal__time-cell",key:x,style:P(`height: ${a.timeCellHeight}px`)},[ee(t.$slots,"time-cell",{hours:p.hours,minutes:p.minutes},()=>[e[6]||(e[6]=i("span",{class:"vuecal__time-cell-line"},null,-1)),i("span",vi,T(p.label),1)])],4))),128))])):b("",!0),a.showWeekNumbers&&s.isMonthView?(d(),h("div",pi,[(d(),h(fe,null,ke(6,p=>i("div",{class:"vuecal__flex vuecal__week-number-cell",key:p,grow:""},[ee(t.$slots,"week-number-cell",{week:s.getWeekNumber(p-1)},()=>[ve(T(s.getWeekNumber(p-1)),1)])])),64))])):b("",!0),i("div",{class:pe(["vuecal__flex vuecal__cells",`${o.view.id}-view`]),grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,column:!!s.cellOrSplitMinWidth},[s.cellOrSplitMinWidth&&s.isWeekView?(d(),ce(f,{key:0,"transition-direction":o.transitionDirection,"week-days":s.weekDays,"switch-to-narrower-view":s.switchToNarrowerView,style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},gs({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:E(({heading:p,view:x})=>[ee(t.$slots,"weekday-heading",{heading:p,view:x})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:E(({split:p})=>[ee(t.$slots,"split-label",{split:p,view:o.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):s.hasSplits&&a.stickySplitLabels&&a.minSplitWidth?(d(),h("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(fe,null,ke(s.daySplits,(p,x)=>(d(),h("div",{class:pe(["day-split-header",p.class||!1]),key:x},[ee(t.$slots,"split-label",{split:p,view:o.view.id},()=>[ve(T(p.label),1)])],2))),128))],4)):b("",!0),a.showAllDayEvents&&s.hasTimeColumn&&(s.isWeekView&&s.cellOrSplitMinWidth||s.isDayView&&s.hasSplits&&a.minSplitWidth)?(d(),ce(n,Ls(js({key:2},s.allDayBar)),{event:E(({event:p,view:x})=>[ee(t.$slots,"event",{view:x,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:V=>s.onEventTitleBlur(V,p),innerHTML:p.title},null,40,yi)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,_i)):b("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,gi)):b("",!0)])]),_:3},16)):b("",!0),i("div",{class:"vuecal__flex",ref:p=>o.cellsEl=p,grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(fe,null,ke(s.viewCells,(p,x)=>(d(),ce(m,{key:x,options:t.$props,"edit-events":s.editEvents,data:p,"cell-width":a.hideWeekdays.length&&(s.isWeekView||s.isMonthView)&&s.cellWidth,"min-timestamp":s.minTimestamp,"max-timestamp":s.maxTimestamp,"cell-splits":s.hasSplits&&s.daySplits||[]},{"cell-content":E(({events:V,split:Y,selectCell:I})=>[ee(t.$slots,"cell-content",{cell:p,view:o.view,goNarrower:I,events:V},()=>[Y&&!a.stickySplitLabels?(d(),h("div",{key:0,class:"split-label",innerHTML:Y.label},null,8,Di)):b("",!0),p.content?(d(),h("div",{key:1,class:"vuecal__cell-date",innerHTML:p.content},null,8,bi)):b("",!0),(s.isMonthView&&!a.eventsOnMonthView||s.isYearsOrYearView&&a.eventsCountOnYearView)&&V.length?(d(),h("div",ki,[ee(t.$slots,"events-count",{view:o.view,events:V},()=>[ve(T(V.length),1)])])):b("",!0),!s.cellOrSplitHasEvents(V,Y)&&s.isWeekOrDayView?(d(),h("div",Ti,[ee(t.$slots,"no-event",{},()=>[ve(T(o.texts.noEvent),1)])])):b("",!0)])]),event:E(({event:V,view:Y})=>[ee(t.$slots,"event",{view:Y,event:V},()=>[s.editEvents.title&&V.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:I=>s.onEventTitleBlur(I,V),innerHTML:V.title},null,40,Ci)):V.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:V.title},null,8,Ei)):b("",!0),a.time&&!V.allDay&&!(s.isMonthView&&(V.allDay||a.showAllDayEvents==="short"))&&!s.isShortMonthView?(d(),h("div",Si,[ve(T(o.utils.date.formatTime(V.start,s.TimeFormat)),1),V.endTimeMinutes?(d(),h("span",xi," - "+T(o.utils.date.formatTime(V.end,s.TimeFormat,null,!0)),1)):b("",!0),V.daysCount>1&&(V.segments[p.formattedDate]||{}).isFirstDay?(d(),h("small",Mi," +"+T(V.daysCount-1)+T((o.texts.day[0]||"").toLowerCase()),1)):b("",!0)])):b("",!0),V.content&&!(s.isMonthView&&V.allDay&&a.showAllDayEvents==="short")&&!s.isShortMonthView?(d(),h("div",{key:3,class:"vuecal__event-content",innerHTML:V.content},null,8,Vi)):b("",!0)])]),"no-event":E(()=>[ee(t.$slots,"no-event",{},()=>[ve(T(o.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,wi)],10,fi)])],2)]))]),_:3},8,["name","appear"]),o.ready?b("",!0):(d(),h("div",$i,e[7]||(e[7]=[i("div",null,null,-1)])))]))],10,ni)}const qt=24*60,os={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},Ns=["years","year","month","week","day"],Bs=new ga(os),Ai={name:"vue-cal",components:{"vuecal-cell":Gs,"vuecal-header":za,WeekdaysHeadings:Js,AllDayBar:li},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:qt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...os},utils:{date:(this.disableDatePrototypes?Bs.removePrototypes():!1)||Bs,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(t){if(typeof this.locale=="object"){this.texts=Object.assign({},os,t),this.utils.date.updateTexts(this.texts);return}const e=await _a(Object.assign({"./i18n/ar.json":()=>H(()=>import("./ar.es.1c5432ef.js"),[],import.meta.url),"./i18n/bg.json":()=>H(()=>import("./bg.es.133f1d79.js"),[],import.meta.url),"./i18n/bn.json":()=>H(()=>import("./bn.es.d6f1145b.js"),[],import.meta.url),"./i18n/bs.json":()=>H(()=>import("./bs.es.424f8392.js"),[],import.meta.url),"./i18n/ca.json":()=>H(()=>import("./ca.es.10691e62.js"),[],import.meta.url),"./i18n/cs.json":()=>H(()=>import("./cs.es.d467a362.js"),[],import.meta.url),"./i18n/da.json":()=>H(()=>import("./da.es.5c82d648.js"),[],import.meta.url),"./i18n/de.json":()=>H(()=>import("./de.es.fc3d5977.js"),[],import.meta.url),"./i18n/el.json":()=>H(()=>import("./el.es.09498e63.js"),[],import.meta.url),"./i18n/en.json":()=>H(()=>import("./en.es.cf2ff814.js"),[],import.meta.url),"./i18n/es.json":()=>H(()=>import("./es.es.1bcf8f87.js"),[],import.meta.url),"./i18n/et.json":()=>H(()=>import("./et.es.dfc4f817.js"),[],import.meta.url),"./i18n/fa.json":()=>H(()=>import("./fa.es.54e3e37f.js"),[],import.meta.url),"./i18n/fi.json":()=>H(()=>import("./fi.es.f02a3c28.js"),[],import.meta.url),"./i18n/fr.json":()=>H(()=>import("./fr.es.7cd25089.js"),[],import.meta.url),"./i18n/he.json":()=>H(()=>import("./he.es.a00ad66b.js"),[],import.meta.url),"./i18n/hr.json":()=>H(()=>import("./hr.es.c03853d7.js"),[],import.meta.url),"./i18n/hu.json":()=>H(()=>import("./hu.es.5447b096.js"),[],import.meta.url),"./i18n/id.json":()=>H(()=>import("./id.es.3384c049.js"),[],import.meta.url),"./i18n/is.json":()=>H(()=>import("./is.es.5855059c.js"),[],import.meta.url),"./i18n/it.json":()=>H(()=>import("./it.es.a2e39e6b.js"),[],import.meta.url),"./i18n/ja.json":()=>H(()=>import("./ja.es.549021b7.js"),[],import.meta.url),"./i18n/ka.json":()=>H(()=>import("./ka.es.b97af2c6.js"),[],import.meta.url),"./i18n/ko.json":()=>H(()=>import("./ko.es.65303d13.js"),[],import.meta.url),"./i18n/lt.json":()=>H(()=>import("./lt.es.6bd7ea81.js"),[],import.meta.url),"./i18n/mn.json":()=>H(()=>import("./mn.es.c0946de5.js"),[],import.meta.url),"./i18n/nl.json":()=>H(()=>import("./nl.es.fb098524.js"),[],import.meta.url),"./i18n/no.json":()=>H(()=>import("./no.es.00bfcb00.js"),[],import.meta.url),"./i18n/pl.json":()=>H(()=>import("./pl.es.d9683cfc.js"),[],import.meta.url),"./i18n/pt-br.json":()=>H(()=>import("./pt-br.es.a068d598.js"),[],import.meta.url),"./i18n/pt-pt.json":()=>H(()=>import("./pt-pt.es.a068d598.js"),[],import.meta.url),"./i18n/ro.json":()=>H(()=>import("./ro.es.c05b88b7.js"),[],import.meta.url),"./i18n/ru.json":()=>H(()=>import("./ru.es.18bbb6e3.js"),[],import.meta.url),"./i18n/sk.json":()=>H(()=>import("./sk.es.cf475731.js"),[],import.meta.url),"./i18n/sl.json":()=>H(()=>import("./sl.es.4f19bf30.js"),[],import.meta.url),"./i18n/sq.json":()=>H(()=>import("./sq.es.a264a995.js"),[],import.meta.url),"./i18n/sr.json":()=>H(()=>import("./sr.es.0d3cfbc7.js"),[],import.meta.url),"./i18n/sv.json":()=>H(()=>import("./sv.es.f64e2fa4.js"),[],import.meta.url),"./i18n/tr.json":()=>H(()=>import("./tr.es.576f73c9.js"),[],import.meta.url),"./i18n/uk.json":()=>H(()=>import("./uk.es.ed3c3f03.js"),[],import.meta.url),"./i18n/vi.json":()=>H(()=>import("./vi.es.4582ebe1.js"),[],import.meta.url),"./i18n/zh-cn.json":()=>H(()=>import("./zh-cn.es.50f64b69.js"),[],import.meta.url),"./i18n/zh-hk.json":()=>H(()=>import("./zh-hk.es.6da7777e.js"),[],import.meta.url)}),`./i18n/${t}.json`,3);this.texts=Object.assign({},os,e),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){H(()=>import("./drag-and-drop.es.bedab85d.js"),[],import.meta.url).then(t=>{const{DragAndDrop:e}=t;this.modules.dnd=new e(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(t){return Ns.includes(t)||(console.error(`Vue Cal: invalid active-view parameter provided: "${t}".
A valid view must be one of: ${Ns.join(", ")}.`),t="week"),this.enabledViews.includes(t)||(console.warn(`Vue Cal: the provided active-view "${t}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),t=this.enabledViews[0]),t},switchToNarrowerView(t=null){this.transitionDirection="right";const e=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];e&&this.switchView(e,t)},switchView(t,e=null,a=!1){t=this.validateView(t);const l=this.utils.date,o=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&a){if(this.view.id===t)return;const n=this.enabledViews;this.transitionDirection=n.indexOf(this.view.id)>n.indexOf(t)?"left":"right"}const s=this.view.id;switch(this.view.events=[],this.view.id=t,this.view.firstCellDate=null,this.view.lastCellDate=null,e||(e=this.view.selectedDate||this.view.startDate),t){case"years":{this.view.startDate=new Date(Math.floor(e.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(e.getFullYear(),0,1),this.view.endDate=new Date(e.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(e.getFullYear(),e.getMonth(),1),this.view.endDate=new Date(e.getFullYear(),e.getMonth()+1,1),this.view.endDate.setSeconds(-1);let n=new Date(this.view.startDate);if(n.getDay()!==(this.startWeekOnSunday?0:1)&&(n=l.getPreviousFirstDayOfWeek(n,this.startWeekOnSunday)),this.view.firstCellDate=n,this.view.lastCellDate=l.addDays(n,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const f=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=l.addDays(this.view.firstCellDate,f)}if([0,6].includes(this.view.startDate.getDay())){const f=this.view.startDate.getDay()===6?2:1;this.view.startDate=l.addDays(this.view.startDate,f)}if([0,6].includes(this.view.lastCellDate.getDay())){const f=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=l.subtractDays(this.view.lastCellDate,f)}if([0,6].includes(this.view.endDate.getDay())){const f=this.view.endDate.getDay()===0?2:1;this.view.endDate=l.subtractDays(this.view.endDate,f)}}break}case"week":{e=l.getPreviousFirstDayOfWeek(e,this.startWeekOnSunday);const n=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?l.addDays(e,1):e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=l.addDays(e,n),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(e),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const u=this.view.startDate&&this.view.startDate.getTime();if(!(s===t&&u===o)&&(this.$emit("update:activeView",t),this.ready)){const n=this.view.startDate,f={view:t,startDate:n,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:l.getWeek(this.startWeekOnSunday?l.addDays(n,1):n)}:{}};this.$emit("view-change",f)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(t=!0){const e=this.utils.date;this.transitionDirection=t?"right":"left";const a=t?1:-1;let l=null;const{startDate:o,id:s}=this.view;switch(s){case"years":l=new Date(o.getFullYear()+25*a,0,1);break;case"year":l=new Date(o.getFullYear()+1*a,1,1);break;case"month":l=new Date(o.getFullYear(),o.getMonth()+1*a,1);break;case"week":l=e[t?"addDays":"subtractDays"](e.getPreviousFirstDayOfWeek(o,this.startWeekOnSunday),7);break;case"day":l=e[t?"addDays":"subtractDays"](o,1);const u=l.getDay(),n=this.startWeekOnSunday?u:(u||7)-1;if(this.weekDays[n].hide){const m=this.weekDays.map((x,V)=>({...x,i:V}));let p=0;t?([...m.slice(n),...m].find(x=>(p++,!x.hide)).i,p--):[...m,...m.slice(0,n)].reverse().find(x=>(p++,!x.hide)).i,l=e[t?"addDays":"subtractDays"](l,p)}break}l&&this.switchView(s,l)},addEventsToView(t=[]){const e=this.utils.event,{startDate:a,endDate:l,firstCellDate:o,lastCellDate:s}=this.view;if(t.length||(this.view.events=[]),t=t.length?t:[...this.mutableEvents],!t||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let u=t.filter(n=>e.eventInRange(n,a,l));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(u=u.map(n=>n.daysCount>1?e.createEventSegments(n,o||a,s||l):n)),this.view.events.push(...u),this.isMonthView&&(this.view.outOfScopeEvents=[],t.forEach(n=>{(e.eventInRange(n,o,a)||e.eventInRange(n,l,s))&&(this.view.events.some(f=>f._eid===n._eid)||this.view.outOfScopeEvents.push(n))}))},findAncestor(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t},isDOMElementAnEvent(t){return t.classList.contains("vuecal__event")||this.findAncestor(t,"vuecal__event")},onMouseMove(t){const{resizeAnEvent:e,dragAnEvent:a,dragCreateAnEvent:l}=this.domEvents;e._eid===null&&a._eid===null&&!l.start||(t.preventDefault(),e._eid?this.eventResizing(t):this.dragToCreateEvent&&l.start&&this.eventDragCreation(t))},onMouseUp(t){const{focusAnEvent:e,resizeAnEvent:a,clickHoldAnEvent:l,clickHoldACell:o,dragCreateAnEvent:s}=this.domEvents,{_eid:u}=l,{_eid:n}=a;let f=!1;const{event:m,start:p}=s,x=this.isDOMElementAnEvent(t.target),V=e.mousedUp;if(e.mousedUp=!1,x&&(this.domEvents.cancelClickEventCreation=!0),o.eventCreated)return;if(n){const{originalEnd:I,originalEndTimeMinutes:ye,endTimeMinutes:se}=a,J=this.view.events.find(G=>G._eid===a._eid);if(f=se&&se!==ye,J&&J.end.getTime()!==I.getTime()){const G=this.mutableEvents.find(oe=>oe._eid===a._eid);G.endTimeMinutes=J.endTimeMinutes,G.end=J.end;const _e=this.cleanupEvent(J),C={...this.cleanupEvent(J),end:I,endTimeMinutes:J.originalEndTimeMinutes};this.$emit("event-duration-change",{event:_e,oldDate:a.originalEnd,originalEvent:C}),this.$emit("event-change",{event:_e,originalEvent:C})}J&&(J.resizing=!1),a._eid=null,a.start=null,a.split=null,a.segment=null,a.originalEndTimeMinutes=null,a.originalEnd=null,a.endTimeMinutes=null,a.startCell=null,a.endCell=null}else p&&(m&&(this.emitWithEvent("event-drag-create",m),s.event.resizing=!1),s.start=null,s.split=null,s.event=null);!x&&!n&&this.unfocusEvent(),l.timeoutId&&!u&&(clearTimeout(l.timeoutId),l.timeoutId=null),o.timeoutId&&(clearTimeout(o.timeoutId),o.timeoutId=null);const Y=typeof this.onEventClick=="function";if(V&&!f&&!u&&!m&&Y){let I=this.view.events.find(ye=>ye._eid===e._eid);return!I&&this.isMonthView&&(I=this.view.outOfScopeEvents.find(ye=>ye._eid===e._eid)),I&&this.onEventClick(I,t)}},onKeyUp(t){t.keyCode===27&&this.cancelDelete()},eventResizing(t){const{resizeAnEvent:e}=this.domEvents,a=this.view.events.find(m=>m._eid===e._eid)||{segments:{}},{minutes:l,cursorCoords:o}=this.minutesAtCursor(t),s=a.segments&&a.segments[e.segment],{date:u,event:n}=this.utils,f=Math.max(l,this.timeFrom+1,(s||a).startTimeMinutes+1);if(a.endTimeMinutes=e.endTimeMinutes=f,this.snapToTime){const m=a.endTimeMinutes+this.snapToTime/2;a.endTimeMinutes=m-m%this.snapToTime}if(s&&(s.endTimeMinutes=a.endTimeMinutes),a.end.setHours(0,a.endTimeMinutes,a.endTimeMinutes===qt?-1:0,0),this.resizeX&&this.isWeekView){a.daysCount=u.countDays(a.start,a.end);const m=this.cellsEl,p=m.offsetWidth/m.childElementCount,x=Math.floor(o.x/p);if(e.startCell===null&&(e.startCell=x-(a.daysCount-1)),e.endCell!==x){e.endCell=x;const V=u.addDays(a.start,x-e.startCell),Y=Math.max(u.countDays(a.start,V),1);if(Y!==a.daysCount){let I=null;Y>a.daysCount?I=n.addEventSegment(a):I=n.removeEventSegment(a),e.segment=I,a.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:a._eid,end:a.end,endTimeMinutes:a.endTimeMinutes})},eventDragCreation(t){const{dragCreateAnEvent:e}=this.domEvents,{start:a,startCursorY:l,split:o}=e,s=new Date(a),{minutes:u,cursorCoords:{y:n}}=this.minutesAtCursor(t);if(!(!e.event&&Math.abs(l-n)<this.dragToCreateThreshold))if(e.event){if(s.setHours(0,u,u===qt?-1:0,0),this.snapToTime){let p=s.getHours()*60+s.getMinutes();const x=p+this.snapToTime/2;p=x-x%this.snapToTime,s.setHours(0,p,0,0)}const f=a<s,{event:m}=e;m.start=f?a:s,m.end=f?s:a,m.startTimeMinutes=m.start.getHours()*60+m.start.getMinutes(),m.endTimeMinutes=m.end.getHours()*60+m.end.getMinutes()}else{if(e.event=this.utils.event.createAnEvent(a,1,{split:o}),!e.event){e.start=null,e.split=null,e.event=null;return}e.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:t,clickHoldAnEvent:e}=this.domEvents,a=this.view.events.find(l=>l._eid===(t._eid||e._eid));t._eid=null,e._eid=null,a&&(a.focused=!1,a.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:t}=this.domEvents;if(t._eid){const e=this.view.events.find(a=>a._eid===t._eid);e&&(e.deleting=!1),t._eid=null,t.timeoutId=null}},onEventTitleBlur(t,e){if(e.title===t.target.innerHTML)return;const a=e.title;e.title=t.target.innerHTML;const l=this.cleanupEvent(e);this.$emit("event-title-change",{event:l,oldTitle:a}),this.$emit("event-change",{event:l,originalEvent:{...l,title:a}})},updateMutableEvents(){const t=this.utils.date;this.mutableEvents=[],this.events.forEach(e=>{const a=typeof e.start=="string"?t.stringToDate(e.start):e.start,l=t.formatDateLite(a),o=t.dateToMinutes(a);let s=null;typeof e.end=="string"&&e.end.includes("24:00")?(s=new Date(e.end.replace(" 24:00","")),s.setHours(23,59,59,0)):s=typeof e.end=="string"?t.stringToDate(e.end):e.end;let u=t.formatDateLite(s),n=t.dateToMinutes(s);(!n||n===qt)&&(!this.time||typeof e.end=="string"&&e.end.length===10?s.setHours(23,59,59,0):s.setSeconds(s.getSeconds()-1),u=t.formatDateLite(s),n=qt);const f=l!==u;e=Object.assign({...this.utils.event.eventDefaults},e,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:f?{}:null,start:a,startTimeMinutes:o,end:s,endTimeMinutes:n,daysCount:f?t.countDays(a,s):1,class:e.class}),this.mutableEvents.push(e)})},minutesAtCursor(t){return this.utils.cell.minutesAtCursor(t)},createEvent(t,e,a={}){return this.utils.event.createAnEvent(t,e,a)},cleanupEvent(t){return t={...t},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(a=>{a in t&&delete t[a]}),t.repeat||delete t.repeat,t},emitWithEvent(t,e){this.$emit(t,this.cleanupEvent(e))},updateSelectedDate(t){if(t&&typeof t=="string"?t=this.utils.date.stringToDate(t):t=new Date(t),t&&t instanceof Date){const{selectedDate:e}=this.view;e&&(this.transitionDirection=e.getTime()>t.getTime()?"left":"right"),t.setHours(0,0,0,0),(!e||e.getTime()!==t.getTime())&&(this.view.selectedDate=t),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(t){const e=this.utils.date,l=this.firstCellDateWeekNumber+t,o=this.startWeekOnSunday?1:0;return l>52?e.getWeek(e.addDays(this.view.firstCellDate,7*t+o)):l},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const t=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],e=t.offsetWidth-t.children[0].offsetWidth;if(e){const a=document.createElement("style");a.id="vuecal-align-with-scrollbar",a.type="text/css",a.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${e}px}`,document.head.appendChild(a)}},cellOrSplitHasEvents(t,e=null){return t.length&&(!e&&t.length||e&&t.some(a=>a.split===e.id))}},created(){this.utils.cell=new Da(this),this.utils.event=new ka(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const t=this.utils.date,e="ontouchstart"in window,{resize:a,drag:l,create:o,delete:s,title:u}=this.editEvents,n=this.onEventClick&&typeof this.onEventClick=="function";(a||l||o||s||u||n)&&window.addEventListener(e?"touchend":"mouseup",this.onMouseUp),(a||l||o&&this.dragToCreateEvent)&&window.addEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),u&&window.addEventListener("keyup",this.onKeyUp),e&&(this.$refs.vuecal.oncontextmenu=function(p){p.preventDefault(),p.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const f=this.view.startDate,m={view:this.view.id,startDate:f,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:t.getWeek(this.startWeekOnSunday?t.addDays(f,1):f)}:{}};this.$emit("ready",m),this.ready=!0},beforeUnmount(){const t="ontouchstart"in window;window.removeEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(t?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(t=>this.views[t].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const t=this.utils.date,e=this.view.firstCellDate;return t.getWeek(this.startWeekOnSunday?t.addDays(e,1):e)},timeCells(){const t=[];for(let e=this.timeFrom,a=this.timeTo;e<a;e+=this.timeStep)t.push({hours:Math.floor(e/60),minutes:e%60,label:this.utils.date.formatTime(e,this.TimeFormat),value:e});return t},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(t=>!t.hide)||[]).map((t,e)=>({...t,id:t.id||e+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let t=null;return this.hasSplits&&this.minSplitWidth?t=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(t=this.visibleDaysCount*this.minCellWidth),t},allDayBar(){let t=this.allDayBarHeight||null;return t&&!isNaN(t)&&(t+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:t}},minTimestamp(){let t=null;return this.minDate&&typeof this.minDate=="string"?t=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(t=this.minDate),t?t.getTime():null},maxTimestamp(){let t=null;return this.maxDate&&typeof this.maxDate=="string"?t=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(t=this.maxDate),t?t.getTime():null},weekDays(){let{weekDays:t,weekDaysShort:e=[]}=this.texts;return t=t.slice(0).map((a,l)=>({label:a,...e.length?{short:e[l]}:{},hide:this.hideWeekends&&l>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(l+1)})),this.startWeekOnSunday&&t.unshift(t.pop()),t},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(t=>({label:t}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((t,e)=>{let a=this.specialHours[e+1]||[];return Array.isArray(a)||(a=[a]),t=[],a.forEach(({from:l,to:o,class:s,label:u},n)=>{t[n]={day:e+1,from:[null,void 0].includes(l)?null:l*1,to:[null,void 0].includes(o)?null:o*1,class:s||"",label:u||""}}),t})},viewTitle(){const t=this.utils.date;let e="";const a=this.view.startDate,l=a.getFullYear(),o=a.getMonth();switch(this.view.id){case"years":{e=this.texts.years;break}case"year":{e=l;break}case"month":{e=`${this.months[o].label} ${l}`;break}case"week":{const s=this.view.endDate,u=a.getFullYear();let n=this.texts.months[a.getMonth()];this.xsmall&&(n=n.substring(0,3));let f=`${n} ${u}`;if(s.getMonth()!==a.getMonth()){const m=s.getFullYear();let p=this.texts.months[s.getMonth()];this.xsmall&&(p=p.substring(0,3)),u===m?f=`${n} - ${p} ${u}`:this.small?f=`${n.substring(0,3)} ${u} - ${p.substring(0,3)} ${m}`:f=`${n} ${u} - ${p} ${m}`}e=`${this.texts.week} ${t.getWeek(this.startWeekOnSunday?t.addDays(a,1):a)} (${f})`;break}case"day":{e=this.utils.date.formatDate(a,this.texts.dateFormat,this.texts);break}}return e},viewCells(){const t=this.utils.date;let e=[],a=null,l=!1;this.watchRealTime||(this.now=new Date);const o=this.now;switch(this.view.id){case"years":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(25)).map((s,u)=>{const n=new Date(a+u,0,1),f=new Date(a+u+1,0,1);return f.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:f,content:a+u,current:a+u===o.getFullYear()}});break}case"year":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(12)).map((s,u)=>{const n=new Date(a,u,1),f=new Date(a,u+1,1);return f.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:f,content:this.xsmall?this.months[u].label.substr(0,3):this.months[u].label,current:u===o.getMonth()&&a===o.getFullYear()}});break}case"month":{const s=this.view.startDate.getMonth(),u=new Date(this.view.firstCellDate);l=!1,e=Array.apply(null,Array(42)).map((n,f)=>{const m=t.addDays(u,f),p=new Date(m);p.setHours(23,59,59,0);const x=!l&&t.isToday(m)&&!l++;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,content:m.getDate(),today:x,outOfScope:m.getMonth()!==s,class:`vuecal__cell--day${m.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(e=e.filter(n=>{const f=n.startDate.getDay()||7;return!(this.hideWeekends&&f>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(f))}));break}case"week":{l=!1;const s=this.view.startDate,u=this.weekDays;e=u.map((n,f)=>{const m=t.addDays(s,this.startWeekOnSunday&&this.hideWeekends?f-1:f),p=new Date(m);p.setHours(23,59,59,0);const x=(m.getDay()||7)-1;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,today:!l&&t.isToday(m)&&!l++,specialHours:this.specialDayHours[x]||[]}}).filter((n,f)=>!u[f].hide);break}case"day":{const s=this.view.startDate,u=new Date(this.view.startDate);u.setHours(23,59,59,0);const n=(s.getDay()||7)-1;e=[{startDate:s,formattedDate:t.formatDateLite(s),endDate:u,today:t.isToday(s),specialHours:this.specialDayHours[n]||[]}];break}}return e},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((t,e)=>t+e.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:t,dragAnEvent:e,dragCreateAnEvent:a}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":t._eid,"vuecal--drag-creating-event":a.event,"vuecal--dragging-event":e._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(t,e){this.updateMutableEvents(t),this.addEventsToView()},deep:!0},locale(t){this.loadLocale(t)},selectedDate(t){this.updateSelectedDate(t)},activeView(t){this.switchView(t)}}},Li=$t(Ai,[["render",Oi]]);const ji={class:"filter-wrapper pb-2 mb-1"},Ii={class:"mb-2 relative"},Hi={class:"mb-2 relative"},Wi={class:"flex flex-wrap gap-1"},Fi={class:"view-btns"},Ui=i("i",{class:"pi pi-search"},null,-1),Ni={key:0},Bi={class:"grid mt-2"},Yi={class:"col-12 lg:col-6 xl:col-3"},zi={class:"card mb-0",style:"border-left:6px solid #000;"},Ri={to:"/tags",class:"flex justify-content-between"},qi=i("h4",{class:"mb-0 block text-xl font-semibold tracking-tight"},"Total Tasks",-1),Pi={class:"text-900 font-bold text-2xl"},Ki={to:"/tags",class:"flex justify-content-between"},Ji={class:"mb-0 text-xl font-semibold tracking-tight"},Gi={class:"text-900 font-bold text-2xl"},Xi={class:"col-12"},Zi={class:"task-container"},Qi=["onClick"],el={class:"title-group"},tl={class:"title line-clamp-1",style:{"font-weight":"600"}},sl={style:{"font-size":"12px"}},al=i("strong",null,"Due Date:",-1),il={class:"w-full flex justify-content-center"},ll=i("p",{class:"text-center font-medium font-italic"},"No data found",-1),nl=["onMouseenter"],ol=["onDblclick"],rl={class:"task-status"},dl={key:1},ul={class:"flex align-items-center"},cl=["onClick","title"],hl=["onsubmit"],ml=["onMouseenter"],vl={key:0,class:"flex gap-1 w-full h-full justify-content-center align-items-center"},pl={class:"flex justify-content-start gap-1"},fl=["src"],yl={key:0,class:"inline-block"},_l={class:"task-status-2"},gl={key:0,class:"flex align-items-center"},wl=["title"],Dl={key:1},bl={class:"flex align-items-center"},kl={key:0,class:"pi pi-calendar"},Tl={key:0,class:"inline-block"},Cl={class:"task-status-2 flex"},El=i("i",{class:"pi pi-flag pt-2"},null,-1),Sl={key:0,class:"flex align-items-center"},xl={key:1,class:"pt-1"},Ml={key:1},Vl={class:"flex align-items-center"},$l=["onMouseover","onMouseleave"],Ol=["onClick","onMouseleave"],Al={key:2,class:"main-container"},Ll={class:"content"},jl={class:"boardContainer",style:{display:"flex","overflow-x":"auto","align-items":"start"}},Il={class:"column-container"},Hl={class:""},Wl=["onClick"],Fl={class:""},Ul={class:"font-semibold truncate-board text-sm title"},Nl={class:"flex align-items-center gap-2 mt-1"},Bl={class:"status text-sm"},Yl={key:0,class:"mt-2 flex align-items-center gap-2"},zl=i("i",{class:"pi pi-user text-lg"},null,-1),Rl={class:"flex justify-content-start gap-1"},ql=["src"],Pl={key:1,class:"mt-2 flex align-items-center gap-2"},Kl=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),Jl={key:2,class:"mt-2 flex align-items-center gap-2"},Gl=i("i",{class:"pi pi-flag text-lg"},null,-1),Xl={class:"text-sm"},Zl=["onClick"],Ql=i("p",{class:"mb-1"},"Subtask",-1),en={class:"text-sm font-semibold"},tn=["onClick"],sn={class:"font-semibold truncate-board text-sm title"},an={class:"flex align-items-center gap-2 mt-1"},ln={class:"status text-sm"},nn={key:0,class:"mt-2 flex align-items-center gap-2"},on=i("i",{class:"pi pi-user text-lg"},null,-1),rn={class:"flex justify-content-start gap-1"},dn=["src"],un={key:1,class:"mt-2 flex align-items-center gap-2"},cn=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),hn={key:2,class:"mt-2 flex align-items-center gap-2"},mn=i("i",{class:"pi pi-flag text-lg"},null,-1),vn={class:"text-sm"},pn={class:"mt-2 flex align-items-center gap-2"},fn=i("i",{class:"pi pi-angle-right text-lg"},null,-1),yn={class:"text-sm font-semibold"},_n={key:3,class:""},gn=["onClick","innerHTML"],wn={key:4},Dn={class:"commit-card-wrapper mb-2"},bn={class:"flex justify-content-between align-items-center bb"},kn={class:"flex align-items-center gap-2"},Tn=i("div",{class:"pi pi-user"},null,-1),Cn={class:"m-0"},En={class:"font-light mt-2 mb-0 commit-title"},Sn={class:"text-right"},xn={class:"font-normal mb-0 text-mute"},Mn=["href"],Vn={key:1,class:"w-full flex justify-content-center my-1"},$n=i("h4",null,[i("i",null,"No Commits Found")],-1),On=[$n],An={__name:"TaskTable",props:["kanbanTasks"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask"],setup(t,{emit:e}){var ss;const a=Ks(),l=We(),{getSingleProject:o,getTaskAssignModalData:s,editTask:u,createTask:n}=We(),{modStatusList:f,singleProject:m,statuslist:p,isTaskEdited:x,recentTaskData:V,countTasksByStatus:Y,totalTaskCount:I,calendarTasks:ye,tasks:se}=Dt(We()),J=v(mt("create_task")),G=v(mt("update_task")),_e=v(mt("delete_task")),C=v(mt("download_task")),oe=Jt(),$e=e,Ee=v(se||[]),ae=(ss=ls().params)==null?void 0:ss.projects,F=v(),z=v(),O=v(),he=v(),ge=v(),we=v(),re=v({}),A=v("list"),L=v(null),de=w=>{A.value=w,w==="git"&&M()},ie=v([]);(async()=>{var Z,me;const w=vt("token"),{data:y,pending:j,error:W}=await Hs("branchList",()=>$fetch(`${a.public.apiUrl}/gitlab/${ae}/branch`,{headers:{Authorization:`Bearer ${w.value}`}}));if(((Z=y.value)==null?void 0:Z.branch_list.length)>0){let dt=(me=y.value.branch_list)==null?void 0:me.map(Ke=>({label:Ke.name,name:Ke.name}));ie.value=[{label:"",name:"All"},...dt]}else ie.value=[{label:"No Branches",name:"No Branches"}]})();const Fe=v({label:"",name:"All"}),Q=v([]),M=async()=>{var Z;const w=vt("token"),{data:y,pending:j,error:W}=await Hs("commitsList",()=>{var me;return $fetch(`${a.public.apiUrl}/gitlab/${ae}/commit?branch=${Fe.value?(me=Fe.value)==null?void 0:me.label:""}`,{headers:{Authorization:`Bearer ${w.value}`}})});((Z=y.value)==null?void 0:Z.code)===200?Q.value=y.value.commit_list:Q.value=[]};A.value==="git"&&M();const le=()=>{M()},Me=v([{name:"All",code:""},{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Ot=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),st=w=>{const y=w,j=new Date(y),W=j.getFullYear(),Z=String(j.getMonth()+1).padStart(2,"0");return`${String(j.getDate()).padStart(2,"0")}-${Z}-${W}`},Ue=v({}),bt=v(null),ot=w=>{bt.value=w,Ne.value!==w&&(xe.value={...xe.value,[w]:!1},Ne.value=null)},Ne=v(null),xe=v({}),Be=v(null),Ze=v(!1),pt=w=>{Be.value=w.data.name;const y=document.getElementById(`inputTaskName${w.key}`);Ne.value=w.key,xe.value=Object.keys(xe.value).reduce((j,W)=>(j[W]=!1,j),{}),Pt(()=>{y&&y.focus()}),xe.value={...xe.value,[w.key]:!0}},U=v(!1);Ae(Be,(w,y)=>{y!==null&&(U.value=!0)});let Ve=v(null);const Ye=w=>{Ve.value&&(clearTimeout(Ve.value),Ve.value=null),Ve.value=setTimeout(()=>{$e("handleTaskDetailView",w),Ve.value=null},250)},at=w=>{Ve.value&&(clearTimeout(Ve.value),Ve.value=null),pt(w)},Re=async w=>{if(w.key==="new"){if(L.value==null)return oe.add({severity:"warn",summary:"Error",detail:"Task name is required!",group:"br",life:3e3});const y={name:L.value,parent_task_id:B.value,project_id:ae};return await n(y),L.value="",R.value=!1}else{if(U.value!==!0)return oe.add({severity:"warn",summary:"Error",detail:"Change task name!",group:"br",life:3e3});await Nt(Be.value,w.key),xe.value={...xe.value,[taskId]:!1},Be.value=null,Ne.value=null,U.value=!1}},ft=w=>{Ue.value={...Ue.value,[w]:!0}},it=w=>{Ue.value={...Ue.value,[w]:!1}},kt=w=>[{label:"Add Sub Task",icon:"pi pi-plus text-white",command:()=>{$e("openCreateSpace",w.key,"sub-task")},disabled:!J},{label:"Edit Task",icon:"pi pi-pencil text-white",command:()=>{$e("handleTaskEdit",w)},disabled:!G},{label:"Task Detail",icon:"pi pi-window-maximize text-white",command:()=>{$e("handleTaskDetailView",w)}},{label:"Delete Task",icon:"pi pi-trash text-white",command:()=>{$e("confirmDeleteTask",w.key)},disabled:!_e}],At=v(),Lt=v(),jt=v(),It=v(),Tt=v(),Qe=v(),yt=v(null),vs=()=>{if(F.value||z.value||O.value||we.value||he.value||ge.value)F.value="",z.value="",O.value="",we.value="",he.value="",ge.value="",At.value="",Lt.value="",jt.value="",It.value="",Tt.value="",Qe.value="",Ct.value=!1,Et.value=!1,Oe();else return},Oe=async()=>{At.value=F.value?F.value.map(w=>w.id):"",Lt.value=z.value?z.value.code:"",jt.value=O.value?O.value.id:"",It.value=we.value,Tt.value=he.value,Qe.value=ge.value,o(ae,At.value,Lt.value,jt.value,It.value,Tt.value,Qe.value)},Ct=v(!1),Et=v(!1),et=w=>{const y=new Date(w);he.value=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate(),Ct.value=!0,Oe()},rt=w=>{Et.value=!0;const y=new Date(w);ge.value=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate(),Oe()},Ht=()=>{Ct.value=!1,he.value="",Tt.value="",Oe()},ps=()=>{Et.value=!1,ge.value="",Qe.value="",Oe()},_t=v(!1),lt=w=>{if(_t.value=!0,w.length>0){const y=`data:text/csv;charset=utf-8,"Serial No.","Task Name","Project","Assignee","Priority","Status","Time Tracked","Due Date","Overdue"
`+w.map((Z,me)=>{var He,D;const dt=me+1,Ke=Z.data.name,xt=m.value.name,$=Z.data.assignee.split(", ").join("; "),ut=(He=Z.data.priority)!=null&&He.name?(D=Z.data.priority)==null?void 0:D.name:"",ue=Z.data.status.name;let ne=Z.data.total_duration;const tt=Math.floor(ne/3600),Je=Math.floor(ne%3600/60),Te=ne%60;tt>0?ne=`${tt} hr ${Je} min ${Te} sec`:Je>0?ne=`${Je} min ${Te} sec`:ne=`${Te} sec`;const c=Z.data.dueDateValue,g=Z.data.is_overdue?"Yes":"No";return`"${dt}","${Ke}","${xt}","${$}","${ut}","${ue}","${ne}","${c}","${g}"`}).join(`
`),j=encodeURI(y),W=document.createElement("a");W.setAttribute("href",j),W.setAttribute("download","tasks.csv"),document.body.appendChild(W),W.click(),document.body.removeChild(W),_t.value=!1}else _t.value=!1,oe.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})},Wt=v(!0);hs(async()=>{await o(ae),Wt.value=!1,Qt()});async function Ft(w,y){var j;try{const W=vt("token"),{data:Z,pending:me}=await ns(`${a.public.apiUrl}/tasks/update/${y}`,{method:"POST",headers:{Authorization:`Bearer ${W.value}`},body:{status:w==null?void 0:w.id}},"$7UcE4NQ81w");((j=Z.value)==null?void 0:j.app_message)==="success"?(oe.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),await o(ae)):oe.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(W){console.error("Error fetching data:",W)}}const Ut=v(!1),Nt=async(w,y)=>{if(w instanceof Date){Ut.value=!0;let j;if(w){const Z=new Date(w);Z.setDate(Z.getDate()+1),j=Z.toISOString()}const W={id:y,dueDate:j?new Date(new Date(j).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,project_id:ae};await u(W),x.value===!0?(Ut.value=!1,oe.add({severity:"success",summary:"Successful",detail:"Due date updated ",group:"br",life:3e3})):(Ut.value=!1,oe.add({severity:"error",summary:"Error",detail:"Unable to update due date!",group:"br",life:3e3}))}else if(w!=null&&w.name){const j={id:y,priority:w.name,project_id:ae};await u(j),x.value===!0?oe.add({severity:"success",summary:"Successful",detail:"Priority updated ",group:"br",life:3e3}):oe.add({severity:"error",summary:"Error",detail:"Unable to update task priority!",group:"br",life:3e3})}else Ze.value=!0,await u({id:y,name:w,project_id:ae}),x.value===!0?(oe.add({severity:"success",summary:"Successful",detail:"Task name updated ",group:"br",life:3e3}),Ze.value=!1):(oe.add({severity:"error",summary:"Error",detail:"Unable to update task name!",group:"br",life:3e3}),Ze.value=!1)},Bt=v(),Xt=async(w,y)=>{y.node.data.dueDateValue;const j=new Date(w);j.setHours(23,59,0,0),Bt.value=j;let W=new Date(Bt.value).toLocaleDateString("en-US",{month:"short",day:"2-digit"});y.node.data.dueDateValue=W,await Nt(Bt.value,y.node.key)};function Zt(){const w="0123456789ABCDEF";let y="#";for(let j=0;j<6;j++)y+=w[Math.floor(Math.random()*10)];return y}function St(w){return{backgroundColor:Zt(),color:"white",borderRadius:"50%",border:"2px solid white"}}const Qt=async()=>{await s(),re.value=l.users},es=v(!0),ts=Is(()=>({animation:250,group:"tasks",disabled:!es.value,ghostClass:"ghost"})),S=Is(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",padding:"12px 10px",margin:"8px 0px"})),k=(w,y)=>{const{added:j,moved:W,removed:Z}=w;j&&Ft(y,w.added.element.key)},N=v({}),X=v(null),R=v(!1),q=v(""),B=v(null),je=async()=>{R.value&&(Pe(Yt(Ee.value)),q.value="");const w={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:"",created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};R.value=!0,Ee.value=[w,...Ee.value],await Pt();const y=document.getElementById("newSubTask");y&&y.focus()},qe=async w=>{R.value&&Pe(Yt(Ee.value));const y=Yt(w.node);B.value=y.key;const j={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:"",created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};R.value=!0;const W=Ie(y.key,j,Yt(Ee.value));Ee.value=[...W],X.value=y,q.value="",N.value[w.node.key]==!0?N.value[w.node.key]=!1:N.value[w.node.key]=!0,N.value[w.node.key]=!0,await Pt();const Z=document.getElementById("newSubTask");Z&&Z.focus()};function Ie(w,y,j){for(const W of j){if(W.key===w)return W.children.unshift(y),j;if(Ie(w,y,W.children))return j}return!1}function Pe(w=Yt(Ee.value)){const y=w.filter(j=>j.key!=="new");return y.forEach(j=>{j.children&&j.children.length>0&&(j.children=Pe(j.children))}),Ee.value=y}return(w,y)=>{const j=ds,W=us,Z=cs,me=Kt,dt=Qs,Ke=zs,xt=ea,$=ta,ut=Rs,ue=ws,ne=sa,tt=qs,Je=aa,Te=ms("tooltip");return d(),h(fe,null,[i("div",ji,[_(j,{onChange:y[0]||(y[0]=c=>Oe()),modelValue:r(F),"onUpdate:modelValue":y[1]||(y[1]=c=>K(F)?F.value=c:null),options:r(re),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(W,{onChange:y[2]||(y[2]=c=>Oe()),modelValue:r(z),"onUpdate:modelValue":y[3]||(y[3]=c=>K(z)?z.value=c:null),options:r(Me),optionLabel:"name",placeholder:"Priority",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(W,{onChange:y[4]||(y[4]=c=>Oe()),modelValue:r(O),"onUpdate:modelValue":y[5]||(y[5]=c=>K(O)?O.value=c:null),options:r(f),optionLabel:"name",placeholder:"Status",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),i("div",Ii,[_(Z,{onDateSelect:y[6]||(y[6]=c=>et(c)),modelValue:r(he),"onUpdate:modelValue":y[7]||(y[7]=c=>K(he)?he.value=c:null),placeholder:"Start Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),r(Ct)?(d(),h("p",{key:0,onClick:Ht,class:"pi pi-times absolute cursor-pointer"})):b("",!0)]),i("div",Hi,[_(Z,{onDateSelect:y[8]||(y[8]=c=>rt(c)),modelValue:r(ge),"onUpdate:modelValue":y[9]||(y[9]=c=>K(ge)?ge.value=c:null),placeholder:"End Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),r(Et)?(d(),h("p",{key:0,onClick:ps,class:"pi pi-times end-cross absolute cursor-pointer"})):b("",!0)]),_(me,{onClick:vs,label:"Reset",class:"mr-2 w-full md:w-15rem mb-2",severity:"secondary"})]),_($,{class:"border-0 px-0"},{start:E(()=>[i("div",Wi,[r(J)?(d(),ce(me,{key:0,icon:"pi pi-plus",label:"Create Task",onClick:y[10]||(y[10]=c=>je()),class:"mr-2",severity:"secondary"})):b("",!0),i("div",Fi,[_(me,{icon:"pi pi-box",label:"Overview",onClick:y[11]||(y[11]=c=>de("overview")),class:pe(["board-btn view-btn",{"bg-indigo-400 text-white":r(A)==="overview"}]),severity:"secondary"},null,8,["class"]),_(me,{icon:"pi pi-list",label:"List",onClick:y[12]||(y[12]=c=>de("list")),class:pe(["table-btn view-btn",{"bg-indigo-400 text-white":r(A)==="list"}]),severity:"secondary"},null,8,["class"]),_(me,{icon:"pi pi-th-large",label:"Board",onClick:y[13]||(y[13]=c=>de("board")),class:pe(["board-btn view-btn",{"bg-indigo-400 text-white":r(A)==="board"}]),severity:"secondary"},null,8,["class"]),_(me,{icon:"pi pi-calendar",label:"Calendar",onClick:y[14]||(y[14]=c=>de("calendar")),class:pe(["calendar-btn view-btn",{"bg-indigo-400 text-white":r(A)==="calendar"}]),severity:"secondary"},null,8,["class"])]),te(_(me,{icon:"pi pi-github",onClick:y[15]||(y[15]=c=>de("git")),class:pe(["px-4",{"bg-indigo-400 text-white":r(A)==="git"}]),severity:"secondary"},null,8,["class"]),[[Te,{value:"Git Commits"},void 0,{right:!0}]]),r(C)?te((d(),ce(me,{key:1,onClick:y[16]||(y[16]=c=>lt(r(se))),loading:r(_t),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"])),[[Te,{value:"Download Tasks"},void 0,{right:!0}]]):b("",!0)])]),end:E(()=>[_(xt,{iconPosition:"right",raised:""},{default:E(()=>[_(dt,null,{default:E(()=>[Ui]),_:1}),_(Ke,{onKeyup:y[17]||(y[17]=c=>Oe()),modelValue:r(we),"onUpdate:modelValue":y[18]||(y[18]=c=>K(we)?we.value=c:null),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),r(A)==="overview"?(d(),h("div",Ni,[i("div",Bi,[i("div",Yi,[i("div",zi,[i("div",Ri,[qi,i("div",Pi,T(r(I)),1)])])]),(d(!0),h(fe,null,ke(r(Y),(c,g)=>(d(),h("div",{key:c,class:"col-12 lg:col-6 xl:col-3"},[i("div",{class:"card mb-0",style:P(`border-left:6px solid ${c.statusColor};`)},[i("div",Ki,[i("h4",Ji,T(c.statusName),1),i("div",Gi,T(c.taskCount),1)])],4)]))),128)),i("div",Xi,[_(ut,{class:"h-full"},{title:E(()=>[ve("Recent Tasks")]),content:E(()=>[i("div",Zi,[i("div",null,[(d(!0),h(fe,null,ke(r(V),c=>(d(),h("div",{key:c,onClick:g=>w.$emit("handleTaskDetailView",c),class:"task-card"},[i("div",el,[te(i("div",{class:pe("recenttaskstatus"),style:P(`background-color: ${c==null?void 0:c.statusColor};`)},null,4),[[Te,{value:`Status: ${c.statusName}`},void 0,{left:!0}]]),i("p",tl,T(c==null?void 0:c.taskName),1)]),i("div",null,[i("i",null,[i("p",sl,[al,ve(" "+T(c.dueDate?st(c==null?void 0:c.dueDate):"-- Not Set --"),1)])])])],8,Qi))),128))]),i("div",il,[w.currentPage<w.totalPages?(d(),ce(me,{key:0,onClick:y[19]||(y[19]=c=>w.loadMoreTasks("hide-loader")),loading:w.loadMoreLoading,label:"Load More",severity:"secondary"},null,8,["loading"])):b("",!0)])])]),_:1})])])])):b("",!0),r(A)==="list"?(d(),ce(tt,{key:1,class:"table-st",stripedRows:"",value:r(Ee),scrollable:"",scrollDirection:"both",expandedKeys:r(N),"onUpdate:expandedKeys":y[23]||(y[23]=c=>K(N)?N.value=c:null),lazy:!0,loading:r(Wt),filterDisplay:"menu",style:{overflow:"auto"},tableProps:{style:{minWidth:"1024px"}}},{empty:E(()=>[ll]),default:E(()=>[_(r(ct),{field:"name",header:"Name",class:"",expander:"",style:{width:"45%"},showAddButton:!0},{body:E(c=>[i("div",{class:"inline-block w-full align-items-center tasktitle-hover cursor-pointer relative",onMouseenter:g=>ot(c.node.key)},[i("div",{onDblclick:g=>at(c.node),class:"flex w-full"},[te((d(),h("div",rl,[_(W,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Ft(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":g=>c.node.data.status=g,options:r(p),disabled:!r(G),optionLabel:"name"},{value:E(g=>[g.value?(d(),h("div",{key:0,class:"flex align-items-center",style:P({backgroundColor:g.value.color_code})},[i("div",{style:P({backgroundColor:g.value.color_code}),class:"status-bg"},null,4)],4)):(d(),h("span",dl,T(g.placeholder),1))]),option:E(g=>[i("div",ul,[i("div",{style:P([{backgroundColor:g.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,T(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])),[[Te,{value:`${c.node.data.status.name}`},void 0,{top:!0}]]),i("span",{onClick:g=>Ye(c.node),style:P(r(Ne)===c.node.key?"display: none;":"display: block;"),class:"taskTitle cursor-pointer",title:c.node.data.name},T(c.node.data.name),13,cl),i("span",null,[_(Ke,{id:`inputTaskName${c.node.key}`,style:P(r(Ne)===c.node.key?"display: block;":"display: none;"),class:"inline-task-input",modelValue:r(Be),"onUpdate:modelValue":y[20]||(y[20]=g=>K(Be)?Be.value=g:null),type:"text",placeholder:"Edit task name"},null,8,["id","style","modelValue"])]),c.node.key=="new"?(d(),h("form",{key:0,onsubmit:g=>{g.preventDefault(),Re(c.node)},action:""},[_(Ke,{id:"newSubTask",class:"inline-task-input",modelValue:r(L),"onUpdate:modelValue":y[21]||(y[21]=g=>K(L)?L.value=g:null),type:"text",placeholder:"Task Name",autocomplete:"off"},null,8,["modelValue"])],8,hl)):b("",!0)],40,ol)],40,nl)]),_:1}),_(r(ct),{field:"",header:"",style:{width:"5%",padding:"0.75rem 0rem"}},{body:E(c=>[i("div",{class:"w-full h-full flex align-items center",onMouseenter:g=>ot(c.node.key)},[r(bt)===c.node.key?(d(),h("div",vl,[!r(xe)[c.node.key]&&c.node.key!=="new"?te((d(),ce(me,{key:0,onClick:g=>pt(c.node),severity:"secondary",icon:"pi pi-pencil",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,8,["onClick"])),[[Te,{value:"Edit Name",showDelay:500},void 0,{top:!0}]]):b("",!0),!r(xe)[c.node.key]&&c.node.key!=="new"?te((d(),ce(me,{key:1,onClick:g=>qe(c),severity:"secondary",icon:"pi pi-plus",class:"w-fit h-fit p-1",style:{"font-size":"0.2rem"}},null,8,["onClick"])),[[Te,{value:"Add Sub Task",showDelay:500},void 0,{top:!0}]]):b("",!0),r(xe)[c.node.key]||c.node.key=="new"?te((d(),ce(me,{key:2,onClick:g=>Re(c.node),loading:r(Ze),severity:"secondary",label:c.node.key=="new"?"Add":"Save",class:"p-1 w-fit h-full",style:{margin:"0 5px"}},null,8,["onClick","loading","label"])),[[Te,{value:c.node.key!=="new"?"Update Name":"Add Task"},void 0,{top:!0}]]):b("",!0),c.node.key=="new"?te((d(),ce(me,{key:3,onClick:y[22]||(y[22]=g=>Pe()),severity:"secondary",icon:"pi pi-minus",class:"w-fit h-fit p-1"},null,512)),[[Te,{value:"Cancel Task",showDelay:500},void 0,{top:!0}]]):b("",!0)])):b("",!0)],40,ml)]),_:1}),_(r(ct),{field:"assignee",header:"Assignee",style:{width:"16%"}},{body:E(c=>[i("div",pl,[(d(!0),h(fe,null,ke(c.node.data.assigneeObj,(g,He)=>(d(),h("span",{key:He,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:He>0?"-20px":"0",zIndex:10-He})},[g.image?te((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:g.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,fl)),[[Te,{value:`${g.name}`},void 0,{top:!0}]]):te((d(),ce(ue,{key:1,label:g.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},St(He)])},null,8,["label","style"])),[[Te,{value:`${g.name}`},void 0,{top:!0}]])],4))),128))])]),_:1}),_(r(ct),{field:"status",header:"Status",style:{width:"10%"}},{body:E(c=>[c.node.key!=="new"?(d(),h("div",yl,[i("div",_l,[_(W,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Ft(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":g=>c.node.data.status=g,options:r(p),disabled:!r(G),optionLabel:"name"},{value:E(g=>[g.value?(d(),h("div",gl,[i("div",{title:g.value.name,style:P({color:g.value.color_code,fontWeight:500}),class:"pt-1 status-truncate"},T(g.value.name),13,wl)])):(d(),h("span",Dl,T(g.placeholder),1))]),option:E(g=>[i("div",bl,[i("div",{style:P([{backgroundColor:g.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,T(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):b("",!0)]),_:1}),_(r(ct),{field:"dueDateValue",header:"Due Date",style:{textWrap:"nowrap",width:"9%"}},{body:E(c=>[c.node.key!=="new"?(d(),h("i",kl)):b("",!0),c.node.key!=="new"?(d(),ce(Z,{key:1,onDateSelect:g=>Xt(g,c),class:pe(["inline-calendar cursor-pointer",c.node.data.dueDateColor==="#087641"&&c.node.data.dueDateValue?"green-calendar":c.node.data.dueDateColor==="#b13a41"&&c.node.data.dueDateValue?"red-calendar":""]),placeholder:c.node.data.dueDateValue?c.node.data.dueDateValue:"--:--"},null,8,["onDateSelect","class","placeholder"])):b("",!0)]),_:1}),_(r(ct),{field:"priority",header:"Priority",style:{width:"9%"}},{body:E(c=>[c.node.key!=="new"?(d(),h("div",Tl,[i("div",Cl,[El,_(W,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Nt(c.node.data.priority,c.node.key),modelValue:c.node.data.priority,"onUpdate:modelValue":g=>c.node.data.priority=g,options:r(Ot),disabled:!r(G),optionLabel:"name",placeholder:"Set Priority"},{value:E(g=>[g.value?(d(),h("div",Sl,[g.value.name?(d(),h("div",{key:0,style:P({color:g.value.name==="Low"?"#e1aa1e":g.value.name==="Normal"?"#067bea":g.value.name==="High"?"#ff4928":g.value.name==="Urgent"?"crimson":"",fontWeight:500}),class:"pt-1"},T(g.value.name),5)):(d(),h("div",xl,"-----"))])):(d(),h("span",Ml,T(g.placeholder),1))]),option:E(g=>[i("div",Vl,[i("div",null,T(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):b("",!0)]),_:1}),_(r(ct),{field:"action",header:"Action",style:{width:"6%",position:"relative"}},{body:E(c=>[c.node.key!=="new"?(d(),h("div",{key:0,class:"justify-content-start align-items-center webView-action",style:{width:"fit-content"},onMouseover:g=>ft(c.node.key),onMouseleave:g=>it(c.node.key)},[_(ne,{visible:r(Ue)[c.node.key],"onUpdate:visible":g=>r(Ue)[c.node.key]=g,model:kt(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,$l)):b("",!0),c.node.key!=="new"?(d(),h("div",{key:1,class:"justify-content-start align-items-center tabView-action",style:{width:"fit-content"},onClick:g=>ft(c.node.key),onMouseleave:g=>it(c.node.key)},[_(ne,{visible:r(Ue)[c.node.key],"onUpdate:visible":g=>r(Ue)[c.node.key]=g,model:kt(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,Ol)):b("",!0)]),_:1})]),_:1},8,["value","expandedKeys","loading"])):b("",!0),r(A)==="board"?(d(),h("div",Al,[i("div",Ll,[i("div",null,[i("div",jl,[(d(!0),h(fe,null,ke(t.kanbanTasks,c=>(d(),h("div",{key:c,class:"groupColumnContainer"},[i("div",Il,[i("div",{style:P(`background-color: ${c.statusColor}; `),class:"column-header"},T(c.name)+" - "+T(c.content.length),5),_(r(ua),{modelValue:c.content,"onUpdate:modelValue":g=>c.content=g,options:r(ts),disabled:!r(G),class:"draggable scrollbar",itemKey:"name",group:"cardItem",onChange:g=>k(g,c.status)},{item:E(({element:g})=>{var He,D,fs,Es,Ss,xs;return[i("div",Hl,[(d(),h("div",{class:"task-card",style:P(r(S)),key:g.id,onClick:Ce=>w.$emit("handleTaskDetailView",g,c.content,c.name)},[i("div",Fl,[te((d(),h("p",Ul,[ve(T(g.data.name),1)])),[[Te,{value:`${g.data.name}`},void 0,{top:!0}]]),i("div",Nl,[i("div",{class:"status-icon",style:P(`background-color:${g.data.status.color_code}`)},null,4),i("p",Bl,T(g.data.status.name),1)]),((D=(He=g.data)==null?void 0:He.assigneeObj)==null?void 0:D.length)>0?(d(),h("div",Yl,[zl,i("div",Rl,[(d(!0),h(fe,null,ke(g.data.assigneeObj,(Ce,gt)=>(d(),h("span",{key:gt,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:gt>0?"-20px":"0",zIndex:10-gt})},[Ce.image?te((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Ce.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,ql)),[[Te,{value:`${Ce.name}`},void 0,{top:!0}]]):te((d(),ce(ue,{key:1,label:Ce.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},St(gt)])},null,8,["label","style"])),[[Te,{value:`${Ce.name}`},void 0,{top:!0}]])],4))),128))])])):b("",!0),(fs=g.data)!=null&&fs.dueDateValue?(d(),h("div",Pl,[Kl,i("p",{style:P(`color: ${g.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},T(g.data.dueDateValue),5)])):b("",!0),(Ss=(Es=g.data)==null?void 0:Es.priority)!=null&&Ss.name?(d(),h("div",Jl,[Gl,i("p",Xl,T((xs=g.data.priority)==null?void 0:xs.name),1)])):b("",!0),i("div",{class:"mt-2 flex align-items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-100",style:{"border-radius":"5px"},onClick:Ce=>{Ce.stopPropagation(),r(yt)==g.unique_id?yt.value=null:yt.value=g.unique_id}},[Ql,i("i",{class:pe(`pi ${r(yt)==g.unique_id?"pi-angle-down":"pi-angle-right"}  text-lg`)},null,2),i("p",en,T(g.children.length),1)],8,Zl)]),ve(" "+T(g.t_name),1)],12,Wl)),i("div",{class:pe(r(yt)===g.unique_id?"":"hidden")},[(d(!0),h(fe,null,ke(g.children,Ce=>{var gt,Ms,Vs,$s,Os,As;return d(),h("div",{key:Ce.unique_id,class:"sub-card",onClick:Mt=>w.$emit("handleTaskDetailView",Ce,c.content,c.name)},[i("p",sn,T(Ce.data.name),1),i("div",an,[i("div",{class:"status-icon",style:P(`background-color:${Ce.data.status.color_code}`)},null,4),i("p",ln,T(Ce.data.status.name),1)]),((Ms=(gt=Ce.data)==null?void 0:gt.assigneeObj)==null?void 0:Ms.length)>0?(d(),h("div",nn,[on,i("div",rn,[(d(!0),h(fe,null,ke(Ce.data.assigneeObj,(Mt,as)=>(d(),h("span",{key:as,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:as>0?"-20px":"0",zIndex:10-as})},[Mt.image?te((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Mt.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,dn)),[[Te,{value:`${Mt.name}`},void 0,{top:!0}]]):te((d(),ce(ue,{key:1,label:Mt.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},St(as)])},null,8,["label","style"])),[[Te,{value:`${Mt.name}`},void 0,{top:!0}]])],4))),128))])])):b("",!0),(Vs=Ce.data)!=null&&Vs.dueDateValue?(d(),h("div",un,[cn,i("p",{style:P(`color: ${Ce.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},T(Ce.data.dueDateValue),5)])):b("",!0),(Os=($s=Ce.data)==null?void 0:$s.priority)!=null&&Os.name?(d(),h("div",hn,[mn,i("p",vn,T((As=Ce.data.priority)==null?void 0:As.name),1)])):b("",!0),i("div",pn,[fn,i("p",yn,T(Ce.children.length),1)])],8,tn)}),128))],2)])]}),_:2},1032,["modelValue","onUpdate:modelValue","options","disabled","onChange"])])]))),128))])])])])):b("",!0),r(A)==="calendar"?(d(),h("div",_n,[_(r(Li),{events:r(ye),"selected-date":new Date().current,"time-from":8*60,"disable-views":["years","year","week"],"active-view":"month","events-on-month-view":"short",style:{height:"600px"}},{event:E(({event:c})=>[i("div",{onClick:g=>Ye(c),class:"vuecal__event",style:P({background:c.color}),innerHTML:c.title},null,12,gn)]),_:1},8,["events","selected-date"])])):b("",!0),r(A)==="git"?(d(),h("div",wn,[_(ut,null,{title:E(()=>[ve("Commit List")]),content:E(()=>[_(W,{onChange:le,modelValue:r(Fe),"onUpdate:modelValue":y[24]||(y[24]=c=>K(Fe)?Fe.value=c:null),options:r(ie),optionLabel:"name",placeholder:"Branches",class:"w-full md:w-17rem mb-3 mt-2"},null,8,["modelValue","options"]),i("div",null,[i("div",Dn,[r(Q).length>0?(d(),ce(Je,{key:0,value:r(Q)},{content:E(c=>[i("div",bn,[i("div",null,[i("div",kn,[Tn,i("h6",Cn,T(c.item.author_name),1)]),i("div",null,[i("h6",En,"- "+T(c.item.title),1)])]),i("div",Sn,[i("p",xn,[i("small",null,T(c.item.authored_date),1)]),i("a",{href:c.item.web_url,target:"_blank",class:"font-small text-end"},[i("small",null,T(c.item.short_id),1)],8,Mn)])])]),_:1},8,["value"])):(d(),h("div",Vn,On))])])]),_:1})])):b("",!0)],64)}}};const Ge=t=>(bs("data-v-cfeccfc4"),t=t(),ks(),t),Ln={class:"field flex flex-column"},jn=Ge(()=>i("label",{for:"name"},[ve("Set Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),In={class:"field"},Hn=Ge(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),Wn={class:"ql-formats flex justify-content-end mr-0"},Fn={class:"ql-bold"},Un={class:"ql-italic"},Nn={class:"ql-underline"},Bn={class:"ql-strike"},Yn=Ge(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),zn=Ge(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Rn=Ge(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),qn=Ge(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Pn={class:"field"},Kn=Ge(()=>i("label",null,"Assignees ",-1)),Jn={class:"field"},Gn=Ge(()=>i("label",null,"Tags ",-1)),Xn={class:"field"},Zn=Ge(()=>i("label",null,"Due Date ",-1)),Qn={class:"field"},eo=Ge(()=>i("label",null,"Priority ",-1)),to=Ge(()=>i("br",null,null,-1)),so={key:0,class:"text-center",style:{color:"red"}},ao={class:"create-btn-wrapper mb-0"},io={__name:"CreateTask",props:["createTaskTitle","taskId","projects","usersLists","tagsLists"],emits:["closeCreateModal"],setup(t,{emit:e}){const{createTask:a}=We(),{isTaskCreated:l,detectDuplicateTask:o}=Dt(We()),{createTaskTitle:s,taskId:u,projects:n,usersLists:f,tagsLists:m}=t,p=Jt(),x=v(!1),V=v(u),Y=v(!0),I=v(!1),ye=v(!1),se=v(null),J=v(" ");Ae(J,z=>{z.length===0&&(J.value=" ")});const G=v(null),_e=v(null),C=v(null),oe=v(null),$e=v(!1),Ee=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Le=e,ae=z=>{if(console.log("test druve"),$e.value)G.value=z;else{const O=new Date(z);O.setHours(23,59,0,0),G.value=O}};Ae(G,(z,O)=>{z&&O&&z!==O&&($e.value=!0)});const F=async()=>{var z,O,he;if(x.value=!0,se.value===null)ye.value=!0,x.value=!1;else{ye.value=!1;let ge;if(G.value){const re=new Date(G.value);re.setDate(re.getDate()+1),ge=re.toISOString()}const we={name:se.value,description:J.value,dueDate:ge?new Date(new Date(ge).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,assignees:(z=_e.value)==null?void 0:z.map(re=>re.id),tags:(O=C.value)==null?void 0:O.map(re=>re.id),priority:(he=oe.value)==null?void 0:he.name,project_id:n,parent_task_id:u};if(ge){const re=new Date(ge);re.setDate(re.getDate()-1),G.value=re?new Date(re).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(we),o.value===!0?(x.value=!1,p.add({severity:"error",summary:"Error",detail:"Task already exists!",group:"br",life:3e3})):l.value===!0?(x.value=!1,Y.value=!1,I.value=!0,se.value=null,Le("closeCreateModal",!1),p.add({severity:"success",summary:"Successful",detail:"Task created Successfully",group:"br",life:3e3})):(x.value=!1,p.add({severity:"error",summary:"Error",detail:"Unable to create task!",group:"br",life:3e3}))}};return hs(()=>{const z=document.getElementById("createTaskName");Pt(()=>{z&&z.focus()})}),(z,O)=>{const he=zs,ge=Ts,we=ds,re=cs,A=us,L=Kt,de=ms("tooltip");return d(),h("div",null,[_(he,{type:"hidden",modelValue:r(V),"onUpdate:modelValue":O[0]||(O[0]=ie=>K(V)?V.value=ie:null)},null,8,["modelValue"]),i("div",Ln,[jn,_(ge,{id:"createTaskName",class:"border-gray-300",modelValue:r(se),"onUpdate:modelValue":O[1]||(O[1]=ie=>K(se)?se.value=ie:null),invalid:z.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",In,[Hn,_(r(Cs),{modelValue:r(J),"onUpdate:modelValue":O[2]||(O[2]=ie=>K(J)?J.value=ie:null),editorStyle:"height: 120px"},{toolbar:E(()=>[i("span",Wn,[te(i("button",Fn,null,512),[[de,"Bold",void 0,{bottom:!0}]]),te(i("button",Un,null,512),[[de,"Italic",void 0,{bottom:!0}]]),te(i("button",Nn,null,512),[[de,"Underline",void 0,{bottom:!0}]]),te(i("button",Bn,null,512),[[de,"Strikethrough",void 0,{bottom:!0}]]),Yn,zn,Rn,qn])]),_:1},8,["modelValue"])]),i("div",Pn,[Kn,_(we,{display:"chip",modelValue:r(_e),"onUpdate:modelValue":O[3]||(O[3]=ie=>K(_e)?_e.value=ie:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",Jn,[Gn,_(we,{display:"chip",modelValue:r(C),"onUpdate:modelValue":O[4]||(O[4]=ie=>K(C)?C.value=ie:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",Xn,[Zn,_(re,{modelValue:r(G),"onUpdate:modelValue":O[5]||(O[5]=ie=>K(G)?G.value=ie:null),class:"w-full clndr",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:O[6]||(O[6]=ie=>ae(ie))},null,8,["modelValue"])]),i("div",Qn,[eo,_(A,{modelValue:r(oe),"onUpdate:modelValue":O[7]||(O[7]=ie=>K(oe)?oe.value=ie:null),options:r(Ee),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),to,r(ye)?(d(),h("p",so,"Please add task name")):b("",!0),i("div",ao,[_(L,{label:"Save",icon:"pi pi-check",text:"",onClick:F,loading:r(x)},null,8,["loading"])])])}}},lo=Ds(io,[["__scopeId","data-v-cfeccfc4"]]);const Xe=t=>(bs("data-v-eeee4ee3"),t=t(),ks(),t),no={class:"position-relative d-flex flex-column justify-content-between w-100 modal-container"},oo={class:"field flex flex-column"},ro=Xe(()=>i("label",{for:"name"},[ve("Edit Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),uo={class:"field"},co=Xe(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),ho={class:"ql-formats flex justify-content-end mr-0"},mo={class:"ql-bold"},vo={class:"ql-italic"},po={class:"ql-underline"},fo={class:"ql-strike"},yo=Xe(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),_o=Xe(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),go=Xe(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),wo=Xe(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Do={class:"field"},bo=Xe(()=>i("label",null,"Assignees",-1)),ko={class:"field"},To=Xe(()=>i("label",null,"Tags",-1)),Co={class:"field"},Eo=Xe(()=>i("label",null,"Due Date",-1)),So={class:"field"},xo=Xe(()=>i("label",null,"Priority",-1)),Mo=Xe(()=>i("br",null,null,-1)),Vo={key:0,class:"text-center",style:{color:"red"}},$o={class:"edt-btn-wrapper mb-0"},Oo={__name:"EditTask",props:["singleTask","usersLists","tagsLists","projects"],emits:["closeEditModal"],setup(t,{emit:e}){var z,O,he,ge,we,re;const{editTask:a}=We(),{isTaskEdited:l,detectDuplicateTask:o}=Dt(We()),{singleTask:s,usersLists:u,tagsLists:n,projects:f}=t,m=Jt(),p=v(!1),x=v((z=s==null?void 0:s.data)==null?void 0:z.name),V=v(((O=s==null?void 0:s.data)==null?void 0:O.description)||" "),Y=v(!1);Ae(V,A=>{A.length===0&&(V.value=" "),Y.value=!0});const I=v((he=s==null?void 0:s.data)!=null&&he.dueDate?new Date(s.data.dueDate).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),ye=v(!1),se=v(null);se.value=(ge=s==null?void 0:s.data)!=null&&ge.assigneeObj?(we=s==null?void 0:s.data)==null?void 0:we.assigneeObj.map(A=>({id:A.id,name:A.name})):"";const J=v(!1);Ae(se,A=>{J.value=!0});const G=v((re=s==null?void 0:s.data)==null?void 0:re.tagsObj),_e=v(!1);Ae(G,A=>{_e.value=!0});const C=v(null);C.value=s.data.priority?{name:s.data.priority.name,code:s.data.priority.code}:"";const oe=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),$e=v(!1),Ee=e,Le=A=>{if(console.log("test druve"),ye.value)I.value=A;else{const L=new Date(A);L.setHours(23,59,0,0),I.value=L}};Ae(I,(A,L)=>{A&&L&&A!==L&&(ye.value=!0)});const ae=v(I.value);Ae(I,(A,L)=>{A&&(ae.value=new Date(A).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const F=async()=>{var A;if(p.value=!0,x.value===null)$e.value=!0,p.value=!1;else{$e.value=!1;let L;if(I.value){const Se=new Date(I.value);Se.setDate(Se.getDate()+1),L=Se.toISOString()}const de=new Date((A=s==null?void 0:s.data)==null?void 0:A.dueDate).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),ie={id:s.key,name:x.value,...Y.value===!0?{description:V.value}:{},priority:C.value.name,...ae.value!==de?{dueDate:L?new Date(new Date(L).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...J.value===!0?{assignees:se.value.map(Se=>Se.id)}:{},..._e.value===!0?{tags:G.value.map(Se=>Se.id)}:{},project_id:f};if(L){const Se=new Date(L);Se.setDate(Se.getDate()-1),I.value=Se?new Date(Se).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(ie),o.value===!0?(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Cannnot edit, edited task name already exists!",group:"br",life:3e3})):l.value===!0?(p.value=!1,Ee("closeEditModal",!1),Ee("visibleEdit","visibleEdit"),m.add({severity:"success",summary:"Successful",detail:"Task updated Successfully",group:"br",life:3e3}),Y.value===!0&&(Y.value=!1,console.log("isDescriptionEdited Flagged")),J.value===!0&&(J.value=!1,console.log("isAsigneeEdited Flagged")),_e.value===!0&&(_e.value=!1,console.log("isTagsEdited Flagged"))):(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Unable to update task!",group:"br",life:3e3}))}};return hs(()=>{const A=document.getElementById("editTaskName");Pt(()=>{A&&A.focus()})}),(A,L)=>{const de=Ts,ie=ds,Se=cs,Fe=us,Q=Kt,M=ms("tooltip");return d(),h("div",no,[i("div",null,[i("div",oo,[ro,_(de,{id:"editTaskName",class:"border-gray-300",modelValue:r(x),"onUpdate:modelValue":L[0]||(L[0]=le=>K(x)?x.value=le:null),rows:"3",cols:"15",invalid:A.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",uo,[co,_(r(Cs),{modelValue:r(V),"onUpdate:modelValue":L[1]||(L[1]=le=>K(V)?V.value=le:null),editorStyle:"height: 120px"},{toolbar:E(()=>[i("span",ho,[te(i("button",mo,null,512),[[M,"Bold",void 0,{bottom:!0}]]),te(i("button",vo,null,512),[[M,"Italic",void 0,{bottom:!0}]]),te(i("button",po,null,512),[[M,"Underline",void 0,{bottom:!0}]]),te(i("button",fo,null,512),[[M,"Strikethrough",void 0,{bottom:!0}]]),yo,_o,go,wo])]),_:1},8,["modelValue"])]),i("div",Do,[bo,_(ie,{display:"chip",modelValue:r(se),"onUpdate:modelValue":L[2]||(L[2]=le=>K(se)?se.value=le:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",ko,[To,_(ie,{display:"chip",modelValue:r(G),"onUpdate:modelValue":L[3]||(L[3]=le=>K(G)?G.value=le:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",Co,[Eo,_(Se,{modelValue:r(I),"onUpdate:modelValue":L[4]||(L[4]=le=>K(I)?I.value=le:null),class:"w-full",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:L[5]||(L[5]=le=>Le(le))},null,8,["modelValue"])]),i("div",So,[xo,_(Fe,{modelValue:r(C),"onUpdate:modelValue":L[6]||(L[6]=le=>K(C)?C.value=le:null),options:r(oe),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),Mo,r($e)?(d(),h("p",Vo,"Please add/fill/check up all the fields")):b("",!0),i("div",$o,[_(Q,{label:"Update",icon:"pi pi-check",text:"",onClick:F,loading:r(p)},null,8,["loading"])])])])}}},Ao=Ds(Oo,[["__scopeId","data-v-eeee4ee3"]]),Ys=na("fileUpload",()=>{const t=v(!1),e=v(!1),a=v(!1);async function l(s,u){e.value=!0;const n=new FormData;n.append("task_id",s),n.append("attachments",u);const f=vt("token");try{const m=await fetch("https://pbe.singularitybd.net/api/v1/tasks/attachment-upload",{method:"POST",headers:{Authorization:`Bearer ${f.value}`},body:n});if(!m.ok)throw new Error("Network response was not ok");const p=await m.json();console.log("upload data =>",p),(p==null?void 0:p.user_message)==="success"?t.value=!0:t.value=!1,e.value=!1}catch(m){console.error("Error uploading file:",m),t.value=!1,e.value=!1}}async function o(s){const u=vt("token");try{const n=await fetch(`https://pbe.singularitybd.net/api/v1/tasks/attachment-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${u.value}`}});if(!n.ok)throw new Error("Network response was not ok");const f=await n.json();console.log("delete data =>",f),(f==null?void 0:f.user_message)==="success"?a.value=!0:a.value=!1}catch(n){console.error("Error uploading file:",n),a.value=!1}}return{fileUpload:l,fileDelete:o,isFileUpload:t,isLoading:e,isFileDeleted:a}});const Lo={class:"grid"},jo={class:"col-12 flex justify-content-between"},Io={class:"m-0 detail-task-name cursor-pointer"},Ho={class:"flex gap-1"},Wo=i("h5",{class:"m-0 ml-2"},"Activity",-1),Fo={class:"col-12 lg:col-7"},Uo={class:"task-wrapper card"},No={class:"task-det no-scrollbar"},Bo={class:"flex justify-content-between gap-2 flex-wrap align-items-center"},Yo={class:"w-full lg:w-fit"},zo={class:"flex mt-2 justify-content-between gap-2 align-items-center task-detail-wrapper"},Ro=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-calendar"}),i("p",{class:"text-nowrap"},"Due Date:")],-1),qo={class:"flex justify-content-between gap-2 align-items-centertask-detail-wrapper mt-3 mb-3"},Po=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-tags"}),i("p",null,"Tags:")],-1),Ko={class:"w-full lg:w-fit"},Jo={class:"flex justify-content-between gap-2 align-items-center task-detail-wrapper"},Go=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",null,"Status:")],-1),Xo={class:"flex mt-4 mb-3 justify-content-start gap-6 align-items-center task-detail-wrapper"},Zo=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-stopwatch"}),i("p",{class:"text-nowrap"},"Track Time:")],-1),Qo={class:"clock-wrapper relative"},er={class:"border-round px-2 pt-3 pb-2"},tr={class:"flex justify-content-center align-items-center gap-3 manual-wrapper -mt-1"},sr=i("label",{for:"hours",class:"block mb-2 text-xs"},"Hours",-1),ar=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),ir=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),lr=i("label",{for:"minutes",class:"block mb-2 text-xs"},"Minutes",-1),nr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),or=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),rr={class:"flex justify-content-center align-items-center",style:{"margin-top":"0.49rem !important"}},dr=i("div",null,null,-1),ur={class:"flex justify-content-between gap-2"},cr=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-user"}),i("p",null,"Assignee:")],-1),hr={class:"field mt-3 flex flex-column"},mr=i("div",{class:"flex justify-content-start gap-2 align-items-center mb-1 task-detail-property"},[i("span",{class:"pi pi-sliders-h"}),i("p",null,"Description:")],-1),vr={class:"ql-formats flex justify-content-end mr-0"},pr={class:"ql-bold"},fr={class:"ql-italic"},yr={class:"ql-underline"},_r={class:"ql-strike"},gr=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),wr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),Dr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),br=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),kr={key:0,class:"flex justify-content-end"},Tr={class:"m-0"},Cr={class:"my-3 attach-sec flex align-items-center justify-content-start gap-2",style:{"overflow-x":"scroll"}},Er={key:0,class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-5 attch-w",style:{"background-color":"#f7fafc"}},Sr=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),xr=i("div",{class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},[i("div",{class:"text-xs"},"asdasd....asdme.extng"),i("div",{class:"text-xs"},"9 MAy, 2024")],-1),Mr=[Sr,xr],Vr=["href"],$r=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),Or={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Ar={class:"text-xs"},Lr={class:"text-xs"},jr=["href"],Ir=["src"],Hr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Wr={class:"text-xs"},Fr={class:"text-xs"},Ur=["href"],Nr=i("div",{class:"pi pi-video text-6xl attach-icon"},null,-1),Br={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Yr={class:"text-xs"},zr={class:"text-xs"},Rr=["href"],qr=i("div",{class:"pi pi-file-pdf text-6xl text-danger attach-icon"},null,-1),Pr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Kr={class:"text-xs"},Jr={class:"text-xs"},Gr=["href"],Xr=i("div",{class:"pi pi-file-word text-6xl text-blue attach-icon"},null,-1),Zr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Qr={class:"text-xs"},ed={class:"text-xs"},td=["href"],sd=i("div",{class:"pi pi-file-excel text-6xl attach-icon",style:{color:"#04aa6d"}},null,-1),ad={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},id={class:"text-xs"},ld={class:"text-xs"},nd=["onClick"],od=i("i",{class:"pi pi-times text-xs text-white"},null,-1),rd=[od],dd={key:0,class:"flex gap-2 w-full justify-content-center"},ud=i("p",{class:"text-center"},"No Data found...",-1),cd=["onClick"],hd={class:"action-dropdown-det"},md={class:"action-dropdown-content-det"},vd={class:"card"},pd={class:"flex justify-content-start align-items-center task-detail-wrapper"},fd=i("div",{class:"flex justify-content-start gap-2 align-items-center bounce-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",{class:"text-nowrap"},"Bounce Status:")],-1),yd={class:"col-12 lg:col-5"},_d={class:"comment-wrapper card no-scrollbar"},gd={class:"comments no-scrollbar"},wd={class:"my-2 text-surface-800"},Dd={key:0},bd=["innerHTML"],kd={class:"my-2 text-surface-800"},Td={class:"flex justify-content-start align-items-center"},Cd=["src"],Ed={class:"text-lg"},Sd={key:0,class:"flex justify-content-start my-2"},xd=["href"],Md=i("div",{class:"pi pi-file"},null,-1),Vd={class:"attach-detail flex flex-column justify-content-center align-items-center"},$d={class:"text-xs"},Od={class:"m-0 ml-1",style:{"font-size":"0.9rem"}},Ad={style:{"line-height":"0"},class:"pb-1 float-right mt-3 mb-2"},Ld={key:0,class:"text-sm font-semibold tracking-wide leading-3 bg-gray-300 px-3 py-2 flex align-itens-center mb-1 relative"},jd=i("span",{class:"pi pi-file-import mr-2"},null,-1),Id=i("i",{class:"pi pi-times"},null,-1),Hd=[Id],Wd={__name:"TaskDetail",props:["usersLists","tagsLists","projID"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask","updateTaskTable"],setup(t,{emit:e}){var Xt,Zt,St,Qt,es,ts;const a=Ks(),{fileUpload:l,fileDelete:o}=Ys(),{isFileUpload:s,isLoading:u,isFileDeleted:n}=Dt(Ys()),{getTaskTimerData:f,setManualTime:m,storeTaskTimer:p}=Ws();Dt(Ws());const{editTask:x,addTaskComment:V,getTaskDetails:Y,getSingleProject:I}=We(),{isTaskEdited:ye,isTaskCommentCreated:se,singleTaskComments:J,subTasks:G,taskStatus:_e,taskDetails:C,taskActivity:oe}=Dt(We());localStorage.setItem("taskDetailID",JSON.stringify(C.value.id));const{usersLists:$e,tagsLists:Ee,projID:Le}=t,ae=e,F=Jt(),z=v(!1),O=v(mt("update_task")),he=v(mt("edit_bounce")),ge=v(mt("create_task")),we=v(null);we.value=(Zt=(Xt=C.value)==null?void 0:Xt.assignee)==null?void 0:Zt.map(S=>({id:S.id,name:S.name}));const re=v(!1);Ae(we,S=>{re.value=!0});const A=v((Qt=(St=C.value)==null?void 0:St.tags)==null?void 0:Qt.map(S=>({id:S.id,name:S.name}))),L=v(!1);Ae(A,S=>{L.value=!0});const de=v((es=C.value)!=null&&es.due_date?new Date(C.value.due_date).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),ie=v(!1),Se=S=>{if(console.log("test druve"),ie.value)de.value=S;else{const k=new Date(S);k.setHours(23,59,0,0),de.value=k}};Ae(de,(S,k)=>{S&&k&&S!==k&&(ie.value=!0)});const Fe=v(de.value);Ae(de,(S,k)=>{S&&(Fe.value=new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const Q=v(),M=oa(),le=v(null),Me=v(null),Ot=v(!1),st=v(!1),Ue=async S=>{var N,X;st.value=!0;let k;if(le.value>0||Me.value>0){k=le.value*3600+Me.value*60,console.log("totalSeconds",k);const R=await m((N=C.value)==null?void 0:N.id,k);(R==null?void 0:R.code)===200?(await Y((X=C.value)==null?void 0:X.id),st.value=!1,F.add({severity:"success",summary:"Duration Added",detail:`Duration: ${le.value?le.value:0} hours and ${Me.value?Me.value:0} minutes`,group:"br",life:3e3}),le.value=null,Me.value=null,S()):(st.value=!1,F.add({severity:"error",summary:"Error",detail:"Unable to add duration",group:"br",life:3e3})),console.log("responseData",R)}else st.value=!1,F.add({severity:"error",summary:"Error",detail:"Please add duration",group:"br",life:3e3});k=null},bt=S=>{var k;console.log(S.detail),S.detail===3&&((k=C.value)==null?void 0:k.is_timer_start)==="false"&&M.require({target:S.currentTarget,group:"headless",message:"Set task duration:",accept:()=>{F.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{}})},ot=v("00:00:00");let Ne=null;const xe=v(!1),Be=async()=>{var S,k,N,X,R,q,B,je,qe,Ie;if(C.value.id,xe.value=!0,((S=C.value)==null?void 0:S.is_timer_start)==="false"){await f("start",(k=C.value)==null?void 0:k.id),await Y((N=C.value)==null?void 0:N.id),Ze(),xe.value=!1,localStorage.setItem("storeTaskID",JSON.stringify((X=C.value)==null?void 0:X.id)),localStorage.setItem("storeTaskProjectID",JSON.stringify(Number(Le))),localStorage.setItem("storeTaskSpaceID",JSON.stringify((R=C.value)==null?void 0:R.project.space_id)),localStorage.setItem("storeTaskCompanyID",JSON.stringify((q=C.value)==null?void 0:q.project.company_id)),localStorage.setItem("storeTaskTimerStartTime",JSON.stringify(C.value.taskTimer.start_time));let Pe={task_id:C.value.id,project_id:Le,space_id:C.value.project.space_id,company_id:C.value.project.company_id,timerStartTime:C.value.taskTimer.start_time};await p(Pe),F.add({severity:"success",summary:"Task Timer",detail:"Timer Started",group:"br",life:3e3}),await I(Le)}else await f("stop",(B=C.value)==null?void 0:B.id,(qe=(je=C.value)==null?void 0:je.taskTimer)==null?void 0:qe.id),await Y((Ie=C.value)==null?void 0:Ie.id),pt(),xe.value=!1,localStorage.removeItem("storeTaskID"),localStorage.removeItem("storeTaskProjectID"),localStorage.removeItem("storeTaskSpaceID"),localStorage.removeItem("storeTaskCompanyID"),localStorage.removeItem("storeTaskTimerStartTime"),await p({task_id:null,project_id:null,space_id:null,company_id:null}),F.add({severity:"success",summary:"Task Timer",detail:"Timer Stopped",group:"br",life:3e3}),await I(Le)},Ze=()=>{C.value.id,console.log("taskDetails.value.taskTimer.start_time",C.value.taskTimer.start_time);const S=new Date(C.value.taskTimer.start_time).getTime();Ne=setInterval(()=>{const k=Math.floor((Date.now()-S)/1e3);ot.value=Ht(k)},1e3)},pt=()=>{clearInterval(Ne),ot.value=Ht(C.value.total_duration)},U=v([{is_bounce:"No"},{is_bounce:"Yes"}]),Ve=v(),Ye=v(((ts=C.value)==null?void 0:ts.description)||" "),at=v(!1);Ae(Ye,S=>{S.length===0&&(Ye.value=" "),at.value=!0});const Re=v(null),ft=v(),it=v(!0),kt=v(!1),At=()=>{kt.value=!0,it.value=!1},Lt=()=>{kt.value=!1,it.value=!0},jt=async()=>{var S;z.value=!0,await V((S=C.value)==null?void 0:S.id,Re.value,lt.value),se.value===!0?(F.add({severity:"success",summary:"Successful",detail:"Comment added Successfully",group:"br",life:3e3}),Re.value=null,z.value=!1,lt.value=null):(F.add({severity:"error",summary:"Error",detail:"Unable to add comment",group:"br",life:3e3}),z.value=!1)},It=S=>{const k=new Date(S),X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][k.getMonth()],R=k.getDate(),q=k.getFullYear().toString().substr(-2),B=k.getHours(),je=k.getMinutes(),qe=B>=12?"PM":"AM",Ie=B%12||12,Pe=je<10?"0"+je:je;return`${R} ${X}'${q}, ${Ie}:${Pe}${qe}`},Tt=async()=>{var X,R;let S;if(de.value){const q=new Date(de.value);q.setDate(q.getDate()+1),S=q.toISOString()}const k=new Date((X=C.value)==null?void 0:X.due_date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),N={id:(R=C.value)==null?void 0:R.id,...at.value===!0?{description:Ye.value}:{},project_id:Le,...Fe.value!==k?{dueDate:S?new Date(new Date(S).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...re.value===!0?{assignees:we.value.map(q=>q.id)}:{},...L.value===!0?{tags:A.value.map(q=>q.id)}:{}};if(S){const q=new Date(S);q.setDate(q.getDate()-1),de.value=q?new Date(q).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await x(N),ye.value===!0?(F.add({severity:"success",summary:"Successful",detail:"Task detail updated",group:"br",life:3e3}),ft.value=null,at.value===!0&&(at.value=!1,console.log("isDescriptionEdited Flagged")),re.value===!0&&(re.value=!1,console.log("isAsigneeEdited Flagged")),L.value===!0&&(L.value=!1,console.log("isTagsEdited Flagged"))):F.add({severity:"error",summary:"Error",detail:"Unable to upadte task detail",group:"br",life:3e3})},Qe=v(null),yt=S=>{Qe.value=S.target.files[0]},vs=async()=>{var S,k;Qe.value&&console.log("file =>",Qe.value),await l((S=C.value)==null?void 0:S.id,Qe.value),s.value===!0?(F.add({severity:"success",summary:"Successfull",detail:"File Upload successfully!",group:"br",life:3e3}),Y((k=C.value)==null?void 0:k.id),document.getElementById("attachInput").value=null,Qe.value=null):F.add({severity:"error",summary:"Error",detail:"Unable to upload file!",group:"br",life:3e3})},Oe=S=>{const k=["jpg","JPG","jpeg","png","gif","bmp","svg","webp","ico","tiff","tif","heic","heif"],N=["mp4","avi","flv","wmv","mov","3gp","mkv"],X=["pdf","PDF","ppt","pptx"],R=["doc","docx","rtf"],q=["xls","xlsx","csv"];return k.some(B=>S.endsWith("."+B))?"image":N.some(B=>S.endsWith("."+B))?"video":X.some(B=>S.endsWith("."+B))?"pdf":R.some(B=>S.endsWith("."+B))?"word":q.some(B=>S.endsWith("."+B))?"excel":"file"};hs(async()=>{var N,X;await Y((N=C.value)==null?void 0:N.id);const S={name:C.value.status_name,code:C.value.status};Q.value=S;const k={is_bounce:C.value.is_bounce};Ve.value=k,((X=C.value)==null?void 0:X.is_timer_start)==="true"&&Ze()});async function Ct(S){var k,N,X;try{const R=vt("token"),{data:q,pending:B}=await ns(`${a.public.apiUrl}/tasks/update/${(k=C.value)==null?void 0:k.id}`,{method:"POST",headers:{Authorization:`Bearer ${R.value}`},body:{status:S.code}},"$nwfJLeTGBC");((N=q.value)==null?void 0:N.app_message)==="success"?(Y((X=C.value)==null?void 0:X.id),F.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),ae("updateTaskTable")):F.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(R){console.error("Error fetching data:",R)}}async function Et(S){var k,N,X;try{const R=vt("token"),{data:q,pending:B}=await ns(`${a.public.apiUrl}/tasks/update/${(k=C.value)==null?void 0:k.id}`,{method:"POST",headers:{Authorization:`Bearer ${R.value}`},body:{is_bounce:S.is_bounce}},"$np1kf0qdb3");console.log("dataBO",q),((N=q.value)==null?void 0:N.app_message)==="success"?(Y((X=C.value)==null?void 0:X.id),F.add({severity:"success",summary:"Successfull",detail:"Bounce Status Changed",group:"br",life:3e3})):F.add({severity:"error",summary:"Error",detail:"Unable to change bounce status",group:"br",life:3e3})}catch(R){console.error("Error fetching data:",R)}}const et=S=>{const N=S.split("/");return N[N.length-1]},rt=S=>{const k=["Jan","Feb","Mar","Apr","MAy","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N=S,X=new Date(N),R={year:"numeric",month:"long",day:"numeric"},B=X.toLocaleDateString("en-US",R).split(" "),je=k.indexOf(B[0]);return je!==-1&&(B[0]=k[je]),B.join(" ")};function Ht(S){const k=Math.floor(S/3600).toString().padStart(2,"0"),N=Math.floor(S%3600/60).toString().padStart(2,"0"),X=(S%60).toString().padStart(2,"0");return`${k}:${N}:${X}`}const ps=async S=>{var k;await o(S),n.value===!0?(F.add({severity:"success",summary:"Successful",detail:"File Deleted successfully!",group:"br",life:3e3}),Y((k=C.value)==null?void 0:k.id)):F.add({severity:"error",summary:"Error",detail:"Unable to delete file!",group:"br",life:3e3})},_t=v(null),lt=v(null),Wt=v(""),Ft=S=>{lt.value=S.target.files[0],Wt.value=lt.value?lt.value.name:""},Ut=()=>{_t.value.click()},Nt=async()=>{lt.value=null},Bt=async()=>{var R;const S=vt("token"),{data:k,pending:N,error:X}=await ns(`${a.public.apiUrl}/tasks/share/${(R=C.value)==null?void 0:R.id}`,{method:"GET",headers:{Authorization:`Bearer ${S.value}`}},"$yuqoLxhdIO");if(X.value){F.add({severity:"error",summary:"Error",detail:"Failed to share",life:3e3});return}else{const q=document.createElement("textarea");q.value=k.value.shared_web_link,document.body.appendChild(q),q.select(),document.execCommand("copy"),document.body.removeChild(q),F.add({severity:"success",summary:"Share successful",detail:"Shared link copied",group:"br",life:3e3});return}};return(S,k)=>{var Z,me,dt,Ke,xt;const N=ca,X=ds,R=us,q=ha,B=Kt,je=ma,qe=va,Ie=ct,Pe=qs,ss=pa,w=ws,y=Rs,j=Ts,W=ms("tooltip");return d(),h("div",Lo,[i("div",jo,[i("h5",Io,T(r(C).name),1),i("div",Ho,[te(i("span",{onClick:Bt,class:"pi pi-share-alt my-auto cursor-pointer ml-2 share-btn"},null,512),[[W,{value:"Share Task"},void 0,{top:!0}]]),Wo])]),i("div",Fo,[i("div",null,[i("div",Uo,[i("div",No,[i("form",{onSubmit:ht(Tt,["prevent"]),class:"mt-2 task-detail ml-2"},[i("div",Bo,[i("div",Yo,[i("div",zo,[Ro,_(N,{class:"input-fields"},{default:E(()=>[_(r(cs),{style:"width: 164.94px; border-radius:7px;height:36px",modelValue:r(de),"onUpdate:modelValue":k[0]||(k[0]=$=>K(de)?de.value=$:null),placeholder:"Set Due Date",showTime:"",hourFormat:"12",onDateSelect:k[1]||(k[1]=$=>Se($))},null,8,["modelValue"])]),_:1})]),i("div",qo,[Po,_(N,{class:"input-fields",style:{width:"168px"}},{default:E(()=>[_(X,{display:"chip",modelValue:r(A),"onUpdate:modelValue":k[2]||(k[2]=$=>K(A)?A.value=$:null),filter:"",resetFilterOnHide:"",options:t.tagsLists,optionLabel:"name",placeholder:"Select Tags",class:"w-full"},null,8,["modelValue","options"])]),_:1})])]),i("div",Ko,[i("div",Jo,[Go,_(R,{onChange:k[3]||(k[3]=$=>Ct(r(Q))),modelValue:r(Q),"onUpdate:modelValue":k[4]||(k[4]=$=>K(Q)?Q.value=$:null),options:r(_e),optionLabel:"name",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["modelValue","options"])]),i("div",Xo,[Zo,i("div",Qo,[_(je,{close:r(Ot),group:"headless"},{container:E(({message:$,acceptCallback:ut,rejectCallback:ue})=>[i("div",er,[i("div",tr,[i("div",null,[sr,_(q,{modelValue:r(le),"onUpdate:modelValue":k[5]||(k[5]=ne=>K(le)?le.value=ne:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:23,id:"hours"},{incrementbuttonicon:E(()=>[ar]),decrementbuttonicon:E(()=>[ir]),_:1},8,["modelValue"])]),i("div",null,[lr,_(q,{modelValue:r(Me),"onUpdate:modelValue":k[6]||(k[6]=ne=>K(Me)?Me.value=ne:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:59,id:"minutes"},{incrementbuttonicon:E(()=>[nr]),decrementbuttonicon:E(()=>[or]),_:1},8,["modelValue"])])]),i("div",rr,[_(B,{icon:"pi pi-check px-2 py-0 text-sm",label:"",class:"border-none w-full mx-3",loading:r(st),onClick:ne=>Ue(ue),size:"small"},null,8,["loading","onClick"])])])]),_:1},8,["close"]),te(_(B,{loading:r(xe),class:"clock-btn",onClick:Be,icon:((Z=r(C))==null?void 0:Z.is_timer_start)=="true"?"pi pi-stop":"pi pi-play",severity:((me=r(C))==null?void 0:me.is_timer_start)=="true"?" stop-color":"",rounded:"","aria-label":"Filter"},null,8,["loading","icon","severity"]),[[W,{value:((dt=r(C))==null?void 0:dt.is_timer_start)=="true"?"Stop":"Start"},void 0,{top:!0}]]),i("div",{class:"text-sm absolute",onClick:k[7]||(k[7]=$=>bt($))},T(((Ke=r(C))==null?void 0:Ke.is_timer_start)=="true"?r(ot):Ht((xt=r(C))==null?void 0:xt.total_duration)),1)]),dr])])]),i("div",ur,[cr,_(N,{style:{width:"100%"},class:"input-fields"},{default:E(()=>[_(X,{display:"chip",modelValue:r(we),"onUpdate:modelValue":k[8]||(k[8]=$=>K(we)?we.value=$:null),filter:"",resetFilterOnHide:"",options:t.usersLists,optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),_:1})]),i("div",hr,[mr,_(r(Cs),{modelValue:r(Ye),"onUpdate:modelValue":k[9]||(k[9]=$=>K(Ye)?Ye.value=$:null),editorStyle:"height: 150px",readonly:!r(O)},{toolbar:E(()=>[i("span",vr,[te(i("button",pr,null,512),[[W,"Bold",void 0,{bottom:!0}]]),te(i("button",fr,null,512),[[W,"Italic",void 0,{bottom:!0}]]),te(i("button",yr,null,512),[[W,"Underline",void 0,{bottom:!0}]]),te(i("button",_r,null,512),[[W,"Strikethrough",void 0,{bottom:!0}]]),gr,wr,Dr,br])]),_:1},8,["modelValue","readonly"])]),r(O)?(d(),h("div",kr,[_(B,{type:"submit",label:"Save"})])):b("",!0)],32),_(ss,{class:"mt-3"},{default:E(()=>{var $,ut;return[_(qe,{class:"file-upload",header:"Detail"},{default:E(()=>{var ue,ne,tt,Je,Te,c,g,He;return[i("p",Tr,"Attachments: "+T((ue=r(C))!=null&&ue.attachments&&((tt=(ne=r(C))==null?void 0:ne.attachments)==null?void 0:tt.length)>0?(Te=(Je=r(C))==null?void 0:Je.attachments)==null?void 0:Te.length:0),1),i("div",Cr,[(c=r(C))!=null&&c.attachments&&((g=r(C))==null?void 0:g.attachments.length)===0?(d(),h("div",Er,Mr)):b("",!0),(d(!0),h(fe,null,ke((He=r(C))==null?void 0:He.attachments,D=>(d(),h("div",{key:D,target:"_blank",class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-2 relative",style:{"background-color":"#f7fafc"}},[Oe(D==null?void 0:D.file)==="file"?(d(),h("a",{key:0,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[$r,i("div",Or,[i("div",Ar,T(et(D==null?void 0:D.file)),1),i("div",Lr,T(rt(D==null?void 0:D.created_at)),1)])],8,Vr)):b("",!0),Oe(D==null?void 0:D.file)==="image"?(d(),h("a",{key:1,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 relative",href:D==null?void 0:D.file},[i("img",{src:D==null?void 0:D.file,alt:"",style:{width:"90%",height:"80px","border-radius":"10px","border-top-left-radius":"10px","object-fit":"cover"}},null,8,Ir),i("div",Hr,[i("div",Wr,T(et(D==null?void 0:D.file)),1),i("div",Fr,T(rt(D==null?void 0:D.created_at)),1)])],8,jr)):b("",!0),Oe(D==null?void 0:D.file)==="video"?(d(),h("a",{key:2,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[Nr,i("div",Br,[i("div",Yr,T(et(D==null?void 0:D.file)),1),i("div",zr,T(rt(D==null?void 0:D.created_at)),1)])],8,Ur)):b("",!0),Oe(D==null?void 0:D.file)==="pdf"?(d(),h("a",{key:3,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[qr,i("div",Pr,[i("div",Kr,T(et(D==null?void 0:D.file)),1),i("div",Jr,T(rt(D==null?void 0:D.created_at)),1)])],8,Rr)):b("",!0),Oe(D==null?void 0:D.file)==="word"?(d(),h("a",{key:4,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[Xr,i("div",Zr,[i("div",Qr,T(et(D==null?void 0:D.file)),1),i("div",ed,T(rt(D==null?void 0:D.created_at)),1)])],8,Gr)):b("",!0),Oe(D==null?void 0:D.file)==="excel"?(d(),h("a",{key:5,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:D==null?void 0:D.file},[sd,i("div",ad,[i("div",id,T(et(D==null?void 0:D.file)),1),i("div",ld,T(rt(D==null?void 0:D.created_at)),1)])],8,td)):b("",!0),i("div",{onClick:fs=>ps(D==null?void 0:D.id),class:"absolute bg-red-500 text-white p-2 flex align-items-center justify-content-center close-btn"},rd,8,nd)]))),128))]),r(O)?(d(),h("div",dd,[i("input",{onChange:yt,id:"attachInput",class:"float-right file-up-btn",type:"file",placeholder:"+"},null,32),_(B,{type:"button",loading:r(u),onClick:vs,label:"Upload"},null,8,["loading"])])):b("",!0)]}),_:1}),_(qe,{header:`Sub Tasks ${($=r(G))!=null&&$.length?r(G).length:0}`},{default:E(()=>[r(ge)?te((d(),ce(B,{key:0,icon:"pi pi-plus",label:"Create",onClick:k[10]||(k[10]=ue=>{var ne;return ae("openCreateSpace",(ne=r(C))==null?void 0:ne.id,"sub-task")}),class:"mr-2 sub-create",severity:"secondary"},null,512)),[[W,{value:"Create Sub Task"},void 0,{right:!0}]]):b("",!0),_(Pe,{class:"tree-table",value:r(G),lazy:!0,tableProps:{style:{minWidth:"650px"}},style:{overflow:"auto"}},{empty:E(()=>[ud]),default:E(()=>[_(Ie,{class:"cursor-pointer",field:"name",header:"Name",expander:"",style:{width:"45%"}},{body:E(ue=>[te((d(),h("span",{class:"subtaskTitle",onClick:ne=>ae("handleTaskDetailView",ue.node)},[ve(T(ue.node.data.name),1)],8,cd)),[[W,{value:`${ue.node.data.name}`},void 0,{left:!0}]])]),_:1}),_(Ie,{field:"assignee",header:"Assignee",style:{width:"25%"}}),_(Ie,{field:"dueDateValue",header:"Due Date",style:P([{width:"11.5%"},{"text-wrap":"nowrap"}])}),_(Ie,{field:"priority",header:"Priority",style:{width:"10%"}},{body:E(ue=>{var ne,tt,Je;return[i("span",{class:pe(["text-xs",((ne=ue.node.data.priority)==null?void 0:ne.name)==="High"?"text-danger":((tt=ue.node.data.priority)==null?void 0:tt.name)==="Medium"?"text-warning":"text-success"])},T((Je=ue.node.data.priority)==null?void 0:Je.name),3)]}),_:1}),_(Ie,{field:"action",header:"Action"},{body:E(ue=>[i("div",hd,[_(B,{style:{width:"30px",height:"30px","border-radius":"50%"},icon:"pi pi-ellipsis-v",class:"action-dropdown-det-toggle"}),i("div",md,[_(B,{icon:"pi pi-trash",class:"mr-1 ac-btn dlt-action",severity:"warning",rounded:"",onClick:ne=>ae("confirmDeleteTask",ue.node.key)},null,8,["onClick"]),_(B,{icon:"pi pi-cog",class:"mr-1 ac-btn view-action",severity:"info",onClick:ne=>ae("handleTaskDetailView",ue.node),rounded:""},null,8,["onClick"]),_(B,{icon:"pi pi-pencil",class:"mr-1 ac-btn edit-action",severity:"success",onClick:ne=>ae("handleTaskEdit",ue.node),rounded:""},null,8,["onClick"]),_(B,{icon:"pi pi-plus",class:"ac-btn sub-action",severity:"success",onClick:ne=>ae("openCreateSpace",ue.node.key,"sub-task"),rounded:""},null,8,["onClick"])])])]),_:1})]),_:1},8,["value"])]),_:1},8,["header"]),_(qe,{header:`Bounce ${((ut=r(Ve))==null?void 0:ut.is_bounce)==="Yes"?"1":""}`},{default:E(()=>[i("div",vd,[i("div",pd,[fd,_(R,{onChange:k[11]||(k[11]=ue=>Et(r(Ve))),disabled:!r(he),modelValue:r(Ve),"onUpdate:modelValue":k[12]||(k[12]=ue=>K(Ve)?Ve.value=ue:null),options:r(U),optionLabel:"is_bounce",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["disabled","modelValue","options"])])])]),_:1},8,["header"])]}),_:1})])])])]),i("div",yd,[i("div",null,[i("div",_d,[i("div",gd,[i("div",wd,[r(it)?(d(),ce(B,{key:0,onClick:At,label:"↓  Show More",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})):b("",!0)]),r(kt)?(d(),h("div",Dd,[(d(!0),h(fe,null,ke(r(oe),$=>(d(),h("ul",{key:$,style:{"margin-left":"-15px","margin-top":"-6px"}},[i("li",{innerHTML:$.title,style:{"font-size":"smaller !important"}},null,8,bd)]))),128)),i("div",kd,[_(B,{onClick:Lt,label:"↑ Hide",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})])])):b("",!0),(d(!0),h(fe,null,ke(r(J),$=>(d(),ce(y,{class:"mb-2",key:$.id},{title:E(()=>[i("div",Td,[$.commentator_image?(d(),h("img",{key:0,class:"mr-2",src:$.commentator_image,alt:"",style:{width:"28px",height:"28px","border-radius":"50%"}},null,8,Cd)):(d(),ce(w,{key:1,label:$.commentator_name.charAt(),class:"mr-2 capitalize",size:"small",style:{"background-color":"gray",color:"#ededed","border-radius":"50%"}},null,8,["label"])),i("p",Ed,T($.commentator_name),1)])]),content:E(()=>[et($==null?void 0:$.file)?(d(),h("div",Sd,[i("a",{href:$==null?void 0:$.file,target:"_blank",class:"bg-gray-200 attachment-wrapper cursor-pointer flex align-items-center px-3 py-3 gap-2 comment-file",style:{"background-color":"#f7fafc"}},[Md,i("div",Vd,[i("div",$d,T(et($==null?void 0:$.file)),1)])],8,xd)])):b("",!0),i("p",Od,T($!=null&&$.comment?$==null?void 0:$.comment:""),1),i("i",Ad,T(It($.time)),1)]),_:2},1024))),128))]),i("form",{onSubmit:ht(jt,["prevent"]),class:"comment-add"},[r(lt)?(d(),h("div",Ld,[i("div",null,[jd,ve(),i("span",null,T(r(Wt)),1)]),i("div",{onClick:Nt,class:"close-comment"},Hd)])):b("",!0),i("div",null,[_(j,{placeholder:"Add comment",modelValue:r(Re),"onUpdate:modelValue":k[13]||(k[13]=$=>K(Re)?Re.value=$:null),rows:"3",cols:"15",class:"border-gray-300 mb-1 comment-text",required:""},null,8,["modelValue"]),i("input",{class:"hidden",type:"file",ref_key:"fileInput",ref:_t,onChange:Ft},null,544),_(B,{icon:"pi pi-cloud-upload",onClick:Ut,"aria-label":"Filter"}),_(B,{class:"ml-2",type:"submit",icon:"pi pi-plus",label:"Add",loading:r(z)},null,8,["loading"])])],32)])])])])}}};const Gt=t=>(bs("data-v-efb466c3"),t=t(),ks(),t),Fd={class:"card"},Ud={class:"d-flex create-space-btn-wrapper mb-3 mr-2"},Nd={class:"breadCrumWrap"},Bd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Yd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),zd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Rd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),qd={class:"text cursor-pointer"},Pd={class:"inline-flex align-items-center justify-content-center gap-2"},Kd={class:"white-space-nowrap"},Jd=Gt(()=>i("p",null,"Are you sure you want to delete?",-1)),Gd={__name:"index",setup(t){const e=v(mt("read_task")),a=We(),l=We(),{getSingleProject:o,deleteTask:s,getTaskAssignModalData:u,getTagsAssignModalData:n,getTaskDetails:f}=We(),{singleProject:m,isTaskDeleted:p,tasks:x,kanbanTasks:V,taskDetails:Y}=Dt(We()),I=v({}),ye=v(!0),se=Jt(),J=v(!1),G=v(null),_e=ls().query.task_key,{projects:C}=ls().params,oe=v(!1),$e=v(null),Ee=v(null),Le=v(null),ae=v([]),F=v([]),z=v(!1),O=v(!1),he=v(!1),ge=async(Q,M)=>{Q?Ee.value=Q:Ee.value="",M=="sub-task"?Le.value="Create Sub Task":Le.value="Create Task",oe.value=!0,await u(),ae.value=a.users,await n(),F.value=l.tags},we=async Q=>{G.value=Q,document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const M=document.createElement("div");M.style.position="absolute",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="100%",M.style.backgroundColor="rgba(0, 0, 0, 0)",M.style.zIndex="1000000",document.documentElement.appendChild(M),await u(),ae.value=a.users,await n(),F.value=l.tags,z.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(M)},re=Q=>{$e.value=Q,O.value=!0},A=async()=>{J.value=!0,await s($e.value,C),p.value===!0?(J.value=!1,se.add({severity:"success",summary:"Successful",detail:"Task Deleted Successfully",group:"br",life:3e3}),O.value=!1):(J.value=!1,se.add({severity:"error",summary:"Error",detail:"Unable to delete task",group:"br",life:3e3}))},L=async Q=>{var le,Me;document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const M=document.createElement("div");M.style.position="absolute",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="100%",M.style.backgroundColor="rgba(0, 0, 0, 0)",M.style.zIndex="100000010",document.documentElement.appendChild(M),he.value&&(he.value=!1),await f(Q.key),await u(),ae.value=a.users,await n(),F.value=l.tags,he.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(M),console.log((Me=(le=Y==null?void 0:Y.value)==null?void 0:le.project)==null?void 0:Me.name,"taskDetails")};Ae(he,Q=>{if(Q===!0)return 0;localStorage.removeItem("taskDetailID")}),(()=>{I.value={global:{value:null,matchMode:da.CONTAINS}}})();const ie=Q=>{oe.value=Q},Se=Q=>{z.value=Q},Fe=()=>{o(C)};return Ae(()=>ls().query.task_key,Q=>{Q&&L({key:Q})}),_e&&L({key:_e}),ra(()=>{ye.value=!1}),(Q,M)=>{var xe,Be,Ze,pt;const le=Xs,Me=Zs,Ot=An,st=lo,Ue=Ao,bt=ws,ot=Wd,Ne=Kt;return d(),h("div",Fd,[_(le,{position:"bottom-right",group:"br"}),i("div",Ud,[i("div",Nd,[_(Me,{to:"/",class:"text pi pi-home"}),Bd,_(Me,{to:"/companies",class:"text"},{default:E(()=>[ve("Companies")]),_:1}),Yd,_(Me,{to:`/companies/${(xe=r(m))==null?void 0:xe.company_id}`,class:"text"},{default:E(()=>{var U;return[ve("Company - "+T((U=r(m))==null?void 0:U.company_name),1)]}),_:1},8,["to"]),zd,_(Me,{to:`/companies/${(Be=r(m))==null?void 0:Be.company_id}/spaces/${(Ze=r(m))==null?void 0:Ze.space_id}`,class:"text"},{default:E(()=>{var U;return[ve(" Space - "+T((U=r(m))==null?void 0:U.space_name),1)]}),_:1},8,["to"]),Rd,i("p",qd,"Project - "+T((pt=r(m))==null?void 0:pt.name),1)])]),r(e)?(d(),ce(Ot,{key:0,kanbanTasks:r(V),tasks:r(x),onOpenCreateSpace:ge,onHandleTaskEdit:M[0]||(M[0]=U=>we(U)),onHandleTaskDetailView:M[1]||(M[1]=U=>L(U)),onConfirmDeleteTask:M[2]||(M[2]=U=>re(U))},null,8,["kanbanTasks","tasks"])):b("",!0),_(r(is),{visible:r(oe),"onUpdate:visible":M[4]||(M[4]=U=>K(oe)?oe.value=U:null),modal:"",header:r(Le),style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw","330px":"98vw"}},{default:E(()=>[_(st,{usersLists:r(ae),tagsLists:r(F),taskId:r(Ee),projects:r(C),onCloseCreateModal:M[3]||(M[3]=U=>ie(U))},null,8,["usersLists","tagsLists","taskId","projects"])]),_:1},8,["visible","header"]),_(r(is),{visible:r(z),"onUpdate:visible":M[6]||(M[6]=U=>K(z)?z.value=U:null),modal:"",header:"Edit Task",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:E(()=>[_(Ue,{singleTask:r(G),usersLists:r(ae),tagsLists:r(F),projects:r(C),onCloseEditModal:M[5]||(M[5]=U=>Se(U))},null,8,["singleTask","usersLists","tagsLists","projects"])]),_:1},8,["visible"]),_(r(is),{visible:r(he),"onUpdate:visible":M[10]||(M[10]=U=>K(he)?he.value=U:null),modal:"",header:"Task Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{header:E(()=>{var U,Ve,Ye,at,Re,ft,it;return[i("div",Pd,[_(bt,{label:(Ye=(Ve=(U=r(Y))==null?void 0:U.project)==null?void 0:Ve.space_name)==null?void 0:Ye.charAt(0),class:"capitalize p-0",size:"small",style:{"background-color":["#ededed"],color:["#000"],width:["1.4rem"],height:["1.4rem"],text:["12px"]}},null,8,["label"]),i("span",Kd,[ve(T((Re=(at=r(Y))==null?void 0:at.project)==null?void 0:Re.space_name)+" / ",1),i("strong",null,T((it=(ft=r(Y))==null?void 0:ft.project)==null?void 0:it.name),1)])])]}),default:E(()=>[_(ot,{usersLists:r(ae),tagsLists:r(F),projID:r(C),onOpenCreateSpace:ge,onHandleTaskEdit:M[7]||(M[7]=U=>we(U)),onHandleTaskDetailView:M[8]||(M[8]=U=>L(U)),onConfirmDeleteTask:M[9]||(M[9]=U=>re(U)),onUpdateTaskTable:Fe},null,8,["usersLists","tagsLists","projID"])]),_:1},8,["visible"]),_(r(is),{visible:r(O),"onUpdate:visible":M[12]||(M[12]=U=>K(O)?O.value=U:null),header:" ",style:{width:"25rem"}},{default:E(()=>[Jd,_(Ne,{label:"No",icon:"pi pi-times",text:"",onClick:M[11]||(M[11]=U=>O.value=!1)}),_(Ne,{label:"Yes",icon:"pi pi-check",loading:r(J),text:"",onClick:A},null,8,["loading"])]),_:1},8,["visible"])])}}},sc=Ds(Gd,[["__scopeId","data-v-efb466c3"]]);export{sc as default};
