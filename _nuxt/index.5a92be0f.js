import $e from"./toast.esm.11ec969b.js";import ee from"./button.esm.3ec7eae1.js";import we from"./inputicon.esm.869f1953.js";import te from"./inputtext.esm.a45bd446.js";import ke from"./iconfield.esm.5f547043.js";import De from"./toolbar.esm.b12bdcd0.js";import Ve from"./progressspinner.esm.90cde857.js";import{a2 as le,$ as l,a4 as oe,a5 as se,a6 as ce,a as ve,o as D,b as j,i as t,q as b,s as A,l as o,u as e,a7 as x,e as P,a8 as ae,a9 as ie,ca as ne,c as F,w as U,P as Ie,t as Ue}from"./entry.7ff8a81f.js";import{u as q,a as re,b as me}from"./cookie.ccd6a0a0.js";import G from"./column.esm.06878d54.js";import Ce from"./datatable.esm.8a4bd236.js";import fe from"./textarea.esm.2a24ac2b.js";import Se from"./password.esm.e58891f9.js";import pe from"./dropdown.esm.fdfe63be.js";import{a as Q}from"./usePermission.e23a010a.js";import W from"./dialog.esm.57fbd934.js";import"./portal.esm.2d1e99a5.js";import"./basecomponent.esm.df6a4ea8.js";import"./index.esm.f6e93f94.js";import"./baseicon.esm.c1e52884.js";import"./index.esm.1baf4e6d.js";import"./index.esm.72da38a6.js";import"./index.esm.c28ea1af.js";import"./badge.esm.a113bbb4.js";import"./index.esm.5c2797ea.js";import"./paginator.esm.6c8c2fdf.js";import"./index.esm.716ae6c4.js";import"./inputnumber.esm.328efc7f.js";import"./index.esm.1ec61c04.js";import"./index.esm.39c7d9c3.js";import"./index.esm.9c7f1522.js";import"./index.esm.02beb680.js";import"./index.esm.7de35ad8.js";import"./overlayeventbus.esm.01179281.js";import"./virtualscroller.esm.ae2f48ff.js";import"./index.esm.93780cfa.js";import"./index.esm.38a22526.js";import"./checkbox.esm.11a3d88c.js";import"./radiobutton.esm.7782f3a7.js";import"./index.esm.49bc6069.js";import"./index.esm.79fa5663.js";import"./index.esm.20f1467a.js";const de=n=>(ae("data-v-a8b02973"),n=n(),ie(),n),Ne={class:"field"},Pe={for:"company"},Me=de(()=>t("i",{class:"text-red-400 text-italic"},"*",-1)),Be={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Le={class:"field"},Ae={for:"email"},Fe=de(()=>t("i",{class:"text-red-400"},"*",-1)),Oe={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Re={class:"field"},ze={for:"phoneNo"},He={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},qe={class:"field"},je={for:"company"},Ge={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ye={class:"field"},Ke={for:"company"},Xe=de(()=>t("i",{class:"text-red-400"},"*",-1)),Ze={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Je={class:"field flex flex-column"},Qe=de(()=>t("i",{class:"text-red-400"},"*",-1)),We={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},et={key:0,style:{color:"red"}},tt={class:"create-btn-wrapper mb-0"},lt={__name:"CreateEmployee",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(n,{emit:M}){const O=ne(),S=l(n.param.rolesLists),g=l([]),v=oe(),r=l(""),d=l(""),y=l(""),E=l(""),c=l("");l("");const h=l(!1),$=l(!0),T=M,i=l(!1),B=async()=>{var p,s,m;if(i.value=!0,r.value===""||d.value===""||c.value===""||g.value.length===0){h.value=!0,i.value=!1;return}else if(h.value=!1,!h.value){const V=q("token"),{data:w,error:f,pending:k}=await re(`${O.public.apiUrl}/users/create`,{method:"POST",headers:{Authorization:`Bearer ${V.value}`},body:{name:r.value,email:d.value,address:E.value,phone:y.value,password:c.value,password_confirmation:c.value,role:g.value.name}},"$HYNtwi2ZAs");if(f!=null&&f.value){if(((s=(p=f==null?void 0:f.value)==null?void 0:p.data)==null?void 0:s.code)===422){i.value=!1,v.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((m=w==null?void 0:w.value)==null?void 0:m.code)===201){i.value=!1,r.value=null,d.value=null,y.value=null,E.value=null,c.value=null,$.value=!1,T("closeCreateModal",!1),v.add({severity:"success",summary:"Success",detail:"Employee created successfully!",group:"br",life:3e3});return}else{i.value=!1,v.add({severity:"error",summary:"Error",detail:"Failed to create employee!",group:"br",life:3e3});return}}};return se(()=>{const p=document.getElementById("createEmployeeName");ce(()=>{p&&p.focus()})}),(p,s)=>{const m=te,V=fe,w=Se,f=pe,k=ee,L=ve("tooltip");return D(),j("div",null,[t("div",Ne,[t("label",Pe,[b("Name"),Me,A(t("span",Be,null,512),[[L,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(m,{id:"createEmployeeName",modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=I=>x(r)?r.value=I:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",Le,[t("label",Ae,[b("Email address"),Fe,b(),A(t("span",Oe,null,512),[[L,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(m,{type:"email",modelValue:e(d),"onUpdate:modelValue":s[1]||(s[1]=I=>x(d)?d.value=I:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",Re,[t("label",ze,[b("Phone "),A(t("span",He,null,512),[[L,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(m,{modelValue:e(y),"onUpdate:modelValue":s[2]||(s[2]=I=>x(y)?y.value=I:null),inputId:"worktype",type:"tel",class:"w-full",maxlength:"14",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",qe,[t("label",je,[b("Address "),A(t("span",Ge,null,512),[[L,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(V,{modelValue:e(E),"onUpdate:modelValue":s[3]||(s[3]=I=>x(E)?E.value=I:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",Ye,[t("label",Ke,[b("Password"),Xe,b(),A(t("span",Ze,null,512),[[L,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(w,{modelValue:e(c),"onUpdate:modelValue":s[4]||(s[4]=I=>x(c)?c.value=I:null),placeholder:"Enter password",feedback:!1,invalid:p.confirmPassError,toggleMask:"",class:"w-full",inputClass:"w-full"},null,8,["modelValue","invalid"])]),t("div",Je,[t("label",null,[b("Role"),Qe,b(),A(t("span",We,null,512),[[L,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(f,{modelValue:e(g),"onUpdate:modelValue":s[5]||(s[5]=I=>x(g)?g.value=I:null),options:e(S),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(D(),j("p",et,"Please fill/check up all the fields")):P("",!0),t("div",tt,[o(k,{loading:e(i),label:"Save",icon:"pi pi-check",text:"",onClick:B},null,8,["loading"])])])}}},ot=le(lt,[["__scopeId","data-v-a8b02973"]]);const Z=n=>(ae("data-v-a1134ad4"),n=n(),ie(),n),st={class:"field"},at=Z(()=>t("label",{for:"company"},[b("Name"),t("i",{class:"text-red-500"},"*")],-1)),it={class:"field"},nt=Z(()=>t("label",{for:"email"},[b("Email address"),t("i",{class:"text-red-500"},"*")],-1)),rt={class:"field"},dt=Z(()=>t("label",{for:"worktype"},"Phone",-1)),ut={class:"field"},ct=Z(()=>t("label",{for:"company"},"Address",-1)),pt={class:"field flex flex-column"},mt=Z(()=>t("label",null,[b("Role"),t("i",{class:"text-red-500"},"*")],-1)),vt={key:0,style:{color:"red"}},ft={class:"create-btn-wrappe"},_t={__name:"EditEmployee",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(n,{emit:M}){const O=ne(),C=n,S=oe(),g=l(C.param.id),v=l(C.param.name),r=l(C.param.email),d=l(C.param.phone),y=l(C.param.address),E=l(C.param.rolesLists),c=l(C.param.user_type),h=l(!1),$=l(!0),T=M,i=l(!1),B=async()=>{var p,s,m;if(i.value=!0,v.value===""||r.value===""){h.value=!0,i.value=!1;return}else if(h.value=!1,!h.value){const V=q("token"),{data:w,error:f,pending:k}=await re(`${O.public.apiUrl}/users/update/${g.value}`,{method:"POST",headers:{Authorization:`Bearer ${V.value}`},body:{name:v.value,email:r.value,address:y.value,phone:d.value,role:c.value.name}},"$D8HfpvkorG");if(f!=null&&f.value){if(((s=(p=f==null?void 0:f.value)==null?void 0:p.data)==null?void 0:s.code)===500){i.value=!1,S.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((m=w==null?void 0:w.value)==null?void 0:m.code)===200){i.value=!1,$.value=!1,T("closeEditModal",!1),S.add({severity:"success",summary:"Success",detail:"Employee Updated successfully!",group:"br",life:3e3});return}else{i.value=!1,S.add({severity:"error",summary:"Error",detail:"Failed to update employee!",group:"br",life:3e3});return}}};return se(()=>{const p=document.getElementById("editEmployeeName");ce(()=>{p&&p.focus()})}),(p,s)=>{const m=te,V=fe,w=pe,f=ee;return D(),j("div",null,[t("div",st,[at,o(m,{id:"editEmployeeName",modelValue:e(v),"onUpdate:modelValue":s[0]||(s[0]=k=>x(v)?v.value=k:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",it,[nt,o(m,{type:"email",modelValue:e(r),"onUpdate:modelValue":s[1]||(s[1]=k=>x(r)?r.value=k:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",rt,[dt,o(m,{modelValue:e(d),"onUpdate:modelValue":s[2]||(s[2]=k=>x(d)?d.value=k:null),type:"tel",class:"w-full",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",ut,[ct,o(V,{modelValue:e(y),"onUpdate:modelValue":s[3]||(s[3]=k=>x(y)?y.value=k:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",pt,[mt,o(w,{modelValue:e(c),"onUpdate:modelValue":s[4]||(s[4]=k=>x(c)?c.value=k:null),options:e(E),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(D(),j("p",vt,"Please fill/check up all the fields")):P("",!0),t("div",ft,[o(f,{label:"Update",icon:"pi pi-check",text:"",onClick:B,loading:e(i)},null,8,["loading"])])])}}},xt=le(_t,[["__scopeId","data-v-a1134ad4"]]);const _e=n=>(ae("data-v-0ee63ff9"),n=n(),ie(),n),yt={class:"field"},ht={for:"email"},Tt=_e(()=>t("i",{class:"text-red-400 text-italic"},"*",-1)),bt={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},gt={class:"field flex flex-column"},Et=_e(()=>t("i",{class:"text-red-400 text-italic"},"*",-1)),$t={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},wt={key:0,style:{color:"red"}},kt={class:"create-btn-wrapper"},Dt={__name:"InviteGuest",props:{param:{type:Object,required:!0}},emits:["closeInviteModal"],setup(n,{emit:M}){const O=ne(),S=l(n.param.rolesLists),g=l([]),v=oe(),r=l(""),d=l(!1),y=l("false"),E=l(!0),c=M,h=async()=>{var $;if(r.value===""||g.value.length===0){d.value=!0;return}else if(y.value=!0,d.value=!1,!d.value){const T=q("token"),{data:i,pending:B}=await re(`${O.public.apiUrl}/invite-user`,{method:"POST",headers:{Authorization:`Bearer ${T.value}`},body:{email:r.value,role:g.value.name}},"$uaOzqXhdzF");(($=i==null?void 0:i.value)==null?void 0:$.code)===201?(r.value=null,E.value=!1,c("closeInviteModal",!1),y.value=!1,v.add({severity:"success",summary:"Success",detail:"Employee invitation sent!",group:"br",life:3e3})):v.add({severity:"error",summary:"Error",detail:"Employee invitation failed!",group:"br",life:3e3})}};return se(()=>{const $=document.getElementById("inviteEmail");ce(()=>{$&&$.focus()})}),($,T)=>{const i=te,B=pe,p=ee,s=ve("tooltip");return D(),j("div",null,[t("div",yt,[t("label",ht,[b("Email address"),Tt,b(),A(t("span",bt,null,512),[[s,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(i,{id:"inviteEmail",type:"email",modelValue:e(r),"onUpdate:modelValue":T[0]||(T[0]=m=>x(r)?r.value=m:null),class:"w-full"},null,8,["modelValue"])]),t("div",gt,[t("label",null,[b("Role"),Et,b(),A(t("span",$t,null,512),[[s,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(B,{modelValue:e(g),"onUpdate:modelValue":T[1]||(T[1]=m=>x(g)?g.value=m:null),options:e(S),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(d)?(D(),j("p",wt,"Please fill/check up all the fields")):P("",!0),t("div",kt,[e(y)=="false"?(D(),F(p,{key:0,label:"Send",icon:"pi pi-check",text:"",onClick:h})):(D(),F(p,{key:1,label:"Sending...",icon:"pi pi-spin pi-spinner",text:"",disabled:""}))])])}}},Vt=le(Dt,[["__scopeId","data-v-0ee63ff9"]]);const ue=n=>(ae("data-v-4310e497"),n=n(),ie(),n),It={key:0,class:"card"},Ut={class:"d-flex mr-2"},Ct=ue(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Employees")],-1)),St=ue(()=>t("i",{class:"pi pi-search"},null,-1)),Nt=ue(()=>t("p",{class:"text-center"},"No Data found...",-1)),Pt=ue(()=>t("p",null,"Are you sure you want to delete?",-1)),Mt={__name:"index",setup(n){const M=ne(),O=l(Q("read_user")),C=l(Q("create_user")),S=l(Q("update_user")),g=l(Q("delete_user")),v=l(),r=l(!0),d=l(!1),y=oe(),E=l(!1),c=l(!1),h=l(!1),$=l([]),T=l(!1),i=l(""),B=l(""),p=l(""),s=l(""),m=l(""),V=l([]),w=l([]),f=_=>{E.value=!1,Y()},k=_=>{h.value=!1,Y()},L=()=>{E.value=!0},I=()=>{c.value=!0},xe=_=>{c.value=!1,Y()};l([]);const ye=_=>{h.value=!0,i.value=_.id,B.value=_.name,p.value=_.email,s.value=_.phone,m.value=_.address,w.value=_.user_type,V.value.map(a=>{a.name===_.user_type&&(w.value=a)})},he=_=>{T.value=!0,i.value=_},Te=async()=>{d.value=!0;const _=q("token"),{data:a,pending:J}=await re(`${M.public.apiUrl}/users/delete/${i.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${_.value}`}},"$BmbV2j3TY3");a.value.code===200?(T.value=!1,y.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),d.value=!1,Y()):(y.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),d.value=!1)},Y=async()=>{var R,z,H;const _=q("token"),{data:a,pending:J,error:N}=await me("taskAssignModalData",()=>$fetch(`${M.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${_.value}`}}));((z=(R=a.value)==null?void 0:R.data)==null?void 0:z.length)>0&&($.value=(H=a.value)==null?void 0:H.data.map((K,X)=>({...K,index:X+1})))},be=async()=>{var R,z,H;const _=q("token"),{data:a,pending:J,error:N}=await me("roleLiist",()=>$fetch(`${M.public.apiUrl}/roles/list`,{headers:{Authorization:`Bearer ${_.value}`}}));((z=(R=a.value)==null?void 0:R.data)==null?void 0:z.length)>0&&(V.value=(H=a.value)==null?void 0:H.data.map((K,X)=>({...K,index:X+1})))},ge=()=>{v.value={global:{value:null,matchMode:Ie.CONTAINS}}};return q("rolePermission"),se(()=>{Y(),be(),r.value=!1}),ge(),(_,a)=>{const J=$e,N=ee,R=we,z=te,H=ke,K=De,X=Ve;return e(O)?(D(),j("div",It,[t("div",Ut,[o(J,{position:"bottom-right",group:"br"}),Ct]),o(K,{class:"border-0 px-0"},{start:U(()=>[e(C)?(D(),F(N,{key:0,icon:"pi pi-plus",label:"Create",onClick:L,class:"mr-2",severity:"secondary"})):P("",!0),e(C)?(D(),F(N,{key:1,icon:"pi pi-users",onClick:I,label:"Invite a guest",severity:"secondary"})):P("",!0)]),end:U(()=>[o(H,{iconPosition:"right",raised:""},{default:U(()=>[o(R,null,{default:U(()=>[St]),_:1}),o(z,{modelValue:e(v).global.value,"onUpdate:modelValue":a[0]||(a[0]=u=>e(v).global.value=u),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(Ce),{filters:e(v),"onUpdate:filters":a[1]||(a[1]=u=>x(v)?v.value=u:null),class:"table-st",value:e($),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(r)},{empty:U(()=>[Nt]),loading:U(()=>[o(X,{style:{width:"50px",height:"50px"}})]),footer:U(()=>[b(" In total there are "+Ue(e($)?e($).length:0)+" rows. ",1)]),default:U(()=>[o(e(G),{field:"index",header:"Serial",sortable:""}),o(e(G),{field:"name",header:"Employee Name"}),o(e(G),{field:"email",header:"Email Address"}),o(e(G),{field:"phone",header:"Phone"}),o(e(G),{field:"user_type",header:"User Type"}),o(e(G),{field:"action",header:"Action"},{body:U(u=>[e(S)?(D(),F(N,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:Ee=>ye(u.data)},null,8,["onClick"])):P("",!0),e(S)?P("",!0):(D(),F(N,{key:1,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(g)?(D(),F(N,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:Ee=>he(u.data.id)},null,8,["onClick"])):P("",!0),e(g)?P("",!0):(D(),F(N,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(e(W),{visible:e(E),"onUpdate:visible":a[3]||(a[3]=u=>x(E)?E.value=u:null),modal:"",header:"Create Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:U(()=>[o(ot,{param:{rolesLists:e(V)},onCloseCreateModal:a[2]||(a[2]=u=>f(u))},null,8,["param"])]),_:1},8,["visible"]),o(e(W),{visible:e(h),"onUpdate:visible":a[5]||(a[5]=u=>x(h)?h.value=u:null),modal:"",header:"Edit Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:U(()=>[o(xt,{param:{id:e(i),name:e(B),address:e(m),phone:e(s),email:e(p),user_type:e(w),rolesLists:e(V)},onCloseEditModal:a[4]||(a[4]=u=>k(u))},null,8,["param"])]),_:1},8,["visible"]),o(e(W),{visible:e(T),"onUpdate:visible":a[7]||(a[7]=u=>x(T)?T.value=u:null),header:" ",style:{width:"25rem"}},{default:U(()=>[Pt,o(N,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=u=>T.value=!1)}),o(N,{label:"Yes",icon:"pi pi-check",text:"",onClick:Te,loading:e(d)},null,8,["loading"])]),_:1},8,["visible"]),o(e(W),{visible:e(c),"onUpdate:visible":a[9]||(a[9]=u=>x(c)?c.value=u:null),modal:"",header:"Invite Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:U(()=>[o(Vt,{param:{rolesLists:e(V)},onCloseInviteModal:a[8]||(a[8]=u=>xe(u))},null,8,["param"])]),_:1},8,["visible"])])):P("",!0)}}},$l=le(Mt,[["__scopeId","data-v-4310e497"]]);export{$l as default};
