import{u as n,b as d}from"./cookie.40a73f96.js";import{an as g}from"./entry.3a3c1209.js";const h=g("ActiveCompany",{state:()=>({availableCompanies:null,compInLoclStrg:null,getSpaces:null}),getters:{menu(o){var i;if(o.getSpaces){const p=[];return(i=o.getSpaces)==null||i.spaces.forEach(a=>{var r;const c={label:a==null?void 0:a.name,icon:"pi pi-list",color:a==null?void 0:a.color,id:a==null?void 0:a.id,name:a==null?void 0:a.name,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}`,items:[]};((r=a==null?void 0:a.projects)==null?void 0:r.length)>0&&a.projects.forEach(s=>{const t={label:s==null?void 0:s.name,id:s==null?void 0:s.id,icon:"pi pi-list",color:s==null?void 0:s.color,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}/projects/${s.id}`};c.items.push(t)}),p.push(c)}),p}else return[]},company(o){var i;return o.compInLoclStrg?(i=o.compInLoclStrg)==null?void 0:i.label:""},company_id(o){var i;return o.compInLoclStrg?(i=o.compInLoclStrg)==null?void 0:i.id:""},companyList(o){return o.availableCompanies?o.availableCompanies.map(i=>({id:i.id,label:i.name})):[]},totalCompanies(o){return o.availableCompanies?o.availableCompanies.length:0},selectedCompany(o){return o.compInLoclStrg},totalProjects(o){var p;let i=[];if(o.getSpaces)(p=o.getSpaces)==null||p.spaces.forEach(a=>{var c;((c=a==null?void 0:a.projects)==null?void 0:c.length)>0&&a.projects.forEach(r=>{i.push({name:r.name,id:r.id,statuses:r.statuses})})});else return[];return i}},actions:{async getCompany(){var r;const o=n("token"),{data:i,pending:p,error:a}=await d("companyList",()=>$fetch("https://pbe.singularitybd.net/api/v1/company/list",{headers:{Authorization:`Bearer ${o.value}`}}));console.log("SideBar List",i.value),this.availableCompanies=(r=i.value)==null?void 0:r.data;let c=Number(localStorage.getItem("userCompany"));if(this.availableCompanies){const s=this.availableCompanies.find(t=>t.id===c);if(this.getSpaces=s,s){const{id:t,name:u}=s;return this.compInLoclStrg={id:t,label:u},{name:u,id:t}}}return null}}});export{h as u};
