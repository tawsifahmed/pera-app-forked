import ae from"./toast.esm.8e0c7f26.js";import{_ as ie}from"./nuxt-link.4f060967.js";import{_ as ne}from"./CreateSpace.27e01b67.js";import ce from"./inputicon.esm.0da03ef4.js";import G from"./inputtext.esm.2f4ebd3b.js";import re from"./iconfield.esm.af7b77fd.js";import J from"./button.esm.e846d103.js";import de from"./textarea.esm.a49a2f1d.js";import pe from"./multiselect.esm.d9a634cf.js";import{a2 as ue,a3 as Q,$ as l,a4 as X,a5 as me,a6 as ve,o as g,b as B,u as o,i as e,l as s,a7 as k,K as Z,t as F,e as S,a8 as fe,a9 as _e,q as U,aa as ye,ab as ge,ac as Se,w as m,s as be,c as D,P as xe,a as Ce}from"./entry.f1083d62.js";import{u as I}from"./company.ab78e0f0.js";import"./colorpicker.esm.06666c5e.js";import"./inputswitch.esm.3600baee.js";import Y from"./dialog.esm.47d02448.js";import{a as O}from"./usePermission.0e59467d.js";import V from"./column.esm.347a1d2a.js";import $e from"./datatable.esm.549750af.js";import"./portal.esm.a12ffff4.js";import"./basecomponent.esm.dd1da9c1.js";import"./index.esm.0a9206fc.js";import"./baseicon.esm.9dc16ba1.js";import"./index.esm.1d6733e5.js";import"./index.esm.1c5b7344.js";import"./index.esm.6a9442c3.js";import"./workCompany.9fc24a14.js";import"./cookie.9dea65c9.js";import"./fetch.10fa1737.js";import"./badge.esm.06f68ce4.js";import"./index.esm.0cabc4e6.js";import"./checkbox.esm.f06bbf32.js";import"./index.esm.25dde301.js";import"./index.esm.dadcf415.js";import"./overlayeventbus.esm.0f70953e.js";import"./virtualscroller.esm.8b3bbffe.js";import"./paginator.esm.48f6f07f.js";import"./index.esm.59d7ab85.js";import"./dropdown.esm.4e9c9472.js";import"./inputnumber.esm.bd15fd88.js";import"./index.esm.db20bc22.js";import"./index.esm.262c264f.js";import"./index.esm.f2124f4a.js";import"./index.esm.18ac01f2.js";import"./index.esm.26a78852.js";import"./radiobutton.esm.6dce7c4d.js";import"./index.esm.8aab8f7c.js";import"./index.esm.d83addac.js";const P=b=>(fe("data-v-879e428a"),b=b(),_e(),b),ke={class:""},he={key:0},we={class:"field flex flex-column"},Ee=P(()=>e("label",{for:"editSpaceName"},[U("Space Name"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={class:"field flex flex-column"},De=P(()=>e("label",{for:"name"},"Space Description",-1)),Ve={class:"field"},Ie=P(()=>e("label",{for:"name"},[U("Space Color"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Ue={class:"m-0 d-flex colorpicker-wrapper"},Pe={class:"flex justify-center align-items-center"},Te={class:"ml-2"},Me={class:"flex"},Ae={class:"field"},Be=P(()=>e("label",null,[U("Space Members"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Fe={key:0,style:{color:"red"}},Le=P(()=>e("br",null,null,-1)),je={class:"flex justify-content-end mt-2"},Re={__name:"EditSpace",props:["refSpaceId","singleCompany"],emits:["closeEditSpace"],setup(b,{emit:L}){const{editSpace:j}=I(),{isSpaceEdited:h}=Q(I()),T=I(),{refSpaceId:c,singleCompany:R}=b,w=l(!0),M=l(!1),v=l(!1),x=l(!1),E=X(),f=l(c==null?void 0:c.color),n=l(c==null?void 0:c.name),C=l(c==null?void 0:c.description),y=l([]),_=l(c==null?void 0:c.users.map(p=>({id:p.id,name:p.name})));me(async()=>{await T.getTaskAssignModalData(),y.value=T.users;const p=document.getElementById("editSpaceName");ve(()=>{p&&p.focus()})}),l(null),console.log("spaceAvatarPreview",f.value);const r=p=>{f.value=p},K=L,u=l(!1),q=async()=>{if(v.value=!1,x.value=!1,u.value=!0,n.value===null||n.value===""){v.value=!0,u.value=!1;return}if(_.value.length===0){x.value=!0,u.value=!1;return}else{const p={id:c.id,name:n.value,description:C.value,company_id:R.id,color:f.value,users:_.value.map(t=>t.id)};await j(p),h.value===!0?(w.value=!1,u.value=!1,K("closeEditSpace",!1),E.add({severity:"success",summary:"Successful",detail:"Space Updated Successfully",group:"br",life:3e3}),console.log("space created")):(u.value=!1,E.add({severity:"error",summary:"Error",detail:"Unable to update space",group:"br",life:3e3}),console.log("space not created"))}},z=()=>{K("closeEditSpace",!1)};return(p,t)=>{const d=G,H=de,N=pe,A=J;return g(),B("div",ke,[o(w)?(g(),B("div",he,[e("div",we,[Ee,s(d,{id:"editSpaceName",modelValue:o(n),"onUpdate:modelValue":t[0]||(t[0]=i=>k(n)?n.value=i:null),required:"true",invalid:o(v)},null,8,["modelValue","invalid"])]),e("div",Ne,[De,s(H,{id:"description",class:"border-gray-300",modelValue:o(C),"onUpdate:modelValue":t[1]||(t[1]=i=>k(C)?C.value=i:null),rows:"3",cols:"20",invalid:p.spaceDescriptionError},null,8,["modelValue","invalid"])]),e("div",Ve,[Ie,e("div",Ue,[e("div",Pe,[e("div",{id:"dynamic-div",style:Z(`background-color: ${o(f)};`),class:"d-flex align-items-center justify-content-center text-3xl text-white"},F(o(n)?o(n).charAt(0).toUpperCase():"S"),5),e("div",Te,[e("div",Me,[e("div",{id:"white",class:"color",onClick:t[2]||(t[2]=i=>r("#e5ded4"))}),e("div",{id:"gray",class:"color",onClick:t[3]||(t[3]=i=>r("#9e9e9e"))}),e("div",{id:"orange",class:"color",onClick:t[4]||(t[4]=i=>r("#ff9800"))}),e("div",{id:"purple",class:"color",onClick:t[5]||(t[5]=i=>r("#9c27b0"))}),e("div",{id:"cadetblue",class:"color",onClick:t[6]||(t[6]=i=>r("#e91e63"))}),e("div",{id:"burlywood",class:"color",onClick:t[7]||(t[7]=i=>r("#4caf50"))}),e("div",{id:"pink",class:"color",onClick:t[8]||(t[8]=i=>r("#f44336"))}),e("div",{id:"lightseagreen",class:"color",onClick:t[9]||(t[9]=i=>r("#009688"))}),e("div",{id:"brown",class:"color",onClick:t[10]||(t[10]=i=>r("#795548"))}),e("div",{id:"cyan",class:"color",onClick:t[11]||(t[11]=i=>r("#00bcd4"))}),e("div",{id:"amber",class:"color",onClick:t[12]||(t[12]=i=>r("#ffc107"))}),e("div",{id:"indigo",class:"color",onClick:t[13]||(t[13]=i=>r("#3f51b5"))})])])])])]),e("div",Ae,[Be,s(N,{display:"chip",modelValue:o(_),"onUpdate:modelValue":t[14]||(t[14]=i=>k(_)?_.value=i:null),options:o(y),filter:"",optionLabel:"name",placeholder:"Select Space Members",class:"w-full",invalid:o(x)},null,8,["modelValue","options","invalid"])]),o(M)?(g(),B("p",Fe," Please fill/check up all the fields")):S("",!0)])):S("",!0),Le,e("div",je,[s(A,{label:"Cancel",icon:"pi pi-times",text:"",onClick:z}),s(A,{loading:o(u),label:"Save",icon:"pi pi-check",text:"",onClick:q},null,8,["loading"])])])}}},Ke=ue(Re,[["__scopeId","data-v-879e428a"]]);const qe={class:"card"},ze={class:"d-flex create-space-btn-wrapper mb-3"},He={class:"breadCrumWrap"},Oe=e("p",{class:"pi pi-angle-right"},null,-1),We=e("p",{class:"pi pi-angle-right"},null,-1),Ye={class:"text"},Ge={class:"create-btn-wrapper"},Je={class:"flex justify-content-end mb-2"},Qe=e("i",{class:"pi pi-search"},null,-1),Xe=e("p",{class:"py-2 text-center"},"No Data found...",-1),Ze={class:"cursor-pointer com-name hover:text-primary font-semibold"},et=e("p",null,"Are you sure you want to delete?",-1),Wt={__name:"index",setup(b){const{getSingleCompany:L,deleteSpace:j}=I(),{singleCompany:h,singleCompanySpaces:T,isSpaceDeleted:c}=Q(I()),R=l(O("create_space")),w=l(O("update_space")),M=l(O("delete_space")),v=l(),x=l(!0),E=X(),{companies:f}=ye().params;if(console.log("companyParams,",f),l(!1),h.value===void 0)throw ge({statusCode:404,message:"Company not found",fatal:!0});const n=l(null),C=t=>{n.value=t,console.log("refCompanyId",n.value),y.value=!0},y=l(!1),_=l(!1),r=async()=>{_.value=!0,console.log("refCompanyIdFin",n.value),await j(n.value,f),c.value===!0?(E.add({severity:"success",summary:"Successful",detail:"Space Deleted Successfully",group:"br",life:3e3}),y.value=!1,console.log("space deleted"),_.value=!1):(E.add({severity:"error",summary:"Error",detail:"Unable to delete space",group:"br",life:3e3}),console.log("space not deleted"),_.value=!1)};(()=>{v.value={global:{value:null,matchMode:xe.CONTAINS}}})();const u=l(!1),q=t=>{u.value=!0,n.value=t,console.log("refSpaceId",n.value)};Se(()=>{L(f),x.value=!1,console.log("company,",f)});const z=t=>{u.value=t},p=l(!0);return(t,d)=>{var W;const H=ae,N=ie,A=ne,i=ce,ee=G,te=re,$=J,oe=Ke,se=Ce("tooltip");return g(),B("div",qe,[s(H,{position:"bottom-right",group:"br"}),e("div",ze,[e("div",He,[s(N,{to:"/",class:"text pi pi-home"}),Oe,s(N,{to:"/companies",class:"text"},{default:m(()=>[U("Companies")]),_:1}),We,e("p",Ye,"Company - "+F((W=o(h))==null?void 0:W.name),1)]),e("div",Ge,[o(R)?be((g(),D(A,{key:0,spacePage:o(p)},null,8,["spacePage"])),[[se,{value:"Create Space"},void 0,{left:!0}]]):S("",!0)])]),e("div",Je,[s(te,{iconPosition:"right"},{default:m(()=>[s(i,null,{default:m(()=>[Qe]),_:1}),s(ee,{modelValue:o(v).global.value,"onUpdate:modelValue":d[0]||(d[0]=a=>o(v).global.value=a),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),s(o($e),{filters:o(v),"onUpdate:filters":d[1]||(d[1]=a=>k(v)?v.value=a:null),class:"table-dco",value:o(T),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:o(x)},{empty:m(()=>[Xe]),loading:m(()=>[U(" Loading data. Please wait. ")]),default:m(()=>[s(o(V),{field:"index",header:"Serial",sortable:""}),s(o(V),{field:"name",header:"Space Name"},{body:m(a=>[s(N,{to:`/companies/${o(f)}/spaces/${a.data.id}`},{default:m(()=>[e("p",Ze,F(a.data.name),1)]),_:2},1032,["to"])]),_:1}),s(o(V),{field:"description",header:"Description"}),s(o(V),{field:"color",header:"Space Color"},{body:m(a=>[e("div",{id:"dynamic-div",style:Z(`background-color: ${a.data.color}; width: 30px;`),class:"flex font-semibold justify-content-center rounded py-2 px-2 w-fit text-white"},F(a.data.name?a.data.name.charAt(0).toUpperCase():"S"),5)]),_:1}),s(o(V),{field:"action",header:"Action"},{body:m(a=>[o(w)?(g(),D($,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:le=>q(a.data)},null,8,["onClick"])):S("",!0),o(M)?(g(),D($,{key:1,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:le=>C(a.data.id)},null,8,["onClick"])):S("",!0),o(w)?S("",!0):(g(),D($,{key:2,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",style:{visibility:"hidden"}})),o(M)?S("",!0):(g(),D($,{key:3,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),s(o(Y),{visible:o(y),"onUpdate:visible":d[3]||(d[3]=a=>k(y)?y.value=a:null),header:" ",style:{width:"25rem"}},{default:m(()=>[et,s($,{label:"No",icon:"pi pi-times",text:"",onClick:d[2]||(d[2]=a=>y.value=!1)}),s($,{label:"Yes",icon:"pi pi-check",loading:o(_),text:"",onClick:r},null,8,["loading"])]),_:1},8,["visible"]),s(o(Y),{visible:o(u),"onUpdate:visible":d[5]||(d[5]=a=>k(u)?u.value=a:null),modal:"",header:"Edit Space",style:{width:"32rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[s(oe,{refSpaceId:o(n),singleCompany:o(h),onCloseEditSpace:d[4]||(d[4]=a=>z(a))},null,8,["refSpaceId","singleCompany"])]),_:1},8,["visible"])])}}};export{Wt as default};
