import ae from"./toast.esm.6af95d1f.js";import{_ as ie}from"./nuxt-link.92178c70.js";import{_ as ne}from"./CreateSpace.73129e80.js";import re from"./inputicon.esm.6051d2c2.js";import G from"./inputtext.esm.bffcfa87.js";import ce from"./iconfield.esm.b7835fbd.js";import J from"./button.esm.6289413f.js";import de from"./textarea.esm.86b1f7e6.js";import pe from"./multiselect.esm.28280b43.js";import{a2 as ue,a5 as Q,$ as l,a6 as X,a7 as me,a8 as ve,o as g,b as B,u as o,i as e,l as s,a9 as $,K as Z,t as F,e as b,a3 as fe,a4 as _e,q as P,aa as ye,ab as ge,ac as be,w as m,s as Se,c as D,P as xe,a as Ce}from"./entry.98b7e0bb.js";import{u as I}from"./company.c53b5196.js";import"./colorpicker.esm.1eaddea9.js";import"./inputswitch.esm.a362a56c.js";import Y from"./dialog.esm.4250b180.js";import{a as H}from"./usePermission.65c9d539.js";import V from"./column.esm.2e0a8cdb.js";import ke from"./datatable.esm.37f2c4e5.js";import"./portal.esm.26dcef28.js";import"./basecomponent.esm.cced9ad3.js";import"./index.esm.d44ff1a2.js";import"./baseicon.esm.623cedf9.js";import"./index.esm.ecd64c1b.js";import"./index.esm.69bae774.js";import"./index.esm.3d4c47ed.js";import"./workCompany.f4e886d5.js";import"./cookie.a532e10e.js";import"./fetch.a9118f92.js";import"./badge.esm.5405b223.js";import"./index.esm.a1ec4135.js";import"./checkbox.esm.6325a33e.js";import"./index.esm.f152d981.js";import"./index.esm.6a4471bc.js";import"./overlayeventbus.esm.c04a2fc7.js";import"./virtualscroller.esm.eb200c0e.js";import"./paginator.esm.ddf23427.js";import"./index.esm.d2b94bc2.js";import"./dropdown.esm.88881cd6.js";import"./inputnumber.esm.9cf841d9.js";import"./index.esm.131cac68.js";import"./index.esm.c47eded8.js";import"./index.esm.f7939537.js";import"./index.esm.776e1c02.js";import"./index.esm.22c2abf4.js";import"./radiobutton.esm.49bf2b9a.js";import"./index.esm.196e1910.js";import"./index.esm.a63d2ce6.js";const U=S=>(fe("data-v-879e428a"),S=S(),_e(),S),$e={class:""},he={key:0},we={class:"field flex flex-column"},Ee=U(()=>e("label",{for:"editSpaceName"},[P("Space Name"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={class:"field flex flex-column"},De=U(()=>e("label",{for:"name"},"Space Description",-1)),Ve={class:"field"},Ie=U(()=>e("label",{for:"name"},[P("Space Color"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Pe={class:"m-0 d-flex colorpicker-wrapper"},Ue={class:"flex justify-center align-items-center"},Me={class:"ml-2"},Te={class:"flex"},Ae={class:"field"},Be=U(()=>e("label",null,[P("Space Members"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Fe={key:0,style:{color:"red"}},Le=U(()=>e("br",null,null,-1)),je={class:"flex justify-content-end mt-2"},Re={__name:"EditSpace",props:["refSpaceId","singleCompany"],emits:["closeEditSpace"],setup(S,{emit:L}){const{editSpace:j}=I(),{isSpaceEdited:h}=Q(I()),M=I(),{refSpaceId:r,singleCompany:R}=S,w=l(!0),T=l(!1),v=l(!1),x=l(!1),E=X(),f=l(r==null?void 0:r.color),n=l(r==null?void 0:r.name),C=l(r==null?void 0:r.description),y=l([]),_=l(r==null?void 0:r.users.map(p=>({id:p.id,name:p.name})));me(async()=>{await M.getTaskAssignModalData(),y.value=M.users;const p=document.getElementById("editSpaceName");ve(()=>{p&&p.focus()})}),l(null),console.log("spaceAvatarPreview",f.value);const c=p=>{f.value=p},K=L,u=l(!1),q=async()=>{if(v.value=!1,x.value=!1,u.value=!0,n.value===null||n.value===""){v.value=!0,u.value=!1;return}if(_.value.length===0){x.value=!0,u.value=!1;return}else{const p={id:r.id,name:n.value,description:C.value,company_id:R.id,color:f.value,users:_.value.map(t=>t.id)};await j(p),h.value===!0?(w.value=!1,u.value=!1,K("closeEditSpace",!1),E.add({severity:"success",summary:"Successful",detail:"Space Updated Successfully",group:"br",life:3e3}),console.log("space created")):(u.value=!1,E.add({severity:"error",summary:"Error",detail:"Unable to update space",group:"br",life:3e3}),console.log("space not created"))}},O=()=>{K("closeEditSpace",!1)};return(p,t)=>{const d=G,z=de,N=pe,A=J;return g(),B("div",$e,[o(w)?(g(),B("div",he,[e("div",we,[Ee,s(d,{id:"editSpaceName",modelValue:o(n),"onUpdate:modelValue":t[0]||(t[0]=i=>$(n)?n.value=i:null),required:"true",invalid:o(v)},null,8,["modelValue","invalid"])]),e("div",Ne,[De,s(z,{id:"description",class:"border-gray-300",modelValue:o(C),"onUpdate:modelValue":t[1]||(t[1]=i=>$(C)?C.value=i:null),rows:"3",cols:"20",invalid:p.spaceDescriptionError},null,8,["modelValue","invalid"])]),e("div",Ve,[Ie,e("div",Pe,[e("div",Ue,[e("div",{id:"dynamic-div",style:Z(`background-color: ${o(f)};`),class:"d-flex align-items-center justify-content-center text-3xl text-white"},F(o(n)?o(n).charAt(0).toUpperCase():"S"),5),e("div",Me,[e("div",Te,[e("div",{id:"white",class:"color",onClick:t[2]||(t[2]=i=>c("#e5ded4"))}),e("div",{id:"gray",class:"color",onClick:t[3]||(t[3]=i=>c("#9e9e9e"))}),e("div",{id:"orange",class:"color",onClick:t[4]||(t[4]=i=>c("#ff9800"))}),e("div",{id:"purple",class:"color",onClick:t[5]||(t[5]=i=>c("#9c27b0"))}),e("div",{id:"cadetblue",class:"color",onClick:t[6]||(t[6]=i=>c("#e91e63"))}),e("div",{id:"burlywood",class:"color",onClick:t[7]||(t[7]=i=>c("#4caf50"))}),e("div",{id:"pink",class:"color",onClick:t[8]||(t[8]=i=>c("#f44336"))}),e("div",{id:"lightseagreen",class:"color",onClick:t[9]||(t[9]=i=>c("#009688"))}),e("div",{id:"brown",class:"color",onClick:t[10]||(t[10]=i=>c("#795548"))}),e("div",{id:"cyan",class:"color",onClick:t[11]||(t[11]=i=>c("#00bcd4"))}),e("div",{id:"amber",class:"color",onClick:t[12]||(t[12]=i=>c("#ffc107"))}),e("div",{id:"indigo",class:"color",onClick:t[13]||(t[13]=i=>c("#3f51b5"))})])])])])]),e("div",Ae,[Be,s(N,{display:"chip",modelValue:o(_),"onUpdate:modelValue":t[14]||(t[14]=i=>$(_)?_.value=i:null),options:o(y),filter:"",optionLabel:"name",placeholder:"Select Space Members",class:"w-full",invalid:o(x)},null,8,["modelValue","options","invalid"])]),o(T)?(g(),B("p",Fe," Please fill/check up all the fields")):b("",!0)])):b("",!0),Le,e("div",je,[s(A,{label:"Cancel",icon:"pi pi-times",text:"",onClick:O}),s(A,{loading:o(u),label:"Save",icon:"pi pi-check",text:"",onClick:q},null,8,["loading"])])])}}},Ke=ue(Re,[["__scopeId","data-v-879e428a"]]);const qe={class:"card"},Oe={class:"d-flex create-space-btn-wrapper mb-3"},ze={class:"breadCrumWrap"},He=e("p",{class:"pi pi-angle-right"},null,-1),We=e("p",{class:"pi pi-angle-right"},null,-1),Ye={class:"text"},Ge={class:"create-btn-wrapper"},Je={class:"flex justify-content-end mb-2"},Qe=e("i",{class:"pi pi-search"},null,-1),Xe=e("p",{class:"py-2 text-center"},"No Data found...",-1),Ze={class:"cursor-pointer com-name hover:text-primary font-semibold"},et=e("p",null,"Are you sure you want to delete?",-1),Wt={__name:"index",setup(S){const{getSingleCompany:L,deleteSpace:j}=I(),{singleCompany:h,singleCompanySpaces:M,isSpaceDeleted:r}=Q(I()),R=l(H("create_space")),w=l(H("update_space")),T=l(H("delete_space")),v=l(),x=l(!0),E=X(),{companies:f}=ye().params;if(console.log("companyParams,",f),l(!1),h.value===void 0)throw ge({statusCode:404,message:"Company not found",fatal:!0});const n=l(null),C=t=>{n.value=t,console.log("refCompanyId",n.value),y.value=!0},y=l(!1),_=l(!1),c=async()=>{_.value=!0,console.log("refCompanyIdFin",n.value),await j(n.value,f),r.value===!0?(E.add({severity:"success",summary:"Successful",detail:"Space Deleted Successfully",group:"br",life:3e3}),y.value=!1,console.log("space deleted"),_.value=!1):(E.add({severity:"error",summary:"Error",detail:"Unable to delete space",group:"br",life:3e3}),console.log("space not deleted"),_.value=!1)};(()=>{v.value={global:{value:null,matchMode:xe.CONTAINS}}})();const u=l(!1),q=t=>{u.value=!0,n.value=t,console.log("refSpaceId",n.value)};be(()=>{L(f),x.value=!1,console.log("company,",f)});const O=t=>{u.value=t},p=l(!0);return(t,d)=>{var W;const z=ae,N=ie,A=ne,i=re,ee=G,te=ce,k=J,oe=Ke,se=Ce("tooltip");return g(),B("div",qe,[s(z,{position:"bottom-right",group:"br"}),e("div",Oe,[e("div",ze,[s(N,{to:"/",class:"text pi pi-home"}),He,s(N,{to:"/companies",class:"text"},{default:m(()=>[P("Companies")]),_:1}),We,e("p",Ye,"Company - "+F((W=o(h))==null?void 0:W.name),1)]),e("div",Ge,[o(R)?Se((g(),D(A,{key:0,spacePage:o(p)},null,8,["spacePage"])),[[se,{value:"Create Space"},void 0,{left:!0}]]):b("",!0)])]),e("div",Je,[s(te,{iconPosition:"right"},{default:m(()=>[s(i,null,{default:m(()=>[Qe]),_:1}),s(ee,{modelValue:o(v).global.value,"onUpdate:modelValue":d[0]||(d[0]=a=>o(v).global.value=a),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),s(o(ke),{filters:o(v),"onUpdate:filters":d[1]||(d[1]=a=>$(v)?v.value=a:null),class:"table-dco",value:o(M),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[5,10,20,50],dataKey:"id",filterDisplay:"menu",loading:o(x)},{empty:m(()=>[Xe]),loading:m(()=>[P(" Loading data. Please wait. ")]),default:m(()=>[s(o(V),{field:"index",header:"Serial",sortable:""}),s(o(V),{field:"name",header:"Space Name"},{body:m(a=>[s(N,{to:`/companies/${o(f)}/spaces/${a.data.id}`},{default:m(()=>[e("p",Ze,F(a.data.name),1)]),_:2},1032,["to"])]),_:1}),s(o(V),{field:"description",header:"Description"}),s(o(V),{field:"color",header:"Space Color"},{body:m(a=>[e("div",{id:"dynamic-div",style:Z(`background-color: ${a.data.color}; width: 30px;`),class:"flex font-semibold justify-content-center rounded py-2 px-2 w-fit text-white"},F(a.data.name?a.data.name.charAt(0).toUpperCase():"S"),5)]),_:1}),s(o(V),{field:"action",header:"Action"},{body:m(a=>[o(w)?(g(),D(k,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:le=>q(a.data)},null,8,["onClick"])):b("",!0),o(T)?(g(),D(k,{key:1,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:le=>C(a.data.id)},null,8,["onClick"])):b("",!0),o(w)?b("",!0):(g(),D(k,{key:2,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",style:{visibility:"hidden"}})),o(T)?b("",!0):(g(),D(k,{key:3,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),s(o(Y),{visible:o(y),"onUpdate:visible":d[3]||(d[3]=a=>$(y)?y.value=a:null),header:" ",dismissableMask:"true",style:{width:"25rem"}},{default:m(()=>[et,s(k,{label:"No",icon:"pi pi-times",text:"",onClick:d[2]||(d[2]=a=>y.value=!1)}),s(k,{label:"Yes",icon:"pi pi-check",loading:o(_),text:"",onClick:c},null,8,["loading"])]),_:1},8,["visible"]),s(o(Y),{visible:o(u),"onUpdate:visible":d[5]||(d[5]=a=>$(u)?u.value=a:null),modal:"",header:"Edit Space",dismissableMask:"true",style:{width:"32rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[s(oe,{refSpaceId:o(n),singleCompany:o(h),onCloseEditSpace:d[4]||(d[4]=a=>O(a))},null,8,["refSpaceId","singleCompany"])]),_:1},8,["visible"])])}}};export{Wt as default};
