import Ie from"./toast.esm.a47bef80.js";import le from"./button.esm.5e19325a.js";import Se from"./multiselect.esm.28f194bb.js";import Ne from"./inputicon.esm.cf1a30a2.js";import te from"./inputtext.esm.d5eee7d7.js";import Me from"./iconfield.esm.3a16492f.js";import Pe from"./toolbar.esm.2443ec6c.js";import Le from"./progressspinner.esm.22275cc7.js";import{a2 as oe,$ as l,ad as se,ae,af as pe,o as U,b as Y,i as t,l as s,u as e,ag as _,e as A,a3 as ie,a4 as ne,q as T,ca as re,c as H,w as M,P as Ae,a as Te,s as Be}from"./entry.39b87fbf.js";import{u as G,a as _e}from"./cookie.0a2ee428.js";import{u as de}from"./fetch.7ef59f45.js";import X from"./column.esm.1429be9d.js";import De from"./datatable.esm.afdf5952.js";import ye from"./textarea.esm.ad6f3d9a.js";import Fe from"./password.esm.b6faab0b.js";import me from"./dropdown.esm.36c47059.js";import{a as W}from"./usePermission.f68fc90d.js";import ee from"./dialog.esm.eee5e52b.js";import"./portal.esm.6123b056.js";import"./basecomponent.esm.b0e02d81.js";import"./index.esm.68b39fb5.js";import"./baseicon.esm.78269063.js";import"./index.esm.6159b65b.js";import"./index.esm.4c77e9d0.js";import"./index.esm.5c5ddc00.js";import"./badge.esm.153b1648.js";import"./index.esm.9511de23.js";import"./checkbox.esm.0370a2f8.js";import"./index.esm.080cc9ac.js";import"./index.esm.572d93fe.js";import"./overlayeventbus.esm.42ec4436.js";import"./virtualscroller.esm.c8f7adab.js";import"./paginator.esm.560780b6.js";import"./index.esm.6c8aed28.js";import"./inputnumber.esm.00e4e0fd.js";import"./index.esm.9dd50410.js";import"./index.esm.2465e2ce.js";import"./index.esm.2d9193d2.js";import"./index.esm.3c8ee8f5.js";import"./index.esm.1122f352.js";import"./radiobutton.esm.1db8deb5.js";import"./index.esm.90ef8874.js";import"./index.esm.835a94ea.js";import"./index.esm.63ccac96.js";const Z=u=>(ie("data-v-c22831e2"),u=u(),ne(),u),Oe={class:"field"},Re=Z(()=>t("label",{for:"company"},[T("Name"),t("i",{class:"text-red-400 text-italic"},"*"),T(" >")],-1)),He={class:"field"},ze=Z(()=>t("label",{for:"email"},[T("Email address"),t("i",{class:"text-red-400"},"*")],-1)),je={class:"field"},qe=Z(()=>t("label",{for:"phoneNo"},"Phone ",-1)),Ge={class:"field"},Ye=Z(()=>t("label",{for:"company"},"Address ",-1)),Ke={class:"field"},Xe=Z(()=>t("label",{for:"company"},[T("Password"),t("i",{class:"text-red-400"},"*")],-1)),Ze={class:"field flex flex-column"},Je=Z(()=>t("label",null,[T("Role"),t("i",{class:"text-red-400"},"*")],-1)),Qe={key:0,style:{color:"red"}},We={class:"create-btn-wrapper mb-0"},el={__name:"CreateEmployee",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(u,{emit:B}){const z=re(),P=l(u.param.rolesLists),$=l([]),v=se(),d=l(""),c=l(""),y=l(""),x=l(""),p=l("");l("");const h=l(!1),k=l(!0),b=B,r=l(!1),D=async()=>{var m,a,g;if(r.value=!0,d.value===""||c.value===""||p.value===""||$.value.length===0){h.value=!0,r.value=!1;return}else if(h.value=!1,!h.value){const C=G("token"),{data:w,error:f,pending:V}=await de(`${z.public.apiUrl}/users/create`,{method:"POST",headers:{Authorization:`Bearer ${C.value}`},body:{name:d.value,email:c.value,address:x.value,phone:y.value,password:p.value,password_confirmation:p.value,role:$.value.name}},"$HYNtwi2ZAs");if(f!=null&&f.value){if(((a=(m=f==null?void 0:f.value)==null?void 0:m.data)==null?void 0:a.code)===422){r.value=!1,v.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=w==null?void 0:w.value)==null?void 0:g.code)===201){r.value=!1,d.value=null,c.value=null,y.value=null,x.value=null,p.value=null,k.value=!1,b("closeCreateModal",!1),v.add({severity:"success",summary:"Success",detail:"Employee created successfully!",group:"br",life:3e3});return}else{r.value=!1,v.add({severity:"error",summary:"Error",detail:"Failed to create employee!",group:"br",life:3e3});return}}};return ae(()=>{const m=document.getElementById("createEmployeeName");pe(()=>{m&&m.focus()})}),(m,a)=>{const g=te,C=ye,w=Fe,f=me,V=le;return U(),Y("div",null,[t("div",Oe,[Re,s(g,{id:"createEmployeeName",modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=I=>_(d)?d.value=I:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",He,[ze,s(g,{type:"email",modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=I=>_(c)?c.value=I:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",je,[qe,s(g,{modelValue:e(y),"onUpdate:modelValue":a[2]||(a[2]=I=>_(y)?y.value=I:null),inputId:"worktype",type:"tel",class:"w-full",maxlength:"14",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",Ge,[Ye,s(C,{modelValue:e(x),"onUpdate:modelValue":a[3]||(a[3]=I=>_(x)?x.value=I:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",Ke,[Xe,s(w,{modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=I=>_(p)?p.value=I:null),placeholder:"Enter password",feedback:!1,invalid:m.confirmPassError,toggleMask:"",class:"w-full",inputClass:"w-full"},null,8,["modelValue","invalid"])]),t("div",Ze,[Je,s(f,{modelValue:e($),"onUpdate:modelValue":a[5]||(a[5]=I=>_($)?$.value=I:null),options:e(P),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(U(),Y("p",Qe,"Please fill/check up all the fields")):A("",!0),t("div",We,[s(V,{loading:e(r),label:"Save",icon:"pi pi-check",text:"",onClick:D},null,8,["loading"])])])}}},ll=oe(el,[["__scopeId","data-v-c22831e2"]]);const Q=u=>(ie("data-v-a1134ad4"),u=u(),ne(),u),tl={class:"field"},ol=Q(()=>t("label",{for:"company"},[T("Name"),t("i",{class:"text-red-500"},"*")],-1)),sl={class:"field"},al=Q(()=>t("label",{for:"email"},[T("Email address"),t("i",{class:"text-red-500"},"*")],-1)),il={class:"field"},nl=Q(()=>t("label",{for:"worktype"},"Phone",-1)),rl={class:"field"},dl=Q(()=>t("label",{for:"company"},"Address",-1)),ul={class:"field flex flex-column"},cl=Q(()=>t("label",null,[T("Role"),t("i",{class:"text-red-500"},"*")],-1)),pl={key:0,style:{color:"red"}},ml={class:"create-btn-wrappe"},vl={__name:"EditEmployee",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(u,{emit:B}){const z=re(),S=u,P=se(),$=l(S.param.id),v=l(S.param.name),d=l(S.param.email),c=l(S.param.phone),y=l(S.param.address),x=l(S.param.rolesLists),p=l(S.param.user_type),h=l(!1),k=l(!0),b=B,r=l(!1),D=async()=>{var m,a,g;if(r.value=!0,v.value===""||d.value===""){h.value=!0,r.value=!1;return}else if(h.value=!1,!h.value){const C=G("token"),{data:w,error:f,pending:V}=await de(`${z.public.apiUrl}/users/update/${$.value}`,{method:"POST",headers:{Authorization:`Bearer ${C.value}`},body:{name:v.value,email:d.value,address:y.value,phone:c.value,role:p.value.name}},"$D8HfpvkorG");if(f!=null&&f.value){if(((a=(m=f==null?void 0:f.value)==null?void 0:m.data)==null?void 0:a.code)===500){r.value=!1,P.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=w==null?void 0:w.value)==null?void 0:g.code)===200){r.value=!1,k.value=!1,b("closeEditModal",!1),P.add({severity:"success",summary:"Success",detail:"Employee Updated successfully!",group:"br",life:3e3});return}else{r.value=!1,P.add({severity:"error",summary:"Error",detail:"Failed to update employee!",group:"br",life:3e3});return}}};return ae(()=>{const m=document.getElementById("editEmployeeName");pe(()=>{m&&m.focus()})}),(m,a)=>{const g=te,C=ye,w=me,f=le;return U(),Y("div",null,[t("div",tl,[ol,s(g,{id:"editEmployeeName",modelValue:e(v),"onUpdate:modelValue":a[0]||(a[0]=V=>_(v)?v.value=V:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",sl,[al,s(g,{type:"email",modelValue:e(d),"onUpdate:modelValue":a[1]||(a[1]=V=>_(d)?d.value=V:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",il,[nl,s(g,{modelValue:e(c),"onUpdate:modelValue":a[2]||(a[2]=V=>_(c)?c.value=V:null),type:"tel",class:"w-full",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",rl,[dl,s(C,{modelValue:e(y),"onUpdate:modelValue":a[3]||(a[3]=V=>_(y)?y.value=V:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",ul,[cl,s(w,{modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=V=>_(p)?p.value=V:null),options:e(x),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(U(),Y("p",pl,"Please fill/check up all the fields")):A("",!0),t("div",ml,[s(f,{label:"Update",icon:"pi pi-check",text:"",onClick:D,loading:e(r)},null,8,["loading"])])])}}},fl=oe(vl,[["__scopeId","data-v-a1134ad4"]]);const he=u=>(ie("data-v-d515e90e"),u=u(),ne(),u),_l={class:"field"},yl=he(()=>t("label",{for:"email"},[T("Email address"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),hl={class:"field flex flex-column"},bl=he(()=>t("label",null,[T("Role"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),El={key:0,style:{color:"red"}},$l={class:"create-btn-wrapper"},gl={__name:"InviteGuest",props:{param:{type:Object,required:!0}},emits:["closeInviteModal"],setup(u,{emit:B}){const z=re(),P=l(u.param.rolesLists),$=l([]),v=se(),d=l(""),c=l(!1),y=l("false"),x=l(!0),p=B,h=async()=>{var k;if(d.value===""||$.value.length===0){c.value=!0;return}else if(y.value=!0,c.value=!1,!c.value){const b=G("token"),{data:r,pending:D}=await de(`${z.public.apiUrl}/invite-user`,{method:"POST",headers:{Authorization:`Bearer ${b.value}`},body:{email:d.value,role:$.value.name}},"$uaOzqXhdzF");((k=r==null?void 0:r.value)==null?void 0:k.code)===201?(d.value=null,x.value=!1,p("closeInviteModal",!1),y.value=!1,v.add({severity:"success",summary:"Success",detail:"Employee invitation sent!",group:"br",life:3e3})):v.add({severity:"error",summary:"Error",detail:"Employee invitation failed!",group:"br",life:3e3})}};return ae(()=>{const k=document.getElementById("inviteEmail");pe(()=>{k&&k.focus()})}),(k,b)=>{const r=te,D=me,m=le;return U(),Y("div",null,[t("div",_l,[yl,s(r,{id:"inviteEmail",type:"email",modelValue:e(d),"onUpdate:modelValue":b[0]||(b[0]=a=>_(d)?d.value=a:null),class:"w-full"},null,8,["modelValue"])]),t("div",hl,[bl,s(D,{modelValue:e($),"onUpdate:modelValue":b[1]||(b[1]=a=>_($)?$.value=a:null),options:e(P),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(c)?(U(),Y("p",El,"Please fill/check up all the fields")):A("",!0),t("div",$l,[e(y)=="false"?(U(),H(m,{key:0,label:"Send",icon:"pi pi-check",text:"",onClick:h})):(U(),H(m,{key:1,label:"Sending...",icon:"pi pi-spin pi-spinner",text:"",disabled:""}))])])}}},xl=oe(gl,[["__scopeId","data-v-d515e90e"]]);const ue=u=>(ie("data-v-34aeb8e2"),u=u(),ne(),u),kl={key:0,class:"card"},wl={class:"d-flex mr-2"},Vl=ue(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Employees")],-1)),Ul=ue(()=>t("i",{class:"pi pi-search"},null,-1)),Cl=ue(()=>t("p",{class:"text-center"},"No Data found...",-1)),Il=ue(()=>t("p",null,"Are you sure you want to delete?",-1)),Sl={__name:"index",setup(u){const B=re(),z=l(W("read_user")),S=l(W("create_user")),P=l(W("update_user")),$=l(W("delete_user")),v=l(),d=l(!0),c=l(!1),y=se(),x=l(!1),p=l(!1),h=l(!1),k=l([]),b=l(!1),r=l(""),D=l(""),m=l(""),a=l(""),g=l(""),C=l([]),w=l([]),f=i=>{x.value=!1,K()},V=i=>{h.value=!1,K()},I=()=>{x.value=!0},be=()=>{p.value=!0},Ee=i=>{p.value=!1,K()},J=l([]),ve=l([]),$e=i=>{h.value=!0,r.value=i.id,D.value=i.name,m.value=i.email,a.value=i.phone,g.value=i.address,w.value=i.user_type,C.value.map(o=>{o.name===i.user_type&&(w.value=o)})},ge=i=>{b.value=!0,r.value=i},xe=async()=>{c.value=!0;const i=G("token"),{data:o,pending:N}=await de(`${B.public.apiUrl}/users/delete/${r.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${i.value}`}},"$BmbV2j3TY3");o.value.code===200?(b.value=!1,y.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),c.value=!1,K()):(y.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),c.value=!1)},fe=l(),ke=async()=>{fe.value=J.value?J.value.map(i=>i.id):"",K(fe.value)},K=async i=>{var F,O,R;const o=G("token"),{data:N,pending:E,error:j}=await _e("taskAssignModalData",()=>$fetch(`${B.public.apiUrl}/users/list${i?`?role_id=${i}`:""}`,{headers:{Authorization:`Bearer ${o.value}`}}));((O=(F=N.value)==null?void 0:F.data)==null?void 0:O.length)>0&&(k.value=(R=N.value)==null?void 0:R.data.map((L,q)=>({...L,index:q+1})))},we=async()=>{var j,F,O,R;const i=G("token"),{data:o,pending:N,error:E}=await _e("roleLiist",()=>$fetch(`${B.public.apiUrl}/roles/list`,{headers:{Authorization:`Bearer ${i.value}`}}));((F=(j=o.value)==null?void 0:j.data)==null?void 0:F.length)>0&&(C.value=(O=o.value)==null?void 0:O.data.map((L,q)=>({...L,index:q+1})),ve.value=(R=o.value)==null?void 0:R.data.map(L=>({name:L.name,id:L.id})),console.log("rolesLists",C.value))},Ve=()=>{v.value={global:{value:null,matchMode:Ae.CONTAINS}}};G("rolePermission"),ae(()=>{K(),we(),d.value=!1}),Ve();const Ue=()=>{if(k.value.length>0){const i=`data:text/csv;charset=utf-8,"Serial No.","Employee Name","Email","Phone","Address","User Type",
`+k.value.map((E,j)=>{const F=j+1,O=E.name,R=E.email,L=E.phone,q=E.address,ce=E.user_type;return`"${F}","${O}","${R}","${L}","${q}","${ce}"`}).join(`
`),o=encodeURI(i),N=document.createElement("a");N.setAttribute("href",o),N.setAttribute("download","tasks.csv"),document.body.appendChild(N),N.click(),document.body.removeChild(N)}else y.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})};return(i,o)=>{const N=Ie,E=le,j=Se,F=Ne,O=te,R=Me,L=Pe,q=Le,ce=Te("tooltip");return e(z)?(U(),Y("div",kl,[t("div",wl,[s(N,{position:"bottom-right",group:"br"}),Vl]),s(L,{class:"border-0 px-0"},{start:M(()=>[e(S)?(U(),H(E,{key:0,icon:"pi pi-plus",label:"Create",onClick:I,class:"mr-2",severity:"secondary"})):A("",!0),e(S)?(U(),H(E,{key:1,icon:"pi pi-users",onClick:be,label:"Invite a guest",severity:"secondary"})):A("",!0)]),end:M(()=>[Be(s(E,{onClick:o[0]||(o[0]=n=>Ue(i.tasks)),loading:e(d),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"]),[[ce,{value:"Download Employee List"},void 0,{left:!0}]]),s(j,{onChange:o[1]||(o[1]=n=>ke()),modelValue:e(J),"onUpdate:modelValue":o[2]||(o[2]=n=>_(J)?J.value=n:null),options:e(ve),display:"chip",filter:"",resetFilterOnHide:"",maxSelectedLabels:2,optionLabel:"name",placeholder:"Filter User Type",class:"w-full mx-2 filtr"},null,8,["modelValue","options"]),s(R,{iconPosition:"right",raised:""},{default:M(()=>[s(F,null,{default:M(()=>[Ul]),_:1}),s(O,{modelValue:e(v).global.value,"onUpdate:modelValue":o[3]||(o[3]=n=>e(v).global.value=n),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),s(e(De),{filters:e(v),"onUpdate:filters":o[4]||(o[4]=n=>_(v)?v.value=n:null),class:"table-st",value:e(k),stripedRows:"",paginator:"",rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",rows:10,dataKey:"id",filterDisplay:"menu",loading:e(d)},{empty:M(()=>[Cl]),loading:M(()=>[s(q,{style:{width:"50px",height:"50px"}})]),default:M(()=>[s(e(X),{field:"index",header:"Serial",sortable:""}),s(e(X),{field:"name",header:"Employee Name"}),s(e(X),{field:"email",header:"Email Address"}),s(e(X),{field:"phone",header:"Phone"}),s(e(X),{field:"user_type",header:"User Type"}),s(e(X),{field:"action",header:"Action"},{body:M(n=>[e(P)?(U(),H(E,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:Ce=>$e(n.data)},null,8,["onClick"])):A("",!0),e(P)?A("",!0):(U(),H(E,{key:1,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",style:{visibility:"hidden"}})),e($)?(U(),H(E,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:Ce=>ge(n.data.id)},null,8,["onClick"])):A("",!0),e($)?A("",!0):(U(),H(E,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),s(e(ee),{visible:e(x),"onUpdate:visible":o[6]||(o[6]=n=>_(x)?x.value=n:null),modal:"",header:"Create Employee",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:M(()=>[s(ll,{param:{rolesLists:e(C)},onCloseCreateModal:o[5]||(o[5]=n=>f(n))},null,8,["param"])]),_:1},8,["visible"]),s(e(ee),{visible:e(h),"onUpdate:visible":o[8]||(o[8]=n=>_(h)?h.value=n:null),modal:"",header:"Edit Employee",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:M(()=>[s(fl,{param:{id:e(r),name:e(D),address:e(g),phone:e(a),email:e(m),user_type:e(w),rolesLists:e(C)},onCloseEditModal:o[7]||(o[7]=n=>V(n))},null,8,["param"])]),_:1},8,["visible"]),s(e(ee),{visible:e(b),"onUpdate:visible":o[10]||(o[10]=n=>_(b)?b.value=n:null),header:" ",style:{width:"25rem"},dismissableMask:"true"},{default:M(()=>[Il,s(E,{label:"No",icon:"pi pi-times",text:"",onClick:o[9]||(o[9]=n=>b.value=!1)}),s(E,{label:"Yes",icon:"pi pi-check",text:"",onClick:xe,loading:e(c)},null,8,["loading"])]),_:1},8,["visible"]),s(e(ee),{visible:e(p),"onUpdate:visible":o[12]||(o[12]=n=>_(p)?p.value=n:null),modal:"",header:"Invite Employee",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:M(()=>[s(xl,{param:{rolesLists:e(C)},onCloseInviteModal:o[11]||(o[11]=n=>Ee(n))},null,8,["param"])]),_:1},8,["visible"])])):A("",!0)}}},$t=oe(Sl,[["__scopeId","data-v-34aeb8e2"]]);export{$t as default};
