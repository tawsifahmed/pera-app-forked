import R from"./button.esm.9b4b1887.js";import pe from"./inputicon.esm.d1acad93.js";import q from"./inputtext.esm.3c27d15f.js";import me from"./iconfield.esm.b5c74572.js";import _e from"./toolbar.esm.ac97789a.js";import ve from"./progressspinner.esm.12cc3df0.js";import{a2 as H,a4 as L,$ as t,a5 as j,a6 as W,o as v,b as I,i as c,l as o,u as e,a7 as C,e as T,a8 as K,a9 as Q,q as X,ca as J,w as m,P as fe,c as S}from"./entry.46470eb9.js";import{u as Y}from"./fetch.4cfb7fd9.js";import{u as D,a as ge}from"./cookie.7154b123.js";import ye from"./dialog.esm.6bed4e55.js";import be from"./toast.esm.d842993e.js";import z from"./column.esm.94912f90.js";import he from"./datatable.esm.50801007.js";import{a as V}from"./usePermission.1baa85a4.js";import"./badge.esm.d2d36dc3.js";import"./basecomponent.esm.ae1894d8.js";import"./index.esm.09f18abe.js";import"./baseicon.esm.17c13817.js";import"./index.esm.4bd6b6f1.js";import"./portal.esm.3f8ef478.js";import"./index.esm.731f0653.js";import"./index.esm.80a15596.js";import"./index.esm.ea39f55c.js";import"./paginator.esm.1479ca34.js";import"./index.esm.1c015d97.js";import"./dropdown.esm.1f53e962.js";import"./index.esm.8c191e48.js";import"./index.esm.00ae83f4.js";import"./overlayeventbus.esm.362d8f7d.js";import"./virtualscroller.esm.28e05953.js";import"./inputnumber.esm.38749b41.js";import"./index.esm.295abb01.js";import"./index.esm.68717131.js";import"./index.esm.8e711a3c.js";import"./index.esm.0fc36935.js";import"./index.esm.75014c5c.js";import"./checkbox.esm.7e6cea9a.js";import"./radiobutton.esm.82eab427.js";import"./index.esm.4f3bbff9.js";import"./index.esm.19ea0197.js";const Te=l=>(K("data-v-cac7cbe0"),l=l(),Q(),l),xe={class:"field"},$e=Te(()=>c("label",{for:"company"},[X("Tag Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),ke={key:0,style:{color:"red"}},Ce={class:"create-btn-wrapper mb-0"},we={__name:"CreateTag",emits:["closeCreateModal"],setup(l,{emit:$}){const w=J(),x=L(),d=t(""),f=t(!1),i=t(!0),g=$,h=async()=>{if(d.value===""){f.value=!0;return}else if(f.value=!1,!f.value){const _=D("token"),{data:u,pending:n}=await Y(`${w.public.apiUrl}/tag/create`,{method:"POST",headers:{Authorization:`Bearer ${_.value}`},body:{name:d.value}},"$jxcvHxJQkU");u.value.code===201?(d.value=null,i.value=!1,g("closeCreateModal",!1),x.add({severity:"success",summary:"Success",detail:"Tag Created successfully!",group:"br",life:3e3})):x.add({severity:"error",summary:"Error",detail:"Tag Creation Failed!",group:"br",life:3e3})}};return j(()=>{const _=document.getElementById("createTagName");W(()=>{_&&_.focus()})}),(_,u)=>{const n=q,y=R;return v(),I("div",null,[c("div",xe,[$e,o(n,{id:"createTagName",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=p=>C(d)?d.value=p:null),class:"w-full",placeholder:"Enter tag name"},null,8,["modelValue"])]),e(f)?(v(),I("p",ke,"Please enter tag name")):T("",!0),c("div",Ce,[o(y,{label:"Save",icon:"pi pi-check",text:"",onClick:h})])])}}},Ee=H(we,[["__scopeId","data-v-cac7cbe0"]]);const Se=l=>(K("data-v-36eab91a"),l=l(),Q(),l),Ie={class:"field"},Ne=Se(()=>c("label",{for:"company"},[X("Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),Ue={key:0,style:{color:"red"}},Me={class:"create-btn-wrappe"},Be={__name:"EditTag",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(l,{emit:$}){const w=J(),x=l,d=L(),f=t(x.param.id),i=t(x.param.name),g=t(!1),h=t(!0),_=$,u=async()=>{if(i.value===""){g.value=!0;return}else if(g.value=!1,!g.value){const n=D("token"),{data:y,pending:p}=await Y(`${w.public.apiUrl}/tag/update/${f.value}`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:i.value}},"$RrQ4SF9MPi");y.value.code===200?(h.value=!1,_("closeEditModal",!1),d.add({severity:"success",summary:"Success",detail:"Tag Updated successfully!",group:"br",life:3e3})):d.add({severity:"error",summary:"Error",detail:"Tag Update Failed!",group:"br",life:3e3})}};return j(()=>{const n=document.getElementById("editTagName");W(()=>{n&&n.focus()})}),(n,y)=>{const p=q,k=R;return v(),I("div",null,[c("div",Ie,[Ne,o(p,{id:"editTagName",modelValue:e(i),"onUpdate:modelValue":y[0]||(y[0]=N=>C(i)?i.value=N:null),class:"w-full",placeholder:"Edit tag name"},null,8,["modelValue"])]),e(g)?(v(),I("p",Ue,"Please enter tag name")):T("",!0),c("div",Me,[o(k,{label:"Update",icon:"pi pi-check",text:"",onClick:u})])])}}},Ve=H(Be,[["__scopeId","data-v-36eab91a"]]);const P=l=>(K("data-v-42b59563"),l=l(),Q(),l),De={key:0,class:"card"},Pe=P(()=>c("div",{class:"d-flex mr-2"},[c("h5",{class:"mb-1"},"Tags")],-1)),Fe=P(()=>c("i",{class:"pi pi-search"},null,-1)),Ae=P(()=>c("p",{class:"text-center"},"No Data found...",-1)),Oe=P(()=>c("p",null,"Are you sure you want to delete?",-1)),ze={__name:"index",setup(l){const $=J(),w=t(V("read_tags")),x=t(V("create_tags")),d=t(V("update_tags")),f=t(V("delete_tags")),i=t(),g=t(!0),h=t(!1),_=L(),u=t(!1),n=t(!1),y=t([]),p=t(!1),k=t(""),N=t(""),Z=t(""),ee=t(""),te=t(""),ae=r=>{u.value=!1,E()},oe=r=>{n.value=!1,E()},se=()=>{u.value=!0,E()},le=r=>{n.value=!0,k.value=r.id,N.value=r.name,Z.value=r.email,ee.value=r.phone,te.value=r.address},ie=r=>{p.value=!0,k.value=r},ne=async()=>{h.value=!0;const r=D("token"),{data:a,pending:b}=await Y(`${$.public.apiUrl}/tag/delete/${k.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.value}`}},"$2xUf6ofqOr");a.value.code===200?(p.value=!1,_.add({severity:"success",summary:"Success",detail:"Tag Deleted successfully!",group:"br",life:3e3}),h.value=!1,E()):(_.add({severity:"error",summary:"Error",detail:"Tag Deleted Failed!",group:"br",life:3e3}),h.value=!1)},E=async()=>{var U,M,B;const r=D("token"),{data:a,pending:b,error:G}=await ge("tagsList",()=>$fetch(`${$.public.apiUrl}/tag/list`,{headers:{Authorization:`Bearer ${r.value}`}}));((M=(U=a.value)==null?void 0:U.data)==null?void 0:M.length)>0&&(y.value=(B=a.value)==null?void 0:B.data.map((F,A)=>({...F,index:A+1})))},re=()=>{i.value={global:{value:null,matchMode:fe.CONTAINS}}};return j(()=>{E(),g.value=!1}),re(),(r,a)=>{const b=R,G=pe,U=q,M=me,B=_e,F=ve,A=Ee,O=ye,ce=Ve,de=be;return e(w)?(v(),I("div",De,[Pe,o(B,{class:"border-0 px-0"},{start:m(()=>[e(x)?(v(),S(b,{key:0,icon:"pi pi-plus",label:"Create",onClick:se,class:"mr-2",severity:"secondary"})):T("",!0)]),end:m(()=>[o(M,{iconPosition:"right",raised:""},{default:m(()=>[o(G,null,{default:m(()=>[Fe]),_:1}),o(U,{modelValue:e(i).global.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).global.value=s),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(he),{filters:e(i),"onUpdate:filters":a[1]||(a[1]=s=>C(i)?i.value=s:null),class:"table-st",value:e(y),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(g)},{empty:m(()=>[Ae]),loading:m(()=>[o(F,{style:{width:"50px",height:"50px"}})]),default:m(()=>[o(e(z),{field:"index",header:"Serial",sortable:""}),o(e(z),{field:"name",header:"Tag Name"}),o(e(z),{field:"action",header:"Action"},{body:m(s=>[e(d)?(v(),S(b,{key:0,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",onClick:ue=>le(s.data)},null,8,["onClick"])):T("",!0),e(d)?T("",!0):(v(),S(b,{key:1,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(f)?(v(),S(b,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ue=>ie(s.data.id)},null,8,["onClick"])):T("",!0),e(f)?T("",!0):(v(),S(b,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(O,{visible:e(u),"onUpdate:visible":a[3]||(a[3]=s=>C(u)?u.value=s:null),modal:"",header:"Create Tag",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(A,{onCloseCreateModal:a[2]||(a[2]=s=>ae(s))})]),_:1},8,["visible"]),o(O,{visible:e(n),"onUpdate:visible":a[5]||(a[5]=s=>C(n)?n.value=s:null),modal:"",header:"Edit Tag",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(ce,{param:{id:e(k),name:e(N)},onCloseEditModal:a[4]||(a[4]=s=>oe(s))},null,8,["param"])]),_:1},8,["visible"]),o(O,{visible:e(p),"onUpdate:visible":a[7]||(a[7]=s=>C(p)?p.value=s:null),header:" ",style:{width:"25rem"}},{default:m(()=>[Oe,o(b,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=s=>p.value=!1)}),o(b,{label:"Yes",icon:"pi pi-check",text:"",onClick:ne,loading:e(h)},null,8,["loading"])]),_:1},8,["visible"]),o(de,{position:"bottom-right",group:"br"})])):T("",!0)}}},Et=H(ze,[["__scopeId","data-v-42b59563"]]);export{Et as default};
