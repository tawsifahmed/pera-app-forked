import{u as d,a as v}from"./cookie.3ed14f9e.js";import{an as g,$ as c}from"./entry.570ab878.js";const b=g("user",()=>{const s=c(null),u=c(!1);async function i(){var r,o;const n=d("token"),{data:e,pending:p,error:m}=await v("userProf",()=>$fetch("https://pbe.singularitybd.net/api/v1/users/profile",{headers:{Authorization:`Bearer ${n.value}`}}));s.value=e==null?void 0:e.value,localStorage.setItem("userCompany",(o=(r=e==null?void 0:e.value)==null?void 0:r.data)==null?void 0:o.company_id)}async function f(n,e,p,m,r,o,h){u.value=!0;const a=new FormData;a.append("name",e),a.append("phone",p),a.append("address",r),o!=null&&a.append("image",o),a.append("employee_id",h);const y=d("token");try{const t=await fetch(`https://pbe.singularitybd.net/api/v1/users/update/${n}`,{method:"POST",headers:{Authorization:`Bearer ${y.value}`},body:a});if(!t.ok)throw new Error("Network response was not ok");i();const l=await t.json();return console.log("User Update data =>",l),l}catch(t){console.error("Error uploading file:",t),u.value=!1}}return{getUserData:i,updateUser:f,userProfile:s}});export{b as u};
