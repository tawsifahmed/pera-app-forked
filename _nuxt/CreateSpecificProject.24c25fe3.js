import re from"./button.esm.7f915b6f.js";import ce from"./inputtext.esm.213e50cf.js";import de from"./textarea.esm.7e4320a7.js";import pe from"./inputgroupaddon.esm.e3ca8383.js";import me from"./inputgroup.esm.c035e784.js";import ve from"./dropdown.esm.ce355c94.js";import fe from"./dialog.esm.74fc998f.js";import{d as _e}from"./vuedraggable.umd.9dfe393c.js";import{a5 as ke,ad as ge,a6 as Se,$ as o,V as q,a7 as H,a as he,o as k,b as g,l as n,k as xe,w as S,u as a,i as t,q as C,t as Ce,ag as v,s as I,e as G,K as ye,af as be}from"./entry.e3d024fb.js";import R from"./colorpicker.esm.e816a7bb.js";import{u as Ve}from"./fetch.5df6b8b7.js";import{u as we}from"./cookie.bbdfbee5.js";import{u as Pe}from"./workCompany.f22cac75.js";import{u as Ne}from"./company.b30f775b.js";const je=Pe(),De=Ne(),W=ke("workProjects",{state:()=>({isProjectCreated:null}),getters:{save(r){return r.isProjectCreated}},actions:{async createProjects({name:r,description:y,space_id:b,statuses:U,git_project_id:L,git_token:O}){var w;const M=we("token"),{data:d,pending:V}=await Ve("https://pbe.singularitybd.net/api/v1/projects/create",{method:"POST",headers:{Authorization:`Bearer ${M.value}`},body:{name:r,description:y,space_id:b,statuses:U,git_project_id:L,git_token:O}},"$h5ITqNs3Yo");((w=d.value)==null?void 0:w.app_message)==="success"&&(this.isProjectCreated=!0,await je.getCompany(),await De.getSingleSpace(b))}}});const Te={class:"field"},$e={for:"name"},Ie={class:"field"},Ue=t("label",{for:"name"},[C("Project Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Oe={class:"field"},Be=t("label",{for:"name"},"Project Description ",-1),Ee={class:"mb-4"},qe=t("p",{class:"text-slate-700 mb-2 tracking-wide left-3"},[C(" Setup Task Status"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Ge={class:""},Le=t("p",{class:"pi pi-plus cursor-pointer"},null,-1),Me={key:0,class:"text-red-600 text-small"},Fe={class:"row mt-2"},ze={class:"col-12 d-flex flex-column p-0"},Ae=["onMouseenter"],He={style:{"margin-right":"-4px"},width:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",class:"cu-status-manager-status-list-item__drag-handler-icon"},Re=t("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},[t("circle",{cx:"5",cy:"5",r:"1"}),t("circle",{cx:"5",cy:"12",r:"1"}),t("circle",{cx:"5",cy:"19",r:"1"}),t("circle",{cx:"12",cy:"5",r:"1"}),t("circle",{cx:"12",cy:"12",r:"1"}),t("circle",{cx:"12",cy:"19",r:"1"})],-1),We=[Re],Ke={class:"flex align-items-center",style:{width:"89%"}},Xe=["onClick"],Ye=t("p",{class:"pi pi-times"},null,-1),Je=[Ye],Qe={class:""},Ze=t("p",{class:"text-slate-700 mb-2 tracking-wide left-3"},[C(" Set Task Close Status"),t("i",{class:"text-red-400 text-italic"},"*")],-1),et={class:""},tt={class:"field"},st={key:0,class:"text-red-600 text-small"},at={class:"flex w-full gap-2"},lt={class:"field flex flex-column mb-3",style:{width:"49%"}},ot=t("label",{for:"name"},"Gitlab ID ",-1),it={class:"field flex flex-column mb-3",style:{width:"49%"}},nt=t("label",{for:"name"},"Gitlab Token ",-1),ut={key:0,class:"text-center",style:{color:"red"}},yt={__name:"CreateSpecificProject",props:["singleSpace","spaces","isPage"],setup(r){const y=ge(),b=W(),{save:U}=Se(W()),{singleSpace:L,spaces:O,isPage:M}=r,d=o(!1),V=o(!1),w=o(!0),F=o(!1),B=o(null),K=o(!0),X=q(()=>({animation:250,group:"tasks",disabled:!K.value,ghostClass:"ghost"})),Y=q(()=>({backgroundColor:"inherit",boxShadow:"0px 2px 2px inherit",cursor:"grab",margin:"8px 0px"})),J=q(()=>({backgroundColor:"inherit",boxShadow:"0px 4px 4px inherit",cursor:"grab",margin:"8px 0px"})),c=o(""),l=o([{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}]),P=o("6466f1"),z=o(null),N=o(!1),Q=o(!1),p=o(null),j=o(null),D=o(null),m=o(""),Z=()=>{var i;if(c.value?N.value=!1:N.value=!0,((i=c==null?void 0:c.value)==null?void 0:i.length)>0){const e={taskStatusName:c.value,taskStatusColor:`#${P.value}`,is_closed_status:0,serial_no:l.value.length+1};l.value.push(e),c.value=""}else N.value=!0;l.value.length>0&&(z.value=!0)},ee=i=>{var e,f;l.value.splice(i,1),((e=u.value)==null?void 0:e.is_closed_status)===((f=l.value[i])==null?void 0:f.is_closed_status)&&(u.value=null),l.value.length==0&&(z.value=!1)},u=o(null);H(u,i=>{i&&l.value.forEach(e=>{e.is_closed_status=e.taskStatusName===i.taskStatusName?1:0}),console.log("taskStatusList",l.value)}),H(l,i=>{i.forEach((e,f)=>{e.serial_no=f+1})});const h=o(!1),te=async()=>{if(h.value=!0,p.value===null||l.value.length<=0||u.value===null)V.value=!0,h.value=!1;else{V.value=!1,l.value=l.value.map(e=>(e.taskStatusColor.startsWith("#")||(e.taskStatusColor=`#${e.taskStatusColor}`),e));const i={name:p.value,description:m.value,space_id:O,statuses:l.value,git_project_id:j.value,git_token:D.value};await b.createProjects(i),U.value===!0?(d.value=!1,p.value=null,m.value=null,l.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],u.value=null,h.value=!1,y.add({severity:"success",summary:"Success!",detail:"Project created successfully!",group:"br",life:3e3})):(y.add({severity:"error",summary:"Failed",detail:"Project creation Failed!",group:"br",life:3e3}),h.value=!1,d.value=!0)}},se=async()=>{if(d.value=!0,d.value){console.log("isOpen"),await be();let i=document.getElementById("createProjectName");i&&i.focus()}},ae=()=>{d.value=!1,p.value&&(p.value=null),m.value&&(m.value=null),l.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],u.value&&(u.value=null),c.value=""},le=()=>{p.value&&(p.value=null),m.value&&(m.value=null),l.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],u.value&&(u.value=null),c.value=""};return(i,e)=>{const f=re,x=ce,oe=de,A=pe,ie=me,ne=ve,ue=fe,T=he("tooltip");return k(),g("div",null,[n(f,{icon:r.isPage?"":"pi pi-plus",class:xe(r.isPage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:r.isPage?"Create +":"",onClick:se,severity:r.isPage?"primary":"secondary","aria-label":"Bookmark",text:!r.isPage},null,8,["icon","class","label","severity","text"]),n(ue,{visible:a(d),"onUpdate:visible":[e[11]||(e[11]=$=>v(d)?d.value=$:null),le],dismissableMask:"true",style:{width:"450px"},header:"Create Project",modal:!0,class:"p-fluid"},{footer:S(()=>[n(f,{label:"Cancel",icon:"pi pi-times",text:"",onClick:ae}),n(f,{loading:a(h),label:"Save",icon:"pi pi-check",text:"",onClick:te},null,8,["loading"])]),default:S(()=>{var $;return[t("div",Te,[t("label",$e,[C("Create project for "),t("strong",null,Ce(($=r.singleSpace)==null?void 0:$.name),1),C(" space")])]),t("div",Ie,[Ue,n(x,{id:"createProjectName",modelValue:a(p),"onUpdate:modelValue":e[0]||(e[0]=s=>v(p)?p.value=s:null),required:"true"},null,8,["modelValue"])]),t("div",Oe,[Be,n(oe,{id:"description",class:"border-gray-300",modelValue:a(m),"onUpdate:modelValue":e[1]||(e[1]=s=>v(m)?m.value=s:null),rows:"3",cols:"20"},null,8,["modelValue"])]),t("div",Ee,[qe,t("div",Ge,[n(ie,null,{default:S(()=>[n(A,null,{default:S(()=>[I(n(a(R),{class:"color-pick",style:{width:"1.5rem"},modelValue:a(P),"onUpdate:modelValue":e[2]||(e[2]=s=>v(P)?P.value=s:null),inputId:"cp-hex",format:"hex"},null,8,["modelValue"]),[[T,{value:"Pick Color"},void 0,{left:!0}]])]),_:1}),I(n(x,{class:"form-control",modelValue:a(c),"onUpdate:modelValue":e[3]||(e[3]=s=>v(c)?c.value=s:null),placeholder:"e.g., TO-DO, DOING"},null,8,["modelValue"]),[[T,{value:"Type Status Name"},void 0,{top:!0}]]),n(A,{onClick:Z,class:"btn btn-outline-secondary cursor-pointer"},{default:S(()=>[Le]),_:1})]),_:1}),a(N)?(k(),g("p",Me,"Please type status name!")):G("",!0),t("div",Fe,[t("div",ze,[n(a(_e),{modelValue:a(l),"onUpdate:modelValue":e[5]||(e[5]=s=>v(l)?l.value=s:null),options:a(X),disabled:!a(w),class:"list-group","ghost-class":"ghost",move:i.checkMove,onStart:e[6]||(e[6]=s=>F.value=!0),onEnd:e[7]||(e[7]=s=>F.value=!1)},{item:S(({element:s,index:E})=>[(k(),g("div",{class:"flex delete-task justify-content-between",style:ye(a(B)===E?a(J):a(Y)),onMouseenter:_=>B.value=E,onMouseleave:e[4]||(e[4]=_=>B.value=null),key:s.id},[(k(),g("svg",He,We)),t("div",Ke,[I(n(a(R),{class:"color-pick mr-2 status-colors border-none",modelValue:s.taskStatusColor,"onUpdate:modelValue":_=>s.taskStatusColor=_,inputId:"cp-hex",format:"hex"},null,8,["modelValue","onUpdate:modelValue"]),[[T,{value:"Change Color"},void 0,{left:!0}]]),I(n(x,{class:"text-uppercase text-muteds w-full",id:"name",modelValue:s.taskStatusName,"onUpdate:modelValue":_=>s.taskStatusName=_,required:"true"},null,8,["modelValue","onUpdate:modelValue"]),[[T,{value:"Change Status Name"},void 0,{left:!0}]])]),t("div",{onClick:_=>ee(E),class:"cursor-pointer cross-icon ms-1 flex justify-content-center align-items-center"},Je,8,Xe)],44,Ae))]),_:1},8,["modelValue","options","disabled","move"])])])])]),t("div",Qe,[Ze,t("div",et,[t("div",tt,[n(ne,{modelValue:a(u),"onUpdate:modelValue":e[8]||(e[8]=s=>v(u)?u.value=s:null),options:a(l),optionLabel:"taskStatusName",placeholder:"Select Status",class:"w-full"},null,8,["modelValue","options"])]),a(Q)?(k(),g("p",st,"Please set close status!")):G("",!0)])]),t("div",at,[t("div",lt,[ot,n(x,{modelValue:a(j),"onUpdate:modelValue":e[9]||(e[9]=s=>v(j)?j.value=s:null),required:"true"},null,8,["modelValue"])]),t("div",it,[nt,n(x,{modelValue:a(D),"onUpdate:modelValue":e[10]||(e[10]=s=>v(D)?D.value=s:null),required:"true"},null,8,["modelValue"])])]),a(V)?(k(),g("p",ut,"Please add/fill/check up all the fields")):G("",!0)]}),_:1},8,["visible"])])}}};export{yt as _};
