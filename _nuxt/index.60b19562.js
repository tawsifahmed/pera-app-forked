import z from"./button.esm.a55c2431.js";import pe from"./inputicon.esm.d7523654.js";import L from"./inputtext.esm.5cd40da3.js";import me from"./iconfield.esm.1b32a169.js";import _e from"./toolbar.esm.473997f4.js";import ve from"./progressspinner.esm.2773c17b.js";import{ao as R,a3 as H,$ as t,a4 as j,ar as W,o as v,b as I,i as c,l as o,u as e,a5 as w,e as T,ap as K,aq as Q,q as X,a6 as J,w as m,P as fe,c as S}from"./entry.570ab878.js";import{u as Y}from"./fetch.11b9759f.js";import{u as V,a as ge}from"./cookie.3ed14f9e.js";import ye from"./dialog.esm.0b6d087d.js";import be from"./toast.esm.ef8cdcd7.js";import q from"./column.esm.6208f1b7.js";import he from"./datatable.esm.3837e306.js";import{a as P}from"./usePermission.23a55d5e.js";import"./badge.esm.54d3e6c5.js";import"./basecomponent.esm.c7fbaad5.js";import"./index.esm.b72e702d.js";import"./baseicon.esm.c7f0dea4.js";import"./index.esm.c6f3b761.js";import"./portal.esm.1e4af6e4.js";import"./index.esm.330f474a.js";import"./index.esm.2547ec1e.js";import"./index.esm.417f68ee.js";import"./paginator.esm.23dce669.js";import"./index.esm.c592065e.js";import"./dropdown.esm.4fa36b0b.js";import"./index.esm.d468d720.js";import"./index.esm.2cce7489.js";import"./overlayeventbus.esm.c91907e9.js";import"./virtualscroller.esm.84c3372a.js";import"./inputnumber.esm.9d737ca0.js";import"./index.esm.bb3da758.js";import"./index.esm.e450f24c.js";import"./index.esm.f3846021.js";import"./index.esm.b806f7cb.js";import"./index.esm.feb1baca.js";import"./checkbox.esm.1ad534d4.js";import"./radiobutton.esm.b232767f.js";import"./index.esm.a8b59750.js";import"./index.esm.ecdc2543.js";const Te=l=>(K("data-v-cac7cbe0"),l=l(),Q(),l),xe={class:"field"},ke=Te(()=>c("label",{for:"company"},[X("Tag Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),$e={key:0,style:{color:"red"}},we={class:"create-btn-wrapper mb-0"},Ce={__name:"CreateTag",emits:["closeCreateModal"],setup(l,{emit:k}){const C=J(),x=H(),d=t(""),f=t(!1),i=t(!0),g=k,h=async()=>{if(d.value===""){f.value=!0;return}else if(f.value=!1,!f.value){const _=V("token"),{data:u,pending:n}=await Y(`${C.public.apiUrl}/tag/create`,{method:"POST",headers:{Authorization:`Bearer ${_.value}`},body:{name:d.value}},"$jxcvHxJQkU");u.value.code===201?(d.value=null,i.value=!1,g("closeCreateModal",!1),x.add({severity:"success",summary:"Success",detail:"Tag Created successfully!",group:"br",life:3e3})):x.add({severity:"error",summary:"Error",detail:"Tag Creation Failed!",group:"br",life:3e3})}};return j(()=>{const _=document.getElementById("createTagName");W(()=>{_&&_.focus()})}),(_,u)=>{const n=L,y=z;return v(),I("div",null,[c("div",xe,[ke,o(n,{id:"createTagName",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=p=>w(d)?d.value=p:null),class:"w-full",placeholder:"Enter tag name"},null,8,["modelValue"])]),e(f)?(v(),I("p",$e,"Please enter tag name")):T("",!0),c("div",we,[o(y,{label:"Save",icon:"pi pi-check",text:"",onClick:h})])])}}},Ee=R(Ce,[["__scopeId","data-v-cac7cbe0"]]);const Se=l=>(K("data-v-36eab91a"),l=l(),Q(),l),Ie={class:"field"},Me=Se(()=>c("label",{for:"company"},[X("Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={key:0,style:{color:"red"}},Ue={class:"create-btn-wrappe"},Be={__name:"EditTag",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(l,{emit:k}){const C=J(),x=l,d=H(),f=t(x.param.id),i=t(x.param.name),g=t(!1),h=t(!0),_=k,u=async()=>{if(i.value===""){g.value=!0;return}else if(g.value=!1,!g.value){const n=V("token"),{data:y,pending:p}=await Y(`${C.public.apiUrl}/tag/update/${f.value}`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:i.value}},"$RrQ4SF9MPi");y.value.code===200?(h.value=!1,_("closeEditModal",!1),d.add({severity:"success",summary:"Success",detail:"Tag Updated successfully!",group:"br",life:3e3})):d.add({severity:"error",summary:"Error",detail:"Tag Update Failed!",group:"br",life:3e3})}};return j(()=>{const n=document.getElementById("editTagName");W(()=>{n&&n.focus()})}),(n,y)=>{const p=L,$=z;return v(),I("div",null,[c("div",Ie,[Me,o(p,{id:"editTagName",modelValue:e(i),"onUpdate:modelValue":y[0]||(y[0]=M=>w(i)?i.value=M:null),class:"w-full",placeholder:"Edit tag name"},null,8,["modelValue"])]),e(g)?(v(),I("p",Ne,"Please enter tag name")):T("",!0),c("div",Ue,[o($,{label:"Update",icon:"pi pi-check",text:"",onClick:u})])])}}},Pe=R(Be,[["__scopeId","data-v-36eab91a"]]);const D=l=>(K("data-v-0f1e76af"),l=l(),Q(),l),Ve={key:0,class:"card"},De=D(()=>c("div",{class:"d-flex mr-2"},[c("h5",{class:"mb-1"},"Tag List")],-1)),Fe=D(()=>c("i",{class:"pi pi-search"},null,-1)),Ae=D(()=>c("p",{class:"text-center"},"No Data found...",-1)),Oe=D(()=>c("p",null,"Are you sure you want to delete?",-1)),qe={__name:"index",setup(l){const k=J(),C=t(P("read_tags")),x=t(P("create_tags")),d=t(P("update_tags")),f=t(P("delete_tags")),i=t(),g=t(!0),h=t(!1),_=H(),u=t(!1),n=t(!1),y=t([]),p=t(!1),$=t(""),M=t(""),Z=t(""),ee=t(""),te=t(""),ae=r=>{u.value=!1,E()},oe=r=>{n.value=!1,E()},se=()=>{u.value=!0,E()},le=r=>{n.value=!0,$.value=r.id,M.value=r.name,Z.value=r.email,ee.value=r.phone,te.value=r.address},ie=r=>{p.value=!0,$.value=r},ne=async()=>{h.value=!0;const r=V("token"),{data:a,pending:b}=await Y(`${k.public.apiUrl}/tag/delete/${$.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.value}`}},"$2xUf6ofqOr");a.value.code===200?(p.value=!1,_.add({severity:"success",summary:"Success",detail:"Tag Deleted successfully!",group:"br",life:3e3}),h.value=!1,E()):(_.add({severity:"error",summary:"Error",detail:"Tag Deleted Failed!",group:"br",life:3e3}),h.value=!1)},E=async()=>{var N,U,B;const r=V("token"),{data:a,pending:b,error:G}=await ge("tagsList",()=>$fetch(`${k.public.apiUrl}/tag/list`,{headers:{Authorization:`Bearer ${r.value}`}}));((U=(N=a.value)==null?void 0:N.data)==null?void 0:U.length)>0&&(y.value=(B=a.value)==null?void 0:B.data.map((F,A)=>({...F,index:A+1})))},re=()=>{i.value={global:{value:null,matchMode:fe.CONTAINS}}};return j(()=>{E(),g.value=!1}),re(),(r,a)=>{const b=z,G=pe,N=L,U=me,B=_e,F=ve,A=Ee,O=ye,ce=Pe,de=be;return e(C)?(v(),I("div",Ve,[De,o(B,{class:"border-0 px-0"},{start:m(()=>[e(x)?(v(),S(b,{key:0,icon:"pi pi-plus",label:"Create",onClick:se,class:"mr-2",severity:"secondary"})):T("",!0)]),end:m(()=>[o(U,{iconPosition:"right",raised:""},{default:m(()=>[o(G,null,{default:m(()=>[Fe]),_:1}),o(N,{modelValue:e(i).global.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).global.value=s),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(he),{filters:e(i),"onUpdate:filters":a[1]||(a[1]=s=>w(i)?i.value=s:null),class:"table-st",value:e(y),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[5,10,20,50],dataKey:"id",filterDisplay:"menu",loading:e(g)},{empty:m(()=>[Ae]),loading:m(()=>[o(F,{style:{width:"50px",height:"50px"}})]),default:m(()=>[o(e(q),{field:"index",header:"Serial",sortable:""}),o(e(q),{field:"name",header:"Tag Name"}),o(e(q),{field:"action",header:"Action"},{body:m(s=>[e(d)?(v(),S(b,{key:0,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",onClick:ue=>le(s.data)},null,8,["onClick"])):T("",!0),e(d)?T("",!0):(v(),S(b,{key:1,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(f)?(v(),S(b,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ue=>ie(s.data.id)},null,8,["onClick"])):T("",!0),e(f)?T("",!0):(v(),S(b,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(O,{visible:e(u),"onUpdate:visible":a[3]||(a[3]=s=>w(u)?u.value=s:null),modal:"",header:"Create Tag",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(A,{onCloseCreateModal:a[2]||(a[2]=s=>ae(s))})]),_:1},8,["visible"]),o(O,{visible:e(n),"onUpdate:visible":a[5]||(a[5]=s=>w(n)?n.value=s:null),modal:"",header:"Edit Tag",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(ce,{param:{id:e($),name:e(M)},onCloseEditModal:a[4]||(a[4]=s=>oe(s))},null,8,["param"])]),_:1},8,["visible"]),o(O,{visible:e(p),"onUpdate:visible":a[7]||(a[7]=s=>w(p)?p.value=s:null),header:" ",dismissableMask:"true",style:{width:"25rem"}},{default:m(()=>[Oe,o(b,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=s=>p.value=!1)}),o(b,{label:"Yes",icon:"pi pi-check",text:"",onClick:ne,loading:e(h)},null,8,["loading"])]),_:1},8,["visible"]),o(de,{position:"bottom-right",group:"br"})])):T("",!0)}}},Et=R(qe,[["__scopeId","data-v-0f1e76af"]]);export{Et as default};
