import me from"./inputtext.esm.447a6bf2.js";import ce from"./inputicon.esm.1fbfdda3.js";import pe from"./password.esm.bc89bb62.js";import fe from"./button.esm.618db59f.js";import{_ as ve}from"./nuxt-link.a0ca2aea.js";import{a2 as J,$ as d,ad as Y,aj as K,o as m,b as c,l as a,aU as Q,ca as ge,V as _e,a6 as be,a7 as he,ae as ye,i as e,u as A,I as O,q as y,e as g,w as we,t as xe,k as ke,F as Ee,a3 as Ve,a4 as Se}from"./entry.adada75d.js";import{_ as T}from"./avatar.c78ac217.js";import{_ as Pe,a as Ce}from"./googleBtn.31655f3f.js";import{u as Ie}from"./layout.e70b181f.js";import Oe from"./AppConfig.640041fd.js";import{s as Te,p as Fe,a as Re,u as G}from"./auth.44d7461d.js";import Ue from"./checkbox.esm.c1d90dd1.js";import"./radiobutton.esm.09c9afe0.js";import X from"./toast.esm.cb355044.js";import{u as $e}from"./fetch.079d260e.js";import{u as W}from"./cookie.5d273b70.js";import"./basecomponent.esm.83c9d650.js";import"./index.esm.65c6764f.js";import"./baseicon.esm.d10b284b.js";import"./overlayeventbus.esm.3d8cd3db.js";import"./portal.esm.39957f2b.js";import"./badge.esm.87264ac3.js";import"./index.esm.0e5550b4.js";import"./inputswitch.esm.56aeb03e.js";import"./selectbutton.esm.cfc9d75c.js";import"./sidebar.esm.b01ccfee.js";import"./index.esm.5f422ca7.js";import"./index.esm.5ba39205.js";import"./index.esm.9f75852a.js";import"./index.esm.eede3173.js";const Ne=Q('<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="32" height="32" viewBox="0 0 48 48" data-v-e311f8d4><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z" data-v-e311f8d4></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z" data-v-e311f8d4></path><path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z" data-v-e311f8d4></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z" data-v-e311f8d4></path></svg><span class="" data-v-e311f8d4>Sign in with Google</span>',2),qe={__name:"GoogleLogin",setup(k){const $=ge();d(null);const w=Y(),E=K(),v=async()=>{var t,_,F;const f=await Te(Re,Fe).then(r=>r._tokenResponse.oauthAccessToken).catch(r=>{console.error("Error signing in with Google:",r.message)});try{const{data:r}=await $e(`${$.public.apiUrl}/verify-google-token`,{method:"GET",headers:{token:f}},"$W9KDbYnWwU");if(r.value){const V=(_=(t=r==null?void 0:r.value)==null?void 0:t.company)==null?void 0:_.id;V&&localStorage.setItem("userCompany",JSON.stringify(V)),w.add({severity:"success",summary:"Authorized",detail:"Login Successful",group:"br",life:3e3});const N=W("token");N.value=r.value.token,setTimeout(()=>{E.push("/")},300);const q=W("rolePermission");q.value=(F=r==null?void 0:r.value)==null?void 0:F.permissions}}catch(r){w.add({severity:"error",summary:"Authorization Failed",detail:"Something went wrong.",group:"br",life:3e3}),console.log(r)}};return(f,t)=>{const _=X;return m(),c("button",{class:"login-with-google-btn",onClick:v},[a(_,{position:"bottom-right",group:"br"}),Ne])}}},Me=J(qe,[["__scopeId","data-v-e311f8d4"]]);const p=k=>(Ve("data-v-84acad1a"),k=k(),Se(),k),ze={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},He={class:"flex flex-column align-items-center justify-content-center"},Be={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},De={key:0,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px","padding-top":"28px !important","padding-bottom":"34px !important"}},Le=p(()=>e("div",{class:"text-center mb-5"},[e("img",{src:T,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mb-3"},"Sign in to continue")],-1)),je={class:"field md:w-28rem mb-4"},Ae=p(()=>e("label",{for:"email",class:"block text-900 text-xl font-medium mb-2"},"Work Email",-1)),Ge={key:0,id:"email-help",class:"error-report red-text red-text"},We={class:"field md:w-28rem mb-4"},Je=p(()=>e("label",{for:"password",class:"block text-900 font-medium text-xl mb-2"},"Password",-1)),Ye={key:0,id:"password-help",class:"error-report red-text"},Ke={class:"flex align-items-center justify-content-between mb-5 gap-5"},Qe={class:"flex align-items-center"},Xe=p(()=>e("label",{for:"rememberme1"},"Remember me",-1)),Ze={class:"w-full mt-4"},ea={class:"flex flex-wrap items-center justify-between mt-4"},aa=Q('<div class="flex justify-content-center gap-2 mt-3" data-v-84acad1a><a href="https://play.google.com/store/apps/details?id=com.singularity.the.pera.app" target="_blank" data-v-84acad1a><img src="'+Pe+'" height="40" alt="Image" class="" data-v-84acad1a></a><a href="https://apps.apple.com/us/app/the-pera/id6505035655" target="_blank" data-v-84acad1a><img src="'+Ce+'" height="40" alt="Image" class="" data-v-84acad1a></a></div>',1),sa={key:1,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},ta=p(()=>e("div",{class:"text-center mb-5"},[e("img",{src:T,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mt-1 mb-3"},"Verify Your Email")],-1)),la={class:"field md:w-28rem mb-4"},ra=p(()=>e("label",{for:"name",class:"block text-900 text-xl font-medium mb-2"},"OTP",-1)),oa={key:0,id:"name-help",class:"error-report red-text"},ia={class:"flex flex-wrap items-center justify-between mt-4"},da={key:0},na={key:1,class:""},ua=["disabled"],ma={key:2,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},ca=p(()=>e("div",{class:"text-center mb-5"},[e("img",{src:T,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mt-1 mb-3"},"Reset Password")],-1)),pa={class:"field md:w-28rem mb-4"},fa=p(()=>e("label",{for:"email",class:"block text-900 text-xl font-medium mb-2"},"Email",-1)),va={key:0,id:"email-help",class:"error-report red-text"},ga={key:3,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},_a=p(()=>e("div",{class:"text-center mb-5"},[e("img",{src:T,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mt-1 mb-3"},"Verify OTP")],-1)),ba={class:"field md:w-28rem mb-4"},ha=p(()=>e("label",{for:"name",class:"block text-900 text-xl font-medium mb-2"},"OTP",-1)),ya={key:0,id:"name-help",class:"error-report red-text"},wa={key:4,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},xa=p(()=>e("div",{class:"text-center mb-5"},[e("img",{src:T,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mb-3"},"Set Your New Password")],-1)),ka={class:"field md:w-28rem mb-5"},Ea=p(()=>e("label",{for:"password",class:"block text-900 font-medium text-xl mb-2"},"New Password1",-1)),Va={class:"field md:w-28rem mb-5"},Sa=p(()=>e("label",{for:"confirm-password",class:"block text-900 font-medium text-xl mb-2"},"Confirm Password",-1)),Pa={__name:"index",setup(k){const{layoutConfig:$}=Ie();_e(()=>`/layout/images/${$.darkTheme.value?"logo-white":"logo-dark"}.svg`);const w=d(!0),E=d(!1),v=d(""),f=d({password:"",confirm_password:""}),t=d(!1),_=d(""),{authenticateUser:F,otpVerify:r,resendOtp:V,forgotPassword:N,forgotPasswordOtp:q,passwordReset:Z}=G(),{authenticated:D,checkOTP:ee,resendOtpResponse:ae,resendOtpMsg:R,authOtp:se,resetState:Ca}=be(G()),o=Y(),L=K(),n=d({email:null,password:null,remember:!1}),h=d({email:null,password:null,otp:null}),l=d({emailError:!1,passwordError:!1,otpError:!1}),M=()=>{S.value=30,j.value=!1,z=setInterval(()=>{S.value>0?S.value-=1:(clearInterval(z),j.value=!0)},1e3)},b=d(!1),S=d(),j=d(!1);let z=null;const te=async()=>{console.log(n.value),b.value=!0,n.value.email?l.value.emailError=!1:l.value.emailError=!0,n.value.password?l.value.passwordError=!1:l.value.passwordError=!0,l.value.emailError||l.value.passwordError||(b.value=!0,n.value.remember?localStorage.setItem("credentials",JSON.stringify(n.value)):localStorage.removeItem("credentials"),await F(n.value),ee.value===!0?(w.value=!1,E.value=!0,h.value.email=n.value.email,h.value.password=n.value.password,M(),o.add({severity:"success",summary:"OTP Verification",detail:"Please verify OTP",group:"br",life:3e3})):D.value==!0?(l.value.passwordError=!1,l.value.emailError=!1,o.add({severity:"success",summary:"Authorized",detail:"Login Successful",group:"br",life:3e3}),setTimeout(()=>{L.push("/")},300)):o.add({severity:"error",summary:"Authorization Failed!",detail:"Invalid email or password",group:"br",life:3e3})),b.value=!1},le=async()=>{b.value=!0,h.value.email?l.value.emailError=!1:l.value.emailError=!0,h.value.otp?l.value.otpError=!1:l.value.otpError=!0,l.value.emailError||l.value.otpError||(await r(h.value),D.value==!0?(console.log("authOtpPPP",se.value),o.add({severity:"success",summary:"Successfully Verified",detail:R,group:"br",life:3e3}),location.reload(),L.push("/login")):o.add({severity:"error",summary:"Verification Failed",detail:R,group:"br",life:3e3})),b.value=!1},P=d(!1),re=async()=>{P.value=!0,await V({email:h.value.email}),ae.value===!0?(P.value=!1,o.add({severity:"info",summary:"OTP Resent",detail:R,group:"br",life:3e3}),M()):(P.value=!1,o.add({severity:"error",summary:"Error",detail:R,group:"br",life:3e3}))},x=d(""),oe=()=>{v.value="email",w.value=!1},ie=async()=>{if(t.value=!0,x.value===""){o.add({severity:"error",summary:"Error",detail:"Email required",group:"br",life:3e3}),t.value=!1;return}else{const s=await N(x.value);s.code==200?(v.value=s.message,t.value=!1):(t.value=!1,o.add({severity:"error",summary:"Error",detail:s.message,group:"br",life:3e3}))}},H=d(!1),de=async()=>{if(t.value=!0,_.value===""){H.value=!0,o.add({severity:"error",summary:"Error",detail:"OTP required",group:"br",life:3e3}),t.value=!1;return}const s=await q(x.value,_.value);s.code==200?(H.value=!1,v.value=s.message,t.value=!1,o.add({severity:"success",summary:"Success",detail:s.message,group:"br",life:3e3})):(t.value=!1,o.add({severity:"error",summary:"Error",detail:s.message,group:"br",life:3e3}))},ne=async()=>{if(t.value=!0,f.value.password===""||f.value.confirm_password===""){o.add({severity:"error",summary:"Error",detail:"Password required",group:"br",life:3e3}),t.value=!1;return}else if(f.value.password!==f.value.confirm_password){o.add({severity:"error",summary:"Error",detail:"Passwords do not match",group:"br",life:3e3}),t.value=!1;return}else{const s=await Z(x.value,f);console.log(s),s.code==200?(v.value="",w.value=!0,v.value=s.message,t.value=!1,o.add({severity:"success",summary:"Success",detail:s.message,group:"br",life:3e3})):(t.value=!1,o.add({severity:"error",summary:"Error",detail:s.message,group:"br",life:3e3}))}};return he(()=>E.value,s=>{s?M():clearInterval(z)}),ye(()=>{const s=localStorage.getItem("credentials");console.log("User Data storage: ",s),s&&(n.value=JSON.parse(s))}),(s,i)=>{const U=me,C=ce,B=pe,I=fe,ue=ve;return m(),c(Ee,null,[e("div",ze,[e("div",He,[a(A(X),{position:"bottom-right",group:"br"}),e("div",Be,[w.value?(m(),c("div",De,[Le,e("form",{onSubmit:O(te,["prevent"])},[e("div",je,[Ae,a(U,{id:"email",modelValue:n.value.email,"onUpdate:modelValue":i[0]||(i[0]=u=>n.value.email=u),type:"email",placeholder:"Enter your work email",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),l.value.emailError?(m(),c("small",Ge,[a(C,{class:"pi pi-exclamation-triangle"}),y(" Email required! ")])):g("",!0)]),e("div",We,[Je,a(B,{id:"password",modelValue:n.value.password,"onUpdate:modelValue":i[1]||(i[1]=u=>n.value.password=u),placeholder:"Enter password",feedback:!1,toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},null,8,["modelValue"]),l.value.passwordError?(m(),c("small",Ye,[a(C,{class:"pi pi-exclamation-triangle"}),y(" Password required! ")])):g("",!0)]),e("div",Ke,[e("div",Qe,[a(A(Ue),{inputId:"rememberme1",modelValue:n.value.remember,"onUpdate:modelValue":i[2]||(i[2]=u=>n.value.remember=u),binary:"",class:"mr-2"},null,8,["modelValue"]),Xe]),e("a",{onClick:oe,class:"font-medium no-underline ml-2 text-right cursor-pointer",style:{color:"var(--primary-color)"}},"Forgot password?")]),a(I,{type:"submit",label:"Sign In",loading:b.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32),e("div",Ze,[a(Me)]),e("div",ea,[y(" Don't have an account?  "),a(ue,{to:"/register",class:"forgot_pass md:mb-0"},{default:we(()=>[y(" Click Here.")]),_:1})]),aa])):g("",!0),E.value?(m(),c("div",sa,[ta,e("form",{onSubmit:O(le,["prevent"])},[e("div",la,[ra,a(U,{id:"name",modelValue:h.value.otp,"onUpdate:modelValue":i[3]||(i[3]=u=>h.value.otp=u),type:"text",placeholder:"Enter OTP",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),l.value.otpError?(m(),c("small",oa,[a(C,{class:"pi pi-exclamation-triangle"}),y(" OTP required! ")])):g("",!0)]),a(I,{type:"submit",label:"Verify",loading:b.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32),e("div",ia,[S.value>0?(m(),c("span",da,"Resend OTP in "+xe(S.value)+"s",1)):(m(),c("span",na,[y("Resend OTP?  "),e("button",{onClick:re,class:ke(["forgot_pass md:mb-0 cursor-pointer text-blue-600",P.value?"blink_text":""]),disabled:P.value},"Click Here",10,ua)]))])])):g("",!0),v.value=="email"?(m(),c("div",ma,[ca,e("form",{onSubmit:O(ie,["prevent"])},[e("div",pa,[fa,a(U,{id:"email",modelValue:x.value,"onUpdate:modelValue":i[4]||(i[4]=u=>x.value=u),type:"email",required:"",placeholder:"example@gmail.com",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),l.value.emailError?(m(),c("small",va,[a(C,{class:"pi pi-exclamation-triangle"}),y(" Email required! ")])):g("",!0)]),a(I,{type:"submit",label:"Submit",loading:t.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32)])):g("",!0),v.value=="otp"?(m(),c("div",ga,[_a,e("form",{onSubmit:O(de,["prevent"])},[e("div",ba,[ha,a(U,{id:"name",modelValue:_.value,"onUpdate:modelValue":i[5]||(i[5]=u=>_.value=u),type:"text",placeholder:"Enter OTP",invalid:H.value,class:"w-full",style:{padding:"1rem"}},null,8,["modelValue","invalid"]),l.value.otpError?(m(),c("small",ya,[a(C,{class:"pi pi-exclamation-triangle"}),y(" OTP required! ")])):g("",!0)]),a(I,{type:"submit",label:"Verify",loading:t.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32)])):g("",!0),v.value=="new-password"?(m(),c("div",wa,[xa,e("form",{onSubmit:O(ne,["prevent"])},[e("div",ka,[Ea,a(B,{id:"password",modelValue:f.value.password,"onUpdate:modelValue":i[6]||(i[6]=u=>f.value.password=u),placeholder:"Enter password",feedback:!1,toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},null,8,["modelValue"])]),e("div",Va,[Sa,a(B,{id:"confirm-password",modelValue:f.value.confirm_password,"onUpdate:modelValue":i[7]||(i[7]=u=>f.value.confirm_password=u),placeholder:"Enter password",feedback:!1,toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},null,8,["modelValue"])]),a(I,{type:"submit",label:"Submit",loading:t.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32)])):g("",!0)])])]),a(Oe,{simple:""})],64)}}},rs=J(Pa,[["__scopeId","data-v-84acad1a"]]);export{rs as default};
