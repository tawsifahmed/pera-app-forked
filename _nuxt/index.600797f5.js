import{_ as fe}from"./nuxt-link.1634179a.js";import he from"./dropdown.esm.95d4a155.js";import ge from"./calendar.esm.7662586a.js";import xe from"./button.esm.55d690cc.js";import be from"./chart.esm.99ccce05.js";import{_ as ye}from"./CreateCompany.45a6df78.js";import{a2 as we,a3 as I,$ as l,a5 as Ce,aq as E,b as d,i as e,l as p,w as _,c as h,u,e as L,F as ke,f as Se,a as je,o as i,t as v,s as Te,k as De,K as $e,a7 as Ve,a8 as Ie,ca as Le,am as Ne}from"./entry.e1c0e88c.js";import{u as Re,a as Ae}from"./cookie.4ac610cc.js";import{u as Fe}from"./layout.5c72e4d0.js";import{a as b}from"./usePermission.f2ef3c55.js";import{u as M}from"./auth.5635b503.js";import{u as z}from"./company.cfdd3950.js";import{u as O}from"./workCompany.4fb85ea6.js";import"./baseicon.esm.9d7b2230.js";import"./basecomponent.esm.3d4eb624.js";import"./index.esm.ed66ea6d.js";import"./index.esm.a7c42a2e.js";import"./index.esm.7e6d68a5.js";import"./index.esm.19bbf2cf.js";import"./index.esm.9f6fb2c0.js";import"./overlayeventbus.esm.fda4f9be.js";import"./portal.esm.afd7e75b.js";import"./virtualscroller.esm.b9c663eb.js";import"./index.esm.572cdd6a.js";import"./index.esm.10b96bd7.js";import"./index.esm.408c5cec.js";import"./badge.esm.782a7e7b.js";import"./inputtext.esm.8047d0d2.js";import"./dialog.esm.4c2eb380.js";const a=y=>(Ve("data-v-ba7a52a9"),y=y(),Ie(),y),Pe={class:"grid"},Ue={class:"col-12 lg:col-6 xl:col-3"},Be={class:"card mb-0"},Ee=a(()=>e("span",{class:"block text-500 font-medium mb-3"},"Company",-1)),Me={class:"text-900 font-medium text-xl"},ze=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-blue-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-microsoft text-blue-500 text-xl"})],-1)),Oe={class:"col-12 lg:col-6 xl:col-3"},Ye={class:"card mb-0"},qe=a(()=>e("span",{class:"block text-500 font-medium mb-3"},"Employees",-1)),Ge={class:"text-900 font-medium text-xl",style:{visibility:"visible"}},Je=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-purple-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-user text-purple-500 text-xl"})],-1)),Ke=a(()=>e("div",null,[e("span",{class:"block text-500 font-medium mb-3"},"Employees"),e("div",{class:"text-900 font-medium text-xl role-hide"},"0")],-1)),Xe=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-purple-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-user text-purple-500 text-xl"})],-1)),He={class:"col-12 lg:col-6 xl:col-3"},Qe={class:"card mb-0"},We=a(()=>e("span",{class:"block text-500 font-medium mb-3"},"Roles",-1)),Ze={class:"text-900 font-medium text-xl"},et=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-red-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-user-edit text-red-500 text-xl"})],-1)),tt=a(()=>e("div",null,[e("span",{class:"block text-500 font-medium mb-3"},"Roles"),e("div",{class:"text-900 font-medium text-xl role-hide"},"0")],-1)),st=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-red-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-user-edit text-red-500 text-xl"})],-1)),ot={class:"col-12 lg:col-6 xl:col-3"},lt={class:"card mb-0"},at=a(()=>e("span",{class:"block text-500 font-medium mb-3"},"Tags",-1)),nt={class:"text-900 font-medium text-xl"},it=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-green-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-tags text-green-500 text-xl"})],-1)),ct=a(()=>e("div",null,[e("span",{class:"block text-500 font-medium mb-3"},"Tags"),e("div",{class:"text-900 font-medium text-xl role-hide"},"0")],-1)),rt=a(()=>e("div",{class:"flex align-items-center justify-content-center bg-green-100 border-round",style:{width:"2.5rem",height:"2.5rem"}},[e("i",{class:"pi pi-tags text-green-500 text-xl"})],-1)),dt={key:0,class:"col-12 xl:col-6"},ut={class:"card h-full"},mt={class:"flex gap-2 align-items-center flex-wrap",style:{padding:"10px"}},pt=a(()=>e("h5",{class:"mb-2"},"Tasks",-1)),_t={class:"flex gap-2 flex-wrap justify-content-end filter-container"},vt={class:"mb-2 relative w-full md:w-12rem"},ft={class:"task-container"},ht={key:0,class:""},gt=["onClick"],xt={class:"title-group"},bt={class:"title line-clamp-1",style:{"font-weight":"600"}},yt=a(()=>e("div",{class:"",style:{"background-color":"#00000040",height:"5px",width:"5px","border-radius":"15px"}},null,-1)),wt={class:""},Ct={class:"",style:{"font-size":"12px"}},kt={key:1},St=a(()=>e("p",{class:"text-black text-lg text-center"},"No Tasks found!",-1)),jt=[St],Tt={class:"col-12 xl:col-6"},Dt={class:"card"},$t=a(()=>e("h5",null,"Overview",-1)),Vt={key:1},It={__name:"index",setup(y){O();const{companyList:N,totalProjects:Y}=I(O()),q=Le(),{getChartData:G,getTaskAssignModalData:J,getRoles:K,getTagsAssignModalData:X}=z(),{chartProjectInfo:H,chartTaskInfo:Q,chartClosedTaskInfo:W,users:Z,rolesLists:R,tags:A}=I(z());M(),I(M());const ee=l(b("read_user")),te=l(b("read_role")),se=l(b("read_tags")),oe=l(b("read_task"));l(b("create_company"));const{isDarkTheme:le}=Fe();l(null);const ae=l({labels:H,datasets:[{label:"Total Tasks",data:Q,fill:!1,backgroundColor:"#6366f1",borderColor:"#6366f1",tension:.4},{label:"Closed Tasks",data:W,fill:!1,backgroundColor:"#2f4860",borderColor:"#2f4860",tension:.4}]}),j=l([]);l([{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Remove",icon:"pi pi-fw pi-minus"}]);const T=l(null),w=l(!1),C=l(null),ne=()=>{var o;C.value=JSON.parse(localStorage.getItem("userCompany")),console.log("hasUserCompany =>",C.value),C.value===null||((o=C.value)==null?void 0:o.length)==0?w.value=!0:w.value=!1,console.log("visibleCreateCompany =>",w.value)};Ce(()=>{K(),J(),X(),G(),ne()});const ie=()=>{T.value={plugins:{legend:{labels:{color:"#495057"}}},scales:{x:{ticks:{color:"#495057"},grid:{color:"#ebedef"},title:{display:!0,text:"Projects"}},y:{ticks:{color:"#495057"},grid:{color:"#ebedef"},title:{display:!0,text:"Numbers  of  Tasks"}}}}},ce=()=>{T.value={plugins:{legend:{labels:{color:"#ebedef"}}},scales:{x:{ticks:{color:"#ebedef"},grid:{color:"rgba(160, 167, 181, .3)"}},y:{ticks:{color:"#ebedef"},grid:{color:"rgba(160, 167, 181, .3)"}}}}},r=l(),F=l(),P=l(),m=l(),k=l(!1);E(r,o=>{var t,n;F.value=[{name:"All",id:""},...((n=(t=r.value)==null?void 0:t.statuses)==null?void 0:n.map(c=>({name:c.name,id:c.id})))||[]]});const g=l(),D=l(),S=l(),$=l(),x=async()=>{D.value=r.value?r.value.id:"",S.value=g.value?g.value.id:"",$.value=m.value,console.log("sta",S.value),U(D.value,S.value,$.value)},re=o=>{k.value=!0;const t=new Date(o);m.value=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),x()},de=()=>{k.value=!1,m.value="",$.value="",x()},ue=()=>{if(r.value||P.value||m.value)r.value="",P.value="",m.value="",D.value="",S.value="",g.value="",k.value=!1,x();else return},me=async o=>{const t=localStorage.getItem("userCompany");console.log("Task click: ",o),await Ne({path:`/companies/${t}/spaces/${o==null?void 0:o.space_id}/projects/${o==null?void 0:o.project_id}`,query:{task_key:o.id}})},pe=o=>{const t=o,n=new Date(t),c=n.getFullYear(),f=String(n.getMonth()+1).padStart(2,"0");return`${String(n.getDate()).padStart(2,"0")}-${f}-${c}`},U=async(o="",t="",n="")=>{console.log("status",t);try{const c=Re("token"),{data:f,pending:V,error:B}=await Ae(`${q.public.apiUrl}/tasks/list?due_date=${n}&status=${t}&project_id=${o}`,{method:"GET",headers:{Authorization:`Bearer ${c.value}`}},"$PslAyef5YX");j.value=f.value.data,console.log("Task list: ",f.value.data)}catch(c){console.log(c)}};return U(),E(le,o=>{o?ce():ie()},{immediate:!0}),(o,t)=>{const n=fe,c=he,f=ge,V=xe,B=be,_e=ye,ve=je("tooltip");return i(),d("div",Pe,[e("div",Ue,[e("div",Be,[p(n,{to:"/companies",class:"flex justify-content-between mb-3"},{default:_(()=>[e("div",null,[Ee,e("div",Me,v(u(N)?u(N).length:"0"),1)]),ze]),_:1})])]),e("div",Oe,[e("div",Ye,[ee.value?(i(),h(n,{key:0,to:"/employees",class:"flex justify-content-between mb-3"},{default:_(()=>[e("div",null,[qe,e("div",Ge,v(u(Z).length),1)]),Je]),_:1})):(i(),h(n,{key:1,class:"flex justify-content-between mb-3"},{default:_(()=>[Ke,Xe]),_:1}))])]),e("div",He,[e("div",Qe,[te.value?(i(),h(n,{key:0,to:"/roles",class:"flex justify-content-between mb-3"},{default:_(()=>[e("div",null,[We,e("div",Ze,v(u(R)?u(R).length:"0"),1)]),et]),_:1})):(i(),h(n,{key:1,class:"flex justify-content-between mb-3"},{default:_(()=>[tt,st]),_:1}))])]),e("div",ot,[e("div",lt,[se.value?(i(),h(n,{key:0,to:"/tags",class:"flex justify-content-between mb-3"},{default:_(()=>[e("div",null,[at,e("div",nt,v(u(A)?u(A).length:"0"),1)]),it]),_:1})):(i(),h(n,{key:1,class:"flex justify-content-between mb-3"},{default:_(()=>[ct,rt]),_:1}))])]),oe.value?(i(),d("div",dt,[e("div",ut,[e("div",mt,[pt,e("div",_t,[p(c,{onChange:t[0]||(t[0]=s=>x()),modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=s=>r.value=s),options:u(Y),optionLabel:"name",placeholder:"Select Project",class:"w-full md:w-12rem mb-2"},null,8,["modelValue","options"]),p(c,{onChange:t[2]||(t[2]=s=>x()),modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),options:F.value,disabled:!r.value,optionLabel:"name",placeholder:"Select Status",class:"w-full md:w-12rem mb-2"},null,8,["modelValue","options","disabled"]),e("div",vt,[p(f,{onDateSelect:t[4]||(t[4]=s=>re(s)),modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=s=>m.value=s),placeholder:"Select Date",class:"w-full md:w-12rem"},null,8,["modelValue"]),k.value?(i(),d("p",{key:0,onClick:de,class:"pi pi-times end-cross absolute cursor-pointer"})):L("",!0)]),p(V,{onClick:ue,label:"Reset",class:"mb-2",severity:"secondary"})])]),e("div",ft,[j.value.length>0?(i(),d("div",ht,[(i(!0),d(ke,null,Se(j.value,s=>(i(),d("div",{key:s,onClick:()=>me(s),class:"task-card"},[e("div",xt,[Te(e("div",{class:De("status"),style:$e(`background-color: ${s==null?void 0:s.status_color};`)},null,4),[[ve,{value:`Status: ${s.status_name}`},void 0,{left:!0}]]),e("p",bt,v(s==null?void 0:s.name),1),yt,e("p",null,v(s==null?void 0:s.project_name),1)]),e("div",wt,[e("p",Ct,"Due: "+v(s.due_date?pe(s==null?void 0:s.due_date):"Not Set"),1)])],8,gt))),128))])):(i(),d("div",kt,jt))])])])):L("",!0),e("div",Tt,[e("div",Dt,[$t,p(B,{type:"line",data:ae.value,options:T.value},null,8,["data","options"])])]),w.value?(i(),d("div",Vt,[p(_e)])):L("",!0)])}}},is=we(It,[["__scopeId","data-v-ba7a52a9"]]);export{is as default};
