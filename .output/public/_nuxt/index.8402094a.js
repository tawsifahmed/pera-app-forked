import R from"./button.esm.388dac8c.js";import pe from"./inputicon.esm.b4dbef41.js";import q from"./inputtext.esm.785b4390.js";import me from"./iconfield.esm.05e29c17.js";import _e from"./toolbar.esm.fe0d1b79.js";import ve from"./progressspinner.esm.5f55f84f.js";import{a2 as H,a4 as L,$ as t,a5 as j,a6 as W,o as v,b as I,i as c,l as o,u as e,a7 as w,e as T,a8 as K,a9 as Q,q as X,ca as J,w as m,P as fe,c as S}from"./entry.301ffb3a.js";import{u as Y}from"./fetch.34ea3734.js";import{u as V,a as ge}from"./cookie.92fabe3b.js";import ye from"./dialog.esm.882b91ad.js";import be from"./toast.esm.c05b6e52.js";import z from"./column.esm.0e7ea2df.js";import he from"./datatable.esm.79293d9e.js";import{a as P}from"./usePermission.5e248a7e.js";import"./badge.esm.8601ea29.js";import"./basecomponent.esm.3ef3224a.js";import"./index.esm.34d947f9.js";import"./baseicon.esm.ae76dc18.js";import"./index.esm.304061f5.js";import"./portal.esm.21667c44.js";import"./index.esm.a4fbc4b7.js";import"./index.esm.55e3f621.js";import"./index.esm.e8f446c1.js";import"./paginator.esm.53ed8919.js";import"./index.esm.0eaa7c6d.js";import"./dropdown.esm.64eb9ca6.js";import"./index.esm.0c3c4133.js";import"./index.esm.3cb2c250.js";import"./overlayeventbus.esm.6d6e2075.js";import"./virtualscroller.esm.6321cf3d.js";import"./inputnumber.esm.850e79d6.js";import"./index.esm.96d7a8d4.js";import"./index.esm.0b4b155a.js";import"./index.esm.976e0566.js";import"./index.esm.f65fce28.js";import"./index.esm.fc3355bd.js";import"./checkbox.esm.b0f3ce9e.js";import"./radiobutton.esm.9223a76d.js";import"./index.esm.1c2b60d2.js";import"./index.esm.cee30326.js";const Te=l=>(K("data-v-cac7cbe0"),l=l(),Q(),l),xe={class:"field"},$e=Te(()=>c("label",{for:"company"},[X("Tag Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),ke={key:0,style:{color:"red"}},we={class:"create-btn-wrapper mb-0"},Ce={__name:"CreateTag",emits:["closeCreateModal"],setup(l,{emit:$}){const C=J(),x=L(),d=t(""),f=t(!1),i=t(!0),g=$,h=async()=>{if(d.value===""){f.value=!0;return}else if(f.value=!1,!f.value){const _=V("token"),{data:u,pending:n}=await Y(`${C.public.apiUrl}/tag/create`,{method:"POST",headers:{Authorization:`Bearer ${_.value}`},body:{name:d.value}},"$jxcvHxJQkU");u.value.code===201?(d.value=null,i.value=!1,g("closeCreateModal",!1),x.add({severity:"success",summary:"Success",detail:"Tag Created successfully!",group:"br",life:3e3})):x.add({severity:"error",summary:"Error",detail:"Tag Creation Failed!",group:"br",life:3e3})}};return j(()=>{const _=document.getElementById("createTagName");W(()=>{_&&_.focus()})}),(_,u)=>{const n=q,y=R;return v(),I("div",null,[c("div",xe,[$e,o(n,{id:"createTagName",modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=p=>w(d)?d.value=p:null),class:"w-full",placeholder:"Enter tag name"},null,8,["modelValue"])]),e(f)?(v(),I("p",ke,"Please enter tag name")):T("",!0),c("div",we,[o(y,{label:"Save",icon:"pi pi-check",text:"",onClick:h})])])}}},Ee=H(Ce,[["__scopeId","data-v-cac7cbe0"]]);const Se=l=>(K("data-v-36eab91a"),l=l(),Q(),l),Ie={class:"field"},Ne=Se(()=>c("label",{for:"company"},[X("Name"),c("i",{class:"text-red-400 text-italic"},"*")],-1)),Ue={key:0,style:{color:"red"}},Me={class:"create-btn-wrappe"},Be={__name:"EditTag",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(l,{emit:$}){const C=J(),x=l,d=L(),f=t(x.param.id),i=t(x.param.name),g=t(!1),h=t(!0),_=$,u=async()=>{if(i.value===""){g.value=!0;return}else if(g.value=!1,!g.value){const n=V("token"),{data:y,pending:p}=await Y(`${C.public.apiUrl}/tag/update/${f.value}`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:i.value}},"$RrQ4SF9MPi");y.value.code===200?(h.value=!1,_("closeEditModal",!1),d.add({severity:"success",summary:"Success",detail:"Tag Updated successfully!",group:"br",life:3e3})):d.add({severity:"error",summary:"Error",detail:"Tag Update Failed!",group:"br",life:3e3})}};return j(()=>{const n=document.getElementById("editTagName");W(()=>{n&&n.focus()})}),(n,y)=>{const p=q,k=R;return v(),I("div",null,[c("div",Ie,[Ne,o(p,{id:"editTagName",modelValue:e(i),"onUpdate:modelValue":y[0]||(y[0]=N=>w(i)?i.value=N:null),class:"w-full",placeholder:"Edit tag name"},null,8,["modelValue"])]),e(g)?(v(),I("p",Ue,"Please enter tag name")):T("",!0),c("div",Me,[o(k,{label:"Update",icon:"pi pi-check",text:"",onClick:u})])])}}},Pe=H(Be,[["__scopeId","data-v-36eab91a"]]);const D=l=>(K("data-v-1ec0a6a2"),l=l(),Q(),l),Ve={key:0,class:"card"},De=D(()=>c("div",{class:"d-flex mr-2"},[c("h5",{class:"mb-1"},"Tags")],-1)),Fe=D(()=>c("i",{class:"pi pi-search"},null,-1)),Ae=D(()=>c("p",{class:"text-center"},"No Data found...",-1)),Oe=D(()=>c("p",null,"Are you sure you want to delete?",-1)),ze={__name:"index",setup(l){const $=J(),C=t(P("read_tags")),x=t(P("create_tags")),d=t(P("update_tags")),f=t(P("delete_tags")),i=t(),g=t(!0),h=t(!1),_=L(),u=t(!1),n=t(!1),y=t([]),p=t(!1),k=t(""),N=t(""),Z=t(""),ee=t(""),te=t(""),ae=r=>{u.value=!1,E()},oe=r=>{n.value=!1,E()},se=()=>{u.value=!0,E()},le=r=>{n.value=!0,k.value=r.id,N.value=r.name,Z.value=r.email,ee.value=r.phone,te.value=r.address},ie=r=>{p.value=!0,k.value=r},ne=async()=>{h.value=!0;const r=V("token"),{data:a,pending:b}=await Y(`${$.public.apiUrl}/tag/delete/${k.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.value}`}},"$2xUf6ofqOr");a.value.code===200?(p.value=!1,_.add({severity:"success",summary:"Success",detail:"Tag Deleted successfully!",group:"br",life:3e3}),h.value=!1,E()):(_.add({severity:"error",summary:"Error",detail:"Tag Deleted Failed!",group:"br",life:3e3}),h.value=!1)},E=async()=>{var U,M,B;const r=V("token"),{data:a,pending:b,error:G}=await ge("tagsList",()=>$fetch(`${$.public.apiUrl}/tag/list`,{headers:{Authorization:`Bearer ${r.value}`}}));((M=(U=a.value)==null?void 0:U.data)==null?void 0:M.length)>0&&(y.value=(B=a.value)==null?void 0:B.data.map((F,A)=>({...F,index:A+1})))},re=()=>{i.value={global:{value:null,matchMode:fe.CONTAINS}}};return j(()=>{E(),g.value=!1}),re(),(r,a)=>{const b=R,G=pe,U=q,M=me,B=_e,F=ve,A=Ee,O=ye,ce=Pe,de=be;return e(C)?(v(),I("div",Ve,[De,o(B,{class:"border-0 px-0"},{start:m(()=>[e(x)?(v(),S(b,{key:0,icon:"pi pi-plus",label:"Create",onClick:se,class:"mr-2",severity:"secondary"})):T("",!0)]),end:m(()=>[o(M,{iconPosition:"right",raised:""},{default:m(()=>[o(G,null,{default:m(()=>[Fe]),_:1}),o(U,{modelValue:e(i).global.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(i).global.value=s),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(he),{filters:e(i),"onUpdate:filters":a[1]||(a[1]=s=>w(i)?i.value=s:null),class:"table-st",value:e(y),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[5,10,20,50],dataKey:"id",filterDisplay:"menu",loading:e(g)},{empty:m(()=>[Ae]),loading:m(()=>[o(F,{style:{width:"50px",height:"50px"}})]),default:m(()=>[o(e(z),{field:"index",header:"Serial",sortable:""}),o(e(z),{field:"name",header:"Tag Name"}),o(e(z),{field:"action",header:"Action"},{body:m(s=>[e(d)?(v(),S(b,{key:0,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",onClick:ue=>le(s.data)},null,8,["onClick"])):T("",!0),e(d)?T("",!0):(v(),S(b,{key:1,icon:"pi pi-pencil",text:"",class:"",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(f)?(v(),S(b,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ue=>ie(s.data.id)},null,8,["onClick"])):T("",!0),e(f)?T("",!0):(v(),S(b,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(O,{visible:e(u),"onUpdate:visible":a[3]||(a[3]=s=>w(u)?u.value=s:null),modal:"",header:"Create Tag",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(A,{onCloseCreateModal:a[2]||(a[2]=s=>ae(s))})]),_:1},8,["visible"]),o(O,{visible:e(n),"onUpdate:visible":a[5]||(a[5]=s=>w(n)?n.value=s:null),modal:"",header:"Edit Tag",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:m(()=>[o(ce,{param:{id:e(k),name:e(N)},onCloseEditModal:a[4]||(a[4]=s=>oe(s))},null,8,["param"])]),_:1},8,["visible"]),o(O,{visible:e(p),"onUpdate:visible":a[7]||(a[7]=s=>w(p)?p.value=s:null),header:" ",style:{width:"25rem"}},{default:m(()=>[Oe,o(b,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=s=>p.value=!1)}),o(b,{label:"Yes",icon:"pi pi-check",text:"",onClick:ne,loading:e(h)},null,8,["loading"])]),_:1},8,["visible"]),o(de,{position:"bottom-right",group:"br"})])):T("",!0)}}},Et=H(ze,[["__scopeId","data-v-1ec0a6a2"]]);export{Et as default};
