import{u as d,a as v}from"./cookie.380282ca.js";import{ao as y,$ as l}from"./entry.b2a4041b.js";const w=y("user",()=>{const r=l(null),s=l(!1);async function n(){const t=d("token"),{data:a,pending:u,error:f}=await v("userProf",()=>$fetch("https://pbe.singularitybd.net/api/v1/users/profile",{headers:{Authorization:`Bearer ${t.value}`}}));r.value=a.value,localStorage.setItem("userCompany",a.value.data.company_id)}async function c(t,a,u,f,h,i){s.value=!0;const e=new FormData;e.append("name",a),e.append("phone",u),e.append("address",h),i!=null&&e.append("image",i);const m=d("token");try{const o=await fetch(`https://pbe.singularitybd.net/api/v1/users/update/${t}`,{method:"POST",headers:{Authorization:`Bearer ${m.value}`},body:e});if(!o.ok)throw new Error("Network response was not ok");n();const p=await o.json();return console.log("User Update data =>",p),p}catch(o){console.error("Error uploading file:",o),s.value=!1}}return{getUserData:n,updateUser:c,userProfile:r}});export{w as u};
