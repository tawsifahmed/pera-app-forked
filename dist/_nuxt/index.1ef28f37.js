import Ie from"./toast.esm.c05b6e52.js";import le from"./button.esm.388dac8c.js";import Se from"./multiselect.esm.f7939525.js";import Ne from"./inputicon.esm.b4dbef41.js";import te from"./inputtext.esm.785b4390.js";import Pe from"./iconfield.esm.05e29c17.js";import Te from"./toolbar.esm.fe0d1b79.js";import Ae from"./progressspinner.esm.5f55f84f.js";import{a2 as oe,$ as l,a4 as se,a5 as ae,a6 as pe,o as U,b as Y,i as t,l as s,u as e,a7 as _,e as L,a8 as ie,a9 as ne,q as M,ca as re,c as H,w as P,P as Le,a as Me,s as Be}from"./entry.301ffb3a.js";import{u as G,a as _e}from"./cookie.92fabe3b.js";import{u as de}from"./fetch.34ea3734.js";import X from"./column.esm.0e7ea2df.js";import De from"./datatable.esm.79293d9e.js";import ye from"./textarea.esm.f74e6a4c.js";import Fe from"./password.esm.d694139a.js";import me from"./dropdown.esm.64eb9ca6.js";import{a as W}from"./usePermission.5e248a7e.js";import ee from"./dialog.esm.882b91ad.js";import"./portal.esm.21667c44.js";import"./basecomponent.esm.3ef3224a.js";import"./index.esm.a4fbc4b7.js";import"./baseicon.esm.ae76dc18.js";import"./index.esm.55e3f621.js";import"./index.esm.304061f5.js";import"./index.esm.e8f446c1.js";import"./badge.esm.8601ea29.js";import"./index.esm.34d947f9.js";import"./checkbox.esm.b0f3ce9e.js";import"./index.esm.0c3c4133.js";import"./index.esm.3cb2c250.js";import"./overlayeventbus.esm.6d6e2075.js";import"./virtualscroller.esm.6321cf3d.js";import"./paginator.esm.53ed8919.js";import"./index.esm.0eaa7c6d.js";import"./inputnumber.esm.850e79d6.js";import"./index.esm.96d7a8d4.js";import"./index.esm.0b4b155a.js";import"./index.esm.976e0566.js";import"./index.esm.f65fce28.js";import"./index.esm.fc3355bd.js";import"./radiobutton.esm.9223a76d.js";import"./index.esm.1c2b60d2.js";import"./index.esm.cee30326.js";import"./index.esm.4d809f75.js";const Z=u=>(ie("data-v-c22831e2"),u=u(),ne(),u),Oe={class:"field"},Re=Z(()=>t("label",{for:"company"},[M("Name"),t("i",{class:"text-red-400 text-italic"},"*"),M(" >")],-1)),He={class:"field"},ze=Z(()=>t("label",{for:"email"},[M("Email address"),t("i",{class:"text-red-400"},"*")],-1)),je={class:"field"},qe=Z(()=>t("label",{for:"phoneNo"},"Phone ",-1)),Ge={class:"field"},Ye=Z(()=>t("label",{for:"company"},"Address ",-1)),Ke={class:"field"},Xe=Z(()=>t("label",{for:"company"},[M("Password"),t("i",{class:"text-red-400"},"*")],-1)),Ze={class:"field flex flex-column"},Je=Z(()=>t("label",null,[M("Role"),t("i",{class:"text-red-400"},"*")],-1)),Qe={key:0,style:{color:"red"}},We={class:"create-btn-wrapper mb-0"},el={__name:"CreateEmployee",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(u,{emit:B}){const z=re(),T=l(u.param.rolesLists),E=l([]),v=se(),d=l(""),c=l(""),y=l(""),x=l(""),p=l("");l("");const h=l(!1),w=l(!0),b=B,r=l(!1),D=async()=>{var m,a,g;if(r.value=!0,d.value===""||c.value===""||p.value===""||E.value.length===0){h.value=!0,r.value=!1;return}else if(h.value=!1,!h.value){const C=G("token"),{data:k,error:f,pending:V}=await de(`${z.public.apiUrl}/users/create`,{method:"POST",headers:{Authorization:`Bearer ${C.value}`},body:{name:d.value,email:c.value,address:x.value,phone:y.value,password:p.value,password_confirmation:p.value,role:E.value.name}},"$HYNtwi2ZAs");if(f!=null&&f.value){if(((a=(m=f==null?void 0:f.value)==null?void 0:m.data)==null?void 0:a.code)===422){r.value=!1,v.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=k==null?void 0:k.value)==null?void 0:g.code)===201){r.value=!1,d.value=null,c.value=null,y.value=null,x.value=null,p.value=null,w.value=!1,b("closeCreateModal",!1),v.add({severity:"success",summary:"Success",detail:"Employee created successfully!",group:"br",life:3e3});return}else{r.value=!1,v.add({severity:"error",summary:"Error",detail:"Failed to create employee!",group:"br",life:3e3});return}}};return ae(()=>{const m=document.getElementById("createEmployeeName");pe(()=>{m&&m.focus()})}),(m,a)=>{const g=te,C=ye,k=Fe,f=me,V=le;return U(),Y("div",null,[t("div",Oe,[Re,s(g,{id:"createEmployeeName",modelValue:e(d),"onUpdate:modelValue":a[0]||(a[0]=I=>_(d)?d.value=I:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",He,[ze,s(g,{type:"email",modelValue:e(c),"onUpdate:modelValue":a[1]||(a[1]=I=>_(c)?c.value=I:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",je,[qe,s(g,{modelValue:e(y),"onUpdate:modelValue":a[2]||(a[2]=I=>_(y)?y.value=I:null),inputId:"worktype",type:"tel",class:"w-full",maxlength:"14",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",Ge,[Ye,s(C,{modelValue:e(x),"onUpdate:modelValue":a[3]||(a[3]=I=>_(x)?x.value=I:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",Ke,[Xe,s(k,{modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=I=>_(p)?p.value=I:null),placeholder:"Enter password",feedback:!1,invalid:m.confirmPassError,toggleMask:"",class:"w-full",inputClass:"w-full"},null,8,["modelValue","invalid"])]),t("div",Ze,[Je,s(f,{modelValue:e(E),"onUpdate:modelValue":a[5]||(a[5]=I=>_(E)?E.value=I:null),options:e(T),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(U(),Y("p",Qe,"Please fill/check up all the fields")):L("",!0),t("div",We,[s(V,{loading:e(r),label:"Save",icon:"pi pi-check",text:"",onClick:D},null,8,["loading"])])])}}},ll=oe(el,[["__scopeId","data-v-c22831e2"]]);const Q=u=>(ie("data-v-a1134ad4"),u=u(),ne(),u),tl={class:"field"},ol=Q(()=>t("label",{for:"company"},[M("Name"),t("i",{class:"text-red-500"},"*")],-1)),sl={class:"field"},al=Q(()=>t("label",{for:"email"},[M("Email address"),t("i",{class:"text-red-500"},"*")],-1)),il={class:"field"},nl=Q(()=>t("label",{for:"worktype"},"Phone",-1)),rl={class:"field"},dl=Q(()=>t("label",{for:"company"},"Address",-1)),ul={class:"field flex flex-column"},cl=Q(()=>t("label",null,[M("Role"),t("i",{class:"text-red-500"},"*")],-1)),pl={key:0,style:{color:"red"}},ml={class:"create-btn-wrappe"},vl={__name:"EditEmployee",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(u,{emit:B}){const z=re(),S=u,T=se(),E=l(S.param.id),v=l(S.param.name),d=l(S.param.email),c=l(S.param.phone),y=l(S.param.address),x=l(S.param.rolesLists),p=l(S.param.user_type),h=l(!1),w=l(!0),b=B,r=l(!1),D=async()=>{var m,a,g;if(r.value=!0,v.value===""||d.value===""){h.value=!0,r.value=!1;return}else if(h.value=!1,!h.value){const C=G("token"),{data:k,error:f,pending:V}=await de(`${z.public.apiUrl}/users/update/${E.value}`,{method:"POST",headers:{Authorization:`Bearer ${C.value}`},body:{name:v.value,email:d.value,address:y.value,phone:c.value,role:p.value.name}},"$D8HfpvkorG");if(f!=null&&f.value){if(((a=(m=f==null?void 0:f.value)==null?void 0:m.data)==null?void 0:a.code)===500){r.value=!1,T.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=k==null?void 0:k.value)==null?void 0:g.code)===200){r.value=!1,w.value=!1,b("closeEditModal",!1),T.add({severity:"success",summary:"Success",detail:"Employee Updated successfully!",group:"br",life:3e3});return}else{r.value=!1,T.add({severity:"error",summary:"Error",detail:"Failed to update employee!",group:"br",life:3e3});return}}};return ae(()=>{const m=document.getElementById("editEmployeeName");pe(()=>{m&&m.focus()})}),(m,a)=>{const g=te,C=ye,k=me,f=le;return U(),Y("div",null,[t("div",tl,[ol,s(g,{id:"editEmployeeName",modelValue:e(v),"onUpdate:modelValue":a[0]||(a[0]=V=>_(v)?v.value=V:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",sl,[al,s(g,{type:"email",modelValue:e(d),"onUpdate:modelValue":a[1]||(a[1]=V=>_(d)?d.value=V:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",il,[nl,s(g,{modelValue:e(c),"onUpdate:modelValue":a[2]||(a[2]=V=>_(c)?c.value=V:null),type:"tel",class:"w-full",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",rl,[dl,s(C,{modelValue:e(y),"onUpdate:modelValue":a[3]||(a[3]=V=>_(y)?y.value=V:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",ul,[cl,s(k,{modelValue:e(p),"onUpdate:modelValue":a[4]||(a[4]=V=>_(p)?p.value=V:null),options:e(x),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(U(),Y("p",pl,"Please fill/check up all the fields")):L("",!0),t("div",ml,[s(f,{label:"Update",icon:"pi pi-check",text:"",onClick:D,loading:e(r)},null,8,["loading"])])])}}},fl=oe(vl,[["__scopeId","data-v-a1134ad4"]]);const he=u=>(ie("data-v-d515e90e"),u=u(),ne(),u),_l={class:"field"},yl=he(()=>t("label",{for:"email"},[M("Email address"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),hl={class:"field flex flex-column"},bl=he(()=>t("label",null,[M("Role"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),$l={key:0,style:{color:"red"}},El={class:"create-btn-wrapper"},gl={__name:"InviteGuest",props:{param:{type:Object,required:!0}},emits:["closeInviteModal"],setup(u,{emit:B}){const z=re(),T=l(u.param.rolesLists),E=l([]),v=se(),d=l(""),c=l(!1),y=l("false"),x=l(!0),p=B,h=async()=>{var w;if(d.value===""||E.value.length===0){c.value=!0;return}else if(y.value=!0,c.value=!1,!c.value){const b=G("token"),{data:r,pending:D}=await de(`${z.public.apiUrl}/invite-user`,{method:"POST",headers:{Authorization:`Bearer ${b.value}`},body:{email:d.value,role:E.value.name}},"$uaOzqXhdzF");((w=r==null?void 0:r.value)==null?void 0:w.code)===201?(d.value=null,x.value=!1,p("closeInviteModal",!1),y.value=!1,v.add({severity:"success",summary:"Success",detail:"Employee invitation sent!",group:"br",life:3e3})):v.add({severity:"error",summary:"Error",detail:"Employee invitation failed!",group:"br",life:3e3})}};return ae(()=>{const w=document.getElementById("inviteEmail");pe(()=>{w&&w.focus()})}),(w,b)=>{const r=te,D=me,m=le;return U(),Y("div",null,[t("div",_l,[yl,s(r,{id:"inviteEmail",type:"email",modelValue:e(d),"onUpdate:modelValue":b[0]||(b[0]=a=>_(d)?d.value=a:null),class:"w-full"},null,8,["modelValue"])]),t("div",hl,[bl,s(D,{modelValue:e(E),"onUpdate:modelValue":b[1]||(b[1]=a=>_(E)?E.value=a:null),options:e(T),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(c)?(U(),Y("p",$l,"Please fill/check up all the fields")):L("",!0),t("div",El,[e(y)=="false"?(U(),H(m,{key:0,label:"Send",icon:"pi pi-check",text:"",onClick:h})):(U(),H(m,{key:1,label:"Sending...",icon:"pi pi-spin pi-spinner",text:"",disabled:""}))])])}}},xl=oe(gl,[["__scopeId","data-v-d515e90e"]]);const ue=u=>(ie("data-v-2dfecf67"),u=u(),ne(),u),wl={key:0,class:"card"},kl={class:"d-flex mr-2"},Vl=ue(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Employees")],-1)),Ul=ue(()=>t("i",{class:"pi pi-search"},null,-1)),Cl=ue(()=>t("p",{class:"text-center"},"No Data found...",-1)),Il=ue(()=>t("p",null,"Are you sure you want to delete?",-1)),Sl={__name:"index",setup(u){const B=re(),z=l(W("read_user")),S=l(W("create_user")),T=l(W("update_user")),E=l(W("delete_user")),v=l(),d=l(!0),c=l(!1),y=se(),x=l(!1),p=l(!1),h=l(!1),w=l([]),b=l(!1),r=l(""),D=l(""),m=l(""),a=l(""),g=l(""),C=l([]),k=l([]),f=i=>{x.value=!1,K()},V=i=>{h.value=!1,K()},I=()=>{x.value=!0},be=()=>{p.value=!0},$e=i=>{p.value=!1,K()},J=l([]),ve=l([]),Ee=i=>{h.value=!0,r.value=i.id,D.value=i.name,m.value=i.email,a.value=i.phone,g.value=i.address,k.value=i.user_type,C.value.map(o=>{o.name===i.user_type&&(k.value=o)})},ge=i=>{b.value=!0,r.value=i},xe=async()=>{c.value=!0;const i=G("token"),{data:o,pending:N}=await de(`${B.public.apiUrl}/users/delete/${r.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${i.value}`}},"$BmbV2j3TY3");o.value.code===200?(b.value=!1,y.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),c.value=!1,K()):(y.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),c.value=!1)},fe=l(),we=async()=>{fe.value=J.value?J.value.map(i=>i.id):"",K(fe.value)},K=async i=>{var F,O,R;const o=G("token"),{data:N,pending:$,error:j}=await _e("taskAssignModalData",()=>$fetch(`${B.public.apiUrl}/users/list${i?`?role_id=${i}`:""}`,{headers:{Authorization:`Bearer ${o.value}`}}));((O=(F=N.value)==null?void 0:F.data)==null?void 0:O.length)>0&&(w.value=(R=N.value)==null?void 0:R.data.map((A,q)=>({...A,index:q+1})))},ke=async()=>{var j,F,O,R;const i=G("token"),{data:o,pending:N,error:$}=await _e("roleLiist",()=>$fetch(`${B.public.apiUrl}/roles/list`,{headers:{Authorization:`Bearer ${i.value}`}}));((F=(j=o.value)==null?void 0:j.data)==null?void 0:F.length)>0&&(C.value=(O=o.value)==null?void 0:O.data.map((A,q)=>({...A,index:q+1})),ve.value=(R=o.value)==null?void 0:R.data.map(A=>({name:A.name,id:A.id})),console.log("rolesLists",C.value))},Ve=()=>{v.value={global:{value:null,matchMode:Le.CONTAINS}}};G("rolePermission"),ae(()=>{K(),ke(),d.value=!1}),Ve();const Ue=()=>{if(w.value.length>0){const i=`data:text/csv;charset=utf-8,"Serial No.","Employee Name","Email","Phone","Address","User Type",
`+w.value.map(($,j)=>{const F=j+1,O=$.name,R=$.email,A=$.phone,q=$.address,ce=$.user_type;return`"${F}","${O}","${R}","${A}","${q}","${ce}"`}).join(`
`),o=encodeURI(i),N=document.createElement("a");N.setAttribute("href",o),N.setAttribute("download","tasks.csv"),document.body.appendChild(N),N.click(),document.body.removeChild(N)}else y.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})};return(i,o)=>{const N=Ie,$=le,j=Se,F=Ne,O=te,R=Pe,A=Te,q=Ae,ce=Me("tooltip");return e(z)?(U(),Y("div",wl,[t("div",kl,[s(N,{position:"bottom-right",group:"br"}),Vl]),s(A,{class:"border-0 px-0"},{start:P(()=>[e(S)?(U(),H($,{key:0,icon:"pi pi-plus",label:"Create",onClick:I,class:"mr-2",severity:"secondary"})):L("",!0),e(S)?(U(),H($,{key:1,icon:"pi pi-users",onClick:be,label:"Invite a guest",severity:"secondary"})):L("",!0)]),end:P(()=>[Be(s($,{onClick:o[0]||(o[0]=n=>Ue(i.tasks)),loading:e(d),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"]),[[ce,{value:"Download Tasks"},void 0,{right:!0}]]),s(j,{onChange:o[1]||(o[1]=n=>we()),modelValue:e(J),"onUpdate:modelValue":o[2]||(o[2]=n=>_(J)?J.value=n:null),options:e(ve),display:"chip",filter:"",resetFilterOnHide:"",maxSelectedLabels:2,optionLabel:"name",placeholder:"Filter User Type",class:"w-full mx-2 filtr"},null,8,["modelValue","options"]),s(R,{iconPosition:"right",raised:""},{default:P(()=>[s(F,null,{default:P(()=>[Ul]),_:1}),s(O,{modelValue:e(v).global.value,"onUpdate:modelValue":o[3]||(o[3]=n=>e(v).global.value=n),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),s(e(De),{filters:e(v),"onUpdate:filters":o[4]||(o[4]=n=>_(v)?v.value=n:null),class:"table-st",value:e(w),stripedRows:"",paginator:"",rowsPerPageOptions:[5,10,20,50],tableStyle:"min-width: 50rem",rows:10,dataKey:"id",filterDisplay:"menu",loading:e(d)},{empty:P(()=>[Cl]),loading:P(()=>[s(q,{style:{width:"50px",height:"50px"}})]),default:P(()=>[s(e(X),{field:"index",header:"Serial",sortable:""}),s(e(X),{field:"name",header:"Employee Name"}),s(e(X),{field:"email",header:"Email Address"}),s(e(X),{field:"phone",header:"Phone"}),s(e(X),{field:"user_type",header:"User Type"}),s(e(X),{field:"action",header:"Action"},{body:P(n=>[e(T)?(U(),H($,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:Ce=>Ee(n.data)},null,8,["onClick"])):L("",!0),e(T)?L("",!0):(U(),H($,{key:1,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(E)?(U(),H($,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:Ce=>ge(n.data.id)},null,8,["onClick"])):L("",!0),e(E)?L("",!0):(U(),H($,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),s(e(ee),{visible:e(x),"onUpdate:visible":o[6]||(o[6]=n=>_(x)?x.value=n:null),modal:"",header:"Create Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:P(()=>[s(ll,{param:{rolesLists:e(C)},onCloseCreateModal:o[5]||(o[5]=n=>f(n))},null,8,["param"])]),_:1},8,["visible"]),s(e(ee),{visible:e(h),"onUpdate:visible":o[8]||(o[8]=n=>_(h)?h.value=n:null),modal:"",header:"Edit Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:P(()=>[s(fl,{param:{id:e(r),name:e(D),address:e(g),phone:e(a),email:e(m),user_type:e(k),rolesLists:e(C)},onCloseEditModal:o[7]||(o[7]=n=>V(n))},null,8,["param"])]),_:1},8,["visible"]),s(e(ee),{visible:e(b),"onUpdate:visible":o[10]||(o[10]=n=>_(b)?b.value=n:null),header:" ",style:{width:"25rem"}},{default:P(()=>[Il,s($,{label:"No",icon:"pi pi-times",text:"",onClick:o[9]||(o[9]=n=>b.value=!1)}),s($,{label:"Yes",icon:"pi pi-check",text:"",onClick:xe,loading:e(c)},null,8,["loading"])]),_:1},8,["visible"]),s(e(ee),{visible:e(p),"onUpdate:visible":o[12]||(o[12]=n=>_(p)?p.value=n:null),modal:"",header:"Invite Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:P(()=>[s(xl,{param:{rolesLists:e(C)},onCloseInviteModal:o[11]||(o[11]=n=>$e(n))},null,8,["param"])]),_:1},8,["visible"])])):L("",!0)}}},Et=oe(Sl,[["__scopeId","data-v-2dfecf67"]]);export{Et as default};
