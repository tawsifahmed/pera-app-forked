import W from"./inputtext.esm.d5eee7d7.js";import Y from"./inputicon.esm.cf1a30a2.js";import G from"./divider.esm.bd3fbb24.js";import K from"./password.esm.b6faab0b.js";import Q from"./button.esm.5e19325a.js";import{_ as X}from"./nuxt-link.2c1631fb.js";import{a2 as Z,a6 as ee,ad as se,aj as ae,V as re,$ as m,a7 as le,b as l,i as e,l as r,u as te,I as C,q as d,e as p,w as P,t as oe,k as ie,F as ue,o as t,a3 as ne,a4 as me}from"./entry.39b87fbf.js";import{_ as M}from"./avatar.9eb2e682.js";import{u as de}from"./layout.2b316a23.js";import ce from"./AppConfig.58f9b729.js";import pe from"./toast.esm.a47bef80.js";import{u as I}from"./auth.d8c9d610.js";import"./basecomponent.esm.b0e02d81.js";import"./index.esm.63ccac96.js";import"./baseicon.esm.78269063.js";import"./overlayeventbus.esm.42ec4436.js";import"./portal.esm.6123b056.js";import"./badge.esm.153b1648.js";import"./index.esm.9511de23.js";import"./inputswitch.esm.6be6c052.js";import"./selectbutton.esm.37f163b4.js";import"./sidebar.esm.578625ce.js";import"./index.esm.4c77e9d0.js";import"./index.esm.68b39fb5.js";import"./index.esm.6159b65b.js";import"./index.esm.5c5ddc00.js";import"./fetch.7ef59f45.js";import"./cookie.0a2ee428.js";const i=x=>(ne("data-v-b6a2001b"),x=x(),me(),x),fe={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden pt-1"},ve={class:"flex flex-column align-items-center justify-content-center"},_e={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},he={key:0,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},xe=i(()=>e("div",{class:"text-center mb-5"},[e("img",{src:M,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mb-3"},"Sign Up")],-1)),ge={class:"field md:w-28rem mb-4"},be=i(()=>e("label",{for:"name",class:"block text-900 text-xl font-medium mb-2"},"Full Name",-1)),we={key:0,id:"name-help",class:"error-report red-text"},ye={class:"field md:w-28rem mb-4"},Ee=i(()=>e("label",{for:"email",class:"block text-900 text-xl font-medium mb-2"},"Work Email",-1)),Pe={key:0,id:"email-help",class:"error-report red-text"},ke={class:"field md:w-28rem mb-4"},Ve=i(()=>e("label",{for:"password",class:"block text-900 font-medium text-xl mb-2"},"Password",-1)),Te=i(()=>e("h6",null,"Pick a password",-1)),Ne=i(()=>e("p",{class:"mt-2"},"Suggestions",-1)),Se=i(()=>e("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[e("li",null,"At least one lowercase"),e("li",null,"At least one uppercase"),e("li",null,"At least one numeric"),e("li",null,"Minimum 8 characters")],-1)),Oe={key:0,id:"password-help",class:"error-report red-text"},Ce={class:"field md:w-28rem mb-4"},Ie=i(()=>e("label",{for:"password2",class:"block text-900 font-medium text-xl mb-2"},"Confirm Password",-1)),Me={key:0,id:"password-help",class:"error-report red-text"},Re={key:1,id:"password-help",class:"error-report red-text"},Ue={class:"flex flex-wrap items-center justify-between mt-4"},$e={key:1,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},Be=i(()=>e("div",{class:"text-center mb-5"},[e("img",{src:M,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mb-3"},"Verify Your Email")],-1)),Fe={class:"field md:w-28rem mb-4"},qe=i(()=>e("label",{for:"name",class:"block text-900 text-xl font-medium mb-2"},"OTP",-1)),je={key:0,id:"name-help",class:"error-report red-text"},Ae={class:"flex flex-wrap items-center justify-between mt-4"},De={key:0},He={key:1,class:""},Le=["disabled"],ze={__name:"index",setup(x){const{registerUser:R,otpVerify:U,resendOtp:$}=I(),{authenticated:k,authOtp:Je,checkOTP:B,resendOtpResponse:F,resendOtpMsg:g,detectDuplicateEmail:q}=ee(I()),f=se(),j=ae(),{layoutConfig:A}=de();re(()=>`/layout/images/${A.darkTheme.value?"logo-white":"logo-dark"}.svg`);const V=m(!0),b=m(!1),a=m({userName:null,email:null,password:null,confirmPass:null}),c=m({email:null,password:null,otp:null}),s=m({userNameError:!1,emailError:!1,passwordError:!1,confirmPassError:!1,confirmPassMismatch:!1,otpError:!1}),u=m(!1),_=m(),T=m(!1);let w=null;const y=()=>{_.value=30,T.value=!1,w=setInterval(()=>{_.value>0?_.value-=1:(clearInterval(w),T.value=!0)},1e3)},D=async()=>{if(u.value=!0,a.value.userName?s.value.userNameError=!1:s.value.userNameError=!0,a.value.email?s.value.emailError=!1:s.value.emailError=!0,a.value.password?s.value.passwordError=!1:s.value.passwordError=!0,a.value.confirmPass?s.value.confirmPassError=!1:s.value.confirmPassError=!0,a.value.confirmPass&&a.value.password!==a.value.confirmPass&&(s.value.confirmPassError=!1,s.value.confirmPassMismatch=!0),a.value.password===a.value.confirmPass&&(s.value.confirmPassMismatch=!1),a.value.confirmPass===""&&(s.value.confirmPassMismatch=!1,s.value.confirmPassError=!0),s.value.userNameError||s.value.emailError||s.value.passwordError||s.value.confirmPassError||s.value.confirmPassMismatch)u.value=!1;else{if(await R(a.value),q.value===!0){f.add({severity:"error",summary:"Error",detail:"The email has already been taken",group:"br",life:3e3}),u.value=!1;return}else B.value===!0?(console.log("authenticated =>",k.value),f.add({severity:"success",summary:"Successfully Registered",detail:"Now verify email using OTP",group:"br",life:5e3}),c.value.email=a.value.email,c.value.password=a.value.password,V.value=!1,b.value=!0,y()):f.add({severity:"error",summary:"Registration Error",detail:"",group:"br",life:3e3});u.value=!1}},H=async()=>{u.value=!0,c.value.email?s.value.emailError=!1:s.value.emailError=!0,c.value.otp?s.value.otpError=!1:s.value.otpError=!0,s.value.emailError||s.value.otpError||(await U(c.value),k.value===!0?(f.add({severity:"success",summary:"Successfully Verified",detail:g,group:"br",life:3e3}),setTimeout(()=>{j.push("/login")},300)):f.add({severity:"error",summary:"Verification Failed",detail:g,group:"br",life:3e3})),u.value=!1},h=m(!1),L=async()=>{h.value=!0,await $({email:c.value.email}),F.value===!0?(h.value=!1,f.add({severity:"info",summary:"OTP Resent",detail:g,group:"br",life:3e3}),y()):(h.value=!1,f.add({severity:"error",summary:"Error",detail:g,group:"br",life:3e3}))};return le(()=>b.value,N=>{N?y():clearInterval(w)}),(N,o)=>{const E=W,v=Y,z=G,S=K,O=Q,J=X;return t(),l(ue,null,[e("div",fe,[e("div",ve,[r(te(pe),{position:"bottom-right",group:"br"}),e("div",_e,[V.value?(t(),l("div",he,[xe,e("form",{onSubmit:C(D,["prevent"])},[e("div",ge,[be,r(E,{id:"name",modelValue:a.value.userName,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value.userName=n),type:"text",placeholder:"John Doe",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),s.value.userNameError?(t(),l("small",we,[r(v,{class:"pi pi-exclamation-triangle"}),d(" Full name required! ")])):p("",!0)]),e("div",ye,[Ee,r(E,{id:"email",modelValue:a.value.email,"onUpdate:modelValue":o[1]||(o[1]=n=>a.value.email=n),type:"email",placeholder:"example@gmail.com",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),s.value.emailError?(t(),l("small",Pe,[r(v,{class:"pi pi-exclamation-triangle"}),d(" Email required! ")])):p("",!0)]),e("div",ke,[Ve,r(S,{id:"password",modelValue:a.value.password,"onUpdate:modelValue":o[2]||(o[2]=n=>a.value.password=n),placeholder:"Password",toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},{header:P(()=>[Te]),footer:P(()=>[r(z),Ne,Se]),_:1},8,["modelValue"]),s.value.passwordError?(t(),l("small",Oe,[r(v,{class:"pi pi-exclamation-triangle"}),d(" Password required! ")])):p("",!0)]),e("div",Ce,[Ie,r(S,{id:"password2",modelValue:a.value.confirmPass,"onUpdate:modelValue":o[3]||(o[3]=n=>a.value.confirmPass=n),placeholder:"Confirm Password",feedback:!1,toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},null,8,["modelValue"]),s.value.confirmPassError?(t(),l("small",Me,[r(v,{class:"pi pi-exclamation-triangle"}),d(" Confirm Password required! ")])):p("",!0),s.value.confirmPassMismatch?(t(),l("small",Re,[r(v,{class:"pi pi-exclamation-triangle"}),d(" Confirm Password did not match! ")])):p("",!0)]),r(O,{type:"submit",label:"Sign Up",loading:u.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32),e("div",Ue,[d(" Already have an account?  "),r(J,{to:"/login",class:"forgot_pass md:mb-0"},{default:P(()=>[d("Click Here. ")]),_:1})])])):p("",!0),b.value?(t(),l("div",$e,[Be,e("form",{onSubmit:C(H,["prevent"])},[e("div",Fe,[qe,r(E,{id:"name",modelValue:c.value.otp,"onUpdate:modelValue":o[4]||(o[4]=n=>c.value.otp=n),type:"text",placeholder:"Enter OTP",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),s.value.otpError?(t(),l("small",je,[r(v,{class:"pi pi-exclamation-triangle"}),d(" OTP required! ")])):p("",!0)]),r(O,{type:"submit",label:"Verify",loading:u.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32),e("div",Ae,[_.value>0?(t(),l("span",De,"Resend OTP in "+oe(_.value)+"s",1)):(t(),l("span",He,[d("Resend OTP?  "),e("button",{onClick:L,class:ie(["forgot_pass md:mb-0 cursor-pointer text-blue-600",h.value?"blink_text":""]),disabled:h.value},"Click Here",10,Le)]))])])):p("",!0)])])]),r(ce,{simple:""})],64)}}},ws=Z(ze,[["__scopeId","data-v-b6a2001b"]]);export{ws as default};
