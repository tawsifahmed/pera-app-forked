import Me from"./toast.esm.b0531f89.js";import ce from"./button.esm.3b86381e.js";import Ve from"./inputicon.esm.06a6089c.js";import ue from"./inputtext.esm.1adcdca4.js";import Se from"./iconfield.esm.ade3cb3b.js";import Ce from"./toolbar.esm.f70d2b5c.js";import Ee from"./progressspinner.esm.db02b4fc.js";import{a2 as me,$ as l,a4 as pe,a as Ue,o as k,b as I,i as t,q as _,s as Q,l as a,u as e,a6 as x,e as j,a7 as ve,a8 as fe,ca as _e,a5 as be,w as v,P as Ie,c as re,t as Z,F as he,f as Te,K as Ne}from"./entry.ac7f7863.js";import{u as ee,a as xe,b as Be}from"./cookie.3945ca3b.js";import F from"./column.esm.0912c493.js";import Ae from"./datatable.esm.e14ce81f.js";import ge from"./textarea.esm.54f73921.js";import ye from"./dropdown.esm.41ec9c30.js";import De from"./multiselect.esm.d7f23f7e.js";import{u as te}from"./company.b2683794.js";import{a as P}from"./usePermission.696200f7.js";import de from"./dialog.esm.d0098eaa.js";import"./portal.esm.9859a090.js";import"./basecomponent.esm.9e3a8801.js";import"./index.esm.ce62ee13.js";import"./baseicon.esm.0b1bbe6c.js";import"./index.esm.5b8bc08b.js";import"./index.esm.3be4e240.js";import"./index.esm.3a2b51ac.js";import"./badge.esm.95c9c5c2.js";import"./index.esm.da1576e5.js";import"./paginator.esm.191359e7.js";import"./index.esm.134b9ad1.js";import"./inputnumber.esm.0bf6a2e4.js";import"./index.esm.d3b3d2a0.js";import"./index.esm.34f4e146.js";import"./index.esm.3e0a6883.js";import"./index.esm.dabc14ae.js";import"./index.esm.cc5d2015.js";import"./overlayeventbus.esm.90e85a42.js";import"./virtualscroller.esm.0243c540.js";import"./index.esm.45d2fbbf.js";import"./index.esm.80d49dba.js";import"./checkbox.esm.039a8c45.js";import"./radiobutton.esm.8a177837.js";import"./index.esm.aa6b8b51.js";import"./index.esm.efe5814b.js";import"./workCompany.11c26d14.js";const le=d=>(ve("data-v-3f2cc4f7"),d=d(),fe(),d),Fe={class:"field"},Oe={for:"company"},ze=le(()=>t("i",{class:"text-red-400"},"*",-1)),qe={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},je={class:"field flex flex-column"},He={for:"email"},Ke={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Re={class:"field flex flex-column"},Qe=le(()=>t("i",{class:"text-red-400"},"*",-1)),Ye={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ge={class:"field flex flex-column"},Je=le(()=>t("i",{class:"text-red-400"},"*",-1)),We={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Xe={class:"field"},Ze=le(()=>t("i",{class:"text-red-400"},"*",-1)),Pe={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},et={key:0,style:{color:"red"}},tt={class:"create-btn-wrapper mb-0"},lt={__name:"CreateTeam",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(d,{emit:H}){const O=_e(),A=l(d.param.usersLists),u=l([]),L=l([]),S=l([]),m=pe(),f=l(""),p=l(""),y=l(!1),h=l(!1),D=l(!0),$=H,w=l(!1),z=async()=>{var c;if(w.value=!0,f.value===""||u.value.length===0||L.value.length===0||S.value.length===0){h.value=!0,w.value=!1;return}else if(h.value=!1,!h.value){const i=ee("token"),{data:T,error:n,pending:b}=await xe(`${O.public.apiUrl}/teams/create`,{method:"POST",headers:{Authorization:`Bearer ${i.value}`},body:{name:f.value,description:p.value,team_lead_id:u.value.id,line_manager_id:L.value.id,members:S.value.map(C=>C.id)}},"$LDh3IAOr92");if(((c=T==null?void 0:T.value)==null?void 0:c.code)===201){w.value=!1,f.value=null,p.value=null,u.value=[],L.value=[],S.value=[],D.value=!1,$("closeCreateModal",!1),m.add({severity:"success",summary:"Success",detail:"Team created successfully!",group:"br",life:3e3});return}else{w.value=!1,m.add({severity:"error",summary:"Error",detail:"Failed to create team!",group:"br",life:3e3});return}}};return(c,i)=>{const T=ue,n=ge,b=ye,C=De,U=ce,M=Ue("tooltip");return k(),I("div",null,[t("div",Fe,[t("label",Oe,[_("Name"),ze,_(),Q(t("span",qe,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(T,{modelValue:e(f),"onUpdate:modelValue":i[0]||(i[0]=g=>x(f)?f.value=g:null),class:"w-full"},null,8,["modelValue"])]),t("div",je,[t("label",He,[_("Description "),Q(t("span",Ke,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(n,{id:"description",class:"border-gray-300",modelValue:e(p),"onUpdate:modelValue":i[1]||(i[1]=g=>x(p)?p.value=g:null),rows:"3",cols:"20",invalid:e(y)},null,8,["modelValue","invalid"])]),t("div",Re,[t("label",null,[_("Line Manager"),Qe,_(),Q(t("span",Ye,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(b,{modelValue:e(L),"onUpdate:modelValue":i[2]||(i[2]=g=>x(L)?L.value=g:null),options:e(A),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Ge,[t("label",null,[_("Team Lead"),Je,_(),Q(t("span",We,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(b,{modelValue:e(u),"onUpdate:modelValue":i[3]||(i[3]=g=>x(u)?u.value=g:null),options:e(A),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Xe,[t("label",null,[_("Team Members"),Ze,_(),Q(t("span",Pe,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(C,{display:"chip",modelValue:e(S),"onUpdate:modelValue":i[4]||(i[4]=g=>x(S)?S.value=g:null),options:e(A),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e(h)?(k(),I("p",et,"Please fill/check up all the fields")):j("",!0),t("div",tt,[a(U,{loading:e(w),label:"Save",icon:"pi pi-check",text:"",onClick:z},null,8,["loading"])])])}}},at=me(lt,[["__scopeId","data-v-3f2cc4f7"]]);const Y=d=>(ve("data-v-926adf0c"),d=d(),fe(),d),ot={class:"field"},st=Y(()=>t("label",{for:"company"},[_("Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),it={class:"field flex flex-column"},nt=Y(()=>t("label",{for:"email"},"Description",-1)),rt={class:"field flex flex-column"},dt=Y(()=>t("label",null,[_("Line Manager"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ct={class:"field flex flex-column"},ut=Y(()=>t("label",null,[_("Team Lead"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),mt={class:"field"},pt=Y(()=>t("label",null,[_("Team Members"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),vt={key:0,style:{color:"red"}},ft={class:"create-btn-wrappe"},_t={__name:"EditTeam",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(d,{emit:H}){const O=te(),{getTaskAssignModalData:K}=te(),A=_e(),u=d,L=pe(),S=l(u.param.id),m=l(u.param.editName),f=l(u.param.editDescription),p=l(u.param.editLineManager),y=l(u.param.editTeamLead),h=l(u.param.editMembers),D=l(O.users),$=l(!1),w=l(!0),z=H,c=l(!1),i=async()=>{var T;if(c.value=!0,m.value===""||y.value.length===0||p.value.length===0||h.value.length===0){$.value=!0,c.value=!1;return}else if($.value=!1,!$.value){const n=ee("token"),{data:b,error:C,pending:U}=await xe(`${A.public.apiUrl}/teams/update/${S.value}`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:m.value,description:f.value,team_lead_id:y.value.id,line_manager_id:p.value.id,members:h.value.map(M=>M.id)}},"$L7Q6VHiEVV");if(((T=b==null?void 0:b.value)==null?void 0:T.code)===200){c.value=!1,w.value=!1,z("closeEditModal",!1),L.add({severity:"success",summary:"Success",detail:"Team Updated successfully!",group:"br",life:3500});return}else{c.value=!1,L.add({severity:"error",summary:"Error",detail:"Failed to update team!",group:"br",life:3e3});return}}};return be(async()=>{await K(),D.value=O.users}),(T,n)=>{const b=ue,C=ge,U=ye,M=De,g=ce;return k(),I("div",null,[t("div",ot,[st,a(b,{modelValue:e(m),"onUpdate:modelValue":n[0]||(n[0]=V=>x(m)?m.value=V:null),class:"w-full"},null,8,["modelValue"])]),t("div",it,[nt,a(C,{id:"description",class:"border-gray-300",modelValue:e(f),"onUpdate:modelValue":n[1]||(n[1]=V=>x(f)?f.value=V:null),rows:"3",cols:"20",invalid:T.teamDescriptionError},null,8,["modelValue","invalid"])]),t("div",rt,[dt,a(U,{modelValue:e(p),"onUpdate:modelValue":n[2]||(n[2]=V=>x(p)?p.value=V:null),options:e(D),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",ct,[ut,a(U,{modelValue:e(y),"onUpdate:modelValue":n[3]||(n[3]=V=>x(y)?y.value=V:null),options:e(D),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",mt,[pt,a(M,{display:"chip",modelValue:e(h),"onUpdate:modelValue":n[4]||(n[4]=V=>x(h)?h.value=V:null),options:e(D),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e($)?(k(),I("p",vt,"Please fill/check up all the fields")):j("",!0),t("div",ft,[a(g,{label:"Update",icon:"pi pi-check",text:"",onClick:i,loading:e(c)},null,8,["loading"])])])}}},xt=me(_t,[["__scopeId","data-v-926adf0c"]]);const ae=d=>(ve("data-v-3c1e03dc"),d=d(),fe(),d),ht={key:0,class:"card"},Tt={class:"d-flex mr-2"},bt=ae(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Teams")],-1)),gt=ae(()=>t("i",{class:"pi pi-search"},null,-1)),yt=ae(()=>t("p",{class:"text-center"},"No Data found...",-1)),Dt={style:{display:"flex","flex-wrap":"wrap"}},$t=ae(()=>t("p",null,"Are you sure you want to delete?",-1)),wt={__name:"index",setup(d){const H=te(),{getTaskAssignModalData:O}=te(),K=_e(),A=l(P("read_team")),u=l(P("create_team")),L=l(P("update_team")),S=l(P("delete_team")),m=l(),f=l(!0),p=l(!1),y=l(!1),h=pe(),D=l(!1),$=l(!1),w=l([]),z=l([]),c=l(!1),i=l(""),T=l(""),n=l(""),b=l(null),C=l(null),U=l(null),M=r=>{D.value=!1,G()},g=r=>{$.value=!1,G()},V=async()=>{p.value=!0,await O(),w.value=H.users,D.value=!0,p.value=!1},$e=r=>{console.log("editTeamdata",r),i.value=r.id,$.value=!0,T.value=r.name,n.value=r.description,b.value={id:r.children.data.id,name:r.children.data.name},console.log("editLineManager",b.value),C.value={id:r.children.children.data.id,name:r.children.children.data.name},console.log("editTeamLead",C.value),U.value=r.children.children.children.map(s=>({id:s.data.id,name:s.data.name})),console.log("editMembers",U.value)},we=r=>{c.value=!0,i.value=r},ke=async()=>{y.value=!0;const r=ee("token"),{data:s,pending:oe}=await xe(`${K.public.apiUrl}/teams/delete/${i.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${r.value}`}},"$0jIuqBy51n");s.value.code===200?(c.value=!1,h.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),y.value=!1,G()):(h.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),y.value=!1)},G=async()=>{var J,W,X;const r=ee("token"),{data:s,pending:oe,error:q}=await Be("getTeams",()=>$fetch(`${K.public.apiUrl}/teams/list`,{headers:{Authorization:`Bearer ${r.value}`}}));((W=(J=s.value)==null?void 0:J.data)==null?void 0:W.length)>0&&(z.value=(X=s.value)==null?void 0:X.data.map((se,ie)=>({...se,index:ie+1})))},Le=()=>{m.value={global:{value:null,matchMode:Ie.CONTAINS}}};return be(()=>{G(),f.value=!1}),Le(),(r,s)=>{const oe=Me,q=ce,J=Ve,W=ue,X=Se,se=Ce,ie=Ee;return e(A)?(k(),I("div",ht,[t("div",Tt,[a(oe,{position:"bottom-right",group:"br"}),bt]),a(se,{class:"border-0 px-0"},{start:v(()=>[e(u)?(k(),re(q,{key:0,icon:"pi pi-plus",label:"Create",onClick:V,class:"mr-2",severity:"secondary",loading:e(p)},null,8,["loading"])):j("",!0)]),end:v(()=>[a(X,{iconPosition:"right",raised:""},{default:v(()=>[a(J,null,{default:v(()=>[gt]),_:1}),a(W,{modelValue:e(m).global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e(m).global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),a(e(Ae),{filters:e(m),"onUpdate:filters":s[1]||(s[1]=o=>x(m)?m.value=o:null),class:"table-st",value:e(z),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(f)},{empty:v(()=>[yt]),loading:v(()=>[a(ie,{style:{width:"50px",height:"50px"}})]),footer:v(()=>[_(" In total there are "+Z(e(w)?e(w).length:0)+" rows. ",1)]),default:v(()=>[a(e(F),{field:"index",header:"Serial",sortable:"",style:{width:"5%"}}),a(e(F),{field:"name",header:"Team Name",style:{width:"15%"}}),a(e(F),{field:"description",header:"Description",style:{width:"20%"}}),a(e(F),{field:"Line Manager",header:"Line Manager",style:{width:"10%"}},{body:v(o=>{var E,N,B;return[t("div",null,Z((B=(N=(E=o==null?void 0:o.data)==null?void 0:E.children)==null?void 0:N.data)==null?void 0:B.name),1)]}),_:1}),a(e(F),{field:"Line Manager",header:"Team Lead",style:{width:"10%"}},{body:v(o=>{var E,N,B,R;return[t("div",null,Z((R=(B=(N=(E=o==null?void 0:o.data)==null?void 0:E.children)==null?void 0:N.children)==null?void 0:B.data)==null?void 0:R.name),1)]}),_:1}),a(e(F),{field:"Members",header:"Members",style:{width:"30%"}},{body:v(o=>{var E,N,B;return[t("div",Dt,[(k(!0),I(he,null,Te((B=(N=(E=o==null?void 0:o.data)==null?void 0:E.children)==null?void 0:N.children)==null?void 0:B.children,R=>(k(),I("div",{key:R,style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},[(k(!0),I(he,null,Te(R,ne=>(k(),I("div",{key:ne},[t("div",{class:"mb-1",style:Ne(ne.name?"border: 1px solid rgba(167, 167, 167, 0.486); border-radius: 5px; padding: 2px 5px":" ")},Z(ne.name),5)]))),128))]))),128))])]}),_:1}),a(e(F),{field:"action",header:"Action",style:{width:"10%"}},{body:v(o=>[e(L)?(k(),re(q,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:E=>$e(o.data)},null,8,["onClick"])):j("",!0),e(S)?(k(),re(q,{key:1,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:E=>we(o.data.id)},null,8,["onClick"])):j("",!0)]),_:1})]),_:1},8,["filters","value","loading"]),a(e(de),{visible:e(D),"onUpdate:visible":s[3]||(s[3]=o=>x(D)?D.value=o:null),modal:"",header:"Create Team",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[a(at,{param:{usersLists:e(w)},onCloseCreateModal:s[2]||(s[2]=o=>M(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(de),{visible:e($),"onUpdate:visible":s[5]||(s[5]=o=>x($)?$.value=o:null),modal:"",header:"Edit Team",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[a(xt,{param:{id:e(i),editName:e(T),editDescription:e(n),editLineManager:e(b),editTeamLead:e(C),editMembers:e(U)},onCloseEditModal:s[4]||(s[4]=o=>g(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(de),{visible:e(c),"onUpdate:visible":s[7]||(s[7]=o=>x(c)?c.value=o:null),header:" ",style:{width:"25rem"}},{default:v(()=>[$t,a(q,{label:"No",icon:"pi pi-times",text:"",onClick:s[6]||(s[6]=o=>c.value=!1)}),a(q,{label:"Yes",icon:"pi pi-check",text:"",onClick:ke,loading:e(y)},null,8,["loading"])]),_:1},8,["visible"])])):j("",!0)}}},fl=me(wt,[["__scopeId","data-v-3c1e03dc"]]);export{fl as default};
