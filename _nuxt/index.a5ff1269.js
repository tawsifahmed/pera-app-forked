import xe from"./toast.esm.b315e9a7.js";import W from"./button.esm.cf9d0562.js";import $e from"./inputicon.esm.35508b74.js";import ee from"./inputtext.esm.6420a228.js";import ke from"./iconfield.esm.0540315d.js";import we from"./toolbar.esm.42bfa2eb.js";import Ve from"./progressspinner.esm.8110cf06.js";import{a2 as le,$ as l,a4 as te,a5 as oe,a6 as de,o as V,b as H,i as t,l as o,u as e,a7 as _,e as B,a8 as se,a9 as ae,q as N,ca as ie,c as A,w as C,P as Ie,t as Ue}from"./entry.96805b80.js";import{u as z,a as ne,b as ce}from"./cookie.7ef5219e.js";import q from"./column.esm.4d99c280.js";import Ce from"./datatable.esm.2507d500.js";import pe from"./textarea.esm.ed68f9d3.js";import Se from"./password.esm.8605d0da.js";import ue from"./dropdown.esm.50168ae5.js";import{a as J}from"./usePermission.0205306e.js";import Q from"./dialog.esm.80bb630d.js";import"./portal.esm.15c426bb.js";import"./basecomponent.esm.3decbfca.js";import"./index.esm.efaa8c11.js";import"./baseicon.esm.fddbd52e.js";import"./index.esm.7c32132d.js";import"./index.esm.dae45d6e.js";import"./index.esm.b26aa7fa.js";import"./badge.esm.4581aeeb.js";import"./index.esm.0676624a.js";import"./paginator.esm.32aa8892.js";import"./index.esm.1fa74bfc.js";import"./inputnumber.esm.1b2f00de.js";import"./index.esm.35f58cc1.js";import"./index.esm.ddc74b33.js";import"./index.esm.bfe69164.js";import"./index.esm.a9c0fa91.js";import"./index.esm.5e30471d.js";import"./overlayeventbus.esm.de0024a9.js";import"./virtualscroller.esm.3009a4fc.js";import"./index.esm.f6c0662b.js";import"./index.esm.38168f8e.js";import"./checkbox.esm.c029db23.js";import"./radiobutton.esm.a4b3506e.js";import"./index.esm.02b23df2.js";import"./index.esm.8e48976f.js";import"./index.esm.586d2739.js";const j=n=>(se("data-v-c22831e2"),n=n(),ae(),n),Ne={class:"field"},Pe=j(()=>t("label",{for:"company"},[N("Name"),t("i",{class:"text-red-400 text-italic"},"*"),N(" >")],-1)),Me={class:"field"},Be=j(()=>t("label",{for:"email"},[N("Email address"),t("i",{class:"text-red-400"},"*")],-1)),Le={class:"field"},Te=j(()=>t("label",{for:"phoneNo"},"Phone ",-1)),Ae={class:"field"},De=j(()=>t("label",{for:"company"},"Address ",-1)),Fe={class:"field"},Oe=j(()=>t("label",{for:"company"},[N("Password"),t("i",{class:"text-red-400"},"*")],-1)),Re={class:"field flex flex-column"},ze=j(()=>t("label",null,[N("Role"),t("i",{class:"text-red-400"},"*")],-1)),He={key:0,style:{color:"red"}},qe={class:"create-btn-wrapper mb-0"},je={__name:"CreateEmployee",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(n,{emit:L}){const D=ie(),P=l(n.param.rolesLists),E=l([]),m=te(),r=l(""),d=l(""),y=l(""),x=l(""),c=l("");l("");const h=l(!1),$=l(!0),b=L,i=l(!1),T=async()=>{var p,s,g;if(i.value=!0,r.value===""||d.value===""||c.value===""||E.value.length===0){h.value=!0,i.value=!1;return}else if(h.value=!1,!h.value){const I=z("token"),{data:k,error:v,pending:w}=await ne(`${D.public.apiUrl}/users/create`,{method:"POST",headers:{Authorization:`Bearer ${I.value}`},body:{name:r.value,email:d.value,address:x.value,phone:y.value,password:c.value,password_confirmation:c.value,role:E.value.name}},"$HYNtwi2ZAs");if(v!=null&&v.value){if(((s=(p=v==null?void 0:v.value)==null?void 0:p.data)==null?void 0:s.code)===422){i.value=!1,m.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=k==null?void 0:k.value)==null?void 0:g.code)===201){i.value=!1,r.value=null,d.value=null,y.value=null,x.value=null,c.value=null,$.value=!1,b("closeCreateModal",!1),m.add({severity:"success",summary:"Success",detail:"Employee created successfully!",group:"br",life:3e3});return}else{i.value=!1,m.add({severity:"error",summary:"Error",detail:"Failed to create employee!",group:"br",life:3e3});return}}};return oe(()=>{const p=document.getElementById("createEmployeeName");de(()=>{p&&p.focus()})}),(p,s)=>{const g=ee,I=pe,k=Se,v=ue,w=W;return V(),H("div",null,[t("div",Ne,[Pe,o(g,{id:"createEmployeeName",modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=U=>_(r)?r.value=U:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",Me,[Be,o(g,{type:"email",modelValue:e(d),"onUpdate:modelValue":s[1]||(s[1]=U=>_(d)?d.value=U:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",Le,[Te,o(g,{modelValue:e(y),"onUpdate:modelValue":s[2]||(s[2]=U=>_(y)?y.value=U:null),inputId:"worktype",type:"tel",class:"w-full",maxlength:"14",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",Ae,[De,o(I,{modelValue:e(x),"onUpdate:modelValue":s[3]||(s[3]=U=>_(x)?x.value=U:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",Fe,[Oe,o(k,{modelValue:e(c),"onUpdate:modelValue":s[4]||(s[4]=U=>_(c)?c.value=U:null),placeholder:"Enter password",feedback:!1,invalid:p.confirmPassError,toggleMask:"",class:"w-full",inputClass:"w-full"},null,8,["modelValue","invalid"])]),t("div",Re,[ze,o(v,{modelValue:e(E),"onUpdate:modelValue":s[5]||(s[5]=U=>_(E)?E.value=U:null),options:e(P),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(V(),H("p",He,"Please fill/check up all the fields")):B("",!0),t("div",qe,[o(w,{loading:e(i),label:"Save",icon:"pi pi-check",text:"",onClick:T},null,8,["loading"])])])}}},Ge=le(je,[["__scopeId","data-v-c22831e2"]]);const X=n=>(se("data-v-a1134ad4"),n=n(),ae(),n),Ye={class:"field"},Ke=X(()=>t("label",{for:"company"},[N("Name"),t("i",{class:"text-red-500"},"*")],-1)),Xe={class:"field"},Ze=X(()=>t("label",{for:"email"},[N("Email address"),t("i",{class:"text-red-500"},"*")],-1)),Je={class:"field"},Qe=X(()=>t("label",{for:"worktype"},"Phone",-1)),We={class:"field"},el=X(()=>t("label",{for:"company"},"Address",-1)),ll={class:"field flex flex-column"},tl=X(()=>t("label",null,[N("Role"),t("i",{class:"text-red-500"},"*")],-1)),ol={key:0,style:{color:"red"}},sl={class:"create-btn-wrappe"},al={__name:"EditEmployee",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(n,{emit:L}){const D=ie(),S=n,P=te(),E=l(S.param.id),m=l(S.param.name),r=l(S.param.email),d=l(S.param.phone),y=l(S.param.address),x=l(S.param.rolesLists),c=l(S.param.user_type),h=l(!1),$=l(!0),b=L,i=l(!1),T=async()=>{var p,s,g;if(i.value=!0,m.value===""||r.value===""){h.value=!0,i.value=!1;return}else if(h.value=!1,!h.value){const I=z("token"),{data:k,error:v,pending:w}=await ne(`${D.public.apiUrl}/users/update/${E.value}`,{method:"POST",headers:{Authorization:`Bearer ${I.value}`},body:{name:m.value,email:r.value,address:y.value,phone:d.value,role:c.value.name}},"$D8HfpvkorG");if(v!=null&&v.value){if(((s=(p=v==null?void 0:v.value)==null?void 0:p.data)==null?void 0:s.code)===500){i.value=!1,P.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((g=k==null?void 0:k.value)==null?void 0:g.code)===200){i.value=!1,$.value=!1,b("closeEditModal",!1),P.add({severity:"success",summary:"Success",detail:"Employee Updated successfully!",group:"br",life:3e3});return}else{i.value=!1,P.add({severity:"error",summary:"Error",detail:"Failed to update employee!",group:"br",life:3e3});return}}};return oe(()=>{const p=document.getElementById("editEmployeeName");de(()=>{p&&p.focus()})}),(p,s)=>{const g=ee,I=pe,k=ue,v=W;return V(),H("div",null,[t("div",Ye,[Ke,o(g,{id:"editEmployeeName",modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=w=>_(m)?m.value=w:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",Xe,[Ze,o(g,{type:"email",modelValue:e(r),"onUpdate:modelValue":s[1]||(s[1]=w=>_(r)?r.value=w:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",Je,[Qe,o(g,{modelValue:e(d),"onUpdate:modelValue":s[2]||(s[2]=w=>_(d)?d.value=w:null),type:"tel",class:"w-full",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",We,[el,o(I,{modelValue:e(y),"onUpdate:modelValue":s[3]||(s[3]=w=>_(y)?y.value=w:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",ll,[tl,o(k,{modelValue:e(c),"onUpdate:modelValue":s[4]||(s[4]=w=>_(c)?c.value=w:null),options:e(x),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(h)?(V(),H("p",ol,"Please fill/check up all the fields")):B("",!0),t("div",sl,[o(v,{label:"Update",icon:"pi pi-check",text:"",onClick:T,loading:e(i)},null,8,["loading"])])])}}},il=le(al,[["__scopeId","data-v-a1134ad4"]]);const me=n=>(se("data-v-d515e90e"),n=n(),ae(),n),nl={class:"field"},rl=me(()=>t("label",{for:"email"},[N("Email address"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),dl={class:"field flex flex-column"},ul=me(()=>t("label",null,[N("Role"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),cl={key:0,style:{color:"red"}},pl={class:"create-btn-wrapper"},ml={__name:"InviteGuest",props:{param:{type:Object,required:!0}},emits:["closeInviteModal"],setup(n,{emit:L}){const D=ie(),P=l(n.param.rolesLists),E=l([]),m=te(),r=l(""),d=l(!1),y=l("false"),x=l(!0),c=L,h=async()=>{var $;if(r.value===""||E.value.length===0){d.value=!0;return}else if(y.value=!0,d.value=!1,!d.value){const b=z("token"),{data:i,pending:T}=await ne(`${D.public.apiUrl}/invite-user`,{method:"POST",headers:{Authorization:`Bearer ${b.value}`},body:{email:r.value,role:E.value.name}},"$uaOzqXhdzF");(($=i==null?void 0:i.value)==null?void 0:$.code)===201?(r.value=null,x.value=!1,c("closeInviteModal",!1),y.value=!1,m.add({severity:"success",summary:"Success",detail:"Employee invitation sent!",group:"br",life:3e3})):m.add({severity:"error",summary:"Error",detail:"Employee invitation failed!",group:"br",life:3e3})}};return oe(()=>{const $=document.getElementById("inviteEmail");de(()=>{$&&$.focus()})}),($,b)=>{const i=ee,T=ue,p=W;return V(),H("div",null,[t("div",nl,[rl,o(i,{id:"inviteEmail",type:"email",modelValue:e(r),"onUpdate:modelValue":b[0]||(b[0]=s=>_(r)?r.value=s:null),class:"w-full"},null,8,["modelValue"])]),t("div",dl,[ul,o(T,{modelValue:e(E),"onUpdate:modelValue":b[1]||(b[1]=s=>_(E)?E.value=s:null),options:e(P),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(d)?(V(),H("p",cl,"Please fill/check up all the fields")):B("",!0),t("div",pl,[e(y)=="false"?(V(),A(p,{key:0,label:"Send",icon:"pi pi-check",text:"",onClick:h})):(V(),A(p,{key:1,label:"Sending...",icon:"pi pi-spin pi-spinner",text:"",disabled:""}))])])}}},vl=le(ml,[["__scopeId","data-v-d515e90e"]]);const re=n=>(se("data-v-4310e497"),n=n(),ae(),n),fl={key:0,class:"card"},_l={class:"d-flex mr-2"},yl=re(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Employees")],-1)),hl=re(()=>t("i",{class:"pi pi-search"},null,-1)),bl=re(()=>t("p",{class:"text-center"},"No Data found...",-1)),El=re(()=>t("p",null,"Are you sure you want to delete?",-1)),gl={__name:"index",setup(n){const L=ie(),D=l(J("read_user")),S=l(J("create_user")),P=l(J("update_user")),E=l(J("delete_user")),m=l(),r=l(!0),d=l(!1),y=te(),x=l(!1),c=l(!1),h=l(!1),$=l([]),b=l(!1),i=l(""),T=l(""),p=l(""),s=l(""),g=l(""),I=l([]),k=l([]),v=f=>{x.value=!1,G()},w=f=>{h.value=!1,G()},U=()=>{x.value=!0},ve=()=>{c.value=!0},fe=f=>{c.value=!1,G()};l([]);const _e=f=>{h.value=!0,i.value=f.id,T.value=f.name,p.value=f.email,s.value=f.phone,g.value=f.address,k.value=f.user_type,I.value.map(a=>{a.name===f.user_type&&(k.value=a)})},ye=f=>{b.value=!0,i.value=f},he=async()=>{d.value=!0;const f=z("token"),{data:a,pending:Z}=await ne(`${L.public.apiUrl}/users/delete/${i.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${f.value}`}},"$BmbV2j3TY3");a.value.code===200?(b.value=!1,y.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),d.value=!1,G()):(y.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),d.value=!1)},G=async()=>{var F,O,R;const f=z("token"),{data:a,pending:Z,error:M}=await ce("taskAssignModalData",()=>$fetch(`${L.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${f.value}`}}));((O=(F=a.value)==null?void 0:F.data)==null?void 0:O.length)>0&&($.value=(R=a.value)==null?void 0:R.data.map((Y,K)=>({...Y,index:K+1})))},be=async()=>{var F,O,R;const f=z("token"),{data:a,pending:Z,error:M}=await ce("roleLiist",()=>$fetch(`${L.public.apiUrl}/roles/list`,{headers:{Authorization:`Bearer ${f.value}`}}));((O=(F=a.value)==null?void 0:F.data)==null?void 0:O.length)>0&&(I.value=(R=a.value)==null?void 0:R.data.map((Y,K)=>({...Y,index:K+1})))},Ee=()=>{m.value={global:{value:null,matchMode:Ie.CONTAINS}}};return z("rolePermission"),oe(()=>{G(),be(),r.value=!1}),Ee(),(f,a)=>{const Z=xe,M=W,F=$e,O=ee,R=ke,Y=we,K=Ve;return e(D)?(V(),H("div",fl,[t("div",_l,[o(Z,{position:"bottom-right",group:"br"}),yl]),o(Y,{class:"border-0 px-0"},{start:C(()=>[e(S)?(V(),A(M,{key:0,icon:"pi pi-plus",label:"Create",onClick:U,class:"mr-2",severity:"secondary"})):B("",!0),e(S)?(V(),A(M,{key:1,icon:"pi pi-users",onClick:ve,label:"Invite a guest",severity:"secondary"})):B("",!0)]),end:C(()=>[o(R,{iconPosition:"right",raised:""},{default:C(()=>[o(F,null,{default:C(()=>[hl]),_:1}),o(O,{modelValue:e(m).global.value,"onUpdate:modelValue":a[0]||(a[0]=u=>e(m).global.value=u),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(Ce),{filters:e(m),"onUpdate:filters":a[1]||(a[1]=u=>_(m)?m.value=u:null),class:"table-st",value:e($),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(r)},{empty:C(()=>[bl]),loading:C(()=>[o(K,{style:{width:"50px",height:"50px"}})]),footer:C(()=>[N(" In total there are "+Ue(e($)?e($).length:0)+" rows. ",1)]),default:C(()=>[o(e(q),{field:"index",header:"Serial",sortable:""}),o(e(q),{field:"name",header:"Employee Name"}),o(e(q),{field:"email",header:"Email Address"}),o(e(q),{field:"phone",header:"Phone"}),o(e(q),{field:"user_type",header:"User Type"}),o(e(q),{field:"action",header:"Action"},{body:C(u=>[e(P)?(V(),A(M,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:ge=>_e(u.data)},null,8,["onClick"])):B("",!0),e(P)?B("",!0):(V(),A(M,{key:1,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(E)?(V(),A(M,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ge=>ye(u.data.id)},null,8,["onClick"])):B("",!0),e(E)?B("",!0):(V(),A(M,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(e(Q),{visible:e(x),"onUpdate:visible":a[3]||(a[3]=u=>_(x)?x.value=u:null),modal:"",header:"Create Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:C(()=>[o(Ge,{param:{rolesLists:e(I)},onCloseCreateModal:a[2]||(a[2]=u=>v(u))},null,8,["param"])]),_:1},8,["visible"]),o(e(Q),{visible:e(h),"onUpdate:visible":a[5]||(a[5]=u=>_(h)?h.value=u:null),modal:"",header:"Edit Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:C(()=>[o(il,{param:{id:e(i),name:e(T),address:e(g),phone:e(s),email:e(p),user_type:e(k),rolesLists:e(I)},onCloseEditModal:a[4]||(a[4]=u=>w(u))},null,8,["param"])]),_:1},8,["visible"]),o(e(Q),{visible:e(b),"onUpdate:visible":a[7]||(a[7]=u=>_(b)?b.value=u:null),header:" ",style:{width:"25rem"}},{default:C(()=>[El,o(M,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=u=>b.value=!1)}),o(M,{label:"Yes",icon:"pi pi-check",text:"",onClick:he,loading:e(d)},null,8,["loading"])]),_:1},8,["visible"]),o(e(Q),{visible:e(c),"onUpdate:visible":a[9]||(a[9]=u=>_(c)?c.value=u:null),modal:"",header:"Invite Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:C(()=>[o(vl,{param:{rolesLists:e(I)},onCloseInviteModal:a[8]||(a[8]=u=>fe(u))},null,8,["param"])]),_:1},8,["visible"])])):B("",!0)}}},ut=le(gl,[["__scopeId","data-v-4310e497"]]);export{ut as default};
