import re from"./button.esm.24be1221.js";import ue from"./inputtext.esm.79b87a80.js";import ce from"./textarea.esm.51217ede.js";import de from"./inputgroupaddon.esm.65ea876a.js";import pe from"./inputgroup.esm.0845af6d.js";import me from"./dropdown.esm.20af5602.js";import ve from"./dialog.esm.74271b16.js";import{d as fe}from"./vuedraggable.umd.8f431ae4.js";import{ao as _e,a4 as ke,a3 as ge,$ as n,V as B,ar as z,a as Se,o as g,b as S,l as i,k as he,w as h,u as l,i as t,q as C,t as xe,a7 as f,s as T,e as E,K as Ce,a6 as ye}from"./entry.7d0de8f8.js";import A from"./colorpicker.esm.ef30b91e.js";import{u as be}from"./fetch.958bd54e.js";import{u as Ve}from"./cookie.602dcf02.js";import{u as we}from"./workCompany.901debb0.js";import{u as Pe}from"./company.b4baabea.js";const Ne=we(),je=Pe(),H=_e("workProjects",{state:()=>({isProjectCreated:null}),getters:{save(u){return u.isProjectCreated}},actions:{async createProjects({name:u,description:y,space_id:b,statuses:$,git_project_id:q}){var _;const I=Ve("token"),{data:L,pending:p}=await be("https://pbe.singularitybd.net/api/v1/projects/create",{method:"POST",headers:{Authorization:`Bearer ${I.value}`},body:{name:u,description:y,space_id:b,statuses:$,git_project_id:q}},"$h5ITqNs3Yo");((_=L.value)==null?void 0:_.app_message)==="success"&&(this.isProjectCreated=!0,await Ne.getCompany(),await je.getSingleSpace(b))}}});const De={class:"field"},Te={for:"name"},$e={class:"field"},Ie=t("label",{for:"name"},[C("Project Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Ue={class:"field"},Oe=t("label",{for:"name"},"Project Description ",-1),Be={class:"mb-4"},Ee=t("p",{class:"text-slate-700 mb-2 tracking-wide left-3"},[C("Setup Task Status"),t("i",{class:"text-red-400 text-italic"},"*")],-1),qe={class:"container"},Le=t("p",{class:"pi pi-plus cursor-pointer"},null,-1),Fe={key:0,class:"text-red-600 text-small"},Ge={class:"row mt-2"},Me={class:"col-12 d-flex flex-column p-0"},ze=["onMouseenter"],Ae={style:{"margin-right":"-4px"},width:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",class:"cu-status-manager-status-list-item__drag-handler-icon"},He=t("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},[t("circle",{cx:"5",cy:"5",r:"1"}),t("circle",{cx:"5",cy:"12",r:"1"}),t("circle",{cx:"5",cy:"19",r:"1"}),t("circle",{cx:"12",cy:"5",r:"1"}),t("circle",{cx:"12",cy:"12",r:"1"}),t("circle",{cx:"12",cy:"19",r:"1"})],-1),Re=[He],We={class:"flex align-items-center",style:{width:"89%"}},Ke=["onClick"],Xe=t("p",{class:"pi pi-times"},null,-1),Ye=[Xe],Je={class:""},Qe=t("p",{class:"text-slate-700 mb-2 tracking-wide left-3"},[C("Set Task Close Status"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Ze={class:"container"},et={class:"field"},tt={key:0,class:"text-red-600 text-small"},st={class:"field"},at=t("label",{for:"name"},"Gitlab ID ",-1),lt={key:0,class:"text-center",style:{color:"red"}},St={__name:"CreateSpecificProject",props:["singleSpace","spaces","isPage"],setup(u){const y=ke(),b=H(),{save:$}=ge(H()),{singleSpace:q,spaces:I,isPage:L}=u,p=n(!1),_=n(!1),R=n(!0),F=n(!1),U=n(null),W=n(!0),K=B(()=>({animation:250,group:"tasks",disabled:!W.value,ghostClass:"ghost"})),X=B(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",margin:"8px 0px"})),Y=B(()=>({backgroundColor:"#f9f9f9",boxShadow:"0px 4px 4px #e2e2e3",cursor:"grab",margin:"8px 0px"})),c=n(""),s=n([{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}]),V=n("6466f1"),G=n(null),w=n(!1),J=n(!1),d=n(null),P=n(null),m=n(""),Q=()=>{var o;if(c.value?w.value=!1:w.value=!0,((o=c==null?void 0:c.value)==null?void 0:o.length)>0){const e={taskStatusName:c.value,taskStatusColor:`#${V.value}`,is_closed_status:0,serial_no:s.value.length+1};s.value.push(e),c.value=""}else w.value=!0;s.value.length>0&&(G.value=!0)},Z=o=>{var e,v;s.value.splice(o,1),((e=r.value)==null?void 0:e.is_closed_status)===((v=s.value[o])==null?void 0:v.is_closed_status)&&(r.value=null),s.value.length==0&&(G.value=!1)},r=n(null);z(r,o=>{o&&s.value.forEach(e=>{e.is_closed_status=e.taskStatusName===o.taskStatusName?1:0}),console.log("taskStatusList",s.value)}),z(s,o=>{o.forEach((e,v)=>{e.serial_no=v+1})});const x=n(!1),ee=async()=>{if(x.value=!0,d.value===null||s.value.length<=0||r.value===null)_.value=!0,x.value=!1;else{_.value=!1,s.value=s.value.map(e=>(e.taskStatusColor.startsWith("#")||(e.taskStatusColor=`#${e.taskStatusColor}`),e));const o={name:d.value,description:m.value,space_id:I,statuses:s.value,git_project_id:P.value};console.log("statuses",s.value),await b.createProjects(o),$.value===!0?(p.value=!1,d.value=null,m.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value=null,x.value=!1,y.add({severity:"success",summary:"Success!",detail:"Project created successfully!",group:"br",life:3e3})):(y.add({severity:"error",summary:"Failed",detail:"Project creation Failed!",group:"br",life:3e3}),x.value=!1,p.value=!0)}},te=async()=>{if(p.value=!0,p.value){console.log("isOpen"),await ye();let o=document.getElementById("createProjectName");o&&o.focus()}},se=()=>{p.value=!1,d.value&&(d.value=null),m.value&&(m.value=null),s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value&&(r.value=null),c.value=""},ae=()=>{d.value&&(d.value=null),m.value&&(m.value=null),s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value&&(r.value=null),c.value=""};return(o,e)=>{const v=re,N=ue,le=ce,M=de,oe=pe,ne=me,ie=ve,j=Se("tooltip");return g(),S("div",null,[i(v,{icon:u.isPage?"":"pi pi-plus",class:he(u.isPage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:u.isPage?"Create +":"",onClick:te,severity:u.isPage?"primary":"secondary","aria-label":"Bookmark",text:!u.isPage},null,8,["icon","class","label","severity","text"]),i(ie,{visible:l(p),"onUpdate:visible":[e[10]||(e[10]=D=>f(p)?p.value=D:null),ae],style:{width:"450px"},header:"Create Project",modal:!0,class:"p-fluid"},{footer:h(()=>[i(v,{label:"Cancel",icon:"pi pi-times",text:"",onClick:se}),i(v,{loading:l(x),label:"Save",icon:"pi pi-check",text:"",onClick:ee},null,8,["loading"])]),default:h(()=>{var D;return[t("div",De,[t("label",Te,[C("Create project for "),t("strong",null,xe((D=u.singleSpace)==null?void 0:D.name),1),C(" space")])]),t("div",$e,[Ie,i(N,{id:"createProjectName",modelValue:l(d),"onUpdate:modelValue":e[0]||(e[0]=a=>f(d)?d.value=a:null),required:"true"},null,8,["modelValue"])]),t("div",Ue,[Oe,i(le,{id:"description",class:"border-gray-300",modelValue:l(m),"onUpdate:modelValue":e[1]||(e[1]=a=>f(m)?m.value=a:null),rows:"3",cols:"20"},null,8,["modelValue"])]),t("div",Be,[Ee,t("div",qe,[i(oe,null,{default:h(()=>[i(M,null,{default:h(()=>[T(i(l(A),{class:"color-pick",style:{width:"1.5rem"},modelValue:l(V),"onUpdate:modelValue":e[2]||(e[2]=a=>f(V)?V.value=a:null),inputId:"cp-hex",format:"hex"},null,8,["modelValue"]),[[j,{value:"Pick Color"},void 0,{left:!0}]])]),_:1}),T(i(N,{class:"form-control",modelValue:l(c),"onUpdate:modelValue":e[3]||(e[3]=a=>f(c)?c.value=a:null),placeholder:"e.g., TO-DO, DOING"},null,8,["modelValue"]),[[j,{value:"Type Status Name"},void 0,{top:!0}]]),i(M,{onClick:Q,class:"btn btn-outline-secondary cursor-pointer"},{default:h(()=>[Le]),_:1})]),_:1}),l(w)?(g(),S("p",Fe,"Please type status name!")):E("",!0),t("div",Ge,[t("div",Me,[i(l(fe),{modelValue:l(s),"onUpdate:modelValue":e[5]||(e[5]=a=>f(s)?s.value=a:null),options:l(K),disabled:!l(R),class:"list-group","ghost-class":"ghost",move:o.checkMove,onStart:e[6]||(e[6]=a=>F.value=!0),onEnd:e[7]||(e[7]=a=>F.value=!1)},{item:h(({element:a,index:O})=>[(g(),S("div",{class:"flex delete-task justify-content-between",style:Ce(l(U)===O?l(Y):l(X)),onMouseenter:k=>U.value=O,onMouseleave:e[4]||(e[4]=k=>U.value=null),key:a.id},[(g(),S("svg",Ae,Re)),t("div",We,[T(i(l(A),{class:"color-pick mr-2 status-colors border-none",modelValue:a.taskStatusColor,"onUpdate:modelValue":k=>a.taskStatusColor=k,inputId:"cp-hex",format:"hex"},null,8,["modelValue","onUpdate:modelValue"]),[[j,{value:"Change Color"},void 0,{left:!0}]]),T(i(N,{class:"text-uppercase text-muteds w-full",id:"name",modelValue:a.taskStatusName,"onUpdate:modelValue":k=>a.taskStatusName=k,required:"true"},null,8,["modelValue","onUpdate:modelValue"]),[[j,{value:"Change Status Name"},void 0,{left:!0}]])]),t("div",{onClick:k=>Z(O),class:"cursor-pointer cross-icon ms-1 flex justify-content-center align-items-center"},Ye,8,Ke)],44,ze))]),_:1},8,["modelValue","options","disabled","move"])])])])]),t("div",Je,[Qe,t("div",Ze,[t("div",et,[i(ne,{modelValue:l(r),"onUpdate:modelValue":e[8]||(e[8]=a=>f(r)?r.value=a:null),options:l(s),optionLabel:"taskStatusName",placeholder:"Select Status",class:"w-full"},null,8,["modelValue","options"])]),l(J)?(g(),S("p",tt,"Please set close status!")):E("",!0)])]),t("div",st,[at,i(N,{modelValue:l(P),"onUpdate:modelValue":e[9]||(e[9]=a=>f(P)?P.value=a:null),required:"true"},null,8,["modelValue"])]),l(_)?(g(),S("p",lt,"Please add/fill/check up all the fields")):E("",!0)]}),_:1},8,["visible"])])}}};export{St as _};
