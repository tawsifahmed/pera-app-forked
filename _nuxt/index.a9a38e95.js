import ge from"./toast.esm.63fb9896.js";import ee from"./button.esm.b797942a.js";import $e from"./inputicon.esm.d6f95bd7.js";import te from"./inputtext.esm.80027f65.js";import we from"./iconfield.esm.84947933.js";import ke from"./toolbar.esm.28bb86bd.js";import Ee from"./progressspinner.esm.ca8447ce.js";import{a2 as le,$ as l,a4 as oe,a as pe,o as k,b as j,i as t,q as T,s as B,l as o,u as e,a6 as f,e as M,a7 as se,a8 as ae,ca as ie,c as R,a5 as De,w as U,P as Ve,t as Ue}from"./entry.a68a4c5e.js";import{u as H,a as ne,b as ce}from"./cookie.359c4252.js";import G from"./column.esm.d1620cb6.js";import Ce from"./datatable.esm.f68b033c.js";import me from"./textarea.esm.5b5dc621.js";import Ie from"./password.esm.bf432504.js";import ue from"./dropdown.esm.9b34dac1.js";import{a as Q}from"./usePermission.edeaba0e.js";import W from"./dialog.esm.d8f3bbfd.js";import"./portal.esm.3e003962.js";import"./basecomponent.esm.a1f86027.js";import"./index.esm.f9641e08.js";import"./baseicon.esm.2657a8b8.js";import"./index.esm.4ba39ef0.js";import"./index.esm.7681dfc7.js";import"./index.esm.baf7cfc0.js";import"./badge.esm.16bb9b01.js";import"./index.esm.d5b64d6e.js";import"./paginator.esm.5f937427.js";import"./index.esm.5b978cea.js";import"./inputnumber.esm.fb998fc9.js";import"./index.esm.bdb02f0e.js";import"./index.esm.7eac841a.js";import"./index.esm.297065f9.js";import"./index.esm.f85167c2.js";import"./index.esm.ae825fb0.js";import"./overlayeventbus.esm.1ee79acc.js";import"./virtualscroller.esm.411a481c.js";import"./index.esm.a97ab813.js";import"./index.esm.72bff27a.js";import"./checkbox.esm.a95901b3.js";import"./radiobutton.esm.0f324704.js";import"./index.esm.a9d1e59e.js";import"./index.esm.9a98da2a.js";import"./index.esm.3238d5cb.js";const re=n=>(se("data-v-1310cc1d"),n=n(),ae(),n),Se={class:"field"},Pe={for:"company"},Me=re(()=>t("i",{class:"text-red-400 text-italic"},"*",-1)),Le={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ae={class:"field"},Ne={for:"email"},Be=re(()=>t("i",{class:"text-red-400"},"*",-1)),Re={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Fe={class:"field"},Oe={for:"phoneNo"},ze={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},qe={class:"field"},He={for:"company"},je={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ge={class:"field"},Ye={for:"company"},Ke=re(()=>t("i",{class:"text-red-400"},"*",-1)),Xe={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ze={class:"field flex flex-column"},Je=re(()=>t("i",{class:"text-red-400"},"*",-1)),Qe={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},We={key:0,style:{color:"red"}},et={class:"create-btn-wrapper mb-0"},tt={__name:"CreateEmployee",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(n,{emit:L}){const F=ie(),S=l(n.param.rolesLists),b=l([]),m=oe(),r=l(""),d=l(""),x=l(""),g=l(""),c=l("");l("");const y=l(!1),I=l(!0),h=L,i=l(!1),A=async()=>{var E,s,p;if(i.value=!0,r.value===""||d.value===""||c.value===""||b.value.length===0){y.value=!0,i.value=!1;return}else if(y.value=!1,!y.value){const D=H("token"),{data:$,error:v,pending:w}=await ne(`${F.public.apiUrl}/users/create`,{method:"POST",headers:{Authorization:`Bearer ${D.value}`},body:{name:r.value,email:d.value,address:g.value,phone:x.value,password:c.value,password_confirmation:c.value,role:b.value.name}},"$HYNtwi2ZAs");if(v!=null&&v.value){if(((s=(E=v==null?void 0:v.value)==null?void 0:E.data)==null?void 0:s.code)===422){i.value=!1,m.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((p=$==null?void 0:$.value)==null?void 0:p.code)===201){i.value=!1,r.value=null,d.value=null,x.value=null,g.value=null,c.value=null,I.value=!1,h("closeCreateModal",!1),m.add({severity:"success",summary:"Success",detail:"Employee created successfully!",group:"br",life:3e3});return}else{i.value=!1,m.add({severity:"error",summary:"Error",detail:"Failed to create employee!",group:"br",life:3e3});return}}};return(E,s)=>{const p=te,D=me,$=Ie,v=ue,w=ee,N=pe("tooltip");return k(),j("div",null,[t("div",Se,[t("label",Pe,[T("Name"),Me,B(t("span",Le,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(p,{modelValue:e(r),"onUpdate:modelValue":s[0]||(s[0]=V=>f(r)?r.value=V:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",Ae,[t("label",Ne,[T("Email address"),Be,T(),B(t("span",Re,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(p,{type:"email",modelValue:e(d),"onUpdate:modelValue":s[1]||(s[1]=V=>f(d)?d.value=V:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",Fe,[t("label",Oe,[T("Phone "),B(t("span",ze,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(p,{modelValue:e(x),"onUpdate:modelValue":s[2]||(s[2]=V=>f(x)?x.value=V:null),inputId:"worktype",type:"tel",class:"w-full",maxlength:"14",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",qe,[t("label",He,[T("Address "),B(t("span",je,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(D,{modelValue:e(g),"onUpdate:modelValue":s[3]||(s[3]=V=>f(g)?g.value=V:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",Ge,[t("label",Ye,[T("Password"),Ke,T(),B(t("span",Xe,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o($,{modelValue:e(c),"onUpdate:modelValue":s[4]||(s[4]=V=>f(c)?c.value=V:null),placeholder:"Enter password",feedback:!1,invalid:E.confirmPassError,toggleMask:"",class:"w-full",inputClass:"w-full"},null,8,["modelValue","invalid"])]),t("div",Ze,[t("label",null,[T("Role"),Je,T(),B(t("span",Qe,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(v,{modelValue:e(b),"onUpdate:modelValue":s[5]||(s[5]=V=>f(b)?b.value=V:null),options:e(S),optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(y)?(k(),j("p",We,"Please fill/check up all the fields")):M("",!0),t("div",et,[o(w,{loading:e(i),label:"Save",icon:"pi pi-check",text:"",onClick:A},null,8,["loading"])])])}}},lt=le(tt,[["__scopeId","data-v-1310cc1d"]]);const Z=n=>(se("data-v-34321bdf"),n=n(),ae(),n),ot={class:"field"},st=Z(()=>t("label",{for:"company"},[T("Name"),t("i",{class:"text-red-500"},"*")],-1)),at={class:"field"},it=Z(()=>t("label",{for:"email"},[T("Email address"),t("i",{class:"text-red-500"},"*")],-1)),nt={class:"field"},rt=Z(()=>t("label",{for:"worktype"},"Phone",-1)),dt={class:"field"},ut=Z(()=>t("label",{for:"company"},"Address",-1)),ct={class:"field flex flex-column"},pt=Z(()=>t("label",null,[T("Role"),t("i",{class:"text-red-500"},"*")],-1)),mt={key:0,style:{color:"red"}},vt={class:"create-btn-wrappe"},_t={__name:"EditEmployee",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(n,{emit:L}){const F=ie(),C=n,S=oe(),b=l(C.param.id),m=l(C.param.name),r=l(C.param.email),d=l(C.param.phone),x=l(C.param.address),g=l(C.param.rolesLists),c=l(C.param.user_type),y=l(!1),I=l(!0),h=L,i=l(!1),A=async()=>{var E,s,p;if(i.value=!0,m.value===""||r.value===""){y.value=!0,i.value=!1;return}else if(y.value=!1,!y.value){const D=H("token"),{data:$,error:v,pending:w}=await ne(`${F.public.apiUrl}/users/update/${b.value}`,{method:"POST",headers:{Authorization:`Bearer ${D.value}`},body:{name:m.value,email:r.value,address:x.value,phone:d.value,role:c.value.name}},"$D8HfpvkorG");if(v!=null&&v.value){if(((s=(E=v==null?void 0:v.value)==null?void 0:E.data)==null?void 0:s.code)===500){i.value=!1,S.add({severity:"error",summary:"Error",detail:"Email already exists!",group:"br",life:3e3});return}}else if(((p=$==null?void 0:$.value)==null?void 0:p.code)===200){i.value=!1,I.value=!1,h("closeEditModal",!1),S.add({severity:"success",summary:"Success",detail:"Employee Updated successfully!",group:"br",life:3e3});return}else{i.value=!1,S.add({severity:"error",summary:"Error",detail:"Failed to update employee!",group:"br",life:3e3});return}}};return(E,s)=>{const p=te,D=me,$=ue,v=ee;return k(),j("div",null,[t("div",ot,[st,o(p,{modelValue:e(m),"onUpdate:modelValue":s[0]||(s[0]=w=>f(m)?m.value=w:null),class:"w-full",placeholder:"Enter Name"},null,8,["modelValue"])]),t("div",at,[it,o(p,{type:"email",modelValue:e(r),"onUpdate:modelValue":s[1]||(s[1]=w=>f(r)?r.value=w:null),class:"w-full",placeholder:"Enter Email"},null,8,["modelValue"])]),t("div",nt,[rt,o(p,{modelValue:e(d),"onUpdate:modelValue":s[2]||(s[2]=w=>f(d)?d.value=w:null),type:"number",class:"w-full",placeholder:"Enter Phone No."},null,8,["modelValue"])]),t("div",dt,[ut,o(D,{modelValue:e(x),"onUpdate:modelValue":s[3]||(s[3]=w=>f(x)?x.value=w:null),rows:"3",cols:"20",class:"w-full",placeholder:"Enter Address"},null,8,["modelValue"])]),t("div",ct,[pt,o($,{modelValue:e(c),"onUpdate:modelValue":s[4]||(s[4]=w=>f(c)?c.value=w:null),options:e(g),optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(y)?(k(),j("p",mt,"Please fill/check up all the fields")):M("",!0),t("div",vt,[o(v,{label:"Update",icon:"pi pi-check",text:"",onClick:A,loading:e(i)},null,8,["loading"])])])}}},ft=le(_t,[["__scopeId","data-v-34321bdf"]]);const ve=n=>(se("data-v-e933263e"),n=n(),ae(),n),xt={class:"field"},yt={for:"email"},ht=ve(()=>t("i",{class:"text-red-400 text-italic"},"*",-1)),Tt={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},bt={class:"field flex flex-column"},gt=ve(()=>t("i",{class:"text-red-400 text-italic"},"*",-1)),$t={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},wt={key:0,style:{color:"red"}},kt={class:"create-btn-wrapper"},Et={__name:"InviteGuest",props:{param:{type:Object,required:!0}},emits:["closeInviteModal"],setup(n,{emit:L}){const F=ie(),S=l(n.param.rolesLists),b=l([]),m=oe(),r=l(""),d=l(!1),x=l("false"),g=l(!0),c=L,y=async()=>{var I;if(r.value===""||b.value.length===0){d.value=!0;return}else if(x.value=!0,d.value=!1,!d.value){const h=H("token"),{data:i,pending:A}=await ne(`${F.public.apiUrl}/invite-user`,{method:"POST",headers:{Authorization:`Bearer ${h.value}`},body:{email:r.value,role:b.value.name}},"$uaOzqXhdzF");((I=i==null?void 0:i.value)==null?void 0:I.code)===201?(r.value=null,g.value=!1,c("closeInviteModal",!1),x.value=!1,m.add({severity:"success",summary:"Success",detail:"Employee invitation sent!",group:"br",life:3e3})):m.add({severity:"error",summary:"Error",detail:"Employee invitation failed!",group:"br",life:3e3})}};return(I,h)=>{const i=te,A=ue,E=ee,s=pe("tooltip");return k(),j("div",null,[t("div",xt,[t("label",yt,[T("Email address"),ht,T(),B(t("span",Tt,null,512),[[s,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(i,{type:"email",modelValue:e(r),"onUpdate:modelValue":h[0]||(h[0]=p=>f(r)?r.value=p:null),class:"w-full"},null,8,["modelValue"])]),t("div",bt,[t("label",null,[T("Role"),gt,T(),B(t("span",$t,null,512),[[s,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),o(A,{modelValue:e(b),"onUpdate:modelValue":h[1]||(h[1]=p=>f(b)?b.value=p:null),options:e(S),optionLabel:"name",placeholder:"Select Role",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e(d)?(k(),j("p",wt,"Please fill/check up all the fields")):M("",!0),t("div",kt,[e(x)=="false"?(k(),R(E,{key:0,label:"Send",icon:"pi pi-check",text:"",onClick:y})):(k(),R(E,{key:1,label:"Sending...",icon:"pi pi-spin pi-spinner",text:"",disabled:""}))])])}}},Dt=le(Et,[["__scopeId","data-v-e933263e"]]);const de=n=>(se("data-v-4310e497"),n=n(),ae(),n),Vt={key:0,class:"card"},Ut={class:"d-flex mr-2"},Ct=de(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Employees")],-1)),It=de(()=>t("i",{class:"pi pi-search"},null,-1)),St=de(()=>t("p",{class:"text-center"},"No Data found...",-1)),Pt=de(()=>t("p",null,"Are you sure you want to delete?",-1)),Mt={__name:"index",setup(n){const L=ie(),F=l(Q("read_user")),C=l(Q("create_user")),S=l(Q("update_user")),b=l(Q("delete_user")),m=l(),r=l(!0),d=l(!1),x=oe(),g=l(!1),c=l(!1),y=l(!1),I=l([]),h=l(!1),i=l(""),A=l(""),E=l(""),s=l(""),p=l(""),D=l([]),$=l([]),v=_=>{g.value=!1,Y()},w=_=>{y.value=!1,Y()},N=()=>{g.value=!0},V=()=>{c.value=!0},_e=_=>{c.value=!1,Y()};l([]);const fe=_=>{y.value=!0,i.value=_.id,A.value=_.name,E.value=_.email,s.value=_.phone,p.value=_.address,$.value=_.user_type,D.value.map(a=>{a.name===_.user_type&&($.value=a)})},xe=_=>{h.value=!0,i.value=_},ye=async()=>{d.value=!0;const _=H("token"),{data:a,pending:J}=await ne(`${L.public.apiUrl}/users/delete/${i.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${_.value}`}},"$BmbV2j3TY3");a.value.code===200?(h.value=!1,x.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),d.value=!1,Y()):(x.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),d.value=!1)},Y=async()=>{var O,z,q;const _=H("token"),{data:a,pending:J,error:P}=await ce("taskAssignModalData",()=>$fetch(`${L.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${_.value}`}}));((z=(O=a.value)==null?void 0:O.data)==null?void 0:z.length)>0&&(I.value=(q=a.value)==null?void 0:q.data.map((K,X)=>({...K,index:X+1})))},he=async()=>{var O,z,q;const _=H("token"),{data:a,pending:J,error:P}=await ce("roleLiist",()=>$fetch(`${L.public.apiUrl}/roles/list`,{headers:{Authorization:`Bearer ${_.value}`}}));((z=(O=a.value)==null?void 0:O.data)==null?void 0:z.length)>0&&(D.value=(q=a.value)==null?void 0:q.data.map((K,X)=>({...K,index:X+1})))},Te=()=>{m.value={global:{value:null,matchMode:Ve.CONTAINS}}};return H("rolePermission"),De(()=>{Y(),he(),r.value=!1}),Te(),(_,a)=>{const J=ge,P=ee,O=$e,z=te,q=we,K=ke,X=Ee;return e(F)?(k(),j("div",Vt,[t("div",Ut,[o(J,{position:"bottom-right",group:"br"}),Ct]),o(K,{class:"border-0 px-0"},{start:U(()=>[e(C)?(k(),R(P,{key:0,icon:"pi pi-plus",label:"Create",onClick:N,class:"mr-2",severity:"secondary"})):M("",!0),e(C)?(k(),R(P,{key:1,icon:"pi pi-users",onClick:V,label:"Invite a guest",severity:"secondary"})):M("",!0)]),end:U(()=>[o(q,{iconPosition:"right",raised:""},{default:U(()=>[o(O,null,{default:U(()=>[It]),_:1}),o(z,{modelValue:e(m).global.value,"onUpdate:modelValue":a[0]||(a[0]=u=>e(m).global.value=u),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(e(Ce),{filters:e(m),"onUpdate:filters":a[1]||(a[1]=u=>f(m)?m.value=u:null),class:"table-st",value:e(I),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(r)},{empty:U(()=>[St]),loading:U(()=>[o(X,{style:{width:"50px",height:"50px"}})]),footer:U(()=>[T(" In total there are "+Ue(e(I)?e(I).length:0)+" rows. ",1)]),default:U(()=>[o(e(G),{field:"index",header:"Serial",sortable:""}),o(e(G),{field:"name",header:"Employee Name"}),o(e(G),{field:"email",header:"Email Address"}),o(e(G),{field:"phone",header:"Phone"}),o(e(G),{field:"user_type",header:"User Type"}),o(e(G),{field:"action",header:"Action"},{body:U(u=>[e(S)?(k(),R(P,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:be=>fe(u.data)},null,8,["onClick"])):M("",!0),e(S)?M("",!0):(k(),R(P,{key:1,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",style:{visibility:"hidden"}})),e(b)?(k(),R(P,{key:2,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:be=>xe(u.data.id)},null,8,["onClick"])):M("",!0),e(b)?M("",!0):(k(),R(P,{key:3,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),o(e(W),{visible:e(g),"onUpdate:visible":a[3]||(a[3]=u=>f(g)?g.value=u:null),modal:"",header:"Create Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:U(()=>[o(lt,{param:{rolesLists:e(D)},onCloseCreateModal:a[2]||(a[2]=u=>v(u))},null,8,["param"])]),_:1},8,["visible"]),o(e(W),{visible:e(y),"onUpdate:visible":a[5]||(a[5]=u=>f(y)?y.value=u:null),modal:"",header:"Edit Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:U(()=>[o(ft,{param:{id:e(i),name:e(A),address:e(p),phone:e(s),email:e(E),user_type:e($),rolesLists:e(D)},onCloseEditModal:a[4]||(a[4]=u=>w(u))},null,8,["param"])]),_:1},8,["visible"]),o(e(W),{visible:e(h),"onUpdate:visible":a[7]||(a[7]=u=>f(h)?h.value=u:null),header:" ",style:{width:"25rem"}},{default:U(()=>[Pt,o(P,{label:"No",icon:"pi pi-times",text:"",onClick:a[6]||(a[6]=u=>h.value=!1)}),o(P,{label:"Yes",icon:"pi pi-check",text:"",onClick:ye,loading:e(d)},null,8,["loading"])]),_:1},8,["visible"]),o(e(W),{visible:e(c),"onUpdate:visible":a[9]||(a[9]=u=>f(c)?c.value=u:null),modal:"",header:"Invite Employee",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:U(()=>[o(Dt,{param:{rolesLists:e(D)},onCloseInviteModal:a[8]||(a[8]=u=>_e(u))},null,8,["param"])]),_:1},8,["visible"])])):M("",!0)}}},$l=le(Mt,[["__scopeId","data-v-4310e497"]]);export{$l as default};
