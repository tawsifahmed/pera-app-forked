import ne from"./button.esm.f094c646.js";import re from"./inputtext.esm.bc2ef384.js";import ue from"./textarea.esm.0332a7be.js";import ce from"./inputgroupaddon.esm.ca9de5fb.js";import de from"./inputgroup.esm.9b3de281.js";import pe from"./dropdown.esm.fe01fe90.js";import me from"./dialog.esm.a2ddeb74.js";import{d as ve}from"./vuedraggable.umd.002a209c.js";import{an as _e,a4 as fe,a3 as ge,$ as l,V as O,aq as M,a as ke,o as h,b as x,l as i,k as he,w as S,u as a,i as t,q as C,t as xe,s as v,a6 as f,e as B,K as Se}from"./entry.3a3c1209.js";import z from"./colorpicker.esm.7763b5c9.js";import{u as Ce,a as ye}from"./cookie.40a73f96.js";import{u as be}from"./workCompany.9a0d0f6f.js";import{u as we}from"./company.c5973bac.js";const Ve=be(),Pe=we(),A=_e("workProjects",{state:()=>({isProjectCreated:null}),getters:{save(r){return r.isProjectCreated}},actions:{async createProjects({name:r,description:b,space_id:w,statuses:N}){var c;const E=Ce("token"),{data:T,pending:G}=await ye("https://pbe.singularitybd.net/api/v1/projects/create",{method:"POST",headers:{Authorization:`Bearer ${E.value}`},body:{name:r,description:b,space_id:w,statuses:N}},"$h5ITqNs3Yo");((c=T.value)==null?void 0:c.app_message)==="success"&&(this.isProjectCreated=!0,await Ve.getCompany(),await Pe.getSingleSpace(w))}}});const De={class:"field"},Ne={for:"name"},Te={class:"field"},je={for:"name"},$e=t("i",{class:"text-red-400 text-italic"},"*",-1),Ie={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ue={class:"field"},Oe={for:"name"},Be={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ee={class:"mb-4"},qe={class:"text-slate-700 mb-2 tracking-wide left-3"},Fe=t("i",{class:"text-red-400 text-italic"},"*",-1),Le={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Me={class:"container"},ze=t("p",{class:"pi pi-plus cursor-pointer"},null,-1),Ae={key:0,class:"text-red-600 text-small"},Ge={class:"row mt-2"},He={class:"col-12 d-flex flex-column p-0"},Re=["onMouseenter"],We={style:{"margin-right":"-4px"},width:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",class:"cu-status-manager-status-list-item__drag-handler-icon"},Ke=t("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},[t("circle",{cx:"5",cy:"5",r:"1"}),t("circle",{cx:"5",cy:"12",r:"1"}),t("circle",{cx:"5",cy:"19",r:"1"}),t("circle",{cx:"12",cy:"5",r:"1"}),t("circle",{cx:"12",cy:"12",r:"1"}),t("circle",{cx:"12",cy:"19",r:"1"})],-1),Xe=[Ke],Ye={class:"flex align-items-center",style:{width:"89%"}},Je=["onClick"],Qe=t("p",{class:"pi pi-times"},null,-1),Ze=[Qe],et={class:"mb-4"},tt={class:"text-slate-700 mb-2 tracking-wide left-3"},st=t("i",{class:"text-red-400 text-italic"},"*",-1),at={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},ot={class:"container"},lt={class:"field"},it={key:0,class:"text-red-600 text-small"},nt={key:0,class:"text-center",style:{color:"red"}},St={__name:"CreateSpecificProject",props:["singleSpace","spaces","isPage"],setup(r){const b=fe(),w=A(),{save:N}=ge(A()),{singleSpace:E,spaces:T,isPage:G}=r,c=l(!1),j=l(!1),H=l(!0),q=l(!1),$=l(null),R=l(!0),W=O(()=>({animation:250,group:"tasks",disabled:!R.value,ghostClass:"ghost"})),K=O(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",margin:"8px 0px"})),X=O(()=>({backgroundColor:"#f9f9f9",boxShadow:"0px 4px 4px #e2e2e3",cursor:"grab",margin:"8px 0px"})),u=l(""),s=l([{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}]),V=l("6466f1"),F=l(null),P=l(!1),Y=l(!1),_=l(null),g=l(""),J=()=>{c.value=!0},Q=()=>{c.value=!1},Z=()=>{var n;if(u.value?P.value=!1:P.value=!0,((n=u==null?void 0:u.value)==null?void 0:n.length)>0){const e={taskStatusName:u.value,taskStatusColor:`#${V.value}`,is_closed_status:0,serial_no:s.value.length+1};s.value.push(e),u.value=""}else P.value=!0;s.value.length>0&&(F.value=!0)},ee=n=>{var e,p;s.value.splice(n,1),((e=d.value)==null?void 0:e.is_closed_status)===((p=s.value[n])==null?void 0:p.is_closed_status)&&(d.value=null),s.value.length==0&&(F.value=!1)},d=l(null);M(d,n=>{n&&s.value.forEach(e=>{e.is_closed_status=e.taskStatusName===n.taskStatusName?1:0}),console.log("taskStatusList",s.value)}),M(s,n=>{n.forEach((e,p)=>{e.serial_no=p+1})});const y=l(!1),te=async()=>{if(y.value=!0,_.value===null||s.value.length<=0||d.value===null)j.value=!0,y.value=!1;else{j.value=!1,s.value=s.value.map(e=>(e.taskStatusColor.startsWith("#")||(e.taskStatusColor=`#${e.taskStatusColor}`),e));const n={name:_.value,description:g.value,space_id:T,statuses:s.value};console.log("statuses",s.value),await w.createProjects(n),N.value===!0?(c.value=!1,b.add({severity:"success",summary:"Success!",detail:"Project created successfully!",group:"br",life:3e3}),_.value=null,g.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],d.value=null,y.value=!1):(b.add({severity:"error",summary:"Failed",detail:"Project creation Failed!",group:"br",life:3e3}),y.value=!1)}},se=()=>{_.value=null,g.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],d.value=null,u.value=""};return(n,e)=>{const p=ne,I=re,ae=ue,L=ce,oe=de,le=pe,ie=me,m=ke("tooltip");return h(),x("div",null,[i(p,{icon:r.isPage?"":"pi pi-plus",class:he(r.isPage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:r.isPage?"Create +":"",onClick:J,severity:r.isPage?"primary":"secondary","aria-label":"Bookmark",text:!r.isPage},null,8,["icon","class","label","severity","text"]),i(ie,{visible:a(c),"onUpdate:visible":[e[9]||(e[9]=D=>f(c)?c.value=D:null),se],style:{width:"450px"},header:"Create Project",modal:!0,class:"p-fluid"},{footer:S(()=>[i(p,{label:"Cancel",icon:"pi pi-times",text:"",onClick:Q}),i(p,{loading:a(y),label:"Save",icon:"pi pi-check",text:"",onClick:te},null,8,["loading"])]),default:S(()=>{var D;return[t("div",De,[t("label",Ne,[C("Create project for "),t("strong",null,xe((D=r.singleSpace)==null?void 0:D.name),1),C(" space")])]),t("div",Te,[t("label",je,[C("Project Name"),$e,v(t("span",Ie,null,512),[[m,{value:"Demo Text Text"},void 0,{right:!0}]])]),i(I,{id:"name",modelValue:a(_),"onUpdate:modelValue":e[0]||(e[0]=o=>f(_)?_.value=o:null),required:"true"},null,8,["modelValue"])]),t("div",Ue,[t("label",Oe,[C("Project Description "),v(t("span",Be,null,512),[[m,{value:"Demo Text Text"},void 0,{right:!0}]])]),i(ae,{id:"description",class:"border-gray-300",modelValue:a(g),"onUpdate:modelValue":e[1]||(e[1]=o=>f(g)?g.value=o:null),rows:"3",cols:"20"},null,8,["modelValue"])]),t("div",Ee,[t("p",qe,[C("Setup Task Status"),Fe,v(t("span",Le,null,512),[[m,{value:"Demo Text Text"},void 0,{right:!0}]])]),t("div",Me,[i(oe,null,{default:S(()=>[i(L,null,{default:S(()=>[v(i(a(z),{class:"color-pick",style:{width:"1.5rem"},modelValue:a(V),"onUpdate:modelValue":e[2]||(e[2]=o=>f(V)?V.value=o:null),inputId:"cp-hex",format:"hex"},null,8,["modelValue"]),[[m,{value:"Pick Color"},void 0,{left:!0}]])]),_:1}),v(i(I,{class:"form-control",modelValue:a(u),"onUpdate:modelValue":e[3]||(e[3]=o=>f(u)?u.value=o:null),placeholder:"e.g., TO-DO, DOING"},null,8,["modelValue"]),[[m,{value:"Type Status Name"},void 0,{top:!0}]]),i(L,{onClick:Z,class:"btn btn-outline-secondary cursor-pointer"},{default:S(()=>[ze]),_:1})]),_:1}),a(P)?(h(),x("p",Ae,"Please type status name!")):B("",!0),t("div",Ge,[t("div",He,[i(a(ve),{modelValue:a(s),"onUpdate:modelValue":e[5]||(e[5]=o=>f(s)?s.value=o:null),options:a(W),disabled:!a(H),class:"list-group","ghost-class":"ghost",move:n.checkMove,onStart:e[6]||(e[6]=o=>q.value=!0),onEnd:e[7]||(e[7]=o=>q.value=!1)},{item:S(({element:o,index:U})=>[(h(),x("div",{class:"flex delete-task justify-content-between",style:Se(a($)===U?a(X):a(K)),onMouseenter:k=>$.value=U,onMouseleave:e[4]||(e[4]=k=>$.value=null),key:o.id},[(h(),x("svg",We,Xe)),t("div",Ye,[v(i(a(z),{class:"color-pick mr-2 status-colors border-none",modelValue:o.taskStatusColor,"onUpdate:modelValue":k=>o.taskStatusColor=k,inputId:"cp-hex",format:"hex"},null,8,["modelValue","onUpdate:modelValue"]),[[m,{value:"Change Color"},void 0,{left:!0}]]),v(i(I,{class:"text-uppercase text-muteds w-full",id:"name",modelValue:o.taskStatusName,"onUpdate:modelValue":k=>o.taskStatusName=k,required:"true"},null,8,["modelValue","onUpdate:modelValue"]),[[m,{value:"Change Status Name"},void 0,{left:!0}]])]),t("div",{onClick:k=>ee(U),class:"cursor-pointer cross-icon ms-1 flex justify-content-center align-items-center"},Ze,8,Je)],44,Re))]),_:1},8,["modelValue","options","disabled","move"])])])])]),t("div",et,[t("p",tt,[C("Set Task Close Status"),st,v(t("span",at,null,512),[[m,{value:"Demo Text Text"},void 0,{right:!0}]])]),t("div",ot,[t("div",lt,[i(le,{modelValue:a(d),"onUpdate:modelValue":e[8]||(e[8]=o=>f(d)?d.value=o:null),options:a(s),optionLabel:"taskStatusName",placeholder:"Select Status",class:"w-full"},null,8,["modelValue","options"])]),a(Y)?(h(),x("p",it,"Please set close status!")):B("",!0)])]),a(j)?(h(),x("p",nt,"Please add/fill/check up all the fields")):B("",!0)]}),_:1},8,["visible"])])}}};export{St as _};
