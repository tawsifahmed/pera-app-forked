import Ve from"./toast.esm.11ec969b.js";import ce from"./button.esm.3ec7eae1.js";import Se from"./inputicon.esm.869f1953.js";import ue from"./inputtext.esm.a45bd446.js";import Ce from"./iconfield.esm.5f547043.js";import Ee from"./toolbar.esm.b12bdcd0.js";import Ie from"./progressspinner.esm.90cde857.js";import{a2 as me,$ as l,a4 as pe,a5 as ve,a6 as ge,a as Ne,o as k,b as N,i as t,q as x,s as Q,l as a,u as e,a7 as h,e as j,a8 as fe,a9 as _e,ca as xe,w as f,P as Ue,c as re,t as Z,F as Te,f as be,K as Be}from"./entry.7ff8a81f.js";import{u as ee,a as he,b as Ae}from"./cookie.ccd6a0a0.js";import F from"./column.esm.06878d54.js";import Fe from"./datatable.esm.8a4bd236.js";import ye from"./textarea.esm.2a24ac2b.js";import De from"./dropdown.esm.fdfe63be.js";import $e from"./multiselect.esm.26ef86e9.js";import{u as te}from"./company.ef9fccf0.js";import{a as P}from"./usePermission.e23a010a.js";import de from"./dialog.esm.57fbd934.js";import"./portal.esm.2d1e99a5.js";import"./basecomponent.esm.df6a4ea8.js";import"./index.esm.f6e93f94.js";import"./baseicon.esm.c1e52884.js";import"./index.esm.1baf4e6d.js";import"./index.esm.72da38a6.js";import"./index.esm.c28ea1af.js";import"./badge.esm.a113bbb4.js";import"./index.esm.5c2797ea.js";import"./paginator.esm.6c8c2fdf.js";import"./index.esm.716ae6c4.js";import"./inputnumber.esm.328efc7f.js";import"./index.esm.1ec61c04.js";import"./index.esm.39c7d9c3.js";import"./index.esm.9c7f1522.js";import"./index.esm.02beb680.js";import"./index.esm.7de35ad8.js";import"./overlayeventbus.esm.01179281.js";import"./virtualscroller.esm.ae2f48ff.js";import"./index.esm.93780cfa.js";import"./index.esm.38a22526.js";import"./checkbox.esm.11a3d88c.js";import"./radiobutton.esm.7782f3a7.js";import"./index.esm.49bc6069.js";import"./index.esm.79fa5663.js";import"./workCompany.d7a85777.js";const le=c=>(fe("data-v-d33a266e"),c=c(),_e(),c),Oe={class:"field"},ze={for:"company"},qe=le(()=>t("i",{class:"text-red-400"},"*",-1)),je={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},He={class:"field flex flex-column"},Ke={for:"email"},Re={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Qe={class:"field flex flex-column"},Ye=le(()=>t("i",{class:"text-red-400"},"*",-1)),Ge={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Je={class:"field flex flex-column"},We=le(()=>t("i",{class:"text-red-400"},"*",-1)),Xe={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ze={class:"field"},Pe=le(()=>t("i",{class:"text-red-400"},"*",-1)),et={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},tt={key:0,style:{color:"red"}},lt={class:"create-btn-wrapper mb-0"},at={__name:"CreateTeam",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(c,{emit:H}){const O=xe(),A=l(c.param.usersLists),m=l([]),L=l([]),S=l([]),p=pe(),_=l(""),v=l(""),y=l(!1),T=l(!1),D=l(!0),$=H,w=l(!1),z=async()=>{var i;if(w.value=!0,_.value===""||m.value.length===0||L.value.length===0||S.value.length===0){T.value=!0,w.value=!1;return}else if(T.value=!1,!T.value){const n=ee("token"),{data:u,error:r,pending:b}=await he(`${O.public.apiUrl}/teams/create`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:_.value,description:v.value,team_lead_id:m.value.id,line_manager_id:L.value.id,members:S.value.map(C=>C.id)}},"$LDh3IAOr92");if(((i=u==null?void 0:u.value)==null?void 0:i.code)===201){w.value=!1,_.value=null,v.value=null,m.value=[],L.value=[],S.value=[],D.value=!1,$("closeCreateModal",!1),p.add({severity:"success",summary:"Success",detail:"Team created successfully!",group:"br",life:3e3});return}else{w.value=!1,p.add({severity:"error",summary:"Error",detail:"Failed to create team!",group:"br",life:3e3});return}}};return ve(()=>{const i=document.getElementById("createTeamName");ge(()=>{i&&i.focus()})}),(i,n)=>{const u=ue,r=ye,b=De,C=$e,I=ce,M=Ne("tooltip");return k(),N("div",null,[t("div",Oe,[t("label",ze,[x("Name"),qe,x(),Q(t("span",je,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(u,{id:"createTeamName",modelValue:e(_),"onUpdate:modelValue":n[0]||(n[0]=g=>h(_)?_.value=g:null),class:"w-full"},null,8,["modelValue"])]),t("div",He,[t("label",Ke,[x("Description "),Q(t("span",Re,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(r,{id:"description",class:"border-gray-300",modelValue:e(v),"onUpdate:modelValue":n[1]||(n[1]=g=>h(v)?v.value=g:null),rows:"3",cols:"20",invalid:e(y)},null,8,["modelValue","invalid"])]),t("div",Qe,[t("label",null,[x("Line Manager"),Ye,x(),Q(t("span",Ge,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(b,{modelValue:e(L),"onUpdate:modelValue":n[2]||(n[2]=g=>h(L)?L.value=g:null),options:e(A),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Je,[t("label",null,[x("Team Lead"),We,x(),Q(t("span",Xe,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(b,{modelValue:e(m),"onUpdate:modelValue":n[3]||(n[3]=g=>h(m)?m.value=g:null),options:e(A),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Ze,[t("label",null,[x("Team Members"),Pe,x(),Q(t("span",et,null,512),[[M,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(C,{display:"chip",modelValue:e(S),"onUpdate:modelValue":n[4]||(n[4]=g=>h(S)?S.value=g:null),options:e(A),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e(T)?(k(),N("p",tt,"Please fill/check up all the fields")):j("",!0),t("div",lt,[a(I,{loading:e(w),label:"Save",icon:"pi pi-check",text:"",onClick:z},null,8,["loading"])])])}}},ot=me(at,[["__scopeId","data-v-d33a266e"]]);const Y=c=>(fe("data-v-e4bdffc0"),c=c(),_e(),c),st={class:"field"},it=Y(()=>t("label",{for:"company"},[x("Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),nt={class:"field flex flex-column"},rt=Y(()=>t("label",{for:"email"},"Description",-1)),dt={class:"field flex flex-column"},ct=Y(()=>t("label",null,[x("Line Manager"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ut={class:"field flex flex-column"},mt=Y(()=>t("label",null,[x("Team Lead"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),pt={class:"field"},vt=Y(()=>t("label",null,[x("Team Members"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ft={key:0,style:{color:"red"}},_t={class:"create-btn-wrappe"},xt={__name:"EditTeam",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(c,{emit:H}){const O=te(),{getTaskAssignModalData:K}=te(),A=xe(),m=c,L=pe(),S=l(m.param.id),p=l(m.param.editName),_=l(m.param.editDescription),v=l(m.param.editLineManager),y=l(m.param.editTeamLead),T=l(m.param.editMembers),D=l(O.users),$=l(!1),w=l(!0),z=H,i=l(!1),n=async()=>{var u;if(i.value=!0,p.value===""||y.value.length===0||v.value.length===0||T.value.length===0){$.value=!0,i.value=!1;return}else if($.value=!1,!$.value){const r=ee("token"),{data:b,error:C,pending:I}=await he(`${A.public.apiUrl}/teams/update/${S.value}`,{method:"POST",headers:{Authorization:`Bearer ${r.value}`},body:{name:p.value,description:_.value,team_lead_id:y.value.id,line_manager_id:v.value.id,members:T.value.map(M=>M.id)}},"$L7Q6VHiEVV");if(((u=b==null?void 0:b.value)==null?void 0:u.code)===200){i.value=!1,w.value=!1,z("closeEditModal",!1),L.add({severity:"success",summary:"Success",detail:"Team Updated successfully!",group:"br",life:3500});return}else{i.value=!1,L.add({severity:"error",summary:"Error",detail:"Failed to update team!",group:"br",life:3e3});return}}};return ve(async()=>{await K(),D.value=O.users;const u=document.getElementById("editTeamName");ge(()=>{u&&u.focus()})}),(u,r)=>{const b=ue,C=ye,I=De,M=$e,g=ce;return k(),N("div",null,[t("div",st,[it,a(b,{id:"editTeamName",modelValue:e(p),"onUpdate:modelValue":r[0]||(r[0]=V=>h(p)?p.value=V:null),class:"w-full"},null,8,["modelValue"])]),t("div",nt,[rt,a(C,{id:"description",class:"border-gray-300",modelValue:e(_),"onUpdate:modelValue":r[1]||(r[1]=V=>h(_)?_.value=V:null),rows:"3",cols:"20",invalid:u.teamDescriptionError},null,8,["modelValue","invalid"])]),t("div",dt,[ct,a(I,{modelValue:e(v),"onUpdate:modelValue":r[2]||(r[2]=V=>h(v)?v.value=V:null),options:e(D),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",ut,[mt,a(I,{modelValue:e(y),"onUpdate:modelValue":r[3]||(r[3]=V=>h(y)?y.value=V:null),options:e(D),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",pt,[vt,a(M,{display:"chip",modelValue:e(T),"onUpdate:modelValue":r[4]||(r[4]=V=>h(T)?T.value=V:null),options:e(D),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e($)?(k(),N("p",ft,"Please fill/check up all the fields")):j("",!0),t("div",_t,[a(g,{label:"Update",icon:"pi pi-check",text:"",onClick:n,loading:e(i)},null,8,["loading"])])])}}},ht=me(xt,[["__scopeId","data-v-e4bdffc0"]]);const ae=c=>(fe("data-v-3c1e03dc"),c=c(),_e(),c),Tt={key:0,class:"card"},bt={class:"d-flex mr-2"},gt=ae(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Teams")],-1)),yt=ae(()=>t("i",{class:"pi pi-search"},null,-1)),Dt=ae(()=>t("p",{class:"text-center"},"No Data found...",-1)),$t={style:{display:"flex","flex-wrap":"wrap"}},wt=ae(()=>t("p",null,"Are you sure you want to delete?",-1)),kt={__name:"index",setup(c){const H=te(),{getTaskAssignModalData:O}=te(),K=xe(),A=l(P("read_team")),m=l(P("create_team")),L=l(P("update_team")),S=l(P("delete_team")),p=l(),_=l(!0),v=l(!1),y=l(!1),T=pe(),D=l(!1),$=l(!1),w=l([]),z=l([]),i=l(!1),n=l(""),u=l(""),r=l(""),b=l(null),C=l(null),I=l(null),M=d=>{D.value=!1,G()},g=d=>{$.value=!1,G()},V=async()=>{v.value=!0,await O(),w.value=H.users,D.value=!0,v.value=!1},we=d=>{console.log("editTeamdata",d),n.value=d.id,$.value=!0,u.value=d.name,r.value=d.description,b.value={id:d.children.data.id,name:d.children.data.name},console.log("editLineManager",b.value),C.value={id:d.children.children.data.id,name:d.children.children.data.name},console.log("editTeamLead",C.value),I.value=d.children.children.children.map(s=>({id:s.data.id,name:s.data.name})),console.log("editMembers",I.value)},ke=d=>{i.value=!0,n.value=d},Le=async()=>{y.value=!0;const d=ee("token"),{data:s,pending:oe}=await he(`${K.public.apiUrl}/teams/delete/${n.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${d.value}`}},"$0jIuqBy51n");s.value.code===200?(i.value=!1,T.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),y.value=!1,G()):(T.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),y.value=!1)},G=async()=>{var J,W,X;const d=ee("token"),{data:s,pending:oe,error:q}=await Ae("getTeams",()=>$fetch(`${K.public.apiUrl}/teams/list`,{headers:{Authorization:`Bearer ${d.value}`}}));((W=(J=s.value)==null?void 0:J.data)==null?void 0:W.length)>0&&(z.value=(X=s.value)==null?void 0:X.data.map((se,ie)=>({...se,index:ie+1})))},Me=()=>{p.value={global:{value:null,matchMode:Ue.CONTAINS}}};return ve(()=>{G(),_.value=!1}),Me(),(d,s)=>{const oe=Ve,q=ce,J=Se,W=ue,X=Ce,se=Ee,ie=Ie;return e(A)?(k(),N("div",Tt,[t("div",bt,[a(oe,{position:"bottom-right",group:"br"}),gt]),a(se,{class:"border-0 px-0"},{start:f(()=>[e(m)?(k(),re(q,{key:0,icon:"pi pi-plus",label:"Create",onClick:V,class:"mr-2",severity:"secondary",loading:e(v)},null,8,["loading"])):j("",!0)]),end:f(()=>[a(X,{iconPosition:"right",raised:""},{default:f(()=>[a(J,null,{default:f(()=>[yt]),_:1}),a(W,{modelValue:e(p).global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e(p).global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),a(e(Fe),{filters:e(p),"onUpdate:filters":s[1]||(s[1]=o=>h(p)?p.value=o:null),class:"table-st",value:e(z),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(_)},{empty:f(()=>[Dt]),loading:f(()=>[a(ie,{style:{width:"50px",height:"50px"}})]),footer:f(()=>[x(" In total there are "+Z(e(w)?e(w).length:0)+" rows. ",1)]),default:f(()=>[a(e(F),{field:"index",header:"Serial",sortable:"",style:{width:"5%"}}),a(e(F),{field:"name",header:"Team Name",style:{width:"15%"}}),a(e(F),{field:"description",header:"Description",style:{width:"20%"}}),a(e(F),{field:"Line Manager",header:"Line Manager",style:{width:"10%"}},{body:f(o=>{var E,U,B;return[t("div",null,Z((B=(U=(E=o==null?void 0:o.data)==null?void 0:E.children)==null?void 0:U.data)==null?void 0:B.name),1)]}),_:1}),a(e(F),{field:"Line Manager",header:"Team Lead",style:{width:"10%"}},{body:f(o=>{var E,U,B,R;return[t("div",null,Z((R=(B=(U=(E=o==null?void 0:o.data)==null?void 0:E.children)==null?void 0:U.children)==null?void 0:B.data)==null?void 0:R.name),1)]}),_:1}),a(e(F),{field:"Members",header:"Members",style:{width:"30%"}},{body:f(o=>{var E,U,B;return[t("div",$t,[(k(!0),N(Te,null,be((B=(U=(E=o==null?void 0:o.data)==null?void 0:E.children)==null?void 0:U.children)==null?void 0:B.children,R=>(k(),N("div",{key:R,style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},[(k(!0),N(Te,null,be(R,ne=>(k(),N("div",{key:ne},[t("div",{class:"mb-1",style:Be(ne.name?"border: 1px solid rgba(167, 167, 167, 0.486); border-radius: 5px; padding: 2px 5px":" ")},Z(ne.name),5)]))),128))]))),128))])]}),_:1}),a(e(F),{field:"action",header:"Action",style:{width:"10%"}},{body:f(o=>[e(L)?(k(),re(q,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:E=>we(o.data)},null,8,["onClick"])):j("",!0),e(S)?(k(),re(q,{key:1,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:E=>ke(o.data.id)},null,8,["onClick"])):j("",!0)]),_:1})]),_:1},8,["filters","value","loading"]),a(e(de),{visible:e(D),"onUpdate:visible":s[3]||(s[3]=o=>h(D)?D.value=o:null),modal:"",header:"Create Team",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[a(ot,{param:{usersLists:e(w)},onCloseCreateModal:s[2]||(s[2]=o=>M(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(de),{visible:e($),"onUpdate:visible":s[5]||(s[5]=o=>h($)?$.value=o:null),modal:"",header:"Edit Team",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[a(ht,{param:{id:e(n),editName:e(u),editDescription:e(r),editLineManager:e(b),editTeamLead:e(C),editMembers:e(I)},onCloseEditModal:s[4]||(s[4]=o=>g(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(de),{visible:e(i),"onUpdate:visible":s[7]||(s[7]=o=>h(i)?i.value=o:null),header:" ",style:{width:"25rem"}},{default:f(()=>[wt,a(q,{label:"No",icon:"pi pi-times",text:"",onClick:s[6]||(s[6]=o=>i.value=!1)}),a(q,{label:"Yes",icon:"pi pi-check",text:"",onClick:Le,loading:e(y)},null,8,["loading"])]),_:1},8,["visible"])])):j("",!0)}}},_l=me(kt,[["__scopeId","data-v-3c1e03dc"]]);export{_l as default};
