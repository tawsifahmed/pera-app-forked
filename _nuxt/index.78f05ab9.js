import{_ as ue}from"./nuxt-link.2f02bd5c.js";import ee from"./button.esm.7a4c113e.js";import{_ as pe}from"./CreateCompany.014e7ef1.js";import me from"./inputicon.esm.c967f633.js";import te from"./inputtext.esm.8d7dd039.js";import ye from"./iconfield.esm.0d473b86.js";import _e from"./dialog.esm.dfab7b67.js";import ve from"./dropdown.esm.c6d41b79.js";import{a2 as le,a3 as q,a4 as oe,$ as i,o as _,b as B,i as o,l as a,u as t,a7 as h,e as E,a8 as ae,a9 as ie,q as I,ae as fe,ac as be,c as U,w as y,P as ge,t as Ce}from"./entry.693a09e0.js";import{u as z}from"./company.aa9e65b1.js";import D from"./column.esm.e0c41e27.js";import he from"./datatable.esm.064a55be.js";import"./toast.esm.a9511d87.js";import{a as Z}from"./usePermission.4571eb83.js";import{u as P}from"./workCompany.94cf01cd.js";import"./badge.esm.8c70016b.js";import"./basecomponent.esm.6482fac8.js";import"./index.esm.1d5585f1.js";import"./baseicon.esm.58f57ff7.js";import"./index.esm.a6732549.js";import"./portal.esm.78d60341.js";import"./index.esm.8561c759.js";import"./index.esm.25802037.js";import"./index.esm.b8af1d93.js";import"./overlayeventbus.esm.8a6157c4.js";import"./virtualscroller.esm.869ff603.js";import"./cookie.179efcd9.js";import"./fetch.ae0faea1.js";import"./paginator.esm.bfc760ad.js";import"./index.esm.04acda6c.js";import"./inputnumber.esm.f54d6b12.js";import"./index.esm.66a3f313.js";import"./index.esm.10532442.js";import"./index.esm.5854eed2.js";import"./index.esm.dd73803c.js";import"./index.esm.b7e0b74d.js";import"./checkbox.esm.126ebc24.js";import"./radiobutton.esm.a43f04c6.js";import"./index.esm.099ee494.js";import"./index.esm.741ebb63.js";import"./index.esm.3b0b6e2f.js";import"./index.esm.6750efaa.js";const L=d=>(ae("data-v-3355dfc3"),d=d(),ie(),d),xe={class:"position-relative flex flex-column justify-content-between w-100 modal-container"},we={class:"field"},Se=L(()=>o("label",{for:"company"},[I("Company Size"),o("i",{class:"text-red-400 text-italic"},"*")],-1)),ke={class:"field"},Ee=L(()=>o("label",{for:"worktype"},[I("Company Work Type?"),o("i",{class:"text-red-400 text-italic"},"*")],-1)),$e={class:"field"},Ve=L(()=>o("label",{for:"email"},[I("Email Address"),o("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={key:0,class:"text-danger text-center text-xs mt-2"},Me={class:"field"},Te=L(()=>o("label",{for:"company"},[I("Company Name"),o("i",{class:"text-red-400 text-italic"},"*")],-1)),Ue=L(()=>o("br",null,null,-1)),De={key:0,style:{color:"red"}},Ie={class:"create-btn-wrapper"},Le={__name:"EditCompany",props:["refCompanyId"],emits:["closeEditModal"],setup(d,{emit:H}){const{editCompany:R,getCompanyList:j}=z(),{isCompanyEdited:v}=q(z()),{refCompanyId:e}=d,$=H,x=oe();i(!1);const r=i();r.value=e!=null&&e.number_of_employees?{id:e==null?void 0:e.number_of_employees,label:e==null?void 0:e.number_of_employees}:"";const O=i([{id:"1-10",label:"1-10"},{id:"11-25",label:"11-25"},{id:"26-250",label:"26-250"},{id:"251-500",label:"251-500"},{id:"501-2000",label:"501-2000"}]),f=i(e!=null&&e.company_type?{id:e==null?void 0:e.company_type,label:e==null?void 0:e.company_type}:""),J=i([{id:"PMO",label:"PMO"},{id:"Finance & Accounting",label:"Finance & Accounting"},{id:"HR & Recruiting",label:"HR & Recruiting"},{id:"Operations",label:"Operations"},{id:"Support",label:"Support"},{id:"Sales & CRM",label:"Sales & CRM"},{id:"Personal Use",label:"Personal Use"},{id:"IT",label:"IT"},{id:"Creative & Design",label:"Creative & Design"},{id:"Personal Services",label:"Personal Services"},{id:"Marketing",label:"Marketing"},{id:"Engineering & Production",label:"Engineering & Production"},{id:"Other",label:"Other"}]),b=i(e==null?void 0:e.email),K=c=>String(c).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),g=i(null),w=i(null);g.value=e==null?void 0:e.email;const F=()=>{w.value=!1,b.value,K(b.value)!==null?(g.value=b.value,w.value=!0):(g.value=null,w.value=!1)},u=i(e==null?void 0:e.name),M=i(!1),C=i(!1),W=async()=>{var c,n;if(C.value=!0,r.value===null||f.value===null||g.value===null||u.value===null||u.value===""){M.value=!0,C.value=!1;return}else{M.value=!1;let S=(c=r.value)==null?void 0:c.label,V=(n=f.value)==null?void 0:n.label;console.log("company type",f.value.label);const T={id:e.id,name:u.value,email:g.value,address:null,contact_number:null,number_of_employees:S,company_type:V,logo:null};console.log("workspaceData",T),await R(T),v.value===!0?($("closeEditModal",!1),x.add({severity:"success",summary:"Success",detail:"Company edited successfully!",group:"br",life:3e3}),console.log("company edited"),C.value=!1):(console.log("company not edited"),x.add({severity:"error",summary:"Error",detail:"Unable to edit company!",group:"br",life:3e3}),C.value=!1)}};return(c,n)=>{const S=ve,V=te,T=ee;return _(),B("div",xe,[o("div",we,[Se,a(S,{modelValue:t(r),"onUpdate:modelValue":n[0]||(n[0]=p=>h(r)?r.value=p:null),inputId:"company",options:t(O),optionLabel:"label",placeholder:"Select Size",class:"w-full"},null,8,["modelValue","options"])]),o("div",ke,[Ee,a(S,{modelValue:t(f),"onUpdate:modelValue":n[1]||(n[1]=p=>h(f)?f.value=p:null),inputId:"worktype",options:t(J),optionLabel:"label",placeholder:"Select Type",class:"w-full"},null,8,["modelValue","options"])]),o("div",$e,[Ve,a(V,{type:"email",inputId:"email",class:"w-full px-2 py-2 shadow border focus:border-purple-500",placeholder:"Type Email",modelValue:t(b),"onUpdate:modelValue":n[2]||(n[2]=p=>h(b)?b.value=p:null),onInput:F},null,8,["modelValue"]),t(w)!==null&&t(w)!==!0?(_(),B("p",Ne,"Invalid Email!")):E("",!0)]),o("div",Me,[Te,a(V,{type:"company",class:"w-full px-2 py-2 shadow border focus:border-purple-500",placeholder:"Type Name",modelValue:t(u),"onUpdate:modelValue":n[3]||(n[3]=p=>h(u)?u.value=p:null)},null,8,["modelValue"])]),Ue,t(M)?(_(),B("p",De,"Please fill/check up all the fields properly")):E("",!0),o("div",Ie,[a(T,{onClick:W,class:"text-white py-2 px-6 tracking-wide",label:"Update Company",loading:t(C)},null,8,["loading"])])])}}},Ae=le(Le,[["__scopeId","data-v-3355dfc3"]]);const A=d=>(ae("data-v-22740af8"),d=d(),ie(),d),Re={class:"card"},Oe={class:"d-flex create-btn-wrapper mb-3"},Fe={class:"breadCrumWrap"},Be=A(()=>o("p",{class:"pi pi-angle-right"},null,-1)),ze=A(()=>o("p",{class:"text"},"Companies",-1)),He={class:"flex mb-2 justify-content-end"},je=A(()=>o("i",{class:"pi pi-search"},null,-1)),Je=A(()=>o("p",{class:"text-center"},"No Data found...",-1)),Ke=["onClick"],We=A(()=>o("p",null,"Are you sure you want to delete?",-1)),Ze={__name:"index",setup(d){const H=i(Z("create_company")),R=i(Z("update_company")),j=i(Z("delete_company")),v=i(),e=i(!0),$=oe();fe();const x=i(!1),r=i(!1),{getCompanyList:O,deleteCompany:f,switchCompany:J}=z(),{compList:b,isCompanyDeleted:K,companySwitchToast:g,isCompanySwitched:w}=q(z()),F=P();F.getCompany();const{companyList:u}=q(P()),M=()=>{x.value=!0},C=m=>{r.value=!0,n.value=m},W=m=>{r.value=m},c=i(!1);i(!1);const n=i(null),S=m=>{n.value=m,console.log("refCompanyId",n.value),c.value=!0},V=async()=>{if(console.log("refCompanyIdFin",n.value),await f(n.value),K.value===!0)if($.add({severity:"success",summary:"Successful",detail:"Company Deleted Successfully",group:"br",life:3e3}),c.value=!1,u.value.length>=1)if(n.value===Number(localStorage.getItem("userCompany")))await p(u.value[0].id),localStorage.setItem("userCompany",JSON.stringify(u.value[0].id)),await F.getCompany(),await O();else return;else localStorage.removeItem("userCompany"),window.location.href="/";else $.add({severity:"error",summary:"Error",detail:"Unable to delete company",group:"br",life:3e3}),console.log("company not deleted")};be(()=>{O(),e.value=!1}),(()=>{v.value={global:{value:null,matchMode:ge.CONTAINS}}})();const p=async m=>{m!==Number(localStorage.getItem("userCompany"))&&(await J(m),w.value===!0?(localStorage.setItem("userCompany",JSON.stringify(m)),$.add({severity:"success",summary:"Success",detail:g,group:"br",life:3e3})):$.add({severity:"error",summary:"Error",detail:g,group:"br",life:3e3}))};return(m,s)=>{const Y=ue,k=ee,ne=pe,se=me,re=te,ce=ye,G=_e,de=Ae;return _(),B("div",Re,[o("div",Oe,[o("div",Fe,[a(Y,{to:"/",class:"text pi pi-home"}),Be,ze]),t(H)?(_(),U(k,{key:0,onClick:M,class:"cursor-pointer text-white px-5 py-2",label:"Create +"})):E("",!0),a(ne,{visible:t(x),"onUpdate:visible":s[0]||(s[0]=l=>h(x)?x.value=l:null)},null,8,["visible"])]),o("div",He,[a(ce,{iconPosition:"right"},{default:y(()=>[a(se,null,{default:y(()=>[je]),_:1}),a(re,{modelValue:t(v).global.value,"onUpdate:modelValue":s[1]||(s[1]=l=>t(v).global.value=l),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),a(t(he),{filters:t(v),"onUpdate:filters":s[2]||(s[2]=l=>h(v)?v.value=l:null),class:"table-st",value:t(b),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,dataKey:"id",filterDisplay:"menu",loading:t(e)},{empty:y(()=>[Je]),loading:y(()=>[I(" Loading data. Please wait. ")]),default:y(()=>[a(t(D),{field:"index",header:"Serial",sortable:""}),a(t(D),{field:"name",header:"Company Name"},{body:y(l=>{var N;return[a(Y,{to:`/companies/${(N=l==null?void 0:l.data)==null?void 0:N.id}`},{default:y(()=>{var Q;return[o("p",{class:"cursor-pointer com-name hover:text-primary font-semibold",onClick:qe=>{var X;return p((X=l==null?void 0:l.data)==null?void 0:X.id)}},Ce((Q=l==null?void 0:l.data)==null?void 0:Q.name),9,Ke)]}),_:2},1032,["to"])]}),_:1}),a(t(D),{field:"number_of_employees",header:"Number of Employees"}),a(t(D),{field:"company_type",header:"Type"}),a(t(D),{field:"action",header:"Action"},{body:y(l=>[t(R)?(_(),U(k,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:N=>C(l.data)},null,8,["onClick"])):E("",!0),t(R)?E("",!0):(_(),U(k,{key:1,style:{visibility:"hidden"},icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:N=>C(l.data)},null,8,["onClick"])),t(j)?(_(),U(k,{key:2,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:N=>S(l.data.id)},null,8,["onClick"])):E("",!0),t(j)?E("",!0):(_(),U(k,{key:3,style:{visibility:"hidden"},icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:N=>S(l.data.id)},null,8,["onClick"]))]),_:1})]),_:1},8,["filters","value","loading"]),a(G,{visible:t(c),"onUpdate:visible":s[4]||(s[4]=l=>h(c)?c.value=l:null),header:" ",style:{width:"25rem"}},{default:y(()=>[We,a(k,{label:"No",icon:"pi pi-times",text:"",onClick:s[3]||(s[3]=l=>c.value=!1)}),a(k,{label:"Yes",icon:"pi pi-check",text:"",onClick:V})]),_:1},8,["visible"]),a(G,{visible:t(r),"onUpdate:visible":s[6]||(s[6]=l=>h(r)?r.value=l:null),modal:"",header:"Edit Company",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[a(de,{refCompanyId:t(n),onCloseEditModal:s[5]||(s[5]=l=>W(l))},null,8,["refCompanyId"])]),_:1},8,["visible"])])}}},Rt=le(Ze,[["__scopeId","data-v-22740af8"]]);export{Rt as default};
