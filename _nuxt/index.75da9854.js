import ae from"./toast.esm.b0531f89.js";import{_ as ie}from"./nuxt-link.4096e530.js";import{_ as ne}from"./CreateSpace.bb1469c1.js";import re from"./inputicon.esm.06a6089c.js";import G from"./inputtext.esm.1adcdca4.js";import ce from"./iconfield.esm.ade3cb3b.js";import J from"./button.esm.3b86381e.js";import de from"./textarea.esm.54f73921.js";import pe from"./multiselect.esm.d7f23f7e.js";import{a2 as ue,a3 as Q,$ as l,a4 as X,a5 as me,o as g,b as B,u as o,i as e,l as s,a6 as k,K as Z,t as F,e as b,a7 as ve,a8 as fe,q as U,a9 as _e,aa as ye,ab as ge,w as u,s as be,c as V,P as xe,a as Se}from"./entry.ac7f7863.js";import{u as N}from"./company.b2683794.js";import"./colorpicker.esm.6b916404.js";import"./inputswitch.esm.5cbaa481.js";import Y from"./dialog.esm.d0098eaa.js";import{a as O}from"./usePermission.696200f7.js";import I from"./column.esm.0912c493.js";import Ce from"./datatable.esm.e14ce81f.js";import"./portal.esm.9859a090.js";import"./basecomponent.esm.9e3a8801.js";import"./index.esm.ce62ee13.js";import"./baseicon.esm.0b1bbe6c.js";import"./index.esm.5b8bc08b.js";import"./index.esm.3be4e240.js";import"./index.esm.3a2b51ac.js";import"./workCompany.11c26d14.js";import"./cookie.3945ca3b.js";import"./badge.esm.95c9c5c2.js";import"./index.esm.da1576e5.js";import"./checkbox.esm.039a8c45.js";import"./index.esm.dabc14ae.js";import"./index.esm.cc5d2015.js";import"./overlayeventbus.esm.90e85a42.js";import"./virtualscroller.esm.0243c540.js";import"./paginator.esm.191359e7.js";import"./index.esm.134b9ad1.js";import"./dropdown.esm.41ec9c30.js";import"./inputnumber.esm.0bf6a2e4.js";import"./index.esm.d3b3d2a0.js";import"./index.esm.34f4e146.js";import"./index.esm.3e0a6883.js";import"./index.esm.45d2fbbf.js";import"./index.esm.80d49dba.js";import"./radiobutton.esm.8a177837.js";import"./index.esm.aa6b8b51.js";import"./index.esm.efe5814b.js";const P=x=>(ve("data-v-d31ca406"),x=x(),fe(),x),$e={class:""},ke={key:0},he={class:"field flex flex-column"},we=P(()=>e("label",{for:"name"},[U("Space Name"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Ee={class:"field flex flex-column"},De=P(()=>e("label",{for:"name"},"Space Description",-1)),Ve={class:"field"},Ie=P(()=>e("label",{for:"name"},[U("Space Color"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={class:"m-0 d-flex colorpicker-wrapper"},Ue={class:"flex justify-center align-items-center"},Pe={class:"ml-2"},Me={class:"flex"},Te={class:"field"},Ae=P(()=>e("label",null,[U("Space Members"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Be={key:0,style:{color:"red"}},Fe=P(()=>e("br",null,null,-1)),Le={class:"flex justify-content-end mt-2"},je={__name:"EditSpace",props:["refSpaceId","singleCompany"],emits:["closeEditSpace"],setup(x,{emit:L}){const{editSpace:j}=N(),{isSpaceEdited:h}=Q(N()),M=N(),{refSpaceId:r,singleCompany:R}=x,w=l(!0),T=l(!1),m=l(!1),S=l(!1),E=X(),v=l(r==null?void 0:r.color),n=l(r==null?void 0:r.name),C=l(r==null?void 0:r.description),y=l([]),f=l(r==null?void 0:r.users.map(_=>({id:_.id,name:_.name})));me(async()=>{await M.getTaskAssignModalData(),y.value=M.users}),l(null),console.log("spaceAvatarPreview",v.value);const c=_=>{v.value=_},K=L,p=l(!1),q=async()=>{if(m.value=!1,S.value=!1,p.value=!0,n.value===null||n.value===""){m.value=!0,p.value=!1;return}if(f.value.length===0){S.value=!0,p.value=!1;return}else{const _={id:r.id,name:n.value,description:C.value,company_id:R.id,color:v.value,users:f.value.map(t=>t.id)};await j(_),h.value===!0?(w.value=!1,p.value=!1,K("closeEditSpace",!1),E.add({severity:"success",summary:"Successful",detail:"Space Updated Successfully",group:"br",life:3e3}),console.log("space created")):(p.value=!1,E.add({severity:"error",summary:"Error",detail:"Unable to update space",group:"br",life:3e3}),console.log("space not created"))}},z=()=>{K("closeEditSpace",!1)};return(_,t)=>{const d=G,H=de,D=pe,A=J;return g(),B("div",$e,[o(w)?(g(),B("div",ke,[e("div",he,[we,s(d,{id:"name",modelValue:o(n),"onUpdate:modelValue":t[0]||(t[0]=i=>k(n)?n.value=i:null),required:"true",invalid:o(m)},null,8,["modelValue","invalid"])]),e("div",Ee,[De,s(H,{id:"description",class:"border-gray-300",modelValue:o(C),"onUpdate:modelValue":t[1]||(t[1]=i=>k(C)?C.value=i:null),rows:"3",cols:"20",invalid:_.spaceDescriptionError},null,8,["modelValue","invalid"])]),e("div",Ve,[Ie,e("div",Ne,[e("div",Ue,[e("div",{id:"dynamic-div",style:Z(`background-color: ${o(v)};`),class:"d-flex align-items-center justify-content-center text-3xl text-white"},F(o(n)?o(n).charAt(0).toUpperCase():"S"),5),e("div",Pe,[e("div",Me,[e("div",{id:"white",class:"color",onClick:t[2]||(t[2]=i=>c("#e5ded4"))}),e("div",{id:"gray",class:"color",onClick:t[3]||(t[3]=i=>c("#9e9e9e"))}),e("div",{id:"orange",class:"color",onClick:t[4]||(t[4]=i=>c("#ff9800"))}),e("div",{id:"purple",class:"color",onClick:t[5]||(t[5]=i=>c("#9c27b0"))}),e("div",{id:"cadetblue",class:"color",onClick:t[6]||(t[6]=i=>c("#e91e63"))}),e("div",{id:"burlywood",class:"color",onClick:t[7]||(t[7]=i=>c("#4caf50"))}),e("div",{id:"pink",class:"color",onClick:t[8]||(t[8]=i=>c("#f44336"))}),e("div",{id:"lightseagreen",class:"color",onClick:t[9]||(t[9]=i=>c("#009688"))}),e("div",{id:"brown",class:"color",onClick:t[10]||(t[10]=i=>c("#795548"))}),e("div",{id:"cyan",class:"color",onClick:t[11]||(t[11]=i=>c("#00bcd4"))}),e("div",{id:"amber",class:"color",onClick:t[12]||(t[12]=i=>c("#ffc107"))}),e("div",{id:"indigo",class:"color",onClick:t[13]||(t[13]=i=>c("#3f51b5"))})])])])])]),e("div",Te,[Ae,s(D,{display:"chip",modelValue:o(f),"onUpdate:modelValue":t[14]||(t[14]=i=>k(f)?f.value=i:null),options:o(y),filter:"",optionLabel:"name",placeholder:"Select Space Members",class:"w-full",invalid:o(S)},null,8,["modelValue","options","invalid"])]),o(T)?(g(),B("p",Be," Please fill/check up all the fields")):b("",!0)])):b("",!0),Fe,e("div",Le,[s(A,{label:"Cancel",icon:"pi pi-times",text:"",onClick:z}),s(A,{loading:o(p),label:"Save",icon:"pi pi-check",text:"",onClick:q},null,8,["loading"])])])}}},Re=ue(je,[["__scopeId","data-v-d31ca406"]]);const Ke={class:"card"},qe={class:"d-flex create-space-btn-wrapper mb-3"},ze={class:"breadCrumWrap"},He=e("p",{class:"pi pi-angle-right"},null,-1),Oe=e("p",{class:"pi pi-angle-right"},null,-1),We={class:"text"},Ye={class:"create-btn-wrapper"},Ge={class:"flex justify-content-end mb-2"},Je=e("i",{class:"pi pi-search"},null,-1),Qe=e("p",{class:"py-2 text-center"},"No Data found...",-1),Xe={class:"cursor-pointer com-name hover:text-primary font-semibold"},Ze=e("p",null,"Are you sure you want to delete?",-1),Ht={__name:"index",setup(x){const{getSingleCompany:L,deleteSpace:j}=N(),{singleCompany:h,singleCompanySpaces:M,isSpaceDeleted:r}=Q(N()),R=l(O("create_space")),w=l(O("update_space")),T=l(O("delete_space")),m=l(),S=l(!0),E=X(),{companies:v}=_e().params;if(console.log("companyParams,",v),l(!1),h.value===void 0)throw ye({statusCode:404,message:"Company not found",fatal:!0});const n=l(null),C=t=>{n.value=t,console.log("refCompanyId",n.value),y.value=!0},y=l(!1),f=l(!1),c=async()=>{f.value=!0,console.log("refCompanyIdFin",n.value),await j(n.value,v),r.value===!0?(E.add({severity:"success",summary:"Successful",detail:"Space Deleted Successfully",group:"br",life:3e3}),y.value=!1,console.log("space deleted"),f.value=!1):(E.add({severity:"error",summary:"Error",detail:"Unable to delete space",group:"br",life:3e3}),console.log("space not deleted"),f.value=!1)};(()=>{m.value={global:{value:null,matchMode:xe.CONTAINS}}})();const p=l(!1),q=t=>{p.value=!0,n.value=t,console.log("refSpaceId",n.value)};ge(()=>{L(v),S.value=!1,console.log("company,",v)});const z=t=>{p.value=t},_=l(!0);return(t,d)=>{var W;const H=ae,D=ie,A=ne,i=re,ee=G,te=ce,$=J,oe=Re,se=Se("tooltip");return g(),B("div",Ke,[s(H,{position:"bottom-right",group:"br"}),e("div",qe,[e("div",ze,[s(D,{to:"/",class:"text pi pi-home"}),He,s(D,{to:"/companies",class:"text"},{default:u(()=>[U("Companies")]),_:1}),Oe,e("p",We,"Company - "+F((W=o(h))==null?void 0:W.name),1)]),e("div",Ye,[o(R)?be((g(),V(A,{key:0,spacePage:o(_)},null,8,["spacePage"])),[[se,{value:"Create Space"},void 0,{left:!0}]]):b("",!0)])]),e("div",Ge,[s(te,{iconPosition:"right"},{default:u(()=>[s(i,null,{default:u(()=>[Je]),_:1}),s(ee,{modelValue:o(m).global.value,"onUpdate:modelValue":d[0]||(d[0]=a=>o(m).global.value=a),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),s(o(Ce),{filters:o(m),"onUpdate:filters":d[1]||(d[1]=a=>k(m)?m.value=a:null),class:"table-dco",value:o(M),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:o(S)},{empty:u(()=>[Qe]),loading:u(()=>[U(" Loading data. Please wait. ")]),default:u(()=>[s(o(I),{field:"index",header:"Serial",sortable:""}),s(o(I),{field:"name",header:"Space Name"},{body:u(a=>[s(D,{to:`/companies/${o(v)}/spaces/${a.data.id}`},{default:u(()=>[e("p",Xe,F(a.data.name),1)]),_:2},1032,["to"])]),_:1}),s(o(I),{field:"description",header:"Description"}),s(o(I),{field:"color",header:"Space Color"},{body:u(a=>[e("div",{id:"dynamic-div",style:Z(`background-color: ${a.data.color}; width: 30px;`),class:"flex font-semibold justify-content-center rounded py-2 px-2 w-fit text-white"},F(a.data.name?a.data.name.charAt(0).toUpperCase():"S"),5)]),_:1}),s(o(I),{field:"action",header:"Action"},{body:u(a=>[o(w)?(g(),V($,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:le=>q(a.data)},null,8,["onClick"])):b("",!0),o(T)?(g(),V($,{key:1,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:le=>C(a.data.id)},null,8,["onClick"])):b("",!0),o(w)?b("",!0):(g(),V($,{key:2,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",style:{visibility:"hidden"}})),o(T)?b("",!0):(g(),V($,{key:3,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),s(o(Y),{visible:o(y),"onUpdate:visible":d[3]||(d[3]=a=>k(y)?y.value=a:null),header:" ",style:{width:"25rem"}},{default:u(()=>[Ze,s($,{label:"No",icon:"pi pi-times",text:"",onClick:d[2]||(d[2]=a=>y.value=!1)}),s($,{label:"Yes",icon:"pi pi-check",loading:o(f),text:"",onClick:c},null,8,["loading"])]),_:1},8,["visible"]),s(o(Y),{visible:o(p),"onUpdate:visible":d[5]||(d[5]=a=>k(p)?p.value=a:null),modal:"",header:"Edit Space",style:{width:"32rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:u(()=>[s(oe,{refSpaceId:o(n),singleCompany:o(h),onCloseEditSpace:d[4]||(d[4]=a=>z(a))},null,8,["refSpaceId","singleCompany"])]),_:1},8,["visible"])])}}};export{Ht as default};
