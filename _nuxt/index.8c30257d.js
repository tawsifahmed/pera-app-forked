import sa from"./toast.esm.7bc5073d.js";import{_ as aa}from"./nuxt-link.11d72d89.js";import vs from"./multiselect.esm.e6bfb530.js";import ps from"./dropdown.esm.94ac987f.js";import fs from"./calendar.esm.cf269401.js";import es from"./button.esm.32bef0f9.js";import ia from"./inputicon.esm.0b09c2bf.js";import Ks from"./inputtext.esm.49d8341d.js";import la from"./iconfield.esm.73ef25fa.js";import na from"./toolbar.esm.d15fb73b.js";import Js from"./card.esm.544308c7.js";import Ss from"./avatar.esm.1b857248.js";import oa from"./speeddial.esm.c54ad848.js";import Gs from"./treetable.esm.2b371a13.js";import ra from"./timeline.esm.f0ed464d.js";import{r as Et,o as d,b as h,l as _,p as Cs,w as S,h as ae,q as he,i,t as E,c as de,n as Us,m as Fs,e as D,k as me,K as P,F as ve,f as be,T as hs,_ as H,j as da,G as Xs,Q as ua,I as ft,a3 as St,$ as v,a4 as ts,aa as ds,ar as Le,a5 as ys,V as Es,a as _s,u as o,a7 as K,s as z,a6 as Qt,bO as Jt,ca as Zs,a2 as xs,a8 as Ms,a9 as Vs,ao as ca,cb as ha,ac as ma,P as va}from"./entry.3bbd680d.js";import{u as _t,a as Ns}from"./cookie.46510969.js";import{u as us}from"./fetch.114836d2.js";import{d as pa}from"./vuedraggable.umd.11f80b64.js";import{u as Ue}from"./company.3b49c059.js";import{a as yt}from"./usePermission.4052dabe.js";import pt from"./column.esm.7a10f518.js";import Qs from"./textarea.esm.1a69d912.js";import{s as ms}from"./editor.esm.5134eb81.js";import fa from"./floatlabel.esm.e0f1de5d.js";import ya from"./inputnumber.esm.953e3723.js";import _a from"./confirmpopup.esm.356edbb4.js";import ga from"./tabpanel.esm.70b9d3b7.js";import wa from"./tabview.esm.b8dad8f0.js";import{u as Bs}from"./clock.a4549a4e.js";import"./inplace.esm.9a5f0027.js";import rs from"./dialog.esm.8bebc37a.js";import"./portal.esm.b00f5f1c.js";import"./basecomponent.esm.22a83963.js";import"./index.esm.4bb3c5dc.js";import"./baseicon.esm.07236b28.js";import"./index.esm.06345a70.js";import"./index.esm.e875bfac.js";import"./index.esm.5795fbf5.js";import"./checkbox.esm.ddd12731.js";import"./index.esm.9d078b4b.js";import"./index.esm.08a9cf78.js";import"./index.esm.c51a4b34.js";import"./overlayeventbus.esm.fae87c9d.js";import"./virtualscroller.esm.bd9c8660.js";import"./index.esm.4ca9447a.js";import"./index.esm.39cf72b3.js";import"./index.esm.8043c609.js";import"./badge.esm.ab9659d4.js";import"./index.esm.870f63e2.js";import"./paginator.esm.8df0b0a3.js";import"./index.esm.08162a27.js";import"./index.esm.8d661d72.js";import"./index.esm.f03fcaa8.js";import"./index.esm.d98cf75f.js";import"./index.esm.11091131.js";import"./index.esm.f78d76df.js";import"./_commonjsHelpers.87174ba5.js";import"./workCompany.8b0d286c.js";var ba=Object.defineProperty,Da=(t,e,a)=>e in t?ba(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,dt=(t,e,a)=>Da(t,typeof e!="symbol"?e+"":e,a);const ka=(t,e,a)=>{const l=t[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})};let Gt,Ys,zs,qe,Xt={},It={};class Ta{constructor(e,a=!1){dt(this,"texts",{}),dt(this,"dateToMinutes",l=>l.getHours()*60+l.getMinutes()),qe=this,this._texts=e,!a&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(e){return qe.addDays(this,e)},Date.prototype.subtractDays=function(e){return qe.subtractDays(this,e)},Date.prototype.addHours=function(e){return qe.addHours(this,e)},Date.prototype.subtractHours=function(e){return qe.subtractHours(this,e)},Date.prototype.addMinutes=function(e){return qe.addMinutes(this,e)},Date.prototype.subtractMinutes=function(e){return qe.subtractMinutes(this,e)},Date.prototype.getWeek=function(){return qe.getWeek(this)},Date.prototype.isToday=function(){return qe.isToday(this)},Date.prototype.isLeapYear=function(){return qe.isLeapYear(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return qe.formatDate(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return qe.formatTime(this,e)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(e){this._texts=e}_todayFormatted(){return Ys!==new Date().getDate()&&(Gt=new Date,Ys=Gt.getDate(),zs=`${Gt.getFullYear()}-${Gt.getMonth()}-${Gt.getDate()}`),zs}addDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()+a),l}subtractDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()-a),l}addHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()+a),l}subtractHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()-a),l}addMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()+a),l}subtractMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()-a),l}getWeek(e){const a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),l=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-l);const r=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a-r)/864e5+1)/7)}isToday(e){return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===this._todayFormatted()}isLeapYear(e){const a=e.getFullYear();return!(a%400)||a%100&&!(a%4)}getPreviousFirstDayOfWeek(e=null,a){const l=e&&new Date(e.valueOf())||new Date,r=a?7:6;return l.setDate(l.getDate()-(l.getDay()+r)%7),l}stringToDate(e){return e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/")))}countDays(e,a){typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof a=="string"&&(a=a.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),a=new Date(a).setHours(0,0,1,0);const l=(new Date(a).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((a-e-l)/(24*3600*1e3))}datesInSameTimeStep(e,a,l){return Math.abs(e.getTime()-a.getTime())<=l*60*1e3}formatDate(e,a="YYYY-MM-DD",l=null){if(l||(l=this._texts),a||(a="YYYY-MM-DD"),a==="YYYY-MM-DD")return this.formatDateLite(e);Xt={},It={};const r={YYYY:()=>this._hydrateDateObject(e,l).YYYY,YY:()=>this._hydrateDateObject(e,l).YY(),M:()=>this._hydrateDateObject(e,l).M,MM:()=>this._hydrateDateObject(e,l).MM(),MMM:()=>this._hydrateDateObject(e,l).MMM(),MMMM:()=>this._hydrateDateObject(e,l).MMMM(),MMMMG:()=>this._hydrateDateObject(e,l).MMMMG(),D:()=>this._hydrateDateObject(e,l).D,DD:()=>this._hydrateDateObject(e,l).DD(),S:()=>this._hydrateDateObject(e,l).S(),d:()=>this._hydrateDateObject(e,l).d,dd:()=>this._hydrateDateObject(e,l).dd(),ddd:()=>this._hydrateDateObject(e,l).ddd(),dddd:()=>this._hydrateDateObject(e,l).dddd(),HH:()=>this._hydrateTimeObject(e,l).HH,H:()=>this._hydrateTimeObject(e,l).H,hh:()=>this._hydrateTimeObject(e,l).hh,h:()=>this._hydrateTimeObject(e,l).h,am:()=>this._hydrateTimeObject(e,l).am,AM:()=>this._hydrateTimeObject(e,l).AM,mm:()=>this._hydrateTimeObject(e,l).mm,m:()=>this._hydrateTimeObject(e,l).m};return a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(s,c)=>{const n=r[c.replace(/\{|\}/g,"")];return n!==void 0?n():c})}formatDateLite(e){const a=e.getMonth()+1,l=e.getDate();return`${e.getFullYear()}-${a<10?"0":""}${a}-${l<10?"0":""}${l}`}formatTime(e,a="HH:mm",l=null,r=!1){let s=!1;if(r){const[y,m,p]=[e.getHours(),e.getMinutes(),e.getSeconds()];y+m+p===23+59+59&&(s=!0)}if(e instanceof Date&&a==="HH:mm")return s?"24:00":this.formatTimeLite(e);It={},l||(l=this._texts);const c=this._hydrateTimeObject(e,l),n=a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(y,m)=>{const p=c[m.replace(/\{|\}/g,"")];return p!==void 0?p:m});return s?n.replace("23:59","24:00"):n}formatTimeLite(e){const a=e.getHours(),l=e.getMinutes();return`${(a<10?"0":"")+a}:${(l<10?"0":"")+l}`}_nth(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(e,a){if(Xt.D)return Xt;const l=e.getFullYear(),r=e.getMonth()+1,s=e.getDate(),n=(e.getDay()-1+7)%7;return Xt={YYYY:l,YY:()=>l.toString().substring(2),M:r,MM:()=>(r<10?"0":"")+r,MMM:()=>a.months[r-1].substring(0,3),MMMM:()=>a.months[r-1],MMMMG:()=>(a.monthsGenitive||a.months)[r-1],D:s,DD:()=>(s<10?"0":"")+s,S:()=>this._nth(s),d:n+1,dd:()=>a.weekDays[n][0],ddd:()=>a.weekDays[n].substr(0,3),dddd:()=>a.weekDays[n]},Xt}_hydrateTimeObject(e,a){if(It.am)return It;let l,r;e instanceof Date?(l=e.getHours(),r=e.getMinutes()):(l=Math.floor(e/60),r=Math.floor(e%60));const s=l%12?l%12:12,c=(a||{am:"am",pm:"pm"})[l===24||l<12?"am":"pm"];return It={H:l,h:s,HH:(l<10?"0":"")+l,hh:(s<10?"0":"")+s,am:c,AM:c.toUpperCase(),m:r,mm:(r<10?"0":"")+r},It}}const Ca=24*60;class Ea{constructor(e){dt(this,"_vuecal",null),dt(this,"selectCell",(a=!1,l,r)=>{this._vuecal.$emit("cell-click",r?{date:l,split:r}:l),this._vuecal.clickToNavigate||a?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",r?{date:l,split:r}:l)))}),dt(this,"keyPressEnterCell",(a,l)=>{this._vuecal.$emit("cell-keypress-enter",l?{date:a,split:l}:a),this._vuecal.switchToNarrowerView()}),dt(this,"getPosition",a=>{const{left:l,top:r}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:s,clientY:c}="ontouchstart"in window&&a.touches?a.touches[0]:a;return{x:s-l,y:c-r}}),dt(this,"minutesAtCursor",a=>{let l=0,r={x:0,y:0};const{timeStep:s,timeCellHeight:c,timeFrom:n}=this._vuecal.$props;return typeof a=="number"?l=a:typeof a=="object"&&(r=this.getPosition(a),l=Math.round(r.y*s/parseInt(c)+n)),{minutes:Math.max(Math.min(l,Ca),0),cursorCoords:r}}),this._vuecal=e}}const Sa=2,ks=24*60;let ge,we,Ts;class xa{constructor(e,a){dt(this,"_vuecal",null),dt(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=e,ge=a}createAnEvent(e,a,l){if(typeof e=="string"&&(e=ge.stringToDate(e)),!(e instanceof Date))return!1;const r=ge.dateToMinutes(e);a=a*1||Sa*60;const s=r+a,c=ge.addMinutes(new Date(e),a);l.end&&(typeof l.end=="string"&&(l.end=ge.stringToDate(l.end)),l.endTimeMinutes=ge.dateToMinutes(l.end));const n={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:e,startTimeMinutes:r,end:c,endTimeMinutes:s,segments:null,...l};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(n,()=>this.deleteAnEvent(n))))return n.startDateF!==n.endDateF&&(n.daysCount=ge.countDays(n.start,n.end)),this._vuecal.mutableEvents.push(n),this._vuecal.addEventsToView([n]),this._vuecal.emitWithEvent("event-create",n),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(n),originalEvent:null}),n}addEventSegment(e){e.segments||(e.segments={},e.segments[ge.formatDateLite(e.start)]={start:e.start,startTimeMinutes:e.startTimeMinutes,endTimeMinutes:ks,isFirstDay:!0,isLastDay:!1});const a=e.segments[ge.formatDateLite(e.end)];a&&(a.isLastDay=!1,a.endTimeMinutes=ks);const l=ge.addDays(e.end,1),r=ge.formatDateLite(l);return l.setHours(0,0,0,0),e.segments[r]={start:l,startTimeMinutes:0,endTimeMinutes:e.endTimeMinutes,isFirstDay:!1,isLastDay:!0},e.end=ge.addMinutes(l,e.endTimeMinutes),e.daysCount=Object.keys(e.segments).length,r}removeEventSegment(e){let a=Object.keys(e.segments).length;if(a<=1)return ge.formatDateLite(e.end);delete e.segments[ge.formatDateLite(e.end)],a--;const l=ge.subtractDays(e.end,1),r=ge.formatDateLite(l),s=e.segments[r];return a?s&&(s.isLastDay=!0,s.endTimeMinutes=e.endTimeMinutes):e.segments=null,e.daysCount=a||1,e.end=l,r}createEventSegments(e,a,l){const r=a.getTime(),s=l.getTime();let c=e.start.getTime(),n=e.end.getTime(),y=!1,m,p,M;for(!e.end.getHours()&&!e.end.getMinutes()&&(n-=1e3),e.segments={},e.repeat?(m=r,p=Math.min(s,e.repeat.until?ge.stringToDate(e.repeat.until).getTime():s)):(m=Math.max(r,c),p=Math.min(s,n));m<=p;){let $=!1;const B=ge.addDays(new Date(m),1).setHours(0,0,0,0);let I,pe,ie,J;if(e.repeat){const G=new Date(m),fe=ge.formatDateLite(G);(y||e.occurrences&&e.occurrences[fe])&&(y||(c=e.occurrences[fe].start,M=new Date(c).setHours(0,0,0,0),n=e.occurrences[fe].end),y=!0,$=!0),I=m===M,pe=fe===ge.formatDateLite(new Date(n)),ie=new Date(I?c:m),J=ge.formatDateLite(ie),pe&&(y=!1)}else $=!0,I=m===c,pe=p===n&&B>p,ie=I?e.start:new Date(m),J=ge.formatDateLite(I?e.start:ie);$&&(e.segments[J]={start:ie,startTimeMinutes:I?e.startTimeMinutes:0,endTimeMinutes:pe?e.endTimeMinutes:ks,isFirstDay:I,isLastDay:pe}),m=B}return e}deleteAnEvent(e){this._vuecal.emitWithEvent("event-delete",e),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(a=>a._eid!==e._eid),this._vuecal.view.events=this._vuecal.view.events.filter(a=>a._eid!==e._eid)}checkCellOverlappingEvents(e,a){Ts=e.slice(0),we={},e.forEach(r=>{Ts.shift(),we[r._eid]||(we[r._eid]={overlaps:[],start:r.start,position:0}),we[r._eid].position=0,Ts.forEach(s=>{we[s._eid]||(we[s._eid]={overlaps:[],start:s.start,position:0});const c=this.eventInRange(s,r.start,r.end),n=a.overlapsPerTimeStep?ge.datesInSameTimeStep(r.start,s.start,a.timeStep):1;if(!r.background&&!r.allDay&&!s.background&&!s.allDay&&c&&n)we[r._eid].overlaps.push(s._eid),we[r._eid].overlaps=[...new Set(we[r._eid].overlaps)],we[s._eid].overlaps.push(r._eid),we[s._eid].overlaps=[...new Set(we[s._eid].overlaps)],we[s._eid].position++;else{let y,m;(y=(we[r._eid]||{overlaps:[]}).overlaps.indexOf(s._eid))>-1&&we[r._eid].overlaps.splice(y,1),(m=(we[s._eid]||{overlaps:[]}).overlaps.indexOf(r._eid))>-1&&we[s._eid].overlaps.splice(m,1),we[s._eid].position--}})});let l=0;for(const r in we){const s=we[r],c=s.overlaps.map(n=>({id:n,start:we[n].start}));c.push({id:r,start:s.start}),c.sort((n,y)=>n.start<y.start?-1:n.start>y.start?1:n.id>y.id?-1:1),s.position=c.findIndex(n=>n.id===r),l=Math.max(this.getOverlapsStreak(s,we),l)}return[we,l]}getOverlapsStreak(e,a={}){let l=e.overlaps.length+1,r=[];return e.overlaps.forEach(s=>{r.includes(s)||e.overlaps.filter(n=>n!==s).forEach(n=>{a[n].overlaps.includes(s)||r.push(n)})}),r=[...new Set(r)],l-=r.length,l}eventInRange(e,a,l){if(e.allDay||!this._vuecal.time){const c=new Date(e.start).setHours(0,0,0,0);return new Date(e.end).setHours(23,59,0,0)>=new Date(a).setHours(0,0,0,0)&&c<=new Date(l).setHours(0,0,0,0)}const r=e.start.getTime(),s=e.end.getTime();return r<l.getTime()&&s>a.getTime()}}const Ma={class:"vuecal__flex vuecal__weekdays-headings"},Va=["onClick"],$a={class:"vuecal__flex weekday-label",grow:""},Oa={class:"full"},Aa={class:"small"},La={class:"xsmall"},ja={key:0},Ia={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function Ha(t,e,a,l,r,s){return d(),h("div",Ma,[(d(!0),h(ve,null,be(s.headings,(c,n)=>(d(),h(ve,{key:n},[c.hide?D("",!0):(d(),h("div",{key:0,class:me(["vuecal__flex vuecal__heading",{today:c.today,clickable:s.cellHeadingsClickable}]),style:P(s.weekdayCellStyles),onClick:y=>s.view.id==="week"&&s.selectCell(c.date,y),onDblclick:e[0]||(e[0]=y=>s.view.id==="week"&&s.vuecal.dblclickToNavigate&&a.switchToNarrowerView())},[_(hs,{name:`slide-fade--${a.transitionDirection}`,appear:s.vuecal.transitions},{default:S(()=>[(d(),h("div",{class:"vuecal__flex",column:"",key:s.vuecal.transitions?`${n}-${c.dayOfMonth}`:!1},[i("div",$a,[ae(t.$slots,"weekday-heading",{heading:s.cleanupHeading(c),view:s.view},()=>[i("span",Oa,E(c.full),1),i("span",Aa,E(c.small),1),i("span",La,E(c.xsmall),1),c.dayOfMonth?(d(),h("span",ja," "+E(c.dayOfMonth),1)):D("",!0)])]),s.vuecal.hasSplits&&s.vuecal.stickySplitLabels?(d(),h("div",Ia,[(d(!0),h(ve,null,be(s.vuecal.daySplits,(y,m)=>(d(),h("div",{class:me(["day-split-header",y.class||!1]),key:m},[ae(t.$slots,"split-label",{split:y,view:s.view},()=>[he(E(y.label),1)])],2))),128))])):D("",!0)]))]),_:2},1032,["name","appear"])],46,Va))],64))),128))])}const Ht=(t,e)=>{const a=t.__vccOpts||t;for(const[l,r]of e)a[l]=r;return a},Wa={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(t,e){t.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=t),this.utils.cell.selectCell(!1,t,e)},cleanupHeading:t=>({label:t.full,date:t.date,...t.today?{today:t.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let t=!1;return this.weekDays.map((a,l)=>{const r=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?l-1:l);return{hide:a.hide,full:a.label,small:a.short||a.label.substr(0,3),xsmall:a.short||a.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:r.getDate(),date:r,today:!t&&this.utils.date.isToday(r)&&!t++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((t,e)=>t+e.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},ea=Ht(Wa,[["render",Ha]]),Ua={class:"vuecal__header"},Fa={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},Na=["onDragenter","onDragleave","onClick","aria-label"],Ba={key:1,class:"vuecal__title-bar"},Ya=["aria-label"],za={class:"vuecal__flex vuecal__title",grow:""},Ra=["aria-label"],qa={key:0,class:"vuecal__flex vuecal__split-days-headers"};function Pa(t,e,a,l,r,s){const c=Et("weekdays-headings");return d(),h("div",Ua,[a.options.hideViewSelector?D("",!0):(d(),h("div",Fa,[(d(!0),h(ve,null,be(a.viewProps.views,(n,y)=>(d(),h(ve,{key:y},[n.enabled?(d(),h("button",{key:0,class:me(["vuecal__view-btn",{"vuecal__view-btn--active":s.view.id===y,"vuecal__view-btn--highlighted":t.highlightedControl===y}]),type:"button",onDragenter:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(m,y,t.$data),onDragleave:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(m,y,t.$data),onClick:m=>s.switchView(y,null,!0),"aria-label":`${n.label} view`},E(n.label),43,Na)):D("",!0)],64))),128))])),a.options.hideTitleBar?D("",!0):(d(),h("div",Ba,[i("button",{class:me(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":t.highlightedControl==="previous"}]),type:"button",onClick:e[0]||(e[0]=(...n)=>s.previous&&s.previous(...n)),onDragenter:e[1]||(e[1]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"previous",t.$data)),onDragleave:e[2]||(e[2]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"previous",t.$data)),"aria-label":`Previous ${s.view.id}`},[ae(t.$slots,"arrow-prev")],42,Ya),i("div",za,[_(hs,{name:a.options.transitions?`slide-fade--${s.transitionDirection}`:""},{default:S(()=>[(d(),de(da(s.broaderView?"button":"span"),{type:!!s.broaderView&&"button",key:`${s.view.id}${s.view.startDate.toString()}`,onClick:e[3]||(e[3]=n=>!!s.broaderView&&s.switchToBroaderView()),"aria-label":!!s.broaderView&&`Go to ${s.broaderView} view`},{default:S(()=>[ae(t.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),a.options.todayButton?(d(),h("button",{key:0,class:me(["vuecal__today-btn",{"vuecal__today-btn--highlighted":t.highlightedControl==="today"}]),type:"button",onClick:e[4]||(e[4]=(...n)=>s.goToToday&&s.goToToday(...n)),onDragenter:e[5]||(e[5]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"today",t.$data)),onDragleave:e[6]||(e[6]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"today",t.$data)),"aria-label":"Today"},[ae(t.$slots,"today-button")],34)):D("",!0),i("button",{class:me(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":t.highlightedControl==="next"}]),type:"button",onClick:e[7]||(e[7]=(...n)=>s.next&&s.next(...n)),onDragenter:e[8]||(e[8]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"next",t.$data)),onDragleave:e[9]||(e[9]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"next",t.$data)),"aria-label":`Next ${s.view.id}`},[ae(t.$slots,"arrow-next")],42,Ra)])),a.viewProps.weekDaysInHeader?(d(),de(c,{key:2,"week-days":a.weekDays,"transition-direction":s.transitionDirection,"switch-to-narrower-view":a.switchToNarrowerView},Cs({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:S(({heading:n,view:y})=>[ae(t.$slots,"weekday-heading",{heading:n,view:y})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:S(({split:n})=>[ae(t.$slots,"split-label",{split:n,view:s.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):D("",!0),_(hs,{name:`slide-fade--${s.transitionDirection}`},{default:S(()=>[s.showDaySplits?(d(),h("div",qa,[(d(!0),h(ve,null,be(a.daySplits,(n,y)=>(d(),h("div",{class:me(["day-split-header",n.class||!1]),key:y},[ae(t.$slots,"split-label",{split:n,view:s.view.id},()=>[he(E(n.label),1)])],2))),128))])):D("",!0)]),_:3},8,["name"])])}const Ka={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:ea},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(t){this.vuecal.transitionDirection=t}},broaderView(){const{enabledViews:t}=this.vuecal;return t[t.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},Ja=Ht(Ka,[["render",Pa]]),Ga=["draggable"];function Xa(t,e,a,l,r,s){return d(),h("div",{class:me(["vuecal__event",s.eventClasses]),style:P(s.eventStyles),tabindex:"0",onFocus:e[4]||(e[4]=(...c)=>s.focusEvent&&s.focusEvent(...c)),onKeypress:e[5]||(e[5]=Xs(ft((...c)=>s.onEnterKeypress&&s.onEnterKeypress(...c),["stop"]),["enter"])),onMouseenter:e[6]||(e[6]=(...c)=>s.onMouseEnter&&s.onMouseEnter(...c)),onMouseleave:e[7]||(e[7]=(...c)=>s.onMouseLeave&&s.onMouseLeave(...c)),onTouchstart:e[8]||(e[8]=ft((...c)=>s.onTouchStart&&s.onTouchStart(...c),["stop"])),onMousedown:e[9]||(e[9]=c=>s.onMouseDown(c)),onMouseup:e[10]||(e[10]=(...c)=>s.onMouseUp&&s.onMouseUp(...c)),onTouchend:e[11]||(e[11]=(...c)=>s.onMouseUp&&s.onMouseUp(...c)),onTouchmove:e[12]||(e[12]=(...c)=>s.onTouchMove&&s.onTouchMove(...c)),onDblclick:e[13]||(e[13]=(...c)=>s.onDblClick&&s.onDblClick(...c)),draggable:s.draggable,onDragstart:e[14]||(e[14]=c=>s.draggable&&s.onDragStart(c)),onDragend:e[15]||(e[15]=c=>s.draggable&&s.onDragEnd())},[s.vuecal.editEvents.delete&&a.event.deletable?(d(),h("div",{key:0,class:"vuecal__event-delete",onClick:e[0]||(e[0]=ft((...c)=>s.deleteEvent&&s.deleteEvent(...c),["stop"])),onTouchstart:e[1]||(e[1]=ft((...c)=>s.touchDeleteEvent&&s.touchDeleteEvent(...c),["stop"]))},E(s.vuecal.texts.deleteEvent),33)):D("",!0),ae(t.$slots,"event",{event:a.event,view:s.view.id}),s.resizable?(d(),h("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:e[2]||(e[2]=ft((...c)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...c),["stop","prevent"])),onTouchstart:e[3]||(e[3]=ft((...c)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...c),["stop","prevent"]))},null,32)):D("",!0)],46,Ga)}const Za={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(t,e=!1){if("ontouchstart"in window&&!e)return!1;const{clickHoldAnEvent:a,focusAnEvent:l,resizeAnEvent:r,dragAnEvent:s}=this.domEvents;if(l._eid===this.event._eid&&a._eid===this.event._eid)return!0;this.focusEvent(),a._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(a.timeoutId=setTimeout(()=>{!r._eid&&!s._eid&&(a._eid=this.event._eid,this.event.deleting=!0)},a.timeout))},onMouseUp(t){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(t){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:e,clientY:a}=t.touches[0],{startX:l,startY:r,dragThreshold:s}=this.touch;(Math.abs(e-l)>s||Math.abs(a-r)>s)&&(this.touch.dragged=!0)},onTouchStart(t){this.touch.startX=t.touches[0].clientX,this.touch.startY=t.touches[0].clientY,this.onMouseDown(t,!0)},onEnterKeypress(t){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,t)},onDblClick(t){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,t)},onDragStart(t){this.dnd&&this.dnd.eventDragStart(t,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(t=!1){if("ontouchstart"in window&&!t)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(t){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:t}=this.domEvents,e=t._eid;if(e!==this.event._eid){if(e){const a=this.view.events.find(l=>l._eid===e);a&&(a.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),t._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:t,endTimeMinutes:e}=this.segment||this.event;let a=t-this.vuecal.timeFrom;const l=Math.max(Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);a=Math.min(e,this.vuecal.timeTo)-this.vuecal.timeFrom;const r=Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),s=Math.max(r-l,5);return{top:l,height:s}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let t=100/Math.min(this.overlaps.length+1,this.overlapsStreak),e=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&t<this.vuecal.minEventWidth&&(t=this.vuecal.minEventWidth,e=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:a,height:l}=this.eventDimensions;return{top:`${a}px`,height:`${l}px`,width:`${t}%`,left:this.event.left&&`${this.event.left}px`||`${e}%`}},eventClasses(){const{isFirstDay:t,isLastDay:e}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&t&&!e,"event-middle":this.segment&&!t&&!e,"event-end":this.segment&&e&&!t}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:t,background:e,daysCount:a}=this.event;return this.vuecal.editEvents.drag&&t&&!e&&a===1},resizable(){const{editEvents:t,time:e}=this.vuecal;return t.resize&&this.event.resizable&&e&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Qa=Ht(Za,[["render",Xa]]),ei=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],ti={key:0,class:"cell-time-labels"},si=["innerHTML"],ai={key:2,class:"vuecal__cell-events"},ii=["title"];function li(t,e,a,l,r,s){const c=Et("event");return d(),de(ua,{class:me(["vuecal__cell",s.cellClasses]),name:`slide-fade--${s.transitionDirection}`,tag:"div",appear:a.options.transitions,style:P(s.cellStyles)},{default:S(()=>[(d(!0),h(ve,null,be(s.splitsCount?s.splits:1,(n,y)=>(d(),h("div",{class:me(["vuecal__flex vuecal__cell-content",s.splitsCount&&s.splitClasses(n)]),key:a.options.transitions?`${s.view.id}-${a.data.content}-${y}`:y,"data-split":s.splitsCount?n.id:!1,column:"",tabindex:"0","aria-label":a.data.content,onFocus:e[0]||(e[0]=m=>s.onCellFocus(m)),onKeypress:e[1]||(e[1]=Xs(m=>s.onCellkeyPressEnter(m),["enter"])),onTouchstart:m=>!s.isDisabled&&s.onCellTouchStart(m,s.splitsCount?n.id:null),onMousedown:m=>!s.isDisabled&&s.onCellMouseDown(m,s.splitsCount?n.id:null),onClick:e[2]||(e[2]=m=>!s.isDisabled&&s.onCellClick(m)),onDblclick:e[3]||(e[3]=m=>!s.isDisabled&&s.onCellDblClick(m)),onContextmenu:e[4]||(e[4]=m=>!s.isDisabled&&a.options.cellContextmenu&&s.onCellContextMenu(m)),onDragenter:e[5]||(e[5]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragEnter(m,t.$data,a.data.startDate)),onDragover:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragOver(m,t.$data,a.data.startDate,s.splitsCount?n.id:null),onDragleave:e[6]||(e[6]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragLeave(m,t.$data,a.data.startDate)),onDrop:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragDrop(m,t.$data,a.data.startDate,s.splitsCount?n.id:null)},[a.options.showTimeInCells&&a.options.time&&s.isWeekOrDayView&&!a.allDay?(d(),h("div",ti,[(d(!0),h(ve,null,be(s.vuecal.timeCells,(m,p)=>(d(),h("span",{class:"cell-time-label",key:p},E(m.label),1))),128))])):D("",!0),s.isWeekOrDayView&&!a.allDay&&s.specialHours.length?(d(!0),h(ve,{key:1},be(s.specialHours,(m,p)=>(d(),h("div",{class:me(["vuecal__special-hours",`vuecal__special-hours--day${m.day} ${m.class}`]),style:P(`height: ${m.height}px;top: ${m.top}px`)},[m.label?(d(),h("div",{key:0,class:"special-hours-label",innerHTML:m.label},null,8,si)):D("",!0)],6))),256)):D("",!0),ae(t.$slots,"cell-content",{events:s.events,selectCell:m=>s.selectCell(m,!0),split:s.splitsCount?n:!1}),s.eventsCount&&(s.isWeekOrDayView||s.view.id==="month"&&a.options.eventsOnMonthView)?(d(),h("div",ai,[(d(!0),h(ve,null,be(s.splitsCount?n.events:s.events,(m,p)=>(d(),de(c,{key:p,"cell-formatted-date":a.data.formattedDate,event:m,"all-day":a.allDay,"cell-events":s.splitsCount?n.events:s.events,overlaps:((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).overlaps,"event-position":((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).position,"overlaps-streak":s.splitsCount?n.overlapsStreak:t.cellOverlapsStreak},{event:S(({event:M,view:$})=>[ae(t.$slots,"event",{view:$,event:M})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):D("",!0)],42,ei))),128)),s.timelineVisible?(d(),h("div",{class:"vuecal__now-line",style:P(`top: ${s.todaysTimePosition}px`),key:a.options.transitions?`${s.view.id}-now-line`:"now-line",title:s.utils.date.formatTime(s.vuecal.now)},null,12,ii)):D("",!0)]),_:3},8,["class","name","appear","style"])}const ni={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Qa},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:t}){let a=t.classList.contains("vuecal__cell-split")?t:this.vuecal.findAncestor(t,"vuecal__cell-split");return a&&(a=a.attributes["data-split"].value,parseInt(a).toString()===a.toString()&&(a=parseInt(a))),a||null},splitClasses(t){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===t.id,[t.class]:!!t.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(t){return this.vuecal.isDOMElementAnEvent(t)},selectCell(t,e=!1){const a=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.selectCell(e,this.timeAtCursor,a),this.timeAtCursor=null},onCellkeyPressEnter(t){this.isSelected||this.onCellFocus(t);const e=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,e),this.timeAtCursor=null},onCellFocus(t){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const e=this.splitsCount?this.getSplitAtCursor(t):null,a=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",e?{date:a,split:e}:a)}},onCellMouseDown(t,e=null,a=!1){if("ontouchstart"in window&&!a)return!1;this.isSelected||this.onCellFocus(t);const{clickHoldACell:l,focusAnEvent:r}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,l.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:s,cursorCoords:{y:c}}=this.vuecal.minutesAtCursor(t);this.timeAtCursor.setMinutes(s);const n=this.isDOMElementAnEvent(t.target);!n&&r._eid&&((this.view.events.find(y=>y._eid===r._eid)||{}).focused=!1),this.editEvents.create&&!n&&this.setUpEventCreation(t,c)},setUpEventCreation(t,e){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:a}=this.domEvents;if(a.startCursorY=e,a.split=this.splitsCount?this.getSplitAtCursor(t):null,a.start=this.timeAtCursor,this.options.snapToTime){let l=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const r=l+this.options.snapToTime/2;l=r-r%this.options.snapToTime,a.start.setHours(0,l,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(t)},setUpCellHoldTimer(t){const{clickHoldACell:e}=this.domEvents;e.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,e.split=this.splitsCount?this.getSplitAtCursor(t):null,e.timeoutId=setTimeout(()=>{if(e.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:a}=this.utils.event.createAnEvent(this.timeAtCursor,null,e.split?{split:e.split}:{});e.eventCreated=a}},e.timeout)},onCellTouchStart(t,e=null){this.onCellMouseDown(t,e,!0)},onCellClick(t){this.isDOMElementAnEvent(t.target)||this.selectCell(t)},onCellDblClick(t){const e=new Date(this.data.startDate);e.setMinutes(this.vuecal.minutesAtCursor(t).minutes);const a=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-dblclick",a?{date:e,split:a}:e),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(t){t.stopPropagation(),t.preventDefault();const e=new Date(this.data.startDate),{cursorCoords:a,minutes:l}=this.vuecal.minutesAtCursor(t);e.setMinutes(l);const r=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-contextmenu",{date:e,...a,...r||{},e:t})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:t}=this.options,{isYearsOrYearView:e}=this.vuecal;return t.length&&t.includes(this.data.formattedDate)&&!e?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let t=!1;const{selectedDate:e}=this.view;return this.view.id==="years"?t=e.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?t=e.getFullYear()===this.data.startDate.getFullYear()&&e.getMonth()===this.data.startDate.getMonth():t=e.getTime()===this.data.startDate.getTime(),t},set(t){this.view.selectedDate=t,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(t=>{let{from:e,to:a}=t;return e=Math.max(e,this.options.timeFrom),a=Math.min(a,this.options.timeTo),{...t,height:(a-e)*this.timeScale,top:(e-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:t,endDate:e}=this.data;let a=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(a=this.view.events.slice(0),this.view.id==="month"&&a.push(...this.view.outOfScopeEvents),a=a.filter(l=>this.utils.event.eventInRange(l,t,e)),this.options.showAllDayEvents&&this.view.id!=="month"&&(a=a.filter(l=>!!l.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:l,timeTo:r}=this.options;a=a.filter(s=>{const c=s.daysCount>1&&s.segments[this.data.formattedDate]||{},n=s.daysCount===1&&s.startTimeMinutes<r&&s.endTimeMinutes>l,y=s.daysCount>1&&c.startTimeMinutes<r&&c.endTimeMinutes>l,m=!1;return s.allDay||n||y||m})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&a.sort((l,r)=>l.start<r.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return a},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((t,e)=>{const a=this.events.filter(s=>s.split===t.id),[l,r]=this.utils.event.checkCellOverlappingEvents(a.filter(s=>!s.background&&!s.allDay),this.options);return{...t,overlaps:l,overlapsStreak:r,events:a}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:t,timeTo:e}=this.options;return this.data.today&&this.isWeekOrDayView&&t&&!this.allDay&&this.nowInMinutes<=e},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const t=this.nowInMinutes-this.options.timeFrom;return Math.round(t*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},ta=Ht(ni,[["render",li]]),oi={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function ri(t,e,a,l,r,s){const c=Et("vuecal-cell");return d(),h("div",{class:"vuecal__flex vuecal__all-day",style:P(a.cellOrSplitMinWidth&&{height:a.height})},[a.cellOrSplitMinWidth?D("",!0):(d(),h("div",oi,[i("span",null,E(a.label),1)])),i("div",{class:me(["vuecal__flex vuecal__cells",`${s.view.id}-view`]),grow:"",style:P(a.cellOrSplitMinWidth?`min-width: ${a.cellOrSplitMinWidth}px`:"")},[(d(!0),h(ve,null,be(a.cells,(n,y)=>(d(),de(c,{key:y,options:a.options,"edit-events":s.editEvents,data:n,"all-day":!0,"cell-width":a.options.hideWeekdays.length&&(s.vuecal.isWeekView||s.vuecal.isMonthView)&&s.vuecal.cellWidth,"min-timestamp":a.options.minTimestamp,"max-timestamp":a.options.maxTimestamp,"cell-splits":a.daySplits},{event:S(({event:m,view:p})=>[ae(t.$slots,"event",{view:p,event:m})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const di={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":ta},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},ui=Ht(di,[["render",ri]]),ci=["lang"],hi={class:"default"},mi={key:0,class:"vuecal__flex vuecal__body",grow:""},vi=["onBlur","innerHTML"],pi=["innerHTML"],fi=["innerHTML"],yi={class:"vuecal__flex",row:"",grow:""},_i={key:0,class:"vuecal__time-column"},gi={class:"vuecal__time-cell-label"},wi={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},bi=["wrap","column"],Di=["onBlur","innerHTML"],ki=["innerHTML"],Ti=["innerHTML"],Ci=["wrap"],Ei=["innerHTML"],Si=["innerHTML"],xi={key:2,class:"vuecal__cell-events-count"},Mi={key:3,class:"vuecal__no-event"},Vi=["onBlur","innerHTML"],$i=["innerHTML"],Oi={key:2,class:"vuecal__event-time"},Ai={key:0},Li={key:1,class:"days-to-end"},ji=["innerHTML"],Ii={key:0,class:"vuecal__scrollbar-check"};function Hi(t,e,a,l,r,s){const c=Et("vuecal-header"),n=Et("all-day-bar"),y=Et("weekdays-headings"),m=Et("vuecal-cell");return d(),h("div",{class:me(["vuecal__flex vuecal",s.cssClasses]),column:"",ref:"vuecal",lang:a.locale},[_(c,{options:t.$props,"edit-events":s.editEvents,"view-props":{views:s.views,weekDaysInHeader:s.weekDaysInHeader},"week-days":s.weekDays,"has-splits":s.hasSplits,"day-splits":s.daySplits,"switch-to-narrower-view":s.switchToNarrowerView},Cs({"arrow-prev":S(()=>[ae(t.$slots,"arrow-prev",{},()=>[e[0]||(e[0]=he(" ")),e[1]||(e[1]=i("i",{class:"angle"},null,-1)),e[2]||(e[2]=he(" "))])]),"arrow-next":S(()=>[ae(t.$slots,"arrow-next",{},()=>[e[3]||(e[3]=he(" ")),e[4]||(e[4]=i("i",{class:"angle"},null,-1)),e[5]||(e[5]=he(" "))])]),"today-button":S(()=>[ae(t.$slots,"today-button",{},()=>[i("span",hi,E(r.texts.today),1)])]),title:S(()=>[ae(t.$slots,"title",{title:s.viewTitle,view:r.view},()=>[he(E(s.viewTitle),1)])]),_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:S(({heading:p,view:M})=>[ae(t.$slots,"weekday-heading",{heading:p,view:M})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:S(({split:p})=>[ae(t.$slots,"split-label",{split:p,view:r.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),a.hideBody?D("",!0):(d(),h("div",mi,[_(hs,{name:`slide-fade--${r.transitionDirection}`,appear:a.transitions},{default:S(()=>[(d(),h("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:a.transitions?r.view.id:!1,column:""},[a.showAllDayEvents&&s.hasTimeColumn&&(!s.cellOrSplitMinWidth||s.isDayView&&!a.minSplitWidth)?(d(),de(n,Us(Fs({key:0},s.allDayBar)),{event:S(({event:p,view:M})=>[ae(t.$slots,"event",{view:M,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:$=>s.onEventTitleBlur($,p),innerHTML:p.title},null,40,vi)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,pi)):D("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,fi)):D("",!0)])]),_:3},16)):D("",!0),i("div",{class:me(["vuecal__bg",{vuecal__flex:!s.hasTimeColumn}]),column:""},[i("div",yi,[s.hasTimeColumn?(d(),h("div",_i,[a.showAllDayEvents&&s.cellOrSplitMinWidth&&!(s.isDayView&&!a.minSplitWidth)?(d(),h("div",{key:0,class:"vuecal__all-day-text",style:P({height:s.allDayBar.height})},[i("span",null,E(r.texts.allDay),1)],4)):D("",!0),(d(!0),h(ve,null,be(s.timeCells,(p,M)=>(d(),h("div",{class:"vuecal__time-cell",key:M,style:P(`height: ${a.timeCellHeight}px`)},[ae(t.$slots,"time-cell",{hours:p.hours,minutes:p.minutes},()=>[e[6]||(e[6]=i("span",{class:"vuecal__time-cell-line"},null,-1)),i("span",gi,E(p.label),1)])],4))),128))])):D("",!0),a.showWeekNumbers&&s.isMonthView?(d(),h("div",wi,[(d(),h(ve,null,be(6,p=>i("div",{class:"vuecal__flex vuecal__week-number-cell",key:p,grow:""},[ae(t.$slots,"week-number-cell",{week:s.getWeekNumber(p-1)},()=>[he(E(s.getWeekNumber(p-1)),1)])])),64))])):D("",!0),i("div",{class:me(["vuecal__flex vuecal__cells",`${r.view.id}-view`]),grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,column:!!s.cellOrSplitMinWidth},[s.cellOrSplitMinWidth&&s.isWeekView?(d(),de(y,{key:0,"transition-direction":r.transitionDirection,"week-days":s.weekDays,"switch-to-narrower-view":s.switchToNarrowerView,style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},Cs({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:S(({heading:p,view:M})=>[ae(t.$slots,"weekday-heading",{heading:p,view:M})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:S(({split:p})=>[ae(t.$slots,"split-label",{split:p,view:r.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):s.hasSplits&&a.stickySplitLabels&&a.minSplitWidth?(d(),h("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(ve,null,be(s.daySplits,(p,M)=>(d(),h("div",{class:me(["day-split-header",p.class||!1]),key:M},[ae(t.$slots,"split-label",{split:p,view:r.view.id},()=>[he(E(p.label),1)])],2))),128))],4)):D("",!0),a.showAllDayEvents&&s.hasTimeColumn&&(s.isWeekView&&s.cellOrSplitMinWidth||s.isDayView&&s.hasSplits&&a.minSplitWidth)?(d(),de(n,Us(Fs({key:2},s.allDayBar)),{event:S(({event:p,view:M})=>[ae(t.$slots,"event",{view:M,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:$=>s.onEventTitleBlur($,p),innerHTML:p.title},null,40,Di)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,ki)):D("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,Ti)):D("",!0)])]),_:3},16)):D("",!0),i("div",{class:"vuecal__flex",ref:p=>r.cellsEl=p,grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,style:P(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(ve,null,be(s.viewCells,(p,M)=>(d(),de(m,{key:M,options:t.$props,"edit-events":s.editEvents,data:p,"cell-width":a.hideWeekdays.length&&(s.isWeekView||s.isMonthView)&&s.cellWidth,"min-timestamp":s.minTimestamp,"max-timestamp":s.maxTimestamp,"cell-splits":s.hasSplits&&s.daySplits||[]},{"cell-content":S(({events:$,split:B,selectCell:I})=>[ae(t.$slots,"cell-content",{cell:p,view:r.view,goNarrower:I,events:$},()=>[B&&!a.stickySplitLabels?(d(),h("div",{key:0,class:"split-label",innerHTML:B.label},null,8,Ei)):D("",!0),p.content?(d(),h("div",{key:1,class:"vuecal__cell-date",innerHTML:p.content},null,8,Si)):D("",!0),(s.isMonthView&&!a.eventsOnMonthView||s.isYearsOrYearView&&a.eventsCountOnYearView)&&$.length?(d(),h("div",xi,[ae(t.$slots,"events-count",{view:r.view,events:$},()=>[he(E($.length),1)])])):D("",!0),!s.cellOrSplitHasEvents($,B)&&s.isWeekOrDayView?(d(),h("div",Mi,[ae(t.$slots,"no-event",{},()=>[he(E(r.texts.noEvent),1)])])):D("",!0)])]),event:S(({event:$,view:B})=>[ae(t.$slots,"event",{view:B,event:$},()=>[s.editEvents.title&&$.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:I=>s.onEventTitleBlur(I,$),innerHTML:$.title},null,40,Vi)):$.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:$.title},null,8,$i)):D("",!0),a.time&&!$.allDay&&!(s.isMonthView&&($.allDay||a.showAllDayEvents==="short"))&&!s.isShortMonthView?(d(),h("div",Oi,[he(E(r.utils.date.formatTime($.start,s.TimeFormat)),1),$.endTimeMinutes?(d(),h("span",Ai," - "+E(r.utils.date.formatTime($.end,s.TimeFormat,null,!0)),1)):D("",!0),$.daysCount>1&&($.segments[p.formattedDate]||{}).isFirstDay?(d(),h("small",Li," +"+E($.daysCount-1)+E((r.texts.day[0]||"").toLowerCase()),1)):D("",!0)])):D("",!0),$.content&&!(s.isMonthView&&$.allDay&&a.showAllDayEvents==="short")&&!s.isShortMonthView?(d(),h("div",{key:3,class:"vuecal__event-content",innerHTML:$.content},null,8,ji)):D("",!0)])]),"no-event":S(()=>[ae(t.$slots,"no-event",{},()=>[he(E(r.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,Ci)],10,bi)])],2)]))]),_:3},8,["name","appear"]),r.ready?D("",!0):(d(),h("div",Ii,e[7]||(e[7]=[i("div",null,null,-1)])))]))],10,ci)}const Zt=24*60,cs={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},Rs=["years","year","month","week","day"],qs=new Ta(cs),Wi={name:"vue-cal",components:{"vuecal-cell":ta,"vuecal-header":Ja,WeekdaysHeadings:ea,AllDayBar:ui},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:Zt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...cs},utils:{date:(this.disableDatePrototypes?qs.removePrototypes():!1)||qs,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(t){if(typeof this.locale=="object"){this.texts=Object.assign({},cs,t),this.utils.date.updateTexts(this.texts);return}const e=await ka(Object.assign({"./i18n/ar.json":()=>H(()=>import("./ar.es.1c5432ef.js"),[],import.meta.url),"./i18n/bg.json":()=>H(()=>import("./bg.es.133f1d79.js"),[],import.meta.url),"./i18n/bn.json":()=>H(()=>import("./bn.es.d6f1145b.js"),[],import.meta.url),"./i18n/bs.json":()=>H(()=>import("./bs.es.424f8392.js"),[],import.meta.url),"./i18n/ca.json":()=>H(()=>import("./ca.es.10691e62.js"),[],import.meta.url),"./i18n/cs.json":()=>H(()=>import("./cs.es.d467a362.js"),[],import.meta.url),"./i18n/da.json":()=>H(()=>import("./da.es.5c82d648.js"),[],import.meta.url),"./i18n/de.json":()=>H(()=>import("./de.es.fc3d5977.js"),[],import.meta.url),"./i18n/el.json":()=>H(()=>import("./el.es.09498e63.js"),[],import.meta.url),"./i18n/en.json":()=>H(()=>import("./en.es.cf2ff814.js"),[],import.meta.url),"./i18n/es.json":()=>H(()=>import("./es.es.1bcf8f87.js"),[],import.meta.url),"./i18n/et.json":()=>H(()=>import("./et.es.dfc4f817.js"),[],import.meta.url),"./i18n/fa.json":()=>H(()=>import("./fa.es.54e3e37f.js"),[],import.meta.url),"./i18n/fi.json":()=>H(()=>import("./fi.es.f02a3c28.js"),[],import.meta.url),"./i18n/fr.json":()=>H(()=>import("./fr.es.7cd25089.js"),[],import.meta.url),"./i18n/he.json":()=>H(()=>import("./he.es.a00ad66b.js"),[],import.meta.url),"./i18n/hr.json":()=>H(()=>import("./hr.es.c03853d7.js"),[],import.meta.url),"./i18n/hu.json":()=>H(()=>import("./hu.es.5447b096.js"),[],import.meta.url),"./i18n/id.json":()=>H(()=>import("./id.es.3384c049.js"),[],import.meta.url),"./i18n/is.json":()=>H(()=>import("./is.es.5855059c.js"),[],import.meta.url),"./i18n/it.json":()=>H(()=>import("./it.es.a2e39e6b.js"),[],import.meta.url),"./i18n/ja.json":()=>H(()=>import("./ja.es.549021b7.js"),[],import.meta.url),"./i18n/ka.json":()=>H(()=>import("./ka.es.b97af2c6.js"),[],import.meta.url),"./i18n/ko.json":()=>H(()=>import("./ko.es.65303d13.js"),[],import.meta.url),"./i18n/lt.json":()=>H(()=>import("./lt.es.6bd7ea81.js"),[],import.meta.url),"./i18n/mn.json":()=>H(()=>import("./mn.es.c0946de5.js"),[],import.meta.url),"./i18n/nl.json":()=>H(()=>import("./nl.es.fb098524.js"),[],import.meta.url),"./i18n/no.json":()=>H(()=>import("./no.es.00bfcb00.js"),[],import.meta.url),"./i18n/pl.json":()=>H(()=>import("./pl.es.d9683cfc.js"),[],import.meta.url),"./i18n/pt-br.json":()=>H(()=>import("./pt-br.es.a068d598.js"),[],import.meta.url),"./i18n/pt-pt.json":()=>H(()=>import("./pt-pt.es.a068d598.js"),[],import.meta.url),"./i18n/ro.json":()=>H(()=>import("./ro.es.c05b88b7.js"),[],import.meta.url),"./i18n/ru.json":()=>H(()=>import("./ru.es.18bbb6e3.js"),[],import.meta.url),"./i18n/sk.json":()=>H(()=>import("./sk.es.cf475731.js"),[],import.meta.url),"./i18n/sl.json":()=>H(()=>import("./sl.es.4f19bf30.js"),[],import.meta.url),"./i18n/sq.json":()=>H(()=>import("./sq.es.a264a995.js"),[],import.meta.url),"./i18n/sr.json":()=>H(()=>import("./sr.es.0d3cfbc7.js"),[],import.meta.url),"./i18n/sv.json":()=>H(()=>import("./sv.es.f64e2fa4.js"),[],import.meta.url),"./i18n/tr.json":()=>H(()=>import("./tr.es.576f73c9.js"),[],import.meta.url),"./i18n/uk.json":()=>H(()=>import("./uk.es.ed3c3f03.js"),[],import.meta.url),"./i18n/vi.json":()=>H(()=>import("./vi.es.4582ebe1.js"),[],import.meta.url),"./i18n/zh-cn.json":()=>H(()=>import("./zh-cn.es.50f64b69.js"),[],import.meta.url),"./i18n/zh-hk.json":()=>H(()=>import("./zh-hk.es.6da7777e.js"),[],import.meta.url)}),`./i18n/${t}.json`,3);this.texts=Object.assign({},cs,e),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){H(()=>import("./drag-and-drop.es.bedab85d.js"),[],import.meta.url).then(t=>{const{DragAndDrop:e}=t;this.modules.dnd=new e(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(t){return Rs.includes(t)||(console.error(`Vue Cal: invalid active-view parameter provided: "${t}".
A valid view must be one of: ${Rs.join(", ")}.`),t="week"),this.enabledViews.includes(t)||(console.warn(`Vue Cal: the provided active-view "${t}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),t=this.enabledViews[0]),t},switchToNarrowerView(t=null){this.transitionDirection="right";const e=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];e&&this.switchView(e,t)},switchView(t,e=null,a=!1){t=this.validateView(t);const l=this.utils.date,r=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&a){if(this.view.id===t)return;const n=this.enabledViews;this.transitionDirection=n.indexOf(this.view.id)>n.indexOf(t)?"left":"right"}const s=this.view.id;switch(this.view.events=[],this.view.id=t,this.view.firstCellDate=null,this.view.lastCellDate=null,e||(e=this.view.selectedDate||this.view.startDate),t){case"years":{this.view.startDate=new Date(Math.floor(e.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(e.getFullYear(),0,1),this.view.endDate=new Date(e.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(e.getFullYear(),e.getMonth(),1),this.view.endDate=new Date(e.getFullYear(),e.getMonth()+1,1),this.view.endDate.setSeconds(-1);let n=new Date(this.view.startDate);if(n.getDay()!==(this.startWeekOnSunday?0:1)&&(n=l.getPreviousFirstDayOfWeek(n,this.startWeekOnSunday)),this.view.firstCellDate=n,this.view.lastCellDate=l.addDays(n,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const y=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=l.addDays(this.view.firstCellDate,y)}if([0,6].includes(this.view.startDate.getDay())){const y=this.view.startDate.getDay()===6?2:1;this.view.startDate=l.addDays(this.view.startDate,y)}if([0,6].includes(this.view.lastCellDate.getDay())){const y=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=l.subtractDays(this.view.lastCellDate,y)}if([0,6].includes(this.view.endDate.getDay())){const y=this.view.endDate.getDay()===0?2:1;this.view.endDate=l.subtractDays(this.view.endDate,y)}}break}case"week":{e=l.getPreviousFirstDayOfWeek(e,this.startWeekOnSunday);const n=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?l.addDays(e,1):e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=l.addDays(e,n),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(e),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const c=this.view.startDate&&this.view.startDate.getTime();if(!(s===t&&c===r)&&(this.$emit("update:activeView",t),this.ready)){const n=this.view.startDate,y={view:t,startDate:n,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:l.getWeek(this.startWeekOnSunday?l.addDays(n,1):n)}:{}};this.$emit("view-change",y)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(t=!0){const e=this.utils.date;this.transitionDirection=t?"right":"left";const a=t?1:-1;let l=null;const{startDate:r,id:s}=this.view;switch(s){case"years":l=new Date(r.getFullYear()+25*a,0,1);break;case"year":l=new Date(r.getFullYear()+1*a,1,1);break;case"month":l=new Date(r.getFullYear(),r.getMonth()+1*a,1);break;case"week":l=e[t?"addDays":"subtractDays"](e.getPreviousFirstDayOfWeek(r,this.startWeekOnSunday),7);break;case"day":l=e[t?"addDays":"subtractDays"](r,1);const c=l.getDay(),n=this.startWeekOnSunday?c:(c||7)-1;if(this.weekDays[n].hide){const m=this.weekDays.map((M,$)=>({...M,i:$}));let p=0;t?([...m.slice(n),...m].find(M=>(p++,!M.hide)).i,p--):[...m,...m.slice(0,n)].reverse().find(M=>(p++,!M.hide)).i,l=e[t?"addDays":"subtractDays"](l,p)}break}l&&this.switchView(s,l)},addEventsToView(t=[]){const e=this.utils.event,{startDate:a,endDate:l,firstCellDate:r,lastCellDate:s}=this.view;if(t.length||(this.view.events=[]),t=t.length?t:[...this.mutableEvents],!t||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let c=t.filter(n=>e.eventInRange(n,a,l));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(c=c.map(n=>n.daysCount>1?e.createEventSegments(n,r||a,s||l):n)),this.view.events.push(...c),this.isMonthView&&(this.view.outOfScopeEvents=[],t.forEach(n=>{(e.eventInRange(n,r,a)||e.eventInRange(n,l,s))&&(this.view.events.some(y=>y._eid===n._eid)||this.view.outOfScopeEvents.push(n))}))},findAncestor(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t},isDOMElementAnEvent(t){return t.classList.contains("vuecal__event")||this.findAncestor(t,"vuecal__event")},onMouseMove(t){const{resizeAnEvent:e,dragAnEvent:a,dragCreateAnEvent:l}=this.domEvents;e._eid===null&&a._eid===null&&!l.start||(t.preventDefault(),e._eid?this.eventResizing(t):this.dragToCreateEvent&&l.start&&this.eventDragCreation(t))},onMouseUp(t){const{focusAnEvent:e,resizeAnEvent:a,clickHoldAnEvent:l,clickHoldACell:r,dragCreateAnEvent:s}=this.domEvents,{_eid:c}=l,{_eid:n}=a;let y=!1;const{event:m,start:p}=s,M=this.isDOMElementAnEvent(t.target),$=e.mousedUp;if(e.mousedUp=!1,M&&(this.domEvents.cancelClickEventCreation=!0),r.eventCreated)return;if(n){const{originalEnd:I,originalEndTimeMinutes:pe,endTimeMinutes:ie}=a,J=this.view.events.find(G=>G._eid===a._eid);if(y=ie&&ie!==pe,J&&J.end.getTime()!==I.getTime()){const G=this.mutableEvents.find(Q=>Q._eid===a._eid);G.endTimeMinutes=J.endTimeMinutes,G.end=J.end;const fe=this.cleanupEvent(J),T={...this.cleanupEvent(J),end:I,endTimeMinutes:J.originalEndTimeMinutes};this.$emit("event-duration-change",{event:fe,oldDate:a.originalEnd,originalEvent:T}),this.$emit("event-change",{event:fe,originalEvent:T})}J&&(J.resizing=!1),a._eid=null,a.start=null,a.split=null,a.segment=null,a.originalEndTimeMinutes=null,a.originalEnd=null,a.endTimeMinutes=null,a.startCell=null,a.endCell=null}else p&&(m&&(this.emitWithEvent("event-drag-create",m),s.event.resizing=!1),s.start=null,s.split=null,s.event=null);!M&&!n&&this.unfocusEvent(),l.timeoutId&&!c&&(clearTimeout(l.timeoutId),l.timeoutId=null),r.timeoutId&&(clearTimeout(r.timeoutId),r.timeoutId=null);const B=typeof this.onEventClick=="function";if($&&!y&&!c&&!m&&B){let I=this.view.events.find(pe=>pe._eid===e._eid);return!I&&this.isMonthView&&(I=this.view.outOfScopeEvents.find(pe=>pe._eid===e._eid)),I&&this.onEventClick(I,t)}},onKeyUp(t){t.keyCode===27&&this.cancelDelete()},eventResizing(t){const{resizeAnEvent:e}=this.domEvents,a=this.view.events.find(m=>m._eid===e._eid)||{segments:{}},{minutes:l,cursorCoords:r}=this.minutesAtCursor(t),s=a.segments&&a.segments[e.segment],{date:c,event:n}=this.utils,y=Math.max(l,this.timeFrom+1,(s||a).startTimeMinutes+1);if(a.endTimeMinutes=e.endTimeMinutes=y,this.snapToTime){const m=a.endTimeMinutes+this.snapToTime/2;a.endTimeMinutes=m-m%this.snapToTime}if(s&&(s.endTimeMinutes=a.endTimeMinutes),a.end.setHours(0,a.endTimeMinutes,a.endTimeMinutes===Zt?-1:0,0),this.resizeX&&this.isWeekView){a.daysCount=c.countDays(a.start,a.end);const m=this.cellsEl,p=m.offsetWidth/m.childElementCount,M=Math.floor(r.x/p);if(e.startCell===null&&(e.startCell=M-(a.daysCount-1)),e.endCell!==M){e.endCell=M;const $=c.addDays(a.start,M-e.startCell),B=Math.max(c.countDays(a.start,$),1);if(B!==a.daysCount){let I=null;B>a.daysCount?I=n.addEventSegment(a):I=n.removeEventSegment(a),e.segment=I,a.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:a._eid,end:a.end,endTimeMinutes:a.endTimeMinutes})},eventDragCreation(t){const{dragCreateAnEvent:e}=this.domEvents,{start:a,startCursorY:l,split:r}=e,s=new Date(a),{minutes:c,cursorCoords:{y:n}}=this.minutesAtCursor(t);if(!(!e.event&&Math.abs(l-n)<this.dragToCreateThreshold))if(e.event){if(s.setHours(0,c,c===Zt?-1:0,0),this.snapToTime){let p=s.getHours()*60+s.getMinutes();const M=p+this.snapToTime/2;p=M-M%this.snapToTime,s.setHours(0,p,0,0)}const y=a<s,{event:m}=e;m.start=y?a:s,m.end=y?s:a,m.startTimeMinutes=m.start.getHours()*60+m.start.getMinutes(),m.endTimeMinutes=m.end.getHours()*60+m.end.getMinutes()}else{if(e.event=this.utils.event.createAnEvent(a,1,{split:r}),!e.event){e.start=null,e.split=null,e.event=null;return}e.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:t,clickHoldAnEvent:e}=this.domEvents,a=this.view.events.find(l=>l._eid===(t._eid||e._eid));t._eid=null,e._eid=null,a&&(a.focused=!1,a.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:t}=this.domEvents;if(t._eid){const e=this.view.events.find(a=>a._eid===t._eid);e&&(e.deleting=!1),t._eid=null,t.timeoutId=null}},onEventTitleBlur(t,e){if(e.title===t.target.innerHTML)return;const a=e.title;e.title=t.target.innerHTML;const l=this.cleanupEvent(e);this.$emit("event-title-change",{event:l,oldTitle:a}),this.$emit("event-change",{event:l,originalEvent:{...l,title:a}})},updateMutableEvents(){const t=this.utils.date;this.mutableEvents=[],this.events.forEach(e=>{const a=typeof e.start=="string"?t.stringToDate(e.start):e.start,l=t.formatDateLite(a),r=t.dateToMinutes(a);let s=null;typeof e.end=="string"&&e.end.includes("24:00")?(s=new Date(e.end.replace(" 24:00","")),s.setHours(23,59,59,0)):s=typeof e.end=="string"?t.stringToDate(e.end):e.end;let c=t.formatDateLite(s),n=t.dateToMinutes(s);(!n||n===Zt)&&(!this.time||typeof e.end=="string"&&e.end.length===10?s.setHours(23,59,59,0):s.setSeconds(s.getSeconds()-1),c=t.formatDateLite(s),n=Zt);const y=l!==c;e=Object.assign({...this.utils.event.eventDefaults},e,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:y?{}:null,start:a,startTimeMinutes:r,end:s,endTimeMinutes:n,daysCount:y?t.countDays(a,s):1,class:e.class}),this.mutableEvents.push(e)})},minutesAtCursor(t){return this.utils.cell.minutesAtCursor(t)},createEvent(t,e,a={}){return this.utils.event.createAnEvent(t,e,a)},cleanupEvent(t){return t={...t},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(a=>{a in t&&delete t[a]}),t.repeat||delete t.repeat,t},emitWithEvent(t,e){this.$emit(t,this.cleanupEvent(e))},updateSelectedDate(t){if(t&&typeof t=="string"?t=this.utils.date.stringToDate(t):t=new Date(t),t&&t instanceof Date){const{selectedDate:e}=this.view;e&&(this.transitionDirection=e.getTime()>t.getTime()?"left":"right"),t.setHours(0,0,0,0),(!e||e.getTime()!==t.getTime())&&(this.view.selectedDate=t),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(t){const e=this.utils.date,l=this.firstCellDateWeekNumber+t,r=this.startWeekOnSunday?1:0;return l>52?e.getWeek(e.addDays(this.view.firstCellDate,7*t+r)):l},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const t=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],e=t.offsetWidth-t.children[0].offsetWidth;if(e){const a=document.createElement("style");a.id="vuecal-align-with-scrollbar",a.type="text/css",a.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${e}px}`,document.head.appendChild(a)}},cellOrSplitHasEvents(t,e=null){return t.length&&(!e&&t.length||e&&t.some(a=>a.split===e.id))}},created(){this.utils.cell=new Ea(this),this.utils.event=new xa(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const t=this.utils.date,e="ontouchstart"in window,{resize:a,drag:l,create:r,delete:s,title:c}=this.editEvents,n=this.onEventClick&&typeof this.onEventClick=="function";(a||l||r||s||c||n)&&window.addEventListener(e?"touchend":"mouseup",this.onMouseUp),(a||l||r&&this.dragToCreateEvent)&&window.addEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),c&&window.addEventListener("keyup",this.onKeyUp),e&&(this.$refs.vuecal.oncontextmenu=function(p){p.preventDefault(),p.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const y=this.view.startDate,m={view:this.view.id,startDate:y,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:t.getWeek(this.startWeekOnSunday?t.addDays(y,1):y)}:{}};this.$emit("ready",m),this.ready=!0},beforeUnmount(){const t="ontouchstart"in window;window.removeEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(t?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(t=>this.views[t].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const t=this.utils.date,e=this.view.firstCellDate;return t.getWeek(this.startWeekOnSunday?t.addDays(e,1):e)},timeCells(){const t=[];for(let e=this.timeFrom,a=this.timeTo;e<a;e+=this.timeStep)t.push({hours:Math.floor(e/60),minutes:e%60,label:this.utils.date.formatTime(e,this.TimeFormat),value:e});return t},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(t=>!t.hide)||[]).map((t,e)=>({...t,id:t.id||e+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let t=null;return this.hasSplits&&this.minSplitWidth?t=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(t=this.visibleDaysCount*this.minCellWidth),t},allDayBar(){let t=this.allDayBarHeight||null;return t&&!isNaN(t)&&(t+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:t}},minTimestamp(){let t=null;return this.minDate&&typeof this.minDate=="string"?t=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(t=this.minDate),t?t.getTime():null},maxTimestamp(){let t=null;return this.maxDate&&typeof this.maxDate=="string"?t=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(t=this.maxDate),t?t.getTime():null},weekDays(){let{weekDays:t,weekDaysShort:e=[]}=this.texts;return t=t.slice(0).map((a,l)=>({label:a,...e.length?{short:e[l]}:{},hide:this.hideWeekends&&l>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(l+1)})),this.startWeekOnSunday&&t.unshift(t.pop()),t},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(t=>({label:t}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((t,e)=>{let a=this.specialHours[e+1]||[];return Array.isArray(a)||(a=[a]),t=[],a.forEach(({from:l,to:r,class:s,label:c},n)=>{t[n]={day:e+1,from:[null,void 0].includes(l)?null:l*1,to:[null,void 0].includes(r)?null:r*1,class:s||"",label:c||""}}),t})},viewTitle(){const t=this.utils.date;let e="";const a=this.view.startDate,l=a.getFullYear(),r=a.getMonth();switch(this.view.id){case"years":{e=this.texts.years;break}case"year":{e=l;break}case"month":{e=`${this.months[r].label} ${l}`;break}case"week":{const s=this.view.endDate,c=a.getFullYear();let n=this.texts.months[a.getMonth()];this.xsmall&&(n=n.substring(0,3));let y=`${n} ${c}`;if(s.getMonth()!==a.getMonth()){const m=s.getFullYear();let p=this.texts.months[s.getMonth()];this.xsmall&&(p=p.substring(0,3)),c===m?y=`${n} - ${p} ${c}`:this.small?y=`${n.substring(0,3)} ${c} - ${p.substring(0,3)} ${m}`:y=`${n} ${c} - ${p} ${m}`}e=`${this.texts.week} ${t.getWeek(this.startWeekOnSunday?t.addDays(a,1):a)} (${y})`;break}case"day":{e=this.utils.date.formatDate(a,this.texts.dateFormat,this.texts);break}}return e},viewCells(){const t=this.utils.date;let e=[],a=null,l=!1;this.watchRealTime||(this.now=new Date);const r=this.now;switch(this.view.id){case"years":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(25)).map((s,c)=>{const n=new Date(a+c,0,1),y=new Date(a+c+1,0,1);return y.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:y,content:a+c,current:a+c===r.getFullYear()}});break}case"year":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(12)).map((s,c)=>{const n=new Date(a,c,1),y=new Date(a,c+1,1);return y.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:y,content:this.xsmall?this.months[c].label.substr(0,3):this.months[c].label,current:c===r.getMonth()&&a===r.getFullYear()}});break}case"month":{const s=this.view.startDate.getMonth(),c=new Date(this.view.firstCellDate);l=!1,e=Array.apply(null,Array(42)).map((n,y)=>{const m=t.addDays(c,y),p=new Date(m);p.setHours(23,59,59,0);const M=!l&&t.isToday(m)&&!l++;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,content:m.getDate(),today:M,outOfScope:m.getMonth()!==s,class:`vuecal__cell--day${m.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(e=e.filter(n=>{const y=n.startDate.getDay()||7;return!(this.hideWeekends&&y>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(y))}));break}case"week":{l=!1;const s=this.view.startDate,c=this.weekDays;e=c.map((n,y)=>{const m=t.addDays(s,this.startWeekOnSunday&&this.hideWeekends?y-1:y),p=new Date(m);p.setHours(23,59,59,0);const M=(m.getDay()||7)-1;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,today:!l&&t.isToday(m)&&!l++,specialHours:this.specialDayHours[M]||[]}}).filter((n,y)=>!c[y].hide);break}case"day":{const s=this.view.startDate,c=new Date(this.view.startDate);c.setHours(23,59,59,0);const n=(s.getDay()||7)-1;e=[{startDate:s,formattedDate:t.formatDateLite(s),endDate:c,today:t.isToday(s),specialHours:this.specialDayHours[n]||[]}];break}}return e},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((t,e)=>t+e.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:t,dragAnEvent:e,dragCreateAnEvent:a}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":t._eid,"vuecal--drag-creating-event":a.event,"vuecal--dragging-event":e._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(t,e){this.updateMutableEvents(t),this.addEventsToView()},deep:!0},locale(t){this.loadLocale(t)},selectedDate(t){this.updateSelectedDate(t)},activeView(t){this.switchView(t)}}},Ui=Ht(Wi,[["render",Hi]]);const Fi={class:"filter-wrapper pb-2 mb-1"},Ni={class:"mb-2 relative"},Bi={class:"mb-2 relative"},Yi={class:"flex flex-wrap gap-1"},zi={class:"view-btns"},Ri=i("i",{class:"pi pi-search"},null,-1),qi={key:0},Pi={class:"grid mt-2"},Ki={class:"col-12 lg:col-6 xl:col-3"},Ji={class:"card mb-0",style:"border-left:6px solid #000;"},Gi={to:"/tags",class:"flex justify-content-between"},Xi=i("h4",{class:"mb-0 block text-xl font-semibold tracking-tight"},"Total Tasks",-1),Zi={class:"text-900 font-bold text-2xl"},Qi={to:"/tags",class:"flex justify-content-between"},el={class:"mb-0 text-xl font-semibold tracking-tight"},tl={class:"text-900 font-bold text-2xl"},sl={class:"col-12"},al={class:"task-container"},il=["onClick"],ll={class:"title-group"},nl={class:"rtitle line-clamp-1",style:{"font-weight":"600"}},ol={style:{"font-size":"12px"}},rl=i("strong",null,"Due Date:",-1),dl={class:"w-full flex justify-content-center"},ul=i("p",{class:"text-center font-medium font-italic"},"No data found",-1),cl=["onMouseenter"],hl=["onDblclick"],ml={class:"task-status"},vl={key:1},pl={class:"flex align-items-center"},fl=["onClick","title"],yl=["onsubmit"],_l=["onMouseenter"],gl={key:0,class:"flex gap-1 w-full h-full justify-content-center align-items-center"},wl=["onMouseenter"],bl={key:0,class:"flex justify-content-center assignee-wrapper"},Dl=["src"],kl={key:1},Tl={class:"s-assignee"},Cl=["onClick"],El=i("i",{class:"pi pi-user-plus pl-1 text-xl",style:{"padding-top":"0.1rem"}},null,-1),Sl=i("i",{class:"pi pi-angle-down text-sm mt-1"},null,-1),xl={class:"assigneeSelect"},Ml={class:"relative h-full"},Vl={key:0,class:"inline-block"},$l={class:"task-status-2"},Ol={key:0,class:"flex align-items-center"},Al=["title"],Ll={key:1},jl={class:"flex align-items-center"},Il={key:0,class:"pi pi-calendar",style:{"padding-top":"0.1rem"}},Hl={key:0,class:"inline-block"},Wl={class:"task-status-2 flex"},Ul=i("i",{class:"pi pi-flag pt-2"},null,-1),Fl={key:0,class:"flex align-items-center"},Nl={key:1,class:"pt-1"},Bl={key:1},Yl={class:"flex align-items-center"},zl=["onMouseover","onMouseleave"],Rl=["onClick","onMouseleave"],ql={key:2,class:"main-container"},Pl={class:"content"},Kl={class:"boardContainer",style:{display:"flex","overflow-x":"auto","align-items":"start"}},Jl={class:"column-container"},Gl={class:""},Xl=["onClick"],Zl={class:""},Ql={class:"font-semibold truncate-board text-sm title"},en={class:"flex align-items-center gap-2 mt-1"},tn={class:"status text-sm"},sn={key:0,class:"mt-2 flex align-items-center gap-2"},an=i("i",{class:"pi pi-user text-lg"},null,-1),ln={class:"flex justify-content-start gap-1"},nn=["src"],on={key:1,class:"mt-2 flex align-items-center gap-2"},rn=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),dn={key:2,class:"mt-2 flex align-items-center gap-2"},un=i("i",{class:"pi pi-flag text-lg"},null,-1),cn={class:"text-sm"},hn=["onClick"],mn=i("p",{class:"mb-1"},"Subtask",-1),vn={class:"text-sm font-semibold"},pn=["onClick"],fn={class:"font-semibold truncate-board text-sm title"},yn={class:"flex align-items-center gap-2 mt-1"},_n={class:"status text-sm"},gn={key:0,class:"mt-2 flex align-items-center gap-2"},wn=i("i",{class:"pi pi-user text-lg"},null,-1),bn={class:"flex justify-content-start gap-1"},Dn=["src"],kn={key:1,class:"mt-2 flex align-items-center gap-2"},Tn=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),Cn={key:2,class:"mt-2 flex align-items-center gap-2"},En=i("i",{class:"pi pi-flag text-lg"},null,-1),Sn={class:"text-sm"},xn={class:"mt-2 flex align-items-center gap-2"},Mn=i("i",{class:"pi pi-angle-right text-lg"},null,-1),Vn={class:"text-sm font-semibold"},$n={key:3,class:""},On=["onClick","innerHTML"],An={key:4},Ln={class:"commit-card-wrapper mb-2"},jn={class:"flex justify-content-between align-items-center bb"},In={class:"flex align-items-center gap-2"},Hn=i("div",{class:"pi pi-user"},null,-1),Wn={class:"m-0"},Un={class:"font-light mt-2 mb-0 commit-title"},Fn={class:"text-right"},Nn={class:"font-normal mb-0 text-mute"},Bn=["href"],Yn={key:1,class:"w-full flex justify-content-center my-1"},zn=i("h4",null,[i("i",null,"No Commits Found")],-1),Rn=[zn],qn={__name:"TaskTable",props:["kanbanTasks"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask"],setup(t,{emit:e}){var Ae;const a=Zs(),l=Ue(),{getSingleProject:r,getTaskAssignModalData:s,editTask:c,createTask:n}=Ue(),{modStatusList:y,singleProject:m,statuslist:p,isTaskEdited:M,recentTaskData:$,countTasksByStatus:B,totalTaskCount:I,calendarTasks:pe,tasks:ie}=St(Ue()),J=v(yt("create_task")),G=v(yt("update_task")),fe=v(yt("delete_task")),T=v(yt("download_task")),Q=ts(),$e=e,Te=v(ie||[]),te=(Ae=ds().params)==null?void 0:Ae.projects,W=v(),R=v(),A=v(),ce=v(),ye=v(),_e=v(),ne=v({}),L=v("list"),j=v(null),ue=b=>{L.value=b,b==="git"&&V()},oe=v([]);(async()=>{var q,x;const b=_t("token"),{data:f,pending:O,error:N}=await Ns("branchList",()=>$fetch(`${a.public.apiUrl}/gitlab/${te}/branch`,{headers:{Authorization:`Bearer ${b.value}`}}));if(((q=f.value)==null?void 0:q.branch_list.length)>0){let nt=(x=f.value.branch_list)==null?void 0:x.map(le=>({label:le.name,name:le.name}));oe.value=[{label:"",name:"All"},...nt]}else oe.value=[{label:"No Branches",name:"No Branches"}]})();const Fe=v({label:"",name:"All"}),se=v([]),V=async()=>{var q;const b=_t("token"),{data:f,pending:O,error:N}=await Ns("commitsList",()=>{var x;return $fetch(`${a.public.apiUrl}/gitlab/${te}/commit?branch=${Fe.value?(x=Fe.value)==null?void 0:x.label:""}`,{headers:{Authorization:`Bearer ${b.value}`}})});((q=f.value)==null?void 0:q.code)===200?se.value=f.value.commit_list:se.value=[]};L.value==="git"&&V();const re=()=>{V()},xe=v([{name:"All",code:""},{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Wt=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),et=b=>{const f=b,O=new Date(f),N=O.getFullYear(),q=String(O.getMonth()+1).padStart(2,"0");return`${String(O.getDate()).padStart(2,"0")}-${q}-${N}`},Ne=v({}),gt=v(null);Le(gt,(b,f)=>{});const tt=b=>{gt.value=b,Be.value!==b&&(Ee.value={...Ee.value,[b]:!1},Be.value=null)},Be=v(null),Ee=v({}),Ye=v(null),Ge=v(!1),wt=b=>{Ye.value=b.data.name;const f=document.getElementById(`inputTaskName${b.key}`);Be.value=b.key,Ee.value=Object.keys(Ee.value).reduce((O,N)=>(O[N]=!1,O),{}),Qt(()=>{f&&f.focus()}),Ee.value={...Ee.value,[b.key]:!0}},F=v(!1);Le(Ye,(b,f)=>{f!==null&&(F.value=!0)});let Me=v(null);const ze=b=>{Me.value&&(clearTimeout(Me.value),Me.value=null),Me.value=setTimeout(()=>{$e("handleTaskDetailView",b),Me.value=null},250)},st=b=>{Me.value&&(clearTimeout(Me.value),Me.value=null),wt(b)},Ie=async b=>{if(b.key==="new"){if(j.value==null)return Q.add({severity:"warn",summary:"Error",detail:"Task name is required!",group:"br",life:3e3});const f={name:j.value,parent_task_id:He.value,project_id:te};return await n(f),j.value="",Ve.value=!1}else{if(F.value!==!0)return Q.add({severity:"warn",summary:"Error",detail:"Change task name!",group:"br",life:3e3});await Pt(Ye.value,b.key),Ee.value={...Ee.value,[taskId]:!1},Ye.value=null,Be.value=null,F.value=!1}},bt=b=>{Ne.value={...Ne.value,[b]:!0}},at=b=>{Ne.value={...Ne.value,[b]:!1}},xt=b=>[{label:"Add Sub Task",icon:"pi pi-plus text-white",command:()=>{$e("openCreateSpace",b.key,"sub-task")},disabled:!J},{label:"Edit Task",icon:"pi pi-pencil text-white",command:()=>{$e("handleTaskEdit",b)},disabled:!G},{label:"Task Detail",icon:"pi pi-window-maximize text-white",command:()=>{$e("handleTaskDetailView",b)}},{label:"Delete Task",icon:"pi pi-trash text-white",command:()=>{$e("confirmDeleteTask",b.key)},disabled:!fe}],Ut=v(),Ft=v(),Nt=v(),Bt=v(),Mt=v(),Xe=v(),Dt=v(null),gs=()=>{if(W.value||R.value||A.value||_e.value||ce.value||ye.value)W.value="",R.value="",A.value="",_e.value="",ce.value="",ye.value="",Ut.value="",Ft.value="",Nt.value="",Bt.value="",Mt.value="",Xe.value="",Vt.value=!1,$t.value=!1,Oe();else return},Oe=async()=>{Ut.value=W.value?W.value.map(b=>b.id):"",Ft.value=R.value?R.value.code:"",Nt.value=A.value?A.value.id:"",Bt.value=_e.value,Mt.value=ce.value,Xe.value=ye.value,r(te,Ut.value,Ft.value,Nt.value,Bt.value,Mt.value,Xe.value)},Vt=v(!1),$t=v(!1),Ze=b=>{const f=new Date(b);ce.value=f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate(),Vt.value=!0,Oe()},ut=b=>{$t.value=!0;const f=new Date(b);ye.value=f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate(),Oe()},Yt=()=>{Vt.value=!1,ce.value="",Mt.value="",Oe()},ws=()=>{$t.value=!1,ye.value="",Xe.value="",Oe()},kt=v(!1),it=b=>{if(kt.value=!0,b.length>0){const f=`data:text/csv;charset=utf-8,"Serial No.","Task Name","Project","Assignee","Priority","Status","Time Tracked","Due Date","Overdue"
`+b.map((q,x)=>{var vt,Se;const nt=x+1,le=q.data.name,De=m.value.name,ot=q.data.assigneeObj.map(rt=>rt.name).join("; "),Qe=(vt=q.data.priority)!=null&&vt.name?(Se=q.data.priority)==null?void 0:Se.name:"",ht=q.data.status.name;let We=q.data.total_duration;const Tt=Math.floor(We/3600),mt=Math.floor(We%3600/60),g=We%60;Tt>0?We=`${Tt} hr ${mt} min ${g} sec`:mt>0?We=`${mt} min ${g} sec`:We=`${g} sec`;const u=q.data.dueDateValue,w=q.data.is_overdue?"Yes":"No";return`"${nt}","${le}","${De}","${ot}","${Qe}","${ht}","${We}","${u}","${w}"`}).join(`
`),O=encodeURI(f),N=document.createElement("a");N.setAttribute("href",O),N.setAttribute("download","tasks.csv"),document.body.appendChild(N),N.click(),document.body.removeChild(N),kt.value=!1}else kt.value=!1,Q.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})},zt=v(!0);ys(async()=>{await r(te),zt.value=!1,k()});async function Rt(b,f){var O;try{const N=_t("token"),{data:q,pending:x}=await us(`${a.public.apiUrl}/tasks/update/${f}`,{method:"POST",headers:{Authorization:`Bearer ${N.value}`},body:{status:b==null?void 0:b.id}},"$7UcE4NQ81w");((O=q.value)==null?void 0:O.app_message)==="success"?(Q.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),await r(te)):Q.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(N){console.error("Error fetching data:",N)}}const Pe=v([]),as=v(null),bs=b=>{console.log("inlineAssignees",Pe.value),as.value=b,Pe.value=[]},qt=v(!1),Pt=async(b,f)=>{if(b instanceof Date){qt.value=!0;let O;if(b){const q=new Date(b);q.setDate(q.getDate()+1),O=q.toISOString()}const N={id:f,dueDate:O?new Date(new Date(O).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,project_id:te};await c(N),M.value===!0?(qt.value=!1,Q.add({severity:"success",summary:"Successful",detail:"Due date updated ",group:"br",life:3e3})):(qt.value=!1,Q.add({severity:"error",summary:"Error",detail:"Unable to update due date!",group:"br",life:3e3}))}else if(b!=null&&b.name){const O={id:f,priority:b.name,project_id:te};await c(O),M.value===!0?Q.add({severity:"success",summary:"Successful",detail:"Priority updated ",group:"br",life:3e3}):Q.add({severity:"error",summary:"Error",detail:"Unable to update task priority!",group:"br",life:3e3})}else Ge.value=!0,await c({id:f,name:b,project_id:te}),M.value===!0?(Q.add({severity:"success",summary:"Successful",detail:"Task name updated ",group:"br",life:3e3}),Ge.value=!1):(Q.add({severity:"error",summary:"Error",detail:"Unable to update task name!",group:"br",life:3e3}),Ge.value=!1)},lt=v(!1),Kt=async(b,f,O)=>{var N;if(b==="add"){lt.value=!0;const q={id:O,assignees:(N=Pe.value)==null?void 0:N.map(x=>x.id),project_id:te};await c(q),M.value===!0?(Q.add({severity:"success",summary:"Successful",detail:"Assignees updated ",group:"br",life:3e3}),Pe.value=[],lt.value=!1):(Q.add({severity:"error",summary:"Error",detail:"Unable to update assignees!",group:"br",life:3e3}),lt.value=!1)}if(b==="edit"){const q={id:O,assignees:f==null?void 0:f.map(x=>x.id),project_id:te};await c(q),M.value===!0?(Q.add({severity:"success",summary:"Successful",detail:"Assignees updated ",group:"br",life:3e3}),Pe.value=[],lt.value=!1):(Q.add({severity:"error",summary:"Error",detail:"Unable to update assignees!",group:"br",life:3e3}),lt.value=!1)}},Ot=v(),is=async(b,f)=>{f.node.data.dueDateValue;const O=new Date(b);O.setHours(23,59,0,0),Ot.value=O;let N=new Date(Ot.value).toLocaleDateString("en-US",{month:"short",day:"2-digit"});f.node.data.dueDateValue=N,await Pt(Ot.value,f.node.key)};function ls(){const b="0123456789ABCDEF";let f="#";for(let O=0;O<6;O++)f+=b[Math.floor(Math.random()*10)];return f}function At(b){return{backgroundColor:ls(),color:"white",borderRadius:"50%",border:"2px solid white"}}const C=v([]),k=async()=>{await s(),ne.value=l.users,C.value=l.users},Y=v(!0),Z=Es(()=>({animation:250,group:"tasks",disabled:!Y.value,ghostClass:"ghost"})),ee=Es(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",padding:"12px 10px",margin:"8px 0px"})),X=(b,f)=>{const{added:O,moved:N,removed:q}=b;O&&Rt(f,b.added.element.key)},U=v({});v(null);const Ve=v(!1),Re=v(""),He=v(null),ct=async()=>{Ve.value&&(Lt(Jt(Te.value)),Re.value="");const b={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:{},created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};Ve.value=!0,Te.value=[b,...Te.value],await Qt();const f=document.getElementById("newSubTask");f&&f.focus()},Ds=async b=>{Ve.value&&Lt(Jt(Te.value));const f=Jt(b.node);He.value=f.key;const O={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:{},created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};Ve.value=!0;const N=ns(f.key,O,Jt(Te.value));Te.value=structuredClone(N),Re.value="",U.value[b.node.key]==!0||(U.value[b.node.key]=!0),await Qt();const q=document.getElementById("newSubTask");q&&q.focus()};function ns(b,f,O){for(const N of O){if(N.key===b)return N.children.unshift(f),O;if(ns(b,f,N.children))return O}return!1}function Lt(b=Jt(Te.value)){const f=b.filter(O=>O.key!=="new");return f.forEach(O=>{O.children&&O.children.length>0&&(O.children=Lt(O.children))}),Te.value=structuredClone(f)}return(b,f)=>{const O=vs,N=ps,q=fs,x=es,nt=ia,le=Ks,De=la,ot=na,Qe=Js,ht=Ss,We=oa,Tt=Gs,mt=ra,g=_s("tooltip");return d(),h(ve,null,[i("div",Fi,[_(O,{onChange:f[0]||(f[0]=u=>Oe()),modelValue:o(W),"onUpdate:modelValue":f[1]||(f[1]=u=>K(W)?W.value=u:null),options:o(ne),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(N,{onChange:f[2]||(f[2]=u=>Oe()),modelValue:o(R),"onUpdate:modelValue":f[3]||(f[3]=u=>K(R)?R.value=u:null),options:o(xe),optionLabel:"name",placeholder:"Priority",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(N,{onChange:f[4]||(f[4]=u=>Oe()),modelValue:o(A),"onUpdate:modelValue":f[5]||(f[5]=u=>K(A)?A.value=u:null),options:o(y),optionLabel:"name",placeholder:"Status",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),i("div",Ni,[_(q,{onDateSelect:f[6]||(f[6]=u=>Ze(u)),modelValue:o(ce),"onUpdate:modelValue":f[7]||(f[7]=u=>K(ce)?ce.value=u:null),placeholder:"Start Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),o(Vt)?(d(),h("p",{key:0,onClick:Yt,class:"pi pi-times absolute cursor-pointer"})):D("",!0)]),i("div",Bi,[_(q,{onDateSelect:f[8]||(f[8]=u=>ut(u)),modelValue:o(ye),"onUpdate:modelValue":f[9]||(f[9]=u=>K(ye)?ye.value=u:null),placeholder:"End Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),o($t)?(d(),h("p",{key:0,onClick:ws,class:"pi pi-times end-cross absolute cursor-pointer"})):D("",!0)]),_(x,{onClick:gs,label:"Reset",class:"mr-2 w-full md:w-15rem mb-2",severity:"secondary"})]),_(ot,{class:"border-0 px-0"},{start:S(()=>[i("div",Yi,[o(J)?(d(),de(x,{key:0,icon:"pi pi-plus",label:"Create Task",onClick:f[10]||(f[10]=u=>ct()),class:"mr-2",severity:"secondary"})):D("",!0),i("div",zi,[_(x,{icon:"pi pi-box",label:"Overview",onClick:f[11]||(f[11]=u=>ue("overview")),class:me(["board-btn view-btn",{"bg-indigo-400 text-white":o(L)==="overview"}]),severity:"secondary"},null,8,["class"]),_(x,{icon:"pi pi-list",label:"List",onClick:f[12]||(f[12]=u=>ue("list")),class:me(["table-btn view-btn",{"bg-indigo-400 text-white":o(L)==="list"}]),severity:"secondary"},null,8,["class"]),_(x,{icon:"pi pi-th-large",label:"Board",onClick:f[13]||(f[13]=u=>ue("board")),class:me(["board-btn view-btn",{"bg-indigo-400 text-white":o(L)==="board"}]),severity:"secondary"},null,8,["class"]),_(x,{icon:"pi pi-calendar",label:"Calendar",onClick:f[14]||(f[14]=u=>ue("calendar")),class:me(["calendar-btn view-btn",{"bg-indigo-400 text-white":o(L)==="calendar"}]),severity:"secondary"},null,8,["class"])]),z(_(x,{icon:"pi pi-github",onClick:f[15]||(f[15]=u=>ue("git")),class:me(["px-4",{"bg-indigo-400 text-white":o(L)==="git"}]),severity:"secondary"},null,8,["class"]),[[g,{value:"Git Commits"},void 0,{right:!0}]]),o(T)?z((d(),de(x,{key:1,onClick:f[16]||(f[16]=u=>it(o(ie))),loading:o(kt),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"])),[[g,{value:"Download Tasks"},void 0,{right:!0}]]):D("",!0)])]),end:S(()=>[_(De,{iconPosition:"right",raised:""},{default:S(()=>[_(nt,null,{default:S(()=>[Ri]),_:1}),_(le,{onKeyup:f[17]||(f[17]=u=>Oe()),modelValue:o(_e),"onUpdate:modelValue":f[18]||(f[18]=u=>K(_e)?_e.value=u:null),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),o(L)==="overview"?(d(),h("div",qi,[i("div",Pi,[i("div",Ki,[i("div",Ji,[i("div",Gi,[Xi,i("div",Zi,E(o(I)),1)])])]),(d(!0),h(ve,null,be(o(B),(u,w)=>(d(),h("div",{key:u,class:"col-12 lg:col-6 xl:col-3"},[i("div",{class:"card mb-0",style:P(`border-left:6px solid ${u.statusColor};`)},[i("div",Qi,[i("h4",el,E(u.statusName),1),i("div",tl,E(u.taskCount),1)])],4)]))),128)),i("div",sl,[_(Qe,{class:"h-full"},{title:S(()=>[he("Recent Tasks")]),content:S(()=>[i("div",al,[i("div",null,[(d(!0),h(ve,null,be(o($),u=>(d(),h("div",{key:u,onClick:w=>b.$emit("handleTaskDetailView",u),class:"task-card"},[i("div",ll,[z(i("div",{class:me("recenttaskstatus"),style:P(`background-color: ${u==null?void 0:u.statusColor};`)},null,4),[[g,{value:`Status: ${u.statusName}`},void 0,{left:!0}]]),i("p",nl,E(u==null?void 0:u.taskName),1)]),i("div",null,[i("i",null,[i("p",ol,[rl,he(" "+E(u.dueDate?et(u==null?void 0:u.dueDate):"-- Not Set --"),1)])])])],8,il))),128))]),i("div",dl,[b.currentPage<b.totalPages?(d(),de(x,{key:0,onClick:f[19]||(f[19]=u=>b.loadMoreTasks("hide-loader")),loading:b.loadMoreLoading,label:"Load More",severity:"secondary"},null,8,["loading"])):D("",!0)])])]),_:1})])])])):D("",!0),o(L)==="list"?(d(),de(Tt,{key:1,class:"table-st",stripedRows:"",value:o(Te),scrollable:"",scrollDirection:"both",expandedKeys:o(U),"onUpdate:expandedKeys":f[24]||(f[24]=u=>K(U)?U.value=u:null),lazy:!0,loading:o(zt),filterDisplay:"menu",style:{overflow:"auto"},tableProps:{style:{minWidth:"1024px"}}},{empty:S(()=>[ul]),default:S(()=>[_(o(pt),{field:"name",header:"Name",class:"",expander:"",style:{width:"45%"},showAddButton:!0},{body:S(u=>[i("div",{class:"inline-block w-full align-items-center tasktitle-hover cursor-pointer relative",onMouseenter:w=>tt(u.node.key)},[i("div",{onDblclick:w=>st(u.node),class:"flex w-full"},[z((d(),h("div",ml,[_(N,{class:"mr-1 flex justify-content-center align-items-center",onChange:w=>Rt(u.node.data.status,u.node.key),modelValue:u.node.data.status,"onUpdate:modelValue":w=>u.node.data.status=w,options:o(p),disabled:!o(G),optionLabel:"name"},{value:S(w=>[w.value?(d(),h("div",{key:0,class:"flex align-items-center",style:P({backgroundColor:w.value.color_code})},[i("div",{style:P({backgroundColor:w.value.color_code}),class:"status-bg"},null,4)],4)):(d(),h("span",vl,E(w.placeholder),1))]),option:S(w=>[i("div",pl,[i("div",{style:P([{backgroundColor:w.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,E(w.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])),[[g,{value:`${u.node.data.status.name}`},void 0,{top:!0}]]),i("span",{onClick:w=>ze(u.node),style:P(o(Be)===u.node.key?"display: none;":"display: block;"),class:"taskTitle cursor-pointer",title:u.node.data.name},E(u.node.data.name),13,fl),i("span",null,[_(le,{id:`inputTaskName${u.node.key}`,style:P(o(Be)===u.node.key?"display: block;":"display: none;"),class:"inline-task-input",modelValue:o(Ye),"onUpdate:modelValue":f[20]||(f[20]=w=>K(Ye)?Ye.value=w:null),type:"text",placeholder:"Edit task name"},null,8,["id","style","modelValue"])]),u.node.key=="new"?(d(),h("form",{key:0,onsubmit:w=>{w.preventDefault(),Ie(u.node)},action:""},[_(le,{id:"newSubTask",class:"inline-task-input",modelValue:o(j),"onUpdate:modelValue":f[21]||(f[21]=w=>K(j)?j.value=w:null),type:"text",placeholder:"Task Name",autocomplete:"off"},null,8,["modelValue"])],8,yl)):D("",!0)],40,hl)],40,cl)]),_:1}),_(o(pt),{field:"",header:"",style:{width:"5%",padding:"0.75rem 0rem"}},{body:S(u=>[i("div",{class:"w-full h-full flex align-items center",onMouseenter:w=>tt(u.node.key)},[o(gt)===u.node.key?(d(),h("div",gl,[!o(Ee)[u.node.key]&&u.node.key!=="new"?z((d(),de(x,{key:0,onClick:w=>wt(u.node),severity:"secondary",icon:"pi pi-pencil",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,8,["onClick"])),[[g,{value:"Edit Name",showDelay:500},void 0,{top:!0}]]):D("",!0),!o(Ee)[u.node.key]&&u.node.key!=="new"?z((d(),de(x,{key:1,onClick:w=>Ds(u),severity:"secondary",icon:"pi pi-plus",class:"w-fit h-fit p-1",style:{"font-size":"0.2rem"}},null,8,["onClick"])),[[g,{value:"Add Sub Task",showDelay:500},void 0,{top:!0}]]):D("",!0),o(Ee)[u.node.key]||u.node.key=="new"?z((d(),de(x,{key:2,onClick:w=>Ie(u.node),loading:o(Ge),severity:"secondary",label:u.node.key=="new"?"":"Save",icon:u.node.key=="new"?"pi pi-check":"",class:"p-1 w-fit h-full",style:P(u.node.key=="new"?"font-size: 0.8rem !important; height: fit-content !important;":"")},null,8,["onClick","loading","label","icon","style"])),[[g,{value:u.node.key!=="new"?"Update Name":"Add Task"},void 0,{top:!0}]]):D("",!0),u.node.key=="new"?z((d(),de(x,{key:3,onClick:f[22]||(f[22]=w=>Lt()),severity:"secondary",icon:"pi pi-minus",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,512)),[[g,{value:"Cancel Task",showDelay:500},void 0,{top:!0}]]):D("",!0)])):D("",!0)],40,_l)]),_:1}),_(o(pt),{field:"assignee",header:"Assignee",style:{width:"16%"}},{body:S(u=>{var w,vt;return[u.node.key!=="new"?(d(),h("div",{key:0,class:"flex justify-content-start gap-1 userL",onMouseenter:Se=>tt(u.node.key)},[((w=u.node.data)==null?void 0:w.assigneeObj.length)>0?(d(),h("span",bl,[(d(!0),h(ve,null,be(u.node.data.assigneeObj,(Se,rt)=>(d(),h("span",{key:rt,style:P({marginLeft:rt>0?"-20px":"0",zIndex:10-rt})},[Se.image?z((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Se.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,Dl)),[[g,{value:`${Se.name}`},void 0,{top:!0}]]):z((d(),de(ht,{key:1,label:Se.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},At(rt)])},null,8,["label","style"])),[[g,{value:`${Se.name}`},void 0,{top:!0}]])],4))),128))])):(d(),h("span",kl,[i("div",Tl,[i("div",{onClick:Se=>bs(u.node.key),class:"flex justify-content-center align-items-center gap-2 cursor-pointer relative"},[El,Sl,o(Pe).length>0&&u.node.key!=="new"&&o(as)===u.node.key?z((d(),de(x,{key:0,onClick:Se=>Kt("add",0,u.node.key),severity:"secondary",icon:"pi pi-check",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important","z-index":"10"},id:`assigneeBtn${u.node.key}`,loading:o(lt)},null,8,["onClick","id","loading"])),[[g,{value:"Set Assigness",showDelay:500},void 0,{top:!0}]]):D("",!0),_(O,{modelValue:o(Pe),"onUpdate:modelValue":f[23]||(f[23]=Se=>K(Pe)?Pe.value=Se:null),options:o(ne),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full absolute",style:{opacity:"0"}},null,8,["modelValue","options"])],8,Cl)])])),i("div",xl,[i("div",Ml,[((vt=u.node.data)==null?void 0:vt.assigneeObj.length)>0?z((d(),de(x,{key:0,severity:"secondary",icon:"pi pi-user-edit",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,512)),[[g,{value:"Edit Assignee",showDelay:500},void 0,{top:!0}]]):D("",!0),_(O,{modelValue:u.node.data.assignee,"onUpdate:modelValue":Se=>u.node.data.assignee=Se,onChange:Se=>Kt("edit",u.node.data.assignee,u.node.key),options:o(C),filter:"",resetFilterOnHide:"true",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full absolute cursor-default",style:{opacity:"0",left:"0",top:"0"}},null,8,["modelValue","onUpdate:modelValue","onChange","options"])])])],40,wl)):D("",!0)]}),_:1}),_(o(pt),{field:"status",header:"Status",style:{width:"10%"}},{body:S(u=>[u.node.key!=="new"?(d(),h("div",Vl,[i("div",$l,[_(N,{class:"mr-1 flex justify-content-center align-items-center",onChange:w=>Rt(u.node.data.status,u.node.key),modelValue:u.node.data.status,"onUpdate:modelValue":w=>u.node.data.status=w,options:o(p),disabled:!o(G),optionLabel:"name"},{value:S(w=>[w.value?(d(),h("div",Ol,[i("div",{title:w.value.name,style:P({color:w.value.color_code,fontWeight:500}),class:"pt-1 status-truncate"},E(w.value.name),13,Al)])):(d(),h("span",Ll,E(w.placeholder),1))]),option:S(w=>[i("div",jl,[i("div",{style:P([{backgroundColor:w.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,E(w.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):D("",!0)]),_:1}),_(o(pt),{field:"dueDateValue",header:"Due Date",style:{textWrap:"nowrap",width:"9%",padding:"0.75rem 0.5rem"}},{body:S(u=>[u.node.key!=="new"?(d(),h("i",Il)):D("",!0),u.node.key!=="new"?(d(),de(q,{key:1,onDateSelect:w=>is(w,u),class:me(["inline-calendar cursor-pointer",u.node.data.dueDateColor==="#087641"&&u.node.data.dueDateValue?"green-calendar":u.node.data.dueDateColor==="#b13a41"&&u.node.data.dueDateValue?"red-calendar":""]),placeholder:u.node.data.dueDateValue?u.node.data.dueDateValue:"--:--"},null,8,["onDateSelect","class","placeholder"])):D("",!0)]),_:1}),_(o(pt),{field:"priority",header:"Priority",style:{width:"9%"}},{body:S(u=>[u.node.key!=="new"?(d(),h("div",Hl,[i("div",Wl,[Ul,_(N,{class:"mr-1 flex justify-content-center align-items-center",onChange:w=>Pt(u.node.data.priority,u.node.key),modelValue:u.node.data.priority,"onUpdate:modelValue":w=>u.node.data.priority=w,options:o(Wt),disabled:!o(G),optionLabel:"name",placeholder:"Set Priority"},{value:S(w=>[w.value?(d(),h("div",Fl,[w.value.name?(d(),h("div",{key:0,style:P({color:w.value.name==="Low"?"#e1aa1e":w.value.name==="Normal"?"#067bea":w.value.name==="High"?"#ff4928":w.value.name==="Urgent"?"crimson":"",fontWeight:500}),class:"pt-1"},E(w.value.name),5)):(d(),h("div",Nl,"-----"))])):(d(),h("span",Bl,E(w.placeholder),1))]),option:S(w=>[i("div",Yl,[i("div",null,E(w.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):D("",!0)]),_:1}),_(o(pt),{field:"action",header:"Action",style:{width:"6%",position:"relative"}},{body:S(u=>[u.node.key!=="new"?(d(),h("div",{key:0,class:"justify-content-start align-items-center webView-action",style:{width:"fit-content"},onMouseover:w=>bt(u.node.key),onMouseleave:w=>at(u.node.key)},[_(We,{visible:o(Ne)[u.node.key],"onUpdate:visible":w=>o(Ne)[u.node.key]=w,model:xt(u.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,zl)):D("",!0),u.node.key!=="new"?(d(),h("div",{key:1,class:"justify-content-start align-items-center tabView-action",style:{width:"fit-content"},onClick:w=>bt(u.node.key),onMouseleave:w=>at(u.node.key)},[_(We,{visible:o(Ne)[u.node.key],"onUpdate:visible":w=>o(Ne)[u.node.key]=w,model:xt(u.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,Rl)):D("",!0)]),_:1})]),_:1},8,["value","expandedKeys","loading"])):D("",!0),o(L)==="board"?(d(),h("div",ql,[i("div",Pl,[i("div",null,[i("div",Kl,[(d(!0),h(ve,null,be(t.kanbanTasks,u=>(d(),h("div",{key:u,class:"groupColumnContainer"},[i("div",Jl,[i("div",{style:P(`background-color: ${u.statusColor}; `),class:"column-header"},E(u.name)+" - "+E(u.content.length),5),_(o(pa),{modelValue:u.content,"onUpdate:modelValue":w=>u.content=w,options:o(Z),disabled:!o(G),class:"draggable scrollbar",itemKey:"name",group:"cardItem",onChange:w=>X(w,u.status)},{item:S(({element:w})=>{var vt,Se,rt,$s,Os,As;return[i("div",Gl,[(d(),h("div",{class:"task-card",style:P(o(ee)),key:w.id,onClick:ke=>b.$emit("handleTaskDetailView",w,u.content,u.name)},[i("div",Zl,[z((d(),h("p",Ql,[he(E(w.data.name),1)])),[[g,{value:`${w.data.name}`},void 0,{top:!0}]]),i("div",en,[i("div",{class:"status-icon",style:P(`background-color:${w.data.status.color_code}`)},null,4),i("p",tn,E(w.data.status.name),1)]),((Se=(vt=w.data)==null?void 0:vt.assigneeObj)==null?void 0:Se.length)>0?(d(),h("div",sn,[an,i("div",ln,[(d(!0),h(ve,null,be(w.data.assigneeObj,(ke,Ct)=>(d(),h("span",{key:Ct,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:Ct>0?"-20px":"0",zIndex:10-Ct})},[ke.image?z((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:ke.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,nn)),[[g,{value:`${ke.name}`},void 0,{top:!0}]]):z((d(),de(ht,{key:1,label:ke.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},At(Ct)])},null,8,["label","style"])),[[g,{value:`${ke.name}`},void 0,{top:!0}]])],4))),128))])])):D("",!0),(rt=w.data)!=null&&rt.dueDateValue?(d(),h("div",on,[rn,i("p",{style:P(`color: ${w.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},E(w.data.dueDateValue),5)])):D("",!0),(Os=($s=w.data)==null?void 0:$s.priority)!=null&&Os.name?(d(),h("div",dn,[un,i("p",cn,E((As=w.data.priority)==null?void 0:As.name),1)])):D("",!0),i("div",{class:"mt-2 flex align-items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-100",style:{"border-radius":"5px"},onClick:ke=>{ke.stopPropagation(),o(Dt)==w.unique_id?Dt.value=null:Dt.value=w.unique_id}},[mn,i("i",{class:me(`pi ${o(Dt)==w.unique_id?"pi-angle-down":"pi-angle-right"}  text-lg`)},null,2),i("p",vn,E(w.children.length),1)],8,hn)]),he(" "+E(w.t_name),1)],12,Xl)),i("div",{class:me(o(Dt)===w.unique_id?"":"hidden")},[(d(!0),h(ve,null,be(w.children,ke=>{var Ct,Ls,js,Is,Hs,Ws;return d(),h("div",{key:ke.unique_id,class:"sub-card",onClick:jt=>b.$emit("handleTaskDetailView",ke,u.content,u.name)},[i("p",fn,E(ke.data.name),1),i("div",yn,[i("div",{class:"status-icon",style:P(`background-color:${ke.data.status.color_code}`)},null,4),i("p",_n,E(ke.data.status.name),1)]),((Ls=(Ct=ke.data)==null?void 0:Ct.assigneeObj)==null?void 0:Ls.length)>0?(d(),h("div",gn,[wn,i("div",bn,[(d(!0),h(ve,null,be(ke.data.assigneeObj,(jt,os)=>(d(),h("span",{key:os,class:"flex justify-content-center assignee-wrapper",style:P({marginLeft:os>0?"-20px":"0",zIndex:10-os})},[jt.image?z((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:jt.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,Dn)),[[g,{value:`${jt.name}`},void 0,{top:!0}]]):z((d(),de(ht,{key:1,label:jt.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:P([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},At(os)])},null,8,["label","style"])),[[g,{value:`${jt.name}`},void 0,{top:!0}]])],4))),128))])])):D("",!0),(js=ke.data)!=null&&js.dueDateValue?(d(),h("div",kn,[Tn,i("p",{style:P(`color: ${ke.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},E(ke.data.dueDateValue),5)])):D("",!0),(Hs=(Is=ke.data)==null?void 0:Is.priority)!=null&&Hs.name?(d(),h("div",Cn,[En,i("p",Sn,E((Ws=ke.data.priority)==null?void 0:Ws.name),1)])):D("",!0),i("div",xn,[Mn,i("p",Vn,E(ke.children.length),1)])],8,pn)}),128))],2)])]}),_:2},1032,["modelValue","onUpdate:modelValue","options","disabled","onChange"])])]))),128))])])])])):D("",!0),o(L)==="calendar"?(d(),h("div",$n,[_(o(Ui),{events:o(pe),"selected-date":new Date().current,"time-from":8*60,"disable-views":["years","year","week"],"active-view":"month","events-on-month-view":"short",style:{height:"600px"}},{event:S(({event:u})=>[i("div",{onClick:w=>ze(u),class:"vuecal__event",style:P({background:u.color}),innerHTML:u.title},null,12,On)]),_:1},8,["events","selected-date"])])):D("",!0),o(L)==="git"?(d(),h("div",An,[_(Qe,null,{title:S(()=>[he("Commit List")]),content:S(()=>[_(N,{onChange:re,modelValue:o(Fe),"onUpdate:modelValue":f[25]||(f[25]=u=>K(Fe)?Fe.value=u:null),options:o(oe),optionLabel:"name",placeholder:"Branches",class:"w-full md:w-17rem mb-3 mt-2"},null,8,["modelValue","options"]),i("div",null,[i("div",Ln,[o(se).length>0?(d(),de(mt,{key:0,value:o(se)},{content:S(u=>[i("div",jn,[i("div",null,[i("div",In,[Hn,i("h6",Wn,E(u.item.author_name),1)]),i("div",null,[i("h6",Un,"- "+E(u.item.title),1)])]),i("div",Fn,[i("p",Nn,[i("small",null,E(u.item.authored_date),1)]),i("a",{href:u.item.web_url,target:"_blank",class:"font-small text-end"},[i("small",null,E(u.item.short_id),1)],8,Bn)])])]),_:1},8,["value"])):(d(),h("div",Yn,Rn))])])]),_:1})])):D("",!0)],64)}}};const Ke=t=>(Ms("data-v-cfeccfc4"),t=t(),Vs(),t),Pn={class:"field flex flex-column"},Kn=Ke(()=>i("label",{for:"name"},[he("Set Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),Jn={class:"field"},Gn=Ke(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),Xn={class:"ql-formats flex justify-content-end mr-0"},Zn={class:"ql-bold"},Qn={class:"ql-italic"},eo={class:"ql-underline"},to={class:"ql-strike"},so=Ke(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),ao=Ke(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),io=Ke(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),lo=Ke(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),no={class:"field"},oo=Ke(()=>i("label",null,"Assignees ",-1)),ro={class:"field"},uo=Ke(()=>i("label",null,"Tags ",-1)),co={class:"field"},ho=Ke(()=>i("label",null,"Due Date ",-1)),mo={class:"field"},vo=Ke(()=>i("label",null,"Priority ",-1)),po=Ke(()=>i("br",null,null,-1)),fo={key:0,class:"text-center",style:{color:"red"}},yo={class:"create-btn-wrapper mb-0"},_o={__name:"CreateTask",props:["createTaskTitle","taskId","projects","usersLists","tagsLists"],emits:["closeCreateModal"],setup(t,{emit:e}){const{createTask:a}=Ue(),{isTaskCreated:l,detectDuplicateTask:r}=St(Ue()),{createTaskTitle:s,taskId:c,projects:n,usersLists:y,tagsLists:m}=t,p=ts(),M=v(!1),$=v(c),B=v(!0),I=v(!1),pe=v(!1),ie=v(null),J=v(" ");Le(J,R=>{R.length===0&&(J.value=" ")});const G=v(null),fe=v(null),T=v(null),Q=v(null),$e=v(!1),Te=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),je=e,te=R=>{if(console.log("test druve"),$e.value)G.value=R;else{const A=new Date(R);A.setHours(23,59,0,0),G.value=A}};Le(G,(R,A)=>{R&&A&&R!==A&&($e.value=!0)});const W=async()=>{var R,A,ce;if(M.value=!0,ie.value===null)pe.value=!0,M.value=!1;else{pe.value=!1;let ye;if(G.value){const ne=new Date(G.value);ne.setDate(ne.getDate()+1),ye=ne.toISOString()}const _e={name:ie.value,description:J.value,dueDate:ye?new Date(new Date(ye).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,assignees:(R=fe.value)==null?void 0:R.map(ne=>ne.id),tags:(A=T.value)==null?void 0:A.map(ne=>ne.id),priority:(ce=Q.value)==null?void 0:ce.name,project_id:n,parent_task_id:c};if(ye){const ne=new Date(ye);ne.setDate(ne.getDate()-1),G.value=ne?new Date(ne).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(_e),r.value===!0?(M.value=!1,p.add({severity:"error",summary:"Error",detail:"Task already exists!",group:"br",life:3e3})):l.value===!0?(M.value=!1,B.value=!1,I.value=!0,ie.value=null,je("closeCreateModal",!1),p.add({severity:"success",summary:"Successful",detail:"Task created Successfully",group:"br",life:3e3})):(M.value=!1,p.add({severity:"error",summary:"Error",detail:"Unable to create task!",group:"br",life:3e3}))}};return ys(()=>{const R=document.getElementById("createTaskName");Qt(()=>{R&&R.focus()})}),(R,A)=>{const ce=Ks,ye=Qs,_e=vs,ne=fs,L=ps,j=es,ue=_s("tooltip");return d(),h("div",null,[_(ce,{type:"hidden",modelValue:o($),"onUpdate:modelValue":A[0]||(A[0]=oe=>K($)?$.value=oe:null)},null,8,["modelValue"]),i("div",Pn,[Kn,_(ye,{id:"createTaskName",class:"border-gray-300",modelValue:o(ie),"onUpdate:modelValue":A[1]||(A[1]=oe=>K(ie)?ie.value=oe:null),invalid:R.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",Jn,[Gn,_(o(ms),{modelValue:o(J),"onUpdate:modelValue":A[2]||(A[2]=oe=>K(J)?J.value=oe:null),editorStyle:"height: 120px"},{toolbar:S(()=>[i("span",Xn,[z(i("button",Zn,null,512),[[ue,"Bold",void 0,{bottom:!0}]]),z(i("button",Qn,null,512),[[ue,"Italic",void 0,{bottom:!0}]]),z(i("button",eo,null,512),[[ue,"Underline",void 0,{bottom:!0}]]),z(i("button",to,null,512),[[ue,"Strikethrough",void 0,{bottom:!0}]]),so,ao,io,lo])]),_:1},8,["modelValue"])]),i("div",no,[oo,_(_e,{display:"chip",modelValue:o(fe),"onUpdate:modelValue":A[3]||(A[3]=oe=>K(fe)?fe.value=oe:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",ro,[uo,_(_e,{display:"chip",modelValue:o(T),"onUpdate:modelValue":A[4]||(A[4]=oe=>K(T)?T.value=oe:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",co,[ho,_(ne,{modelValue:o(G),"onUpdate:modelValue":A[5]||(A[5]=oe=>K(G)?G.value=oe:null),class:"w-full clndr",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:A[6]||(A[6]=oe=>te(oe))},null,8,["modelValue"])]),i("div",mo,[vo,_(L,{modelValue:o(Q),"onUpdate:modelValue":A[7]||(A[7]=oe=>K(Q)?Q.value=oe:null),options:o(Te),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),po,o(pe)?(d(),h("p",fo,"Please add task name")):D("",!0),i("div",yo,[_(j,{label:"Save",icon:"pi pi-check",text:"",onClick:W,loading:o(M)},null,8,["loading"])])])}}},go=xs(_o,[["__scopeId","data-v-cfeccfc4"]]);const Je=t=>(Ms("data-v-eeee4ee3"),t=t(),Vs(),t),wo={class:"position-relative d-flex flex-column justify-content-between w-100 modal-container"},bo={class:"field flex flex-column"},Do=Je(()=>i("label",{for:"name"},[he("Edit Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),ko={class:"field"},To=Je(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),Co={class:"ql-formats flex justify-content-end mr-0"},Eo={class:"ql-bold"},So={class:"ql-italic"},xo={class:"ql-underline"},Mo={class:"ql-strike"},Vo=Je(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),$o=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Oo=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Ao=Je(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Lo={class:"field"},jo=Je(()=>i("label",null,"Assignees",-1)),Io={class:"field"},Ho=Je(()=>i("label",null,"Tags",-1)),Wo={class:"field"},Uo=Je(()=>i("label",null,"Due Date",-1)),Fo={class:"field"},No=Je(()=>i("label",null,"Priority",-1)),Bo=Je(()=>i("br",null,null,-1)),Yo={key:0,class:"text-center",style:{color:"red"}},zo={class:"edt-btn-wrapper mb-0"},Ro={__name:"EditTask",props:["singleTask","usersLists","tagsLists","projects"],emits:["closeEditModal"],setup(t,{emit:e}){var R,A,ce,ye,_e,ne;const{editTask:a}=Ue(),{isTaskEdited:l,detectDuplicateTask:r}=St(Ue()),{singleTask:s,usersLists:c,tagsLists:n,projects:y}=t,m=ts(),p=v(!1),M=v((R=s==null?void 0:s.data)==null?void 0:R.name),$=v(((A=s==null?void 0:s.data)==null?void 0:A.description)||" "),B=v(!1);Le($,L=>{L.length===0&&($.value=" "),B.value=!0});const I=v((ce=s==null?void 0:s.data)!=null&&ce.dueDate?new Date(s.data.dueDate).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),pe=v(!1),ie=v(null);ie.value=(ye=s==null?void 0:s.data)!=null&&ye.assigneeObj?(_e=s==null?void 0:s.data)==null?void 0:_e.assigneeObj.map(L=>({id:L.id,name:L.name})):"";const J=v(!1);Le(ie,L=>{J.value=!0});const G=v((ne=s==null?void 0:s.data)==null?void 0:ne.tagsObj),fe=v(!1);Le(G,L=>{fe.value=!0});const T=v(null);T.value=s.data.priority?{name:s.data.priority.name,code:s.data.priority.code}:"";const Q=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),$e=v(!1),Te=e,je=L=>{if(console.log("test druve"),pe.value)I.value=L;else{const j=new Date(L);j.setHours(23,59,0,0),I.value=j}};Le(I,(L,j)=>{L&&j&&L!==j&&(pe.value=!0)});const te=v(I.value);Le(I,(L,j)=>{L&&(te.value=new Date(L).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const W=async()=>{var L;if(p.value=!0,M.value===null)$e.value=!0,p.value=!1;else{$e.value=!1;let j;if(I.value){const Ce=new Date(I.value);Ce.setDate(Ce.getDate()+1),j=Ce.toISOString()}const ue=new Date((L=s==null?void 0:s.data)==null?void 0:L.dueDate).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),oe={id:s.key,name:M.value,...B.value===!0?{description:$.value}:{},priority:T.value.name,...te.value!==ue?{dueDate:j?new Date(new Date(j).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...J.value===!0?{assignees:ie.value.map(Ce=>Ce.id)}:{},...fe.value===!0?{tags:G.value.map(Ce=>Ce.id)}:{},project_id:y};if(j){const Ce=new Date(j);Ce.setDate(Ce.getDate()-1),I.value=Ce?new Date(Ce).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(oe),r.value===!0?(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Cannnot edit, edited task name already exists!",group:"br",life:3e3})):l.value===!0?(p.value=!1,Te("closeEditModal",!1),Te("visibleEdit","visibleEdit"),m.add({severity:"success",summary:"Successful",detail:"Task updated Successfully",group:"br",life:3e3}),B.value===!0&&(B.value=!1,console.log("isDescriptionEdited Flagged")),J.value===!0&&(J.value=!1,console.log("isAsigneeEdited Flagged")),fe.value===!0&&(fe.value=!1,console.log("isTagsEdited Flagged"))):(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Unable to update task!",group:"br",life:3e3}))}};return ys(()=>{const L=document.getElementById("editTaskName");Qt(()=>{L&&L.focus()})}),(L,j)=>{const ue=Qs,oe=vs,Ce=fs,Fe=ps,se=es,V=_s("tooltip");return d(),h("div",wo,[i("div",null,[i("div",bo,[Do,_(ue,{id:"editTaskName",class:"border-gray-300",modelValue:o(M),"onUpdate:modelValue":j[0]||(j[0]=re=>K(M)?M.value=re:null),rows:"3",cols:"15",invalid:L.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",ko,[To,_(o(ms),{modelValue:o($),"onUpdate:modelValue":j[1]||(j[1]=re=>K($)?$.value=re:null),editorStyle:"height: 120px"},{toolbar:S(()=>[i("span",Co,[z(i("button",Eo,null,512),[[V,"Bold",void 0,{bottom:!0}]]),z(i("button",So,null,512),[[V,"Italic",void 0,{bottom:!0}]]),z(i("button",xo,null,512),[[V,"Underline",void 0,{bottom:!0}]]),z(i("button",Mo,null,512),[[V,"Strikethrough",void 0,{bottom:!0}]]),Vo,$o,Oo,Ao])]),_:1},8,["modelValue"])]),i("div",Lo,[jo,_(oe,{display:"chip",modelValue:o(ie),"onUpdate:modelValue":j[2]||(j[2]=re=>K(ie)?ie.value=re:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",Io,[Ho,_(oe,{display:"chip",modelValue:o(G),"onUpdate:modelValue":j[3]||(j[3]=re=>K(G)?G.value=re:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",Wo,[Uo,_(Ce,{modelValue:o(I),"onUpdate:modelValue":j[4]||(j[4]=re=>K(I)?I.value=re:null),class:"w-full",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:j[5]||(j[5]=re=>je(re))},null,8,["modelValue"])]),i("div",Fo,[No,_(Fe,{modelValue:o(T),"onUpdate:modelValue":j[6]||(j[6]=re=>K(T)?T.value=re:null),options:o(Q),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),Bo,o($e)?(d(),h("p",Yo,"Please add/fill/check up all the fields")):D("",!0),i("div",zo,[_(se,{label:"Update",icon:"pi pi-check",text:"",onClick:W,loading:o(p)},null,8,["loading"])])])])}}},qo=xs(Ro,[["__scopeId","data-v-eeee4ee3"]]),Ps=ca("fileUpload",()=>{const t=v(!1),e=v(!1),a=v(!1);async function l(s,c){e.value=!0;const n=new FormData;n.append("task_id",s),n.append("attachments",c);const y=_t("token");try{const m=await fetch("https://pbe.singularitybd.net/api/v1/tasks/attachment-upload",{method:"POST",headers:{Authorization:`Bearer ${y.value}`},body:n});if(!m.ok)throw new Error("Network response was not ok");const p=await m.json();console.log("upload data =>",p),(p==null?void 0:p.user_message)==="success"?t.value=!0:t.value=!1,e.value=!1}catch(m){console.error("Error uploading file:",m),t.value=!1,e.value=!1}}async function r(s){const c=_t("token");try{const n=await fetch(`https://pbe.singularitybd.net/api/v1/tasks/attachment-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${c.value}`}});if(!n.ok)throw new Error("Network response was not ok");const y=await n.json();console.log("delete data =>",y),(y==null?void 0:y.user_message)==="success"?a.value=!0:a.value=!1}catch(n){console.error("Error uploading file:",n),a.value=!1}}return{fileUpload:l,fileDelete:r,isFileUpload:t,isLoading:e,isFileDeleted:a}});const Po={class:"grid"},Ko={class:"col-12 flex justify-content-between"},Jo={class:"m-0 detail-task-name cursor-pointer"},Go={class:"flex gap-1"},Xo=i("span",{class:"ml-1 text-lg pi pi-copy my-auto cursor-pointer",style:{"padding-top":"1px"}},null,-1),Zo=i("h5",{class:"m-0 ml-2"},"Activity",-1),Qo={class:"col-12 lg:col-7"},er={class:"task-wrapper card"},tr={class:"task-det no-scrollbar"},sr={class:"flex justify-content-between gap-2 flex-wrap align-items-center"},ar={class:"w-full lg:w-fit"},ir={class:"flex mt-2 justify-content-between gap-2 align-items-center task-detail-wrapper"},lr=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-calendar"}),i("p",{class:"text-nowrap"},"Due Date:")],-1),nr={class:"flex justify-content-between gap-2 align-items-centertask-detail-wrapper mt-3 mb-3"},or=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-tags"}),i("p",null,"Tags:")],-1),rr={class:"w-full lg:w-fit"},dr={class:"flex justify-content-between gap-2 align-items-center task-detail-wrapper"},ur=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",null,"Status:")],-1),cr={class:"flex mt-4 mb-3 justify-content-start gap-6 align-items-center task-detail-wrapper"},hr=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-stopwatch"}),i("p",{class:"text-nowrap"},"Track Time:")],-1),mr={class:"clock-wrapper relative"},vr={class:"border-round px-2 pt-3 pb-2"},pr={class:"flex justify-content-center align-items-center gap-3 manual-wrapper -mt-1"},fr=i("label",{for:"hours",class:"block mb-2 text-xs"},"Hours",-1),yr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),_r=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),gr=i("label",{for:"minutes",class:"block mb-2 text-xs"},"Minutes",-1),wr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),br=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),Dr={class:"flex justify-content-center align-items-center",style:{"margin-top":"0.49rem !important"}},kr=i("div",null,null,-1),Tr={class:"flex justify-content-between gap-2"},Cr=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-user"}),i("p",null,"Assignee:")],-1),Er={class:"field mt-3 flex flex-column"},Sr=i("div",{class:"flex justify-content-start gap-2 align-items-center mb-1 task-detail-property"},[i("span",{class:"pi pi-sliders-h"}),i("p",null,"Description:")],-1),xr={class:"ql-formats flex justify-content-end mr-0"},Mr={class:"ql-bold"},Vr={class:"ql-italic"},$r={class:"ql-underline"},Or={class:"ql-strike"},Ar=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),Lr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),jr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),Ir=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),Hr={key:0,class:"flex justify-content-end"},Wr={class:"m-0"},Ur={class:"my-3 attach-sec flex align-items-center justify-content-start gap-2",style:{"overflow-x":"scroll"}},Fr={key:0,class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-5 attch-w",style:{"background-color":"#f7fafc"}},Nr=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),Br=i("div",{class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},[i("div",{class:"text-xs"},"asdasd....asdme.extng"),i("div",{class:"text-xs"},"9 MAy, 2024")],-1),Yr=[Nr,Br],zr=["href"],Rr=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),qr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Pr={class:"text-xs"},Kr={class:"text-xs"},Jr=["href"],Gr=["src"],Xr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Zr={class:"text-xs"},Qr={class:"text-xs"},ed=["href"],td=i("div",{class:"pi pi-video text-6xl attach-icon"},null,-1),sd={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},ad={class:"text-xs"},id={class:"text-xs"},ld=["href"],nd=i("div",{class:"pi pi-file-pdf text-6xl text-danger attach-icon"},null,-1),od={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},rd={class:"text-xs"},dd={class:"text-xs"},ud=["href"],cd=i("div",{class:"pi pi-file-word text-6xl text-blue attach-icon"},null,-1),hd={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},md={class:"text-xs"},vd={class:"text-xs"},pd=["href"],fd=i("div",{class:"pi pi-file-excel text-6xl attach-icon",style:{color:"#04aa6d"}},null,-1),yd={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},_d={class:"text-xs"},gd={class:"text-xs"},wd=["onClick"],bd=i("i",{class:"pi pi-times text-xs text-white"},null,-1),Dd=[bd],kd={key:0,class:"flex gap-2 w-full justify-content-center"},Td=i("p",{class:"text-center"},"No Data found...",-1),Cd=["onClick"],Ed={class:"action-dropdown-det"},Sd={class:"action-dropdown-content-det"},xd={class:"card"},Md={class:"flex justify-content-start align-items-center task-detail-wrapper"},Vd=i("div",{class:"flex justify-content-start gap-2 align-items-center bounce-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",{class:"text-nowrap"},"Bounce Status:")],-1),$d={class:"col-12 lg:col-5"},Od={class:"comment-wrapper card no-scrollbar"},Ad={class:"comments no-scrollbar"},Ld={class:"my-2 text-surface-800"},jd={key:0},Id=["innerHTML"],Hd={class:"my-2 text-surface-800"},Wd={class:"flex justify-content-start align-items-center"},Ud=["src"],Fd={class:"text-lg"},Nd={key:0,class:"flex justify-content-start my-2"},Bd=["href"],Yd=i("div",{class:"pi pi-file"},null,-1),zd={class:"attach-detail flex flex-column justify-content-center align-items-center"},Rd={class:"text-xs"},qd=["innerHTML"],Pd={style:{"line-height":"0"},class:"pb-1 float-right mt-3 mb-2"},Kd={key:0,class:"text-sm font-semibold tracking-wide leading-3 bg-gray-300 px-3 py-2 flex align-itens-center mb-1 relative"},Jd=i("span",{class:"pi pi-file-import mr-2"},null,-1),Gd=i("i",{class:"pi pi-times"},null,-1),Xd=[Gd],Zd={class:"ql-formats flex justify-content-end mr-0"},Qd={class:"ql-bold"},eu={class:"ql-italic"},tu={class:"ql-underline"},su={class:"ql-strike"},au=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),iu=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),lu=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),nu=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),ou={__name:"TaskDetail",props:["usersLists","tagsLists","projID"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask","updateTaskTable"],setup(t,{emit:e}){var lt,Kt,Ot,is,ls,At;const a=Zs(),{fileUpload:l,fileDelete:r}=Ps(),{isFileUpload:s,isLoading:c,isFileDeleted:n}=St(Ps()),{getTaskTimerData:y,setManualTime:m,storeTaskTimer:p}=Bs();St(Bs());const{editTask:M,addTaskComment:$,getTaskDetails:B,getSingleProject:I}=Ue(),{isTaskEdited:pe,isTaskCommentCreated:ie,singleTaskComments:J,subTasks:G,taskStatus:fe,taskDetails:T,taskActivity:Q}=St(Ue());localStorage.setItem("taskDetailID",JSON.stringify(T.value.id));const{usersLists:$e,tagsLists:Te,projID:je}=t,te=e,W=ts(),R=v(!1),A=v(yt("update_task")),ce=v(yt("edit_bounce")),ye=v(yt("create_task")),_e=v(null);_e.value=(Kt=(lt=T.value)==null?void 0:lt.assignee)==null?void 0:Kt.map(C=>({id:C.id,name:C.name}));const ne=v(!1);Le(_e,C=>{ne.value=!0});const L=v((is=(Ot=T.value)==null?void 0:Ot.tags)==null?void 0:is.map(C=>({id:C.id,name:C.name}))),j=v(!1);Le(L,C=>{j.value=!0});const ue=v((ls=T.value)!=null&&ls.due_date?new Date(T.value.due_date).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),oe=v(!1),Ce=C=>{if(console.log("test druve"),oe.value)ue.value=C;else{const k=new Date(C);k.setHours(23,59,0,0),ue.value=k}};Le(ue,(C,k)=>{C&&k&&C!==k&&(oe.value=!0)});const Fe=v(ue.value);Le(ue,(C,k)=>{C&&(Fe.value=new Date(C).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const se=v(),V=ha(),re=v(null),xe=v(null),Wt=v(!1),et=v(!1),Ne=async C=>{var Y,Z;et.value=!0;let k;if(re.value>0||xe.value>0){k=re.value*3600+xe.value*60,console.log("totalSeconds",k);const ee=await m((Y=T.value)==null?void 0:Y.id,k);(ee==null?void 0:ee.code)===200?(await B((Z=T.value)==null?void 0:Z.id),et.value=!1,W.add({severity:"success",summary:"Duration Added",detail:`Duration: ${re.value?re.value:0} hours and ${xe.value?xe.value:0} minutes`,group:"br",life:3e3}),re.value=null,xe.value=null,C()):(et.value=!1,W.add({severity:"error",summary:"Error",detail:"Unable to add duration",group:"br",life:3e3})),console.log("responseData",ee)}else et.value=!1,W.add({severity:"error",summary:"Error",detail:"Please add duration",group:"br",life:3e3});k=null},gt=C=>{var k;console.log(C.detail),C.detail===3&&((k=T.value)==null?void 0:k.is_timer_start)==="false"&&V.require({target:C.currentTarget,group:"headless",message:"Set task duration:",accept:()=>{W.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{}})},tt=v("00:00:00");let Be=null;const Ee=v(!1),Ye=async()=>{var C,k,Y,Z,ee,X,U,Ve,Re,He;if(T.value.id,Ee.value=!0,((C=T.value)==null?void 0:C.is_timer_start)==="false"){await y("start",(k=T.value)==null?void 0:k.id),await B((Y=T.value)==null?void 0:Y.id),Ge(),Ee.value=!1,localStorage.setItem("storeTaskID",JSON.stringify((Z=T.value)==null?void 0:Z.id)),localStorage.setItem("storeTaskProjectID",JSON.stringify(Number(je))),localStorage.setItem("storeTaskSpaceID",JSON.stringify((ee=T.value)==null?void 0:ee.project.space_id)),localStorage.setItem("storeTaskCompanyID",JSON.stringify((X=T.value)==null?void 0:X.project.company_id)),localStorage.setItem("storeTaskTimerStartTime",JSON.stringify(T.value.taskTimer.start_time));let ct={task_id:T.value.id,project_id:je,space_id:T.value.project.space_id,company_id:T.value.project.company_id,timerStartTime:T.value.taskTimer.start_time};await p(ct),W.add({severity:"success",summary:"Task Timer",detail:"Timer Started",group:"br",life:3e3}),await I(je)}else await y("stop",(U=T.value)==null?void 0:U.id,(Re=(Ve=T.value)==null?void 0:Ve.taskTimer)==null?void 0:Re.id),await B((He=T.value)==null?void 0:He.id),wt(),Ee.value=!1,localStorage.removeItem("storeTaskID"),localStorage.removeItem("storeTaskProjectID"),localStorage.removeItem("storeTaskSpaceID"),localStorage.removeItem("storeTaskCompanyID"),localStorage.removeItem("storeTaskTimerStartTime"),await p({task_id:null,project_id:null,space_id:null,company_id:null}),W.add({severity:"success",summary:"Task Timer",detail:"Timer Stopped",group:"br",life:3e3}),await I(je)},Ge=()=>{T.value.id,console.log("taskDetails.value.taskTimer.start_time",T.value.taskTimer.start_time);const C=new Date(T.value.taskTimer.start_time).getTime();Be=setInterval(()=>{const k=Math.floor((Date.now()-C)/1e3);tt.value=Yt(k)},1e3)},wt=()=>{clearInterval(Be),tt.value=Yt(T.value.total_duration)},F=v([{is_bounce:"No"},{is_bounce:"Yes"}]),Me=v(),ze=v(((At=T.value)==null?void 0:At.description)||" "),st=v(!1);Le(ze,C=>{C.length===0&&(ze.value=" "),st.value=!0});const Ie=v(null),bt=v(),at=v(!0),xt=v(!1),Ut=()=>{xt.value=!0,at.value=!1},Ft=()=>{xt.value=!1,at.value=!0},Nt=async()=>{var C;if(Ie.value===null||Ie.value===""){W.add({severity:"warn",summary:"Warn",detail:"Comment required",group:"br",life:3e3});return}R.value=!0,await $((C=T.value)==null?void 0:C.id,Ie.value,it.value),ie.value===!0?(W.add({severity:"success",summary:"Successful",detail:"Comment added Successfully",group:"br",life:3e3}),Ie.value=null,R.value=!1,it.value=null):(W.add({severity:"error",summary:"Error",detail:"Unable to add comment",group:"br",life:3e3}),R.value=!1)},Bt=C=>{const k=new Date(C),Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][k.getMonth()],ee=k.getDate(),X=k.getFullYear().toString().substr(-2),U=k.getHours(),Ve=k.getMinutes(),Re=U>=12?"PM":"AM",He=U%12||12,ct=Ve<10?"0"+Ve:Ve;return`${ee} ${Z}'${X}, ${He}:${ct}${Re}`},Mt=async()=>{var Z,ee;let C;if(ue.value){const X=new Date(ue.value);X.setDate(X.getDate()+1),C=X.toISOString()}const k=new Date((Z=T.value)==null?void 0:Z.due_date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),Y={id:(ee=T.value)==null?void 0:ee.id,...st.value===!0?{description:ze.value}:{},project_id:je,...Fe.value!==k?{dueDate:C?new Date(new Date(C).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...ne.value===!0?{assignees:_e.value.map(X=>X.id)}:{},...j.value===!0?{tags:L.value.map(X=>X.id)}:{}};if(C){const X=new Date(C);X.setDate(X.getDate()-1),ue.value=X?new Date(X).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await M(Y),pe.value===!0?(W.add({severity:"success",summary:"Successful",detail:"Task detail updated",group:"br",life:3e3}),bt.value=null,st.value===!0&&(st.value=!1,console.log("isDescriptionEdited Flagged")),ne.value===!0&&(ne.value=!1,console.log("isAsigneeEdited Flagged")),j.value===!0&&(j.value=!1,console.log("isTagsEdited Flagged"))):W.add({severity:"error",summary:"Error",detail:"Unable to upadte task detail",group:"br",life:3e3})},Xe=v(null),Dt=C=>{Xe.value=C.target.files[0]},gs=async()=>{var C,k;Xe.value&&console.log("file =>",Xe.value),await l((C=T.value)==null?void 0:C.id,Xe.value),s.value===!0?(W.add({severity:"success",summary:"Successfull",detail:"File Upload successfully!",group:"br",life:3e3}),B((k=T.value)==null?void 0:k.id),document.getElementById("attachInput").value=null,Xe.value=null):W.add({severity:"error",summary:"Error",detail:"Unable to upload file!",group:"br",life:3e3})},Oe=C=>{const k=["jpg","JPG","jpeg","png","gif","bmp","svg","webp","ico","tiff","tif","heic","heif"],Y=["mp4","avi","flv","wmv","mov","3gp","mkv"],Z=["pdf","PDF","ppt","pptx"],ee=["doc","docx","rtf"],X=["xls","xlsx","csv"];return k.some(U=>C.endsWith("."+U))?"image":Y.some(U=>C.endsWith("."+U))?"video":Z.some(U=>C.endsWith("."+U))?"pdf":ee.some(U=>C.endsWith("."+U))?"word":X.some(U=>C.endsWith("."+U))?"excel":"file"};ys(async()=>{var Y,Z;await B((Y=T.value)==null?void 0:Y.id);const C={name:T.value.status_name,code:T.value.status};se.value=C;const k={is_bounce:T.value.is_bounce};Me.value=k,((Z=T.value)==null?void 0:Z.is_timer_start)==="true"&&Ge()});async function Vt(C){var k,Y,Z;try{const ee=_t("token"),{data:X,pending:U}=await us(`${a.public.apiUrl}/tasks/update/${(k=T.value)==null?void 0:k.id}`,{method:"POST",headers:{Authorization:`Bearer ${ee.value}`},body:{status:C.code}},"$nwfJLeTGBC");((Y=X.value)==null?void 0:Y.app_message)==="success"?(B((Z=T.value)==null?void 0:Z.id),W.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),te("updateTaskTable")):W.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(ee){console.error("Error fetching data:",ee)}}async function $t(C){var k,Y,Z;try{const ee=_t("token"),{data:X,pending:U}=await us(`${a.public.apiUrl}/tasks/update/${(k=T.value)==null?void 0:k.id}`,{method:"POST",headers:{Authorization:`Bearer ${ee.value}`},body:{is_bounce:C.is_bounce}},"$np1kf0qdb3");console.log("dataBO",X),((Y=X.value)==null?void 0:Y.app_message)==="success"?(B((Z=T.value)==null?void 0:Z.id),W.add({severity:"success",summary:"Successfull",detail:"Bounce Status Changed",group:"br",life:3e3})):W.add({severity:"error",summary:"Error",detail:"Unable to change bounce status",group:"br",life:3e3})}catch(ee){console.error("Error fetching data:",ee)}}const Ze=C=>{const Y=C.split("/");return Y[Y.length-1]},ut=C=>{const k=["Jan","Feb","Mar","Apr","MAy","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Y=C,Z=new Date(Y),ee={year:"numeric",month:"long",day:"numeric"},U=Z.toLocaleDateString("en-US",ee).split(" "),Ve=k.indexOf(U[0]);return Ve!==-1&&(U[0]=k[Ve]),U.join(" ")};function Yt(C){const k=Math.floor(C/3600).toString().padStart(2,"0"),Y=Math.floor(C%3600/60).toString().padStart(2,"0"),Z=(C%60).toString().padStart(2,"0");return`${k}:${Y}:${Z}`}const ws=async C=>{var k;await r(C),n.value===!0?(W.add({severity:"success",summary:"Successful",detail:"File Deleted successfully!",group:"br",life:3e3}),B((k=T.value)==null?void 0:k.id)):W.add({severity:"error",summary:"Error",detail:"Unable to delete file!",group:"br",life:3e3})},kt=v(null),it=v(null),zt=v(""),Rt=C=>{it.value=C.target.files[0],zt.value=it.value?it.value.name:""},Pe=()=>{kt.value.click()},as=async()=>{it.value=null},bs=async()=>{var ee;const C=_t("token"),{data:k,pending:Y,error:Z}=await us(`${a.public.apiUrl}/tasks/share/${(ee=T.value)==null?void 0:ee.id}`,{method:"GET",headers:{Authorization:`Bearer ${C.value}`}},"$yuqoLxhdIO");if(Z.value){W.add({severity:"error",summary:"Error",detail:"Failed to share",life:3e3});return}else{const X=document.createElement("textarea");X.value=k.value.shared_web_link,document.body.appendChild(X),X.select(),document.execCommand("copy"),document.body.removeChild(X),W.add({severity:"success",summary:"Share successful",detail:"Shared link copied",group:"br",life:3e3});return}},qt=Es(()=>{var C;return(C=T.value)!=null&&C.unique_id?T.value.unique_id.slice(0,6)+"...":""}),Pt=()=>{var C,k;if((C=T.value)!=null&&C.id){const Y=document.createElement("textarea");Y.value=(k=T.value)==null?void 0:k.unique_id,document.body.appendChild(Y),Y.select(),document.execCommand("copy"),document.body.removeChild(Y),W.add({severity:"success",summary:"Task ID copied",detail:"Task ID copied to clipboard",group:"br",life:3e3})}else W.add({severity:"error",summary:"Error",detail:"Task ID not found",group:"br",life:3e3})};return(C,k)=>{var b,f,O,N,q;const Y=fa,Z=vs,ee=ps,X=ya,U=es,Ve=_a,Re=ga,He=pt,ct=Gs,Ds=wa,ns=Ss,Lt=Js,Ae=_s("tooltip");return d(),h("div",Po,[i("div",Ko,[i("h5",Jo,E(o(T).name),1),i("div",Go,[z((d(),h("div",{onClick:Pt,class:"flex justify-content-start gap-2 align-items-center cursor-pointer uniq-id-wrapper share-btn"},[Xo,i("span",null,E(o(qt)),1)])),[[Ae,{value:"Copy Task ID"},void 0,{top:!0}]]),z(i("span",{onClick:bs,class:"pi pi-share-alt my-auto cursor-pointer ml-2 share-btn"},null,512),[[Ae,{value:"Share Task"},void 0,{top:!0}]]),Zo])]),i("div",Qo,[i("div",null,[i("div",er,[i("div",tr,[i("form",{onSubmit:ft(Mt,["prevent"]),class:"mt-2 task-detail ml-2"},[i("div",sr,[i("div",ar,[i("div",ir,[lr,_(Y,{class:"input-fields"},{default:S(()=>[_(o(fs),{style:"width: 164.94px; border-radius:7px;height:36px",modelValue:o(ue),"onUpdate:modelValue":k[0]||(k[0]=x=>K(ue)?ue.value=x:null),placeholder:"Set Due Date",showTime:"",hourFormat:"12",onDateSelect:k[1]||(k[1]=x=>Ce(x))},null,8,["modelValue"])]),_:1})]),i("div",nr,[or,_(Y,{class:"input-fields",style:{width:"168px"}},{default:S(()=>[_(Z,{display:"chip",modelValue:o(L),"onUpdate:modelValue":k[2]||(k[2]=x=>K(L)?L.value=x:null),filter:"",resetFilterOnHide:"",options:t.tagsLists,optionLabel:"name",placeholder:"Select Tags",class:"w-full"},null,8,["modelValue","options"])]),_:1})])]),i("div",rr,[i("div",dr,[ur,_(ee,{onChange:k[3]||(k[3]=x=>Vt(o(se))),modelValue:o(se),"onUpdate:modelValue":k[4]||(k[4]=x=>K(se)?se.value=x:null),options:o(fe),optionLabel:"name",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["modelValue","options"])]),i("div",cr,[hr,i("div",mr,[_(Ve,{close:o(Wt),group:"headless"},{container:S(({message:x,acceptCallback:nt,rejectCallback:le})=>[i("div",vr,[i("div",pr,[i("div",null,[fr,_(X,{modelValue:o(re),"onUpdate:modelValue":k[5]||(k[5]=De=>K(re)?re.value=De:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:23,id:"hours"},{incrementbuttonicon:S(()=>[yr]),decrementbuttonicon:S(()=>[_r]),_:1},8,["modelValue"])]),i("div",null,[gr,_(X,{modelValue:o(xe),"onUpdate:modelValue":k[6]||(k[6]=De=>K(xe)?xe.value=De:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:59,id:"minutes"},{incrementbuttonicon:S(()=>[wr]),decrementbuttonicon:S(()=>[br]),_:1},8,["modelValue"])])]),i("div",Dr,[_(U,{icon:"pi pi-check px-2 py-0 text-sm",label:"",class:"border-none w-full mx-3",loading:o(et),onClick:De=>Ne(le),size:"small"},null,8,["loading","onClick"])])])]),_:1},8,["close"]),z(_(U,{loading:o(Ee),class:"clock-btn",onClick:Ye,icon:((b=o(T))==null?void 0:b.is_timer_start)=="true"?"pi pi-stop":"pi pi-play",severity:((f=o(T))==null?void 0:f.is_timer_start)=="true"?" stop-color":"",rounded:"","aria-label":"Filter"},null,8,["loading","icon","severity"]),[[Ae,{value:((O=o(T))==null?void 0:O.is_timer_start)=="true"?"Stop":"Start"},void 0,{top:!0}]]),i("div",{class:"text-sm absolute",onClick:k[7]||(k[7]=x=>gt(x))},E(((N=o(T))==null?void 0:N.is_timer_start)=="true"?o(tt):Yt((q=o(T))==null?void 0:q.total_duration)),1)]),kr])])]),i("div",Tr,[Cr,_(Y,{style:{width:"100%"},class:"input-fields"},{default:S(()=>[_(Z,{display:"chip",modelValue:o(_e),"onUpdate:modelValue":k[8]||(k[8]=x=>K(_e)?_e.value=x:null),filter:"",resetFilterOnHide:"",options:t.usersLists,optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),_:1})]),i("div",Er,[Sr,_(o(ms),{modelValue:o(ze),"onUpdate:modelValue":k[9]||(k[9]=x=>K(ze)?ze.value=x:null),editorStyle:"height: 150px",readonly:!o(A)},{toolbar:S(()=>[i("span",xr,[z(i("button",Mr,null,512),[[Ae,"Bold",void 0,{bottom:!0}]]),z(i("button",Vr,null,512),[[Ae,"Italic",void 0,{bottom:!0}]]),z(i("button",$r,null,512),[[Ae,"Underline",void 0,{bottom:!0}]]),z(i("button",Or,null,512),[[Ae,"Strikethrough",void 0,{bottom:!0}]]),Ar,Lr,jr,Ir])]),_:1},8,["modelValue","readonly"])]),o(A)?(d(),h("div",Hr,[_(U,{type:"submit",label:"Save"})])):D("",!0)],32),_(Ds,{class:"mt-3"},{default:S(()=>{var x,nt;return[_(Re,{class:"file-upload",header:"Detail"},{default:S(()=>{var le,De,ot,Qe,ht,We,Tt,mt;return[i("p",Wr,"Attachments: "+E((le=o(T))!=null&&le.attachments&&((ot=(De=o(T))==null?void 0:De.attachments)==null?void 0:ot.length)>0?(ht=(Qe=o(T))==null?void 0:Qe.attachments)==null?void 0:ht.length:0),1),i("div",Ur,[(We=o(T))!=null&&We.attachments&&((Tt=o(T))==null?void 0:Tt.attachments.length)===0?(d(),h("div",Fr,Yr)):D("",!0),(d(!0),h(ve,null,be((mt=o(T))==null?void 0:mt.attachments,g=>(d(),h("div",{key:g,target:"_blank",class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-2 relative",style:{"background-color":"#f7fafc"}},[Oe(g==null?void 0:g.file)==="file"?(d(),h("a",{key:0,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:g==null?void 0:g.file},[Rr,i("div",qr,[i("div",Pr,E(Ze(g==null?void 0:g.file)),1),i("div",Kr,E(ut(g==null?void 0:g.created_at)),1)])],8,zr)):D("",!0),Oe(g==null?void 0:g.file)==="image"?(d(),h("a",{key:1,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 relative",href:g==null?void 0:g.file},[i("img",{src:g==null?void 0:g.file,alt:"",style:{width:"90%",height:"80px","border-radius":"10px","border-top-left-radius":"10px","object-fit":"cover"}},null,8,Gr),i("div",Xr,[i("div",Zr,E(Ze(g==null?void 0:g.file)),1),i("div",Qr,E(ut(g==null?void 0:g.created_at)),1)])],8,Jr)):D("",!0),Oe(g==null?void 0:g.file)==="video"?(d(),h("a",{key:2,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:g==null?void 0:g.file},[td,i("div",sd,[i("div",ad,E(Ze(g==null?void 0:g.file)),1),i("div",id,E(ut(g==null?void 0:g.created_at)),1)])],8,ed)):D("",!0),Oe(g==null?void 0:g.file)==="pdf"?(d(),h("a",{key:3,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:g==null?void 0:g.file},[nd,i("div",od,[i("div",rd,E(Ze(g==null?void 0:g.file)),1),i("div",dd,E(ut(g==null?void 0:g.created_at)),1)])],8,ld)):D("",!0),Oe(g==null?void 0:g.file)==="word"?(d(),h("a",{key:4,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:g==null?void 0:g.file},[cd,i("div",hd,[i("div",md,E(Ze(g==null?void 0:g.file)),1),i("div",vd,E(ut(g==null?void 0:g.created_at)),1)])],8,ud)):D("",!0),Oe(g==null?void 0:g.file)==="excel"?(d(),h("a",{key:5,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:g==null?void 0:g.file},[fd,i("div",yd,[i("div",_d,E(Ze(g==null?void 0:g.file)),1),i("div",gd,E(ut(g==null?void 0:g.created_at)),1)])],8,pd)):D("",!0),i("div",{onClick:u=>ws(g==null?void 0:g.id),class:"absolute bg-red-500 text-white p-2 flex align-items-center justify-content-center close-btn"},Dd,8,wd)]))),128))]),o(A)?(d(),h("div",kd,[i("input",{onChange:Dt,id:"attachInput",class:"float-right file-up-btn",type:"file",placeholder:"+"},null,32),_(U,{type:"button",loading:o(c),onClick:gs,label:"Upload"},null,8,["loading"])])):D("",!0)]}),_:1}),_(Re,{header:`Sub Tasks ${(x=o(G))!=null&&x.length?o(G).length:0}`},{default:S(()=>[o(ye)?z((d(),de(U,{key:0,icon:"pi pi-plus",label:"Create",onClick:k[10]||(k[10]=le=>{var De;return te("openCreateSpace",(De=o(T))==null?void 0:De.id,"sub-task")}),class:"mr-2 sub-create",severity:"secondary"},null,512)),[[Ae,{value:"Create Sub Task"},void 0,{right:!0}]]):D("",!0),_(ct,{class:"tree-table",value:o(G),lazy:!0,tableProps:{style:{minWidth:"650px"}},style:{overflow:"auto"}},{empty:S(()=>[Td]),default:S(()=>[_(He,{class:"cursor-pointer toneS",field:"name",header:"Name",expander:"",style:{width:"45%"}},{body:S(le=>[z((d(),h("span",{class:"subtaskTitle",onClick:De=>te("handleTaskDetailView",le.node)},[he(E(le.node.data.name),1)],8,Cd)),[[Ae,{value:`${le.node.data.name}`},void 0,{left:!0}]])]),_:1}),_(He,{field:"assignee",header:"Assignee",style:{width:"25%"}}),_(He,{field:"dueDateValue",header:"Due Date",style:P([{width:"11.5%"},{"text-wrap":"nowrap"}])}),_(He,{field:"priority",header:"Priority",style:{width:"10%"}},{body:S(le=>{var De,ot,Qe;return[i("span",{class:me(["text-xs",((De=le.node.data.priority)==null?void 0:De.name)==="High"?"text-danger":((ot=le.node.data.priority)==null?void 0:ot.name)==="Medium"?"text-warning":"text-success"])},E((Qe=le.node.data.priority)==null?void 0:Qe.name),3)]}),_:1}),_(He,{field:"action",header:"Action"},{body:S(le=>[i("div",Ed,[_(U,{style:{width:"30px",height:"30px","border-radius":"50%"},icon:"pi pi-ellipsis-v",class:"action-dropdown-det-toggle"}),i("div",Sd,[_(U,{icon:"pi pi-trash",class:"mr-1 ac-btn dlt-action",severity:"warning",rounded:"",onClick:De=>te("confirmDeleteTask",le.node.key)},null,8,["onClick"]),_(U,{icon:"pi pi-cog",class:"mr-1 ac-btn view-action",severity:"info",onClick:De=>te("handleTaskDetailView",le.node),rounded:""},null,8,["onClick"]),_(U,{icon:"pi pi-pencil",class:"mr-1 ac-btn edit-action",severity:"success",onClick:De=>te("handleTaskEdit",le.node),rounded:""},null,8,["onClick"]),_(U,{icon:"pi pi-plus",class:"ac-btn sub-action",severity:"success",onClick:De=>te("openCreateSpace",le.node.key,"sub-task"),rounded:""},null,8,["onClick"])])])]),_:1})]),_:1},8,["value"])]),_:1},8,["header"]),_(Re,{header:`Bounce ${((nt=o(Me))==null?void 0:nt.is_bounce)==="Yes"?"1":""}`},{default:S(()=>[i("div",xd,[i("div",Md,[Vd,_(ee,{onChange:k[11]||(k[11]=le=>$t(o(Me))),disabled:!o(ce),modelValue:o(Me),"onUpdate:modelValue":k[12]||(k[12]=le=>K(Me)?Me.value=le:null),options:o(F),optionLabel:"is_bounce",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["disabled","modelValue","options"])])])]),_:1},8,["header"])]}),_:1})])])])]),i("div",$d,[i("div",null,[i("div",Od,[i("div",Ad,[i("div",Ld,[o(at)?(d(),de(U,{key:0,onClick:Ut,label:"↓  Show More",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})):D("",!0)]),o(xt)?(d(),h("div",jd,[(d(!0),h(ve,null,be(o(Q),x=>(d(),h("ul",{key:x,style:{"margin-left":"-15px","margin-top":"-6px"}},[i("li",{innerHTML:x.title,style:{"font-size":"smaller !important"}},null,8,Id)]))),128)),i("div",Hd,[_(U,{onClick:Ft,label:"↑ Hide",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})])])):D("",!0),(d(!0),h(ve,null,be(o(J),x=>(d(),de(Lt,{class:"mb-2",key:x.id},{title:S(()=>[i("div",Wd,[x.commentator_image?(d(),h("img",{key:0,class:"mr-2",src:x.commentator_image,alt:"",style:{width:"28px",height:"28px","border-radius":"50%"}},null,8,Ud)):(d(),de(ns,{key:1,label:x.commentator_name.charAt(),class:"mr-2 capitalize",size:"small",style:{"background-color":"gray",color:"#ededed","border-radius":"50%"}},null,8,["label"])),i("p",Fd,E(x.commentator_name),1)])]),content:S(()=>[Ze(x==null?void 0:x.file)?(d(),h("div",Nd,[i("a",{href:x==null?void 0:x.file,target:"_blank",class:"bg-gray-200 attachment-wrapper cursor-pointer flex align-items-center px-3 py-3 gap-2 comment-file",style:{"background-color":"#f7fafc"}},[Yd,i("div",zd,[i("div",Rd,E(Ze(x==null?void 0:x.file)),1)])],8,Bd)])):D("",!0),i("p",{innerHTML:x!=null&&x.comment?x==null?void 0:x.comment:"",class:"m-0 ml-1",style:{"font-size":"0.9rem"}},null,8,qd),i("i",Pd,E(Bt(x.time)),1)]),_:2},1024))),128))]),i("form",{onSubmit:ft(Nt,["prevent"]),class:"comment-add"},[o(it)?(d(),h("div",Kd,[i("div",null,[Jd,he(),i("span",null,E(o(zt)),1)]),i("div",{onClick:as,class:"close-comment"},Xd)])):D("",!0),i("div",null,[_(o(ms),{class:"mb-2",placeholder:"Add comment",modelValue:o(Ie),"onUpdate:modelValue":k[13]||(k[13]=x=>K(Ie)?Ie.value=x:null),editorStyle:"height: 76px"},{toolbar:S(()=>[i("span",Zd,[z(i("button",Qd,null,512),[[Ae,"Bold",void 0,{bottom:!0}]]),z(i("button",eu,null,512),[[Ae,"Italic",void 0,{bottom:!0}]]),z(i("button",tu,null,512),[[Ae,"Underline",void 0,{bottom:!0}]]),z(i("button",su,null,512),[[Ae,"Strikethrough",void 0,{bottom:!0}]]),au,iu,lu,nu])]),_:1},8,["modelValue"]),i("input",{class:"hidden",type:"file",ref_key:"fileInput",ref:kt,onChange:Rt},null,544),_(U,{icon:"pi pi-cloud-upload",onClick:Pe,"aria-label":"Filter"}),_(U,{class:"ml-2",type:"submit",icon:"pi pi-plus",label:"Add",loading:o(R)},null,8,["loading"])])],32)])])])])}}};const ss=t=>(Ms("data-v-efb466c3"),t=t(),Vs(),t),ru={class:"card"},du={class:"d-flex create-space-btn-wrapper mb-3 mr-2"},uu={class:"breadCrumWrap"},cu=ss(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),hu=ss(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),mu=ss(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),vu=ss(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),pu={class:"text cursor-pointer"},fu={class:"inline-flex align-items-center justify-content-center gap-2"},yu={class:"white-space-nowrap"},_u=ss(()=>i("p",null,"Are you sure you want to delete?",-1)),gu={__name:"index",setup(t){const e=v(yt("read_task")),a=Ue(),l=Ue(),{getSingleProject:r,deleteTask:s,getTaskAssignModalData:c,getTagsAssignModalData:n,getTaskDetails:y}=Ue(),{singleProject:m,isTaskDeleted:p,tasks:M,kanbanTasks:$,taskDetails:B}=St(Ue()),I=v({}),pe=v(!0),ie=ts(),J=v(!1),G=v(null),fe=ds().query.task_key,{projects:T}=ds().params,Q=v(!1),$e=v(null),Te=v(null),je=v(null),te=v([]),W=v([]),R=v(!1),A=v(!1),ce=v(!1),ye=async(se,V)=>{se?Te.value=se:Te.value="",V=="sub-task"?je.value="Create Sub Task":je.value="Create Task",Q.value=!0,await c(),te.value=a.users,await n(),W.value=l.tags},_e=async se=>{G.value=se,document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const V=document.createElement("div");V.style.position="absolute",V.style.top="0",V.style.left="0",V.style.width="100%",V.style.height="100%",V.style.backgroundColor="rgba(0, 0, 0, 0)",V.style.zIndex="1000000",document.documentElement.appendChild(V),await c(),te.value=a.users,await n(),W.value=l.tags,R.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(V)},ne=se=>{$e.value=se,A.value=!0},L=async()=>{J.value=!0,await s($e.value,T),p.value===!0?(J.value=!1,ie.add({severity:"success",summary:"Successful",detail:"Task Deleted Successfully",group:"br",life:3e3}),A.value=!1):(J.value=!1,ie.add({severity:"error",summary:"Error",detail:"Unable to delete task",group:"br",life:3e3}))},j=async se=>{var re,xe;document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const V=document.createElement("div");V.style.position="absolute",V.style.top="0",V.style.left="0",V.style.width="100%",V.style.height="100%",V.style.backgroundColor="rgba(0, 0, 0, 0)",V.style.zIndex="100000010",document.documentElement.appendChild(V),ce.value&&(ce.value=!1),await y(se.key),await c(),te.value=a.users,await n(),W.value=l.tags,ce.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(V),console.log((xe=(re=B==null?void 0:B.value)==null?void 0:re.project)==null?void 0:xe.name,"taskDetails")};Le(ce,se=>{if(se===!0)return 0;localStorage.removeItem("taskDetailID")}),(()=>{I.value={global:{value:null,matchMode:va.CONTAINS}}})();const oe=se=>{Q.value=se},Ce=se=>{R.value=se},Fe=()=>{r(T)};return Le(()=>ds().query.task_key,se=>{se&&j({key:se})}),fe&&j({key:fe}),ma(()=>{pe.value=!1}),(se,V)=>{var Ee,Ye,Ge,wt;const re=sa,xe=aa,Wt=qn,et=go,Ne=qo,gt=Ss,tt=ou,Be=es;return d(),h("div",ru,[_(re,{position:"bottom-right",group:"br"}),i("div",du,[i("div",uu,[_(xe,{to:"/",class:"text pi pi-home"}),cu,_(xe,{to:"/companies",class:"text"},{default:S(()=>[he("Companies")]),_:1}),hu,_(xe,{to:`/companies/${(Ee=o(m))==null?void 0:Ee.company_id}`,class:"text"},{default:S(()=>{var F;return[he("Company - "+E((F=o(m))==null?void 0:F.company_name),1)]}),_:1},8,["to"]),mu,_(xe,{to:`/companies/${(Ye=o(m))==null?void 0:Ye.company_id}/spaces/${(Ge=o(m))==null?void 0:Ge.space_id}`,class:"text"},{default:S(()=>{var F;return[he(" Space - "+E((F=o(m))==null?void 0:F.space_name),1)]}),_:1},8,["to"]),vu,i("p",pu,"Project - "+E((wt=o(m))==null?void 0:wt.name),1)])]),o(e)?(d(),de(Wt,{key:0,kanbanTasks:o($),tasks:o(M),onOpenCreateSpace:ye,onHandleTaskEdit:V[0]||(V[0]=F=>_e(F)),onHandleTaskDetailView:V[1]||(V[1]=F=>j(F)),onConfirmDeleteTask:V[2]||(V[2]=F=>ne(F))},null,8,["kanbanTasks","tasks"])):D("",!0),_(o(rs),{visible:o(Q),"onUpdate:visible":V[4]||(V[4]=F=>K(Q)?Q.value=F:null),modal:"",header:o(je),style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw","330px":"98vw"}},{default:S(()=>[_(et,{usersLists:o(te),tagsLists:o(W),taskId:o(Te),projects:o(T),onCloseCreateModal:V[3]||(V[3]=F=>oe(F))},null,8,["usersLists","tagsLists","taskId","projects"])]),_:1},8,["visible","header"]),_(o(rs),{visible:o(R),"onUpdate:visible":V[6]||(V[6]=F=>K(R)?R.value=F:null),modal:"",header:"Edit Task",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:S(()=>[_(Ne,{singleTask:o(G),usersLists:o(te),tagsLists:o(W),projects:o(T),onCloseEditModal:V[5]||(V[5]=F=>Ce(F))},null,8,["singleTask","usersLists","tagsLists","projects"])]),_:1},8,["visible"]),_(o(rs),{visible:o(ce),"onUpdate:visible":V[10]||(V[10]=F=>K(ce)?ce.value=F:null),modal:"",header:"Task Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{header:S(()=>{var F,Me,ze,st,Ie,bt,at;return[i("div",fu,[_(gt,{label:(ze=(Me=(F=o(B))==null?void 0:F.project)==null?void 0:Me.space_name)==null?void 0:ze.charAt(0),class:"capitalize p-0",size:"small",style:{"background-color":["#ededed"],color:["#000"],width:["1.4rem"],height:["1.4rem"],text:["12px"]}},null,8,["label"]),i("span",yu,[he(E((Ie=(st=o(B))==null?void 0:st.project)==null?void 0:Ie.space_name)+" / ",1),i("strong",null,E((at=(bt=o(B))==null?void 0:bt.project)==null?void 0:at.name),1)])])]}),default:S(()=>[_(tt,{usersLists:o(te),tagsLists:o(W),projID:o(T),onOpenCreateSpace:ye,onHandleTaskEdit:V[7]||(V[7]=F=>_e(F)),onHandleTaskDetailView:V[8]||(V[8]=F=>j(F)),onConfirmDeleteTask:V[9]||(V[9]=F=>ne(F)),onUpdateTaskTable:Fe},null,8,["usersLists","tagsLists","projID"])]),_:1},8,["visible"]),_(o(rs),{visible:o(A),"onUpdate:visible":V[12]||(V[12]=F=>K(A)?A.value=F:null),header:" ",style:{width:"25rem"}},{default:S(()=>[_u,_(Be,{label:"No",icon:"pi pi-times",text:"",onClick:V[11]||(V[11]=F=>A.value=!1)}),_(Be,{label:"Yes",icon:"pi pi-check",loading:o(J),text:"",onClick:L},null,8,["loading"])]),_:1},8,["visible"])])}}},Cc=xs(gu,[["__scopeId","data-v-efb466c3"]]);export{Cc as default};
