import{u as d,a as g}from"./cookie.9dea65c9.js";import{ao as b}from"./entry.f1083d62.js";const S=b("ActiveCompany",{state:()=>({availableCompanies:null,compInLoclStrg:null,getSpaces:null}),getters:{menu(o){var i;if(o.getSpaces){const r=[];return(i=o.getSpaces)==null||i.spaces.forEach(a=>{var c;const p={label:a==null?void 0:a.name,icon:"pi pi-list",color:a==null?void 0:a.color,id:a==null?void 0:a.id,name:a==null?void 0:a.name,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}`,items:[]};((c=a==null?void 0:a.projects)==null?void 0:c.length)>0&&a.projects.forEach(s=>{const t={label:s==null?void 0:s.name,id:s==null?void 0:s.id,icon:"pi pi-bars",color:s==null?void 0:s.color,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}/projects/${s.id}`};p.items.push(t)}),r.push(p)}),r}else return[]},company(o){var i,r;return o.compInLoclStrg?{name:(i=o.compInLoclStrg)==null?void 0:i.label,logo:(r=o.compInLoclStrg)==null?void 0:r.logo}:""},company_id(o){var i;return o.compInLoclStrg?(i=o.compInLoclStrg)==null?void 0:i.id:""},companyList(o){return o.availableCompanies?o.availableCompanies.map(i=>({id:i.id,label:i.name})):[]},totalCompanies(o){return o.availableCompanies?o.availableCompanies.length:0},selectedCompany(o){return o.compInLoclStrg},totalProjects(o){var r;let i=[];if(o.getSpaces)(r=o.getSpaces)==null||r.spaces.forEach(a=>{var p;((p=a==null?void 0:a.projects)==null?void 0:p.length)>0&&a.projects.forEach(c=>{i.push({name:c.name,id:c.id,statuses:c.statuses})})});else return[];return i}},actions:{async getCompany(){var c;const o=d("token"),{data:i,pending:r,error:a}=await g("companyList",()=>$fetch("https://pbe.singularitybd.net/api/v1/company/list",{headers:{Authorization:`Bearer ${o.value}`}}));console.log("SideBar List",i.value),this.availableCompanies=(c=i.value)==null?void 0:c.data;let p=Number(localStorage.getItem("userCompany"));if(this.availableCompanies){const s=this.availableCompanies.find(t=>t.id===p);if(this.getSpaces=s,s){const{id:t,name:n,logo:u}=s;return this.compInLoclStrg={id:t,label:n,logo:u},{name:n,id:t}}}return null}}});export{S as u};
