import R from"./button.esm.5e19325a.js";import J from"./inputtext.esm.d5eee7d7.js";import K from"./textarea.esm.ad6f3d9a.js";import O from"./multiselect.esm.28f194bb.js";import W from"./dialog.esm.eee5e52b.js";import{a6 as C,a5 as G,a2 as H,ad as Q,$ as n,o as X,b as Y,l as p,k as Z,w as h,u as i,i as a,ag as y,K as ee,t as ae,af as se,a3 as le,a4 as te,q as I}from"./entry.39b87fbf.js";import{u as V}from"./company.7d17abd3.js";import{u as b}from"./workCompany.4c3af59d.js";import{u as oe}from"./fetch.7ef59f45.js";import{u as ie}from"./cookie.0a2ee428.js";const ne=b(),{company_id:ce}=C(b()),re=V(),B=G("workSpace",{state:()=>({isSpaceCreated:null,comID:ce}),getters:{save(l){return l.isSpaceCreated}},actions:{async createSpace({name:l,description:S,company_id:x,color:g,users:_}){var v;const w=ie("token"),{data:$,pending:r}=await oe("https://pbe.singularitybd.net/api/v1/space/create",{method:"POST",headers:{Authorization:`Bearer ${w.value}`},body:{name:l,description:S,company_id:x,color:g,users:_}},"$yBhqNAD4aJ");((v=$.value)==null?void 0:v.app_message)==="success"&&(this.isSpaceCreated=!0,await ne.getCompany(),await re.getSingleCompany(this.comID))}}});const k=l=>(le("data-v-ca278e9a"),l=l(),te(),l),ue={class:"field"},de=k(()=>a("label",{for:"createSpaceName"},[I("Space Name"),a("i",{class:"text-red-400 text-italic"},"*")],-1)),pe={class:"field"},ve=k(()=>a("label",{for:"name"},"Space Description ",-1)),me={class:"field"},fe=k(()=>a("label",{for:"name"},[I("Space Color"),a("i",{class:"text-red-400 text-italic"},"*")],-1)),Se={class:"m-0 d-flex colorpicker-wrapper"},ge={class:"flex justify-center align-items-center"},ye={class:"ml-2"},Ce={class:"flex"},be={class:"field"},ke=k(()=>a("label",null,[I("Space Members"),a("i",{class:"text-red-400"},"*")],-1)),xe={__name:"CreateSpace",props:["spacePage"],setup(l){const S=Q(),x=b(),g=V();x.getCompany();const{company_id:_}=C(b());C(V());const w=B(),{save:$}=C(B()),r=n(!1),v=n(!1),D=n(!1),T=n(!1),t=n(null),u=n(""),m=n("#8080805c"),A=n(null),P=n([]),c=n([]),o=d=>{m.value=d},f=n(!1),M=async()=>{if(v.value=!1,D.value=!1,f.value=!0,t.value===null||t.value===""){v.value=!0,f.value=!1;return}if(c.value.length===0){D.value=!0,f.value=!1;return}else{const d={name:t.value,description:u.value,company_id:_,color:m.value,users:c.value.map(e=>e.id)};await w.createSpace(d),$.value==!0?(r.value=!1,t.value=null,u.value=null,m.value="#8080805c",A.value=null,c.value=[],f.value=!1,S.add({severity:"success",summary:"Space creation",detail:"Space created successfully!",group:"br",life:3e3})):(r.value=!0,f.value=!1,S.add({severity:"error",summary:"Space creation",detail:"Space created Failed!",group:"br",life:3e3}))}},E=async()=>{if(r.value=!0,r.value){await g.getTaskAssignModalData(),P.value=g.users;const d=document.getElementById("createSpaceName");console.log("createSpaceName",d),se(()=>{d&&d.focus()})}},U=()=>{r.value=!1,t.value&&(t.value=null),u.value&&(u.value=null),c.value&&(c.value=[]),m.value="#8080805c"},q=()=>{t.value&&(t.value=null),u.value&&(u.value=null),c.value&&(c.value=[]),m.value="#8080805c"};return(d,e)=>{const N=R,z=J,F=K,L=O,j=W;return X(),Y("div",null,[p(N,{icon:l.spacePage?"":"pi pi-plus",class:Z(l.spacePage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:l.spacePage?"Create +":"",onClick:E,severity:l.spacePage?"primary":"secondary","aria-label":"Bookmark",text:!l.spacePage},null,8,["icon","class","label","severity","text"]),p(j,{visible:i(r),"onUpdate:visible":[e[15]||(e[15]=s=>y(r)?r.value=s:null),q],dismissableMask:"true",style:{width:"32rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},header:"Create Space",modal:!0,class:"p-fluid"},{footer:h(()=>[p(N,{label:"Cancel",icon:"pi pi-times",text:"",onClick:U}),p(N,{label:"Save",icon:"pi pi-check",text:"",onClick:M,loading:i(f)},null,8,["loading"])]),default:h(()=>[a("div",ue,[de,p(z,{id:"createSpaceName",modelValue:i(t),"onUpdate:modelValue":e[0]||(e[0]=s=>y(t)?t.value=s:null),required:"true",invalid:i(v)},null,8,["modelValue","invalid"])]),a("div",pe,[ve,p(F,{id:"description",class:"border-gray-300",modelValue:i(u),"onUpdate:modelValue":e[1]||(e[1]=s=>y(u)?u.value=s:null),rows:"3",cols:"20",invalid:i(T)},null,8,["modelValue","invalid"])]),a("div",me,[fe,a("div",Se,[a("div",ge,[a("div",{id:"dynamic-div",style:ee(`background-color: ${i(m)};`),class:"d-flex align-items-center justify-content-center text-3xl text-white"},ae(i(t)?i(t).charAt(0).toUpperCase():"S"),5),a("div",ye,[a("div",Ce,[a("div",{id:"white",class:"color",onClick:e[2]||(e[2]=s=>o("#e5ded4"))}),a("div",{id:"gray",class:"color",onClick:e[3]||(e[3]=s=>o("#9e9e9e"))}),a("div",{id:"orange",class:"color",onClick:e[4]||(e[4]=s=>o("#ff9800"))}),a("div",{id:"purple",class:"color",onClick:e[5]||(e[5]=s=>o("#9c27b0"))}),a("div",{id:"cadetblue",class:"color",onClick:e[6]||(e[6]=s=>o("#e91e63"))}),a("div",{id:"burlywood",class:"color",onClick:e[7]||(e[7]=s=>o("#4caf50"))}),a("div",{id:"pink",class:"color",onClick:e[8]||(e[8]=s=>o("#f44336"))}),a("div",{id:"lightseagreen",class:"color",onClick:e[9]||(e[9]=s=>o("#009688"))}),a("div",{id:"brown",class:"color",onClick:e[10]||(e[10]=s=>o("#795548"))}),a("div",{id:"cyan",class:"color",onClick:e[11]||(e[11]=s=>o("#00bcd4"))}),a("div",{id:"amber",class:"color",onClick:e[12]||(e[12]=s=>o("#ffc107"))}),a("div",{id:"indigo",class:"color",onClick:e[13]||(e[13]=s=>o("#3f51b5"))})])])])])]),a("div",be,[ke,p(L,{display:"chip",modelValue:i(c),"onUpdate:modelValue":e[14]||(e[14]=s=>y(c)?c.value=s:null),options:i(P),filter:"",optionLabel:"name",placeholder:"Select Space Members",class:"w-full",invalid:i(D)},null,8,["modelValue","options","invalid"])])]),_:1},8,["visible"])])}}},Te=H(xe,[["__scopeId","data-v-ca278e9a"]]);export{Te as _};
