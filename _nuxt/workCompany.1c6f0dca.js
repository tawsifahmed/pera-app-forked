import{u as d,a as g}from"./cookie.380282ca.js";import{ao as f}from"./entry.b2a4041b.js";const b=f("ActiveCompany",{state:()=>({availableCompanies:null,compInLoclStrg:null,getSpaces:null}),getters:{menu(o){var s;if(o.getSpaces){const r=[];return(s=o.getSpaces)==null||s.spaces.forEach(a=>{var p;const c={label:a==null?void 0:a.name,icon:"pi pi-list",color:a==null?void 0:a.color,id:a==null?void 0:a.id,name:a==null?void 0:a.name,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}`,items:[]};((p=a==null?void 0:a.projects)==null?void 0:p.length)>0&&a.projects.forEach(i=>{const t={label:i==null?void 0:i.name,id:i==null?void 0:i.id,icon:"pi pi-bars",color:i==null?void 0:i.color,to:`/companies/${a==null?void 0:a.company_id}/spaces/${a==null?void 0:a.id}/projects/${i.id}`};c.items.push(t)}),r.push(c)}),r}else return[]},company(o){var s,r;return o.compInLoclStrg?{name:(s=o.compInLoclStrg)==null?void 0:s.label,logo:(r=o.compInLoclStrg)==null?void 0:r.logo}:""},company_id(o){var s;return o.compInLoclStrg?(s=o.compInLoclStrg)==null?void 0:s.id:""},companyList(o){return o.availableCompanies?o.availableCompanies.map(s=>({id:s.id,label:s.name})):[]},totalCompanies(o){return o.availableCompanies?o.availableCompanies.length:0},selectedCompany(o){return o.compInLoclStrg},totalProjects(o){var r;let s=[];if(o.getSpaces)(r=o.getSpaces)==null||r.spaces.forEach(a=>{var c;((c=a==null?void 0:a.projects)==null?void 0:c.length)>0&&a.projects.forEach(p=>{s.push({name:p.name,id:p.id,statuses:p.statuses})})});else return[];return s},totalProjectsforReport(o){var r;let s=[];if(o.getSpaces)(r=o.getSpaces)==null||r.spaces.forEach(a=>{var c;((c=a==null?void 0:a.projects)==null?void 0:c.length)>0&&a.projects.forEach(p=>{s.push({id:p.id,name:p.name})})});else return[];return s},totalSpaces(o){var r;let s=[];if(o.getSpaces)(r=o.getSpaces)==null||r.spaces.forEach(a=>{s.push({name:a.name,id:a.id,projects:a.projects.map(c=>({id:c.id,name:c.name}))})});else return[];return s}},actions:{async getCompany(){var p;const o=d("token"),{data:s,pending:r,error:a}=await g("companyList",()=>$fetch("https://pbe.singularitybd.net/api/v1/company/list",{headers:{Authorization:`Bearer ${o.value}`}}));console.log("SideBar List",s.value),this.availableCompanies=(p=s.value)==null?void 0:p.data;let c=Number(localStorage.getItem("userCompany"));if(this.availableCompanies){const i=this.availableCompanies.find(t=>t.id===c);if(this.getSpaces=i,i){const{id:t,name:u,logo:n}=i;return this.compInLoclStrg={id:t,label:u,logo:n},{name:u,id:t}}}return null}}});export{b as u};
