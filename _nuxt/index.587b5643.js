import N from"./button.esm.06795703.js";import Z from"./column.esm.60393863.js";import ee from"./datatable.esm.851a04ac.js";import E from"./dialog.esm.e1b85788.js";import j from"./multiselect.esm.1458f0e4.js";import{a2 as W,a5 as te,a6 as G,$ as n,ar as oe,a as J,o as $,b as M,c as se,w as v,l as c,i as e,u as p,bO as O,t as B,F as A,f as H,q as ae,e as le,a9 as T,s as w,a3 as K,a4 as Q,ca as X,a7 as ie}from"./entry.b31b648d.js";import{u as U,a as P}from"./cookie.2bc80624.js";import{u as ne}from"./workCompany.17740c10.js";import{s as Y}from"./editor.esm.9e25aa7e.js";import"./badge.esm.81211e44.js";import"./basecomponent.esm.6d5a3703.js";import"./index.esm.273d0379.js";import"./baseicon.esm.2abcf816.js";import"./paginator.esm.e419c7c9.js";import"./index.esm.13945bc0.js";import"./dropdown.esm.00589248.js";import"./index.esm.19f38c84.js";import"./index.esm.817067de.js";import"./index.esm.612a4e62.js";import"./index.esm.df24a5dc.js";import"./overlayeventbus.esm.ae3a1b75.js";import"./portal.esm.ceeefb70.js";import"./virtualscroller.esm.5e4c9976.js";import"./inputnumber.esm.fc40c696.js";import"./index.esm.73b2237d.js";import"./index.esm.a55a9385.js";import"./inputtext.esm.7d8fbb7d.js";import"./index.esm.c8fc8bd4.js";import"./index.esm.c7141748.js";import"./index.esm.39a4ff55.js";import"./checkbox.esm.84c794b4.js";import"./radiobutton.esm.e8bad4a5.js";import"./index.esm.b100a647.js";import"./index.esm.6d3ae283.js";import"./index.esm.5f32c08d.js";const x=r=>(K("data-v-9da9c3d7"),r=r(),Q(),r),re=["onClick"],ce={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},de={class:""},ue={class:"title"},pe=x(()=>e("p",{class:""},"Participants:",-1)),me={class:""},be={class:"perticipants"},ve={class:"flex gap-1 flex-wrap"},_e={class:""},fe=["innerHTML"],he={class:"flex-auto"},ye=x(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),ge={class:"ql-formats flex justify-content-end mr-0"},we={class:"ql-bold"},Se={class:"ql-italic"},ke={class:"ql-underline"},$e={class:"ql-strike"},xe=x(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),De=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Me=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),qe=x(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Re={class:"flex-auto"},Ue=x(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ve={__name:"ScrumTable",props:["scrumData","fetchData","employees","totalRecords"],setup(r){const{scrumData:q,fetchData:L,employees:z,totalRecords:F}=r;te(ne());const _=G(),h=n(!1);n(!1);const f=n(!1);n([]);const b=n(null),m=n(" "),y=n(""),V=X(),S=n(!1),C=t=>{console.log(t),b.value=t,h.value=!0},I=async t=>{t.preventDefault(),isSubmitting.value=!0;try{const o=U("token"),s=new FormData;s.append("space_id",selectedSpace.value.id),s.append("description",m.value),y.value.forEach(u=>s.append("user_ids[]",u.id));const d=await $fetch(`${V.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${o.value}`},body:s});createModal.value=!1,_.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(o){console.error("Submission failed:",o),_.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}};oe(m,t=>{t.length===0&&(m.value=" ")});const g=async t=>{var i,a,k;const o=U("token");S.value=!0;const{data:s,pending:d,error:u}=await P("scrumData",()=>$fetch(`${V.public.apiUrl}/scrum-meeting/list?page=${t.page+1}&limit=${t.rows}`,{headers:{Authorization:`Bearer ${o.value}`}}));return((a=(i=s.value)==null?void 0:i.data)==null?void 0:a.length)>0&&(q.value=(k=s.value)==null?void 0:k.data),S.value=!1};return(t,o)=>{const s=Z,d=N,u=ee,i=E,a=j,k=J("tooltip");return $(),M(A,null,[r.scrumData&&r.scrumData.length>0?($(),se(u,{key:0,class:"table-st",value:r.scrumData,rowHover:!0,paginator:!0,rows:10,stripedRows:"",scrollable:"",tableStyle:"min-width: 50rem",totalRecords:r.totalRecords,loading:p(S),rowsPerPageOptions:[5,10,20,50],onPage:g},{default:v(()=>[c(s,{style:{width:"12%"},field:"meeting_date",header:"Date"},{body:v(l=>[e("div",{class:"cursor-pointer",onClick:()=>C(("toRaw"in t?t.toRaw:p(O))(l.data))},B(l.data.meeting_date),9,re)]),_:1}),c(s,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:v(l=>[e("div",ce,[($(!0),M(A,null,H(l.data.user_ids,R=>($(),M("div",{class:"border rounded",key:R.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",de,B(R.name),1)]))),128))])]),_:1}),c(s,{style:{width:"3%"},field:"actions",header:"Actions"},{body:v(l=>[c(d,{severity:"info",rounded:"",text:"",type:"button",onClick:()=>C(("toRaw"in t?t.toRaw:p(O))(l.data)),icon:"pi pi-pencil",class:""},{default:v(()=>[ae("View")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","totalRecords","loading"])):le("",!0),c(i,{lazy:"true",visible:p(h),"onUpdate:visible":o[0]||(o[0]=l=>T(h)?h.value=l:null),modal:"",header:"Scrum Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:v(()=>{var l;return[e("div",ue,[pe,e("p",me,B(p(b).meeting_date),1)]),e("div",be,[e("div",ve,[($(!0),M(A,null,H(p(b).user_ids,R=>($(),M("div",{class:"border rounded",key:R.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",_e,B(R.name),1)]))),128))])]),e("div",{class:"details",innerHTML:(l=p(b))==null?void 0:l.description},null,8,fe)]}),_:1},8,["visible"]),c(i,{lazy:"true",visible:p(f),"onUpdate:visible":o[3]||(o[3]=l=>T(f)?f.value=l:null),modal:"",header:"Update Scrum",dismissableMask:"true",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:I,class:"form",action:""},[e("div",he,[ye,c(p(Y),{modelValue:p(m),"onUpdate:modelValue":o[1]||(o[1]=l=>T(m)?m.value=l:null),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",ge,[w(e("button",we,null,512),[[k,"Bold",void 0,{bottom:!0}]]),w(e("button",Se,null,512),[[k,"Italic",void 0,{bottom:!0}]]),w(e("button",ke,null,512),[[k,"Underline",void 0,{bottom:!0}]]),w(e("button",$e,null,512),[[k,"Strikethrough",void 0,{bottom:!0}]]),xe,De,Me,qe])]),_:1},8,["modelValue"])]),e("div",Re,[Ue,c(a,{id:"members",display:"chip",modelValue:p(y),"onUpdate:modelValue":o[2]||(o[2]=l=>T(y)?y.value=l:null),options:r.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),c(d,{label:t.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:t.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Ce=W(Ve,[["__scopeId","data-v-9da9c3d7"]]);const D=r=>(K("data-v-9b5bcf1b"),r=r(),Q(),r),Be={class:"card"},Te={class:"header"},Ae=D(()=>e("h3",null,"Meeting Minutes",-1)),Le={class:"flex-auto"},ze=D(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Fe={class:"ql-formats flex justify-content-end mr-0"},Ie={class:"ql-bold"},Pe={class:"ql-italic"},Oe={class:"ql-underline"},He={class:"ql-strike"},Ne=D(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),Ee=D(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),je=D(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),We=D(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ge={class:"flex-auto"},Je=D(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ke={__name:"index",setup(r){const q=X(),L=G(),z=n(0),F=n([]),_=n(!1),h=n([]),f=n(""),b=n(""),m=n(!1),y=n(!0),V=async g=>{g.preventDefault(),m.value=!0;try{const t=U("token"),o=new FormData;o.append("description",b.value),f.value.forEach(d=>o.append("user_ids[]",d.id));const s=await $fetch(`${q.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${t.value}`},body:o});console.log("Submission successful:",s),_.value=!1,L.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),b.value="",f.value="",S()}catch(t){console.error("Submission failed:",t),L.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{m.value=!1}},S=async()=>{var d,u,i,a;y.value=!0;const g=U("token"),{data:t,pending:o,error:s}=await P("scrumData",()=>$fetch(`${q.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${g.value}`}}));return((u=(d=t.value)==null?void 0:d.data)==null?void 0:u.length)>0&&(F.value=(i=t.value)==null?void 0:i.data,z.value=(a=t.value)==null?void 0:a.totalRecords),y.value=!1},C=async()=>{var d,u,i;const g=U("token"),{data:t,pending:o,error:s}=await P("taskAssignModalData",()=>$fetch(`${q.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${g.value}`}}));((u=(d=t.value)==null?void 0:d.data)==null?void 0:u.length)>0&&(h.value=(i=t.value)==null?void 0:i.data.map(a=>({name:a.name,id:a.id})))};S(),ie(()=>{C()});const I=()=>{_.value=!1,b.value="",f.value=""};return(g,t)=>{const o=N,s=Ce,d=j,u=E,i=J("tooltip");return $(),M(A,null,[e("div",Be,[e("header",Te,[Ae,c(o,{onClick:t[0]||(t[0]=a=>_.value=!_.value),icon:"pi pi-plus",severity:"secondary"})]),c(s,{scrumData:F.value,fetchData:S,employees:h.value,totalRecords:z.value},null,8,["scrumData","employees","totalRecords"])]),c(u,{lazy:"true",loading:y.value,visible:_.value,"onUpdate:visible":[t[3]||(t[3]=a=>_.value=a),I],modal:"",header:"New Scrum",style:{minWidth:"45vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:V,class:"form",action:""},[e("div",Le,[ze,c(p(Y),{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=a=>b.value=a),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",Fe,[w(e("button",Ie,null,512),[[i,"Bold",void 0,{bottom:!0}]]),w(e("button",Pe,null,512),[[i,"Italic",void 0,{bottom:!0}]]),w(e("button",Oe,null,512),[[i,"Underline",void 0,{bottom:!0}]]),w(e("button",He,null,512),[[i,"Strikethrough",void 0,{bottom:!0}]]),Ne,Ee,je,We])]),_:1},8,["modelValue"])]),e("div",Ge,[Je,c(d,{id:"members",display:"chip",modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),options:h.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),c(o,{label:m.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:m.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},Vt=W(Ke,[["__scopeId","data-v-9b5bcf1b"]]);export{Vt as default};
