import ne from"./button.esm.b797942a.js";import re from"./inputtext.esm.80027f65.js";import ue from"./textarea.esm.5b5dc621.js";import ce from"./inputgroupaddon.esm.47690135.js";import de from"./inputgroup.esm.e2dacdbe.js";import pe from"./dropdown.esm.9b34dac1.js";import me from"./dialog.esm.d8f3bbfd.js";import{d as ve}from"./vuedraggable.umd.25a14099.js";import{an as _e,a4 as fe,a3 as ge,$ as l,V as O,aq as M,a as ke,o as k,b as h,l as i,k as he,w as x,u as a,i as e,q as S,t as xe,s as m,a6 as _,e as B,K as Se}from"./entry.a68a4c5e.js";import z from"./colorpicker.esm.41060d22.js";import{u as Ce,a as ye}from"./cookie.359c4252.js";import{u as be}from"./workCompany.bc1bf26e.js";import{u as we}from"./company.015b60b4.js";const Ve=be(),Pe=we(),A=_e("workProjects",{state:()=>({isProjectCreated:null}),getters:{save(r){return r.isProjectCreated}},actions:{async createProjects({name:r,description:b,space_id:w,statuses:N}){var c;const E=Ce("token"),{data:T,pending:G}=await ye("https://pbe.singularitybd.net/api/v1/projects/create",{method:"POST",headers:{Authorization:`Bearer ${E.value}`},body:{name:r,description:b,space_id:w,statuses:N}},"$h5ITqNs3Yo");((c=T.value)==null?void 0:c.app_message)==="success"&&(this.isProjectCreated=!0,await Ve.getCompany(),await Pe.getSingleSpace(w))}}});const De={class:"field"},Ne={for:"name"},Te={class:"field"},je={for:"name"},$e=e("i",{class:"text-red-400 text-italic"},"*",-1),Ie={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ue={class:"field"},Oe={for:"name"},Be={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Ee={class:"mb-4"},qe={class:"text-slate-700 mb-2 tracking-wide left-3"},Fe=e("i",{class:"text-red-400 text-italic"},"*",-1),Le={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Me={class:"container"},ze=e("p",{class:"pi pi-plus cursor-pointer"},null,-1),Ae={key:0,class:"text-red-600 text-small"},Ge={class:"row mt-2"},He={class:"col-12 d-flex flex-column p-0"},Re=["onMouseenter"],We={style:{"margin-right":"-4px"},width:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",class:"cu-status-manager-status-list-item__drag-handler-icon"},Ke=e("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},[e("circle",{cx:"5",cy:"5",r:"1"}),e("circle",{cx:"5",cy:"12",r:"1"}),e("circle",{cx:"5",cy:"19",r:"1"}),e("circle",{cx:"12",cy:"5",r:"1"}),e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"12",cy:"19",r:"1"})],-1),Xe=[Ke],Ye={class:"flex align-items-center",style:{width:"89%"}},Je=["onClick"],Qe=e("p",{class:"pi pi-times"},null,-1),Ze=[Qe],et={class:"mb-4"},tt={class:"text-slate-700 mb-2 tracking-wide left-3"},st=e("i",{class:"text-red-400 text-italic"},"*",-1),at={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},ot={class:"container"},lt={class:"field"},it={key:0,class:"text-red-600 text-small"},nt={key:0,class:"text-center",style:{color:"red"}},St={__name:"CreateSpecificProject",props:["singleSpace","spaces","isPage"],setup(r){const b=fe(),w=A(),{save:N}=ge(A()),{singleSpace:E,spaces:T,isPage:G}=r,c=l(!1),j=l(!1),H=l(!0),q=l(!1),$=l(null),R=l(!0),W=O(()=>({animation:250,group:"tasks",disabled:!R.value,ghostClass:"ghost"})),K=O(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",margin:"8px 0px"})),X=O(()=>({backgroundColor:"#f9f9f9",boxShadow:"0px 4px 4px #e2e2e3",cursor:"grab",margin:"8px 0px"})),u=l(""),s=l([{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}]),V=l("6466f1"),F=l(null),P=l(!1),Y=l(!1),v=l(null),f=l(""),J=()=>{c.value=!0},Q=()=>{c.value=!1},Z=()=>{var n;if(u.value?P.value=!1:P.value=!0,((n=u==null?void 0:u.value)==null?void 0:n.length)>0){const t={taskStatusName:u.value,taskStatusColor:`#${V.value}`,is_closed_status:0,serial_no:s.value.length+1};s.value.push(t),u.value=""}else P.value=!0;s.value.length>0&&(F.value=!0)},ee=n=>{d.value.is_closed_status===s.value[n].is_closed_status&&(d.value=null),s.value.splice(n,1),s.value.length==0&&(F.value=!1)},d=l(null);M(d,n=>{n&&s.value.forEach(t=>{t.is_closed_status=t.taskStatusName===n.taskStatusName?1:0}),console.log("taskStatusList",s.value)}),M(s,n=>{n.forEach((t,y)=>{t.serial_no=y+1})});const C=l(!1),te=async()=>{if(C.value=!0,v.value===null||s.value.length<=0||!d.value)j.value=!0,C.value=!1;else{j.value=!1,s.value=s.value.map(t=>(t.taskStatusColor.startsWith("#")||(t.taskStatusColor=`#${t.taskStatusColor}`),t));const n={name:v.value,description:f.value,space_id:T,statuses:s.value};console.log("statuses",s.value),await w.createProjects(n),N.value===!0?(c.value=!1,b.add({severity:"success",summary:"Success!",detail:"Project created successfully!",group:"br",life:3e3}),v.value=null,f.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],C.value=!1):(b.add({severity:"error",summary:"Failed",detail:"Project creation Failed!",group:"br",life:3e3}),C.value=!1)}},se=()=>{v.value=null,f.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],d.value=null,u.value=""};return(n,t)=>{const y=ne,I=re,ae=ue,L=ce,oe=de,le=pe,ie=me,p=ke("tooltip");return k(),h("div",null,[i(y,{icon:r.isPage?"":"pi pi-plus",class:he(r.isPage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:r.isPage?"Create +":"",onClick:J,severity:r.isPage?"primary":"secondary","aria-label":"Bookmark",text:!r.isPage},null,8,["icon","class","label","severity","text"]),i(ie,{visible:a(c),"onUpdate:visible":[t[9]||(t[9]=D=>_(c)?c.value=D:null),se],style:{width:"450px"},header:"Create Project",modal:!0,class:"p-fluid"},{footer:x(()=>[i(y,{label:"Cancel",icon:"pi pi-times",text:"",onClick:Q}),i(y,{loading:a(C),label:"Save",icon:"pi pi-check",text:"",onClick:te},null,8,["loading"])]),default:x(()=>{var D;return[e("div",De,[e("label",Ne,[S("Create project for "),e("strong",null,xe((D=r.singleSpace)==null?void 0:D.name),1),S(" space")])]),e("div",Te,[e("label",je,[S("Project Name"),$e,m(e("span",Ie,null,512),[[p,{value:"Demo Text Text"},void 0,{right:!0}]])]),i(I,{id:"name",modelValue:a(v),"onUpdate:modelValue":t[0]||(t[0]=o=>_(v)?v.value=o:null),required:"true"},null,8,["modelValue"])]),e("div",Ue,[e("label",Oe,[S("Project Description "),m(e("span",Be,null,512),[[p,{value:"Demo Text Text"},void 0,{right:!0}]])]),i(ae,{id:"description",class:"border-gray-300",modelValue:a(f),"onUpdate:modelValue":t[1]||(t[1]=o=>_(f)?f.value=o:null),rows:"3",cols:"20"},null,8,["modelValue"])]),e("div",Ee,[e("p",qe,[S("Setup Task Status"),Fe,m(e("span",Le,null,512),[[p,{value:"Demo Text Text"},void 0,{right:!0}]])]),e("div",Me,[i(oe,null,{default:x(()=>[i(L,null,{default:x(()=>[m(i(a(z),{class:"color-pick",style:{width:"1.5rem"},modelValue:a(V),"onUpdate:modelValue":t[2]||(t[2]=o=>_(V)?V.value=o:null),inputId:"cp-hex",format:"hex"},null,8,["modelValue"]),[[p,{value:"Pick Color"},void 0,{left:!0}]])]),_:1}),m(i(I,{class:"form-control",modelValue:a(u),"onUpdate:modelValue":t[3]||(t[3]=o=>_(u)?u.value=o:null),placeholder:"e.g., TO-DO, DOING"},null,8,["modelValue"]),[[p,{value:"Type Status Name"},void 0,{top:!0}]]),i(L,{onClick:Z,class:"btn btn-outline-secondary cursor-pointer"},{default:x(()=>[ze]),_:1})]),_:1}),a(P)?(k(),h("p",Ae,"Please type status name!")):B("",!0),e("div",Ge,[e("div",He,[i(a(ve),{modelValue:a(s),"onUpdate:modelValue":t[5]||(t[5]=o=>_(s)?s.value=o:null),options:a(W),disabled:!a(H),class:"list-group","ghost-class":"ghost",move:n.checkMove,onStart:t[6]||(t[6]=o=>q.value=!0),onEnd:t[7]||(t[7]=o=>q.value=!1)},{item:x(({element:o,index:U})=>[(k(),h("div",{class:"flex delete-task justify-content-between",style:Se(a($)===U?a(X):a(K)),onMouseenter:g=>$.value=U,onMouseleave:t[4]||(t[4]=g=>$.value=null),key:o.id},[(k(),h("svg",We,Xe)),e("div",Ye,[m(i(a(z),{class:"color-pick mr-2 status-colors border-none",modelValue:o.taskStatusColor,"onUpdate:modelValue":g=>o.taskStatusColor=g,inputId:"cp-hex",format:"hex"},null,8,["modelValue","onUpdate:modelValue"]),[[p,{value:"Change Color"},void 0,{left:!0}]]),m(i(I,{class:"text-uppercase text-muteds w-full",id:"name",modelValue:o.taskStatusName,"onUpdate:modelValue":g=>o.taskStatusName=g,required:"true"},null,8,["modelValue","onUpdate:modelValue"]),[[p,{value:"Change Status Name"},void 0,{left:!0}]])]),e("div",{onClick:g=>ee(U),class:"cursor-pointer cross-icon ms-1 flex justify-content-center align-items-center"},Ze,8,Je)],44,Re))]),_:1},8,["modelValue","options","disabled","move"])])])])]),e("div",et,[e("p",tt,[S("Set Task Close Status"),st,m(e("span",at,null,512),[[p,{value:"Demo Text Text"},void 0,{right:!0}]])]),e("div",ot,[e("div",lt,[i(le,{modelValue:a(d),"onUpdate:modelValue":t[8]||(t[8]=o=>_(d)?d.value=o:null),options:a(s),optionLabel:"taskStatusName",placeholder:"Select Status",class:"w-full"},null,8,["modelValue","options"])]),a(Y)?(k(),h("p",it,"Please set close status!")):B("",!0)])]),a(j)?(k(),h("p",nt,"Please add/fill/check up all the fields")):B("",!0)]}),_:1},8,["visible"])])}}};export{St as _};
