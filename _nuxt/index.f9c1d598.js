import Pe from"./toast.esm.7bc5073d.js";import ke from"./dropdown.esm.94ac987f.js";import Ie from"./calendar.esm.cf269401.js";import be from"./button.esm.32bef0f9.js";import De from"./inputtext.esm.49d8341d.js";import Re from"./tabpanel.esm.70b9d3b7.js";import Qe from"./textarea.esm.1a69d912.js";import{a2 as xe,a3 as Ke,a4 as he,$ as n,ar as Ne,a as ze,o as g,b as W,i as e,t as le,u as t,l,a7 as G,q as fe,e as R,I as pe,F as _e,f as Ve,s as Se,a8 as Ue,a9 as Ce,ca as ye,w as b,c as ee,a5 as Ae}from"./entry.3bbd680d.js";import{u as z}from"./fetch.114836d2.js";import{u as Q,a as qe}from"./cookie.46510969.js";import{u as Le}from"./user.8a062f39.js";import Oe from"./toolbar.esm.d15fb73b.js";import Fe from"./column.esm.7a10f518.js";import je from"./row.esm.5b4b0c10.js";import Ge from"./columngroup.esm.b2c1b853.js";import Te from"./datatable.esm.962e638b.js";import Ee from"./dialog.esm.8bebc37a.js";import We from"./tabview.esm.b8dad8f0.js";import{a as se}from"./usePermission.4052dabe.js";import{u as Ye}from"./workCompany.8b0d286c.js";import He from"./progressspinner.esm.aeee1ab8.js";import Ze from"./inputnumber.esm.953e3723.js";import"./portal.esm.b00f5f1c.js";import"./basecomponent.esm.22a83963.js";import"./index.esm.4bb3c5dc.js";import"./baseicon.esm.07236b28.js";import"./index.esm.06345a70.js";import"./index.esm.e875bfac.js";import"./index.esm.5795fbf5.js";import"./index.esm.9d078b4b.js";import"./index.esm.08a9cf78.js";import"./index.esm.c51a4b34.js";import"./overlayeventbus.esm.fae87c9d.js";import"./virtualscroller.esm.bd9c8660.js";import"./index.esm.4ca9447a.js";import"./index.esm.39cf72b3.js";import"./index.esm.8043c609.js";import"./badge.esm.ab9659d4.js";import"./paginator.esm.8df0b0a3.js";import"./index.esm.08162a27.js";import"./index.esm.8d661d72.js";import"./index.esm.f03fcaa8.js";import"./index.esm.d98cf75f.js";import"./index.esm.77330c63.js";import"./checkbox.esm.ddd12731.js";import"./radiobutton.esm.e8c2d6e1.js";import"./index.esm.870f63e2.js";import"./index.esm.11091131.js";const ce=N=>(Ue("data-v-b97fd3db"),N=N(),Ce(),N),Je={class:"mx-auto",style:{"max-width":"55rem"}},Xe={action:"",class:"grid",style:{gap:"10px"}},et={class:"w-full col-12"},tt={class:"w-full col-12 grid"},lt={class:"col-12 md:col-5"},at=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Team Member",-1)),ot={class:"user-name"},st={class:"col-12 md:col-5"},nt=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Quarter",-1)),it={class:"col-12 md:col-2 flex align-items-end"},dt={key:0,class:"deadline-info mb-0 flex w-full justify-content-end"},rt=ce(()=>e("span",{class:"font-bold mr-2"},"Deadline: ",-1)),ct={class:"w-full col-12 grid"},ut={class:"col-12 md:col-6"},mt=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Section",-1)),pt={class:"user-name"},_t={class:"col-12 md:col-6"},ft=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section",-1)),vt={class:"user-name"},bt={class:"col-12 md:col-6"},ht=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Quarter",-1)),yt={class:"col-12 md:col-6"},gt={for:"icondisplay",class:"font-bold block mb-2"},kt={class:"col-12"},wt=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Comment",-1)),$t={class:"col-12"},St=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"File",-1)),Vt={class:"flex gap-2 align-items-center upload-wrapper w-full"},Dt={key:0,class:"w-full"},xt=ce(()=>e("span",{class:"pi pi-file-import mr-2"},null,-1)),Ut=["onClick"],Ct=ce(()=>e("i",{class:"pi pi-times"},null,-1)),Ft=[Ct],Tt=["id","onChange"],Et={class:"col-12 my-3"},Mt=ce(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Employee Self Remarks",-1)),It={class:"gap-2 flex justify-content-center w-full"},At={__name:"Submission",props:["quater"],setup(N){const{getUserData:te}=Le(),{userProfile:Z}=Ke(Le()),Y=he(),O=ye(),E=n(!1),I=n(!1),C=n(null),A=n(!1);console.log("Employee Value",A.value);const $=n(""),m=n([]),M=n([]),F=n([]),T=n([]),D=n([]),v=n([]),f=n(""),r=n([]);Ne($,p=>{p&&(A.value=!1,m.value=[],M.value=[],F.value=[],T.value=[],D.value=[],v.value=[],r.value=[],C.value=null)});const o=(p,i,U)=>{const q=Array.from(U.target.files);D.value[i]||(D.value[i]=[]),D.value[i].push(...q),v.value.includes(p.subsection_id)||v.value.push(p.subsection_id)},d=p=>{const i=document.getElementById(`submittedFiles${p}`);i&&i.click()},c=(p,i,U)=>{D.value[i]&&(D.value[i].splice(U,1),v.value=v.value.filter(q=>q!==p.subsection_id))},x=async()=>{var q,ae,J,H,ie,re,h;if((M.value.length>0||F.value.length>0||T.value.length>0||D.value.length>0||m.value)&&(M.value=[],F.value=[],T.value=[],D.value=[],m.value=[]),E.value=!0,$.value==="")return E.value=!1,Y.add({severity:"warn",summary:"Failed",detail:"Please select quarter",group:"br",life:3e3});const p=Q("token"),{data:i,error:U}=await z(`${O.public.apiUrl}/kpi/show/${(ae=(q=Z==null?void 0:Z.value)==null?void 0:q.data)==null?void 0:ae.id}?quater_id=${$.value.id}`,{method:"GET",headers:{Authorization:`Bearer ${p.value}`}},"$GEOxJeF5tI");if(console.log("Data Value",i.value),console.log("error Value",U.value),i.value)if(((H=(J=i.value)==null?void 0:J.data)==null?void 0:H.length)!==0)E.value=!1,A.value=!0,C.value=i.value,f.value=(re=(ie=i.value)==null?void 0:ie.line_maneger)==null?void 0:re.self_remarks,console.log("selfRemarks",f.value),(h=i.value)==null||h.data.forEach(u=>{console.log("data gotcha"),console.log("Item Value",u),u.sub_section_data.forEach(L=>{m.value.push({section_name:u.section.name,section_id:u.section.id,subSection_name:L.sub_section.title,subsection_id:L.id,target_mark:L.target_mark,mark_type:L.mark_type,quater_id:L.quater_id,achive_mark:L.achive_mark,comment:L.comment}),M.value.push(L.id),F.value.push(L.achive_mark),T.value.push(L.comment),D.value.push(null)}),console.log("Submitted Ids",M.value),console.log("Submitted submittedMarks",F.value),console.log("Submitted submittedComments",T.value),console.log("Submitted submittedFiles",D.value)}),console.log("Submission Value",i==null?void 0:i.value);else return E.value=!1,A.value=!1,Y.add({severity:"error",summary:"Failed",detail:"No data found",group:"br",life:3e3});else return console.log("erorr gotcha"),A.value=!1,E.value=!1,Y.add({severity:"error",summary:"Internal Server Error",detail:"Failed to show report",group:"br",life:3e3})},S=p=>{if(!p)return"Not Set";const i=new Date(p);if(isNaN(i))return"Invalid Date";const U={day:"2-digit",month:"short",year:"numeric"};return new Intl.DateTimeFormat("en-GB",U).format(i)},j=async()=>{var ae;I.value=!0;const p=Q("token"),i=new FormData;m.value.forEach((J,H)=>{console.log("SubIDSValue",M.value[H]),i.append("id[]",M.value[H]),i.append("achive_mark[]",F.value[H]),i.append("comment[]",T.value[H]),D.value[H]&&D.value[H].forEach(ie=>{console.log("File Value",ie),r.value.push(ie)})}),r.value.forEach(J=>{console.log("File Value",J),i.append("files[]",J)}),v.value.forEach(J=>{i.append("files_id[]",J)}),i.append("self_remarks",f.value);const{data:U,error:q}=await z(`${O.public.apiUrl}/kpi/update`,{method:"POST",headers:{Authorization:`Bearer ${p.value}`},body:i},"$3n6oGZyvcV");if(((ae=U.value)==null?void 0:ae.code)===200){I.value=!1,A.value=!1,$.value="",M.value=[],F.value=[],T.value=[],D.value=[],v.value=[],f.value="",r.value=[],C.value=null,m.value=[],Y.add({severity:"success",summary:"Success",detail:"Submission successful!",group:"br",life:3e3});return}else return I.value=!1,Y.add({severity:"error",summary:"Failed",detail:"Failed to submit",group:"br",life:3e3})};return te(),(p,i)=>{var ie,re,h,u,L,B;const U=ke,q=be,ae=De,J=Qe,H=ze("tooltip");return g(),W("div",Je,[e("div",Xe,[e("div",et,[e("div",tt,[e("div",lt,[at,e("p",ot,le((re=(ie=t(Z))==null?void 0:ie.data)==null?void 0:re.name),1)]),e("div",st,[nt,l(U,{class:"w-full",modelValue:t($),"onUpdate:modelValue":i[0]||(i[0]=V=>G($)?$.value=V:null),options:N.quater,optionLabel:"name",placeholder:"Select Quarter"},null,8,["modelValue","options"])]),e("div",it,[l(q,{class:"col-12 md:col-2 w-full",type:"submit",label:"Load",onClick:x,style:{height:"max-content",display:"flex","align-self":"end"},loading:t(E)},null,8,["loading"])])])]),t(C)?(g(),W("p",dt,[rt,fe(le(S((L=(u=(h=t(C))==null?void 0:h.data[0])==null?void 0:u.sub_section_data[0])==null?void 0:L.deadline)),1)])):R("",!0),t(A)?(g(),W("form",{key:1,class:"card relative",onSubmit:pe(j,["prevent"])},[(g(!0),W(_e,null,Ve(t(m),(V,y)=>(g(),W("div",{key:y},[e("div",ct,[e("div",ut,[mt,Se((g(),W("p",pt,[fe(le(V.section_name),1)])),[[H,{value:V.section_name},void 0,{top:!0}]])]),e("div",_t,[ft,Se((g(),W("p",vt,[fe(le(V.subSection_name),1)])),[[H,{value:V.subSection_name},void 0,{top:!0}]])]),e("div",bt,[ht,l(U,{modelValue:t($),"onUpdate:modelValue":i[1]||(i[1]=s=>G($)?$.value=s:null),disabled:"",options:N.quater,optionLabel:"name",placeholder:"Select Quarter",class:"w-full"},null,8,["modelValue","options"])]),e("div",yt,[e("label",gt," Achieved Mark (Target: "+le((V==null?void 0:V.target_mark)||0)+le((V==null?void 0:V.mark_type)==1?"%":0)+") ",1),l(ae,{modelValue:t(F)[y],"onUpdate:modelValue":s=>t(F)[y]=s,placeholder:"Input Mark",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",kt,[wt,Se(l(J,{modelValue:t(T)[y],"onUpdate:modelValue":s=>t(T)[y]=s,id:"description",rows:"3",cols:"20",placeholder:"Write comment",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),[[H,{value:V.comment},void 0,{top:!0}]])]),e("div",$t,[St,e("div",Vt,[t(D)[y]&&t(D)[y].length?(g(),W("div",Dt,[(g(!0),W(_e,null,Ve(t(D)[y],(s,a)=>(g(),W("div",{key:a,class:"text-sm file-name font-semibold tracking-wide leading-3 bg-gray-300 px-3 py-2 flex align-items-center rounded relative"},[e("div",null,[xt,fe(),e("span",null,le(s.name),1)]),e("div",{onClick:k=>c(V,y,a),class:"close-comment"},Ft,8,Ut)]))),128))])):R("",!0),e("div",null,[e("input",{type:"file",class:"hidden",id:`submittedFiles${y}`,onChange:s=>o(V,y,s)},null,40,Tt),l(q,{icon:"pi pi-cloud-upload",disabled:t(D)[y]&&t(D)[y].length>0,label:"Upload",onClick:s=>d(y),"aria-label":"Filter"},null,8,["disabled","onClick"])])])])])]))),128)),e("div",Et,[Mt,Se(l(J,{modelValue:t(f),"onUpdate:modelValue":i[2]||(i[2]=V=>G(f)?f.value=V:null),id:"description",rows:"5",cols:"20",placeholder:"Write your self remarks",class:"w-full"},null,8,["modelValue"]),[[H,{value:t(f)},void 0,{top:!0}]])]),e("div",It,[l(q,{disabled:(B=t(C))==null?void 0:B.isDeadlineMiss,label:"Submit",class:"bg-green-500 border-none",type:"submit",loading:t(I)},null,8,["disabled","loading"])])],32)):R("",!0)])])}}},qt=xe(At,[["__scopeId","data-v-b97fd3db"]]),Bt={class:"card"},Lt={class:"flex gap-2 flex-wrap"},Pt={class:"user-selection w-full md:w-14rem w-full"},Rt=e("label",{class:"font-bold block mb-2"},"Team Member:",-1),Qt={class:"flex justify-content-center"},Kt={class:"user-selection w-full md:w-14rem w-full"},Nt=e("label",{class:"font-bold block mb-2"},"Quarter:",-1),Ot={class:"flex justify-content-center"},Wt={key:0,class:"card"},zt={class:"flex flex-wrap align-items-top justify-content-between gap-2 mb-5"},jt={class:""},Gt={class:"font-bold"},Yt=e("td",null,"Name",-1),Ht={class:"pl-2"},Zt={class:"font-bold"},Jt=e("td",null,"Designation",-1),Xt={class:"pl-2"},el={class:"font-bold"},tl=e("td",null,"Line Manager",-1),ll={class:"pl-2"},al={class:"font-bold"},ol=e("td",null,"Achievement",-1),sl={class:"pl-2"},nl={class:"font-bold"},il=e("td",null,"Weightage Score",-1),dl={class:"pl-2"},rl={class:""},cl=e("p",{class:"text-center"},"No Data found...",-1),ul={class:"flex flex-wrap align-items-center justify-content-between gap-2 py-2"},ml={class:"text-xl text-900 font-bold"},pl=["href"],_l={class:"my-5 flex gap-2 text-lg"},fl=e("p",{class:"font-bold"},"Self Remark:",-1),vl={class:""},bl={class:"col-12"},hl=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Line Manager Feedback:",-1),yl={class:"col-12"},gl=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Training Needs Assessment:",-1),kl={class:"w-full flex justify-center"},wl={__name:"Report",props:["quater"],setup(N){const te=ye(),Z=he(),Y=n(!1),O=n(!1),E=n(!1),I=n(""),C=n(""),A=n(!1),$=n([]),m=n(""),M=n(""),F=n(null),T=()=>{console.log("Modal"),A.value=!0};(async()=>{var S,j,p;const o=Q("token"),{data:d,pending:c,error:x}=await qe("getMembers",()=>$fetch(`${te.public.apiUrl}/teams/members?report=1`,{headers:{Authorization:`Bearer ${o.value}`}}));console.log("memmbess",(S=d.value)==null?void 0:S.team_members),(j=d.value)!=null&&j.team_members&&($.value=(p=d.value)==null?void 0:p.team_members.map(i=>({id:i.id,name:i.name})),console.log("employee",I.value))})();const v=async()=>{if(I.value==""||C.value=="")return Z.add({severity:"warn",summary:"Warning",detail:"Please Select Employee and Quarter",group:"br",life:3e3});const o=Q("token"),{data:d,error:c}=await z(`${te.public.apiUrl}/kpi/show/${I.value.id}?quater_id=${C.value.id}`,{method:"GET",headers:{Authorization:`Bearer ${o.value}`}},"$PG910Me6qO");return d.value.code==200?(F.value=d.value,console.log("Report Value",d.value),Y.value=!1):(Y.value=!1,Z.add({severity:"error",summary:"Failed",detail:"Failed to show report",group:"br",life:3e3}))},f=async()=>{const o=Q("token");O.value=!0;const{data:d,error:c}=await z(`${te.public.apiUrl}/kpi/report-download/${I.value.id}?quater_id=${C.value.id}`,{method:"GET",headers:{Authorization:`Bearer ${o.value}`}},"$8KxzC2nWbm");if(d.value.code==200){const x=document.createElement("a");x.href=d.value.download_path,x.target="_blank",x.click(),O.value=!1;return}else return O.value=!1,Z.add({severity:"error",summary:"Failed",detail:"Failed to download",group:"br",life:3e3})},r=async()=>{E.value=!0;const o=Q("token"),d=new FormData;d.append("user_id",I.value.id),d.append("quater_id",C.value.id),d.append("line_manager_feedback",m.value),d.append("line_manager_assesment",M.value);const{data:c,error:x}=await z(`${te.public.apiUrl}/kpi/line-manager-feedback`,{method:"POST",headers:{Authorization:`Bearer ${o.value}`},body:d},"$CYBu34Xv3m");return c.value?(E.value=!1,A.value=!1,v(),M.value="",m.value="",Z.add({severity:"success",summary:"Success",detail:"Feedback submitted successfully",group:"br",life:3e3})):(E.value=!1,Z.add({severity:"error",summary:"Failed",detail:"Failed to submit feedback",group:"br",life:3e3}))};return(o,d)=>{var J,H,ie,re,h,u,L,B,V,y;const c=Pe,x=ke,S=be,j=Oe,p=Fe,i=je,U=Ge,q=Te,ae=Qe;return g(),W(_e,null,[e("div",Bt,[l(c,{position:"bottom-right",group:"br"}),l(j,{class:"border-0 px-0"},{start:b(()=>[e("div",Lt,[e("div",Pt,[Rt,e("div",Qt,[l(x,{modelValue:t(I),"onUpdate:modelValue":d[0]||(d[0]=s=>G(I)?I.value=s:null),options:t($),optionLabel:"name",placeholder:"Select Employee",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])]),e("div",Kt,[Nt,e("div",Ot,[l(x,{modelValue:t(C),"onUpdate:modelValue":d[1]||(d[1]=s=>G(C)?C.value=s:null),options:N.quater,optionLabel:"name",placeholder:"Select Quarter",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])])])]),end:b(()=>[l(S,{onClick:v,class:"w-full",label:"Generate",loading:t(Y)},null,8,["loading"])]),_:1})]),t(F)?(g(),W("div",Wt,[e("div",null,[e("div",zt,[e("div",jt,[e("table",null,[e("tr",Gt,[Yt,e("td",Ht,": "+le((J=t(F))==null?void 0:J.user_name),1)]),e("tr",Zt,[Jt,e("td",Xt,": "+le((H=t(F))==null?void 0:H.designation),1)]),e("tr",el,[tl,e("td",ll,": "+le((ie=t(F))==null?void 0:ie.line_maneger_name),1)]),e("tr",al,[ol,e("td",sl,": "+le((re=t(F))==null?void 0:re.overAllKpi),1)]),e("tr",nl,[il,e("td",dl,": "+le((h=t(F))==null?void 0:h.overAllKpi.slice(0,-1)),1)])])]),e("div",rl,[(u=t(F))!=null&&u.can_set_feedback?(g(),ee(S,{key:0,class:"w-fit h-fit mx-1 bg-green-500",style:{border:"1px solid #22c55e"},label:"Feedback",onClick:T})):R("",!0),l(S,{onClick:f,class:"w-fit h-fit mx-1",label:"Download",loading:t(O)},null,8,["loading"])])]),(g(!0),W(_e,null,Ve((L=t(F))==null?void 0:L.data,(s,a)=>(g(),ee(q,{value:s.sub_section_data,key:a,showGridlines:"",tableStyle:"min-width: 50rem",class:"my-4"},{empty:b(()=>[cl]),header:b(()=>[e("div",ul,[e("span",ml,le(s.section.name),1)])]),default:b(()=>[l(p,{field:"",header:"Sub Section",style:{width:"30%"}},{body:b(k=>{var K,w;return[e("div",null,le((w=(K=k==null?void 0:k.data)==null?void 0:K.sub_section)==null?void 0:w.title),1)]}),_:1}),l(p,{field:"target_mark",header:"Key result Target",style:{width:"8%"}}),l(p,{field:"achive_mark",header:"Key result Achivement",style:{width:"8%"}}),l(p,{field:"achive_mark_parcentage",header:"Achievement Percentage",style:{width:"8%"}}),l(p,{field:"weightage",header:"Weightage",style:{width:"8%"}}),l(p,{field:"weightage_score",header:"Weightage Score",style:{width:"8%"}}),l(p,{field:"comment",header:"Comment"}),l(p,{field:"",header:"File",style:{width:"8%"}},{body:b(k=>{var K,w;return[((K=k==null?void 0:k.data)==null?void 0:K.file_link)!==""?(g(),W("a",{key:0,href:(w=k==null?void 0:k.data)==null?void 0:w.file_link,target:"_blank",class:"text-blue-500"}," Attachment ",8,pl)):R("",!0)]}),_:1}),l(U,{type:"footer"},{default:b(()=>[l(i,null,{default:b(()=>{var k,K,w;return[l(p,{footer:"Summary:",colspan:3,footerStyle:"text-align:left"}),l(p,{footer:(k=s==null?void 0:s.section_summary)==null?void 0:k.achivementpercentage_sum},null,8,["footer"]),l(p,{footer:(K=s==null?void 0:s.section_summary)==null?void 0:K.section_weightage},null,8,["footer"]),l(p,{footer:(w=s==null?void 0:s.section_summary)==null?void 0:w.weighted_score_sum},null,8,["footer"]),l(p,{footer:""}),l(p,{footer:""})]}),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128)),l(q,{value:[(B=t(F))==null?void 0:B.line_maneger],showGridlines:""},{default:b(()=>[l(p,{field:"line_manager_feedback",header:"Line Manager Feedback on Improvement Areas"}),l(p,{field:"line_manager_assesment",header:"Training Needs Assessment"})]),_:1},8,["value"]),e("div",_l,[fl,e("p",vl,le((y=(V=t(F))==null?void 0:V.line_maneger)==null?void 0:y.self_remarks),1)])]),l(t(Ee),{visible:t(A),"onUpdate:visible":d[4]||(d[4]=s=>G(A)?A.value=s:null),modal:"",header:"Feedback",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{onSubmit:pe(r,["prevent"])},[e("div",bl,[hl,l(ae,{modelValue:t(m),"onUpdate:modelValue":d[2]||(d[2]=s=>G(m)?m.value=s:null),rows:"3",cols:"20",placeholder:"Write comment",class:"w-full",required:""},null,8,["modelValue"])]),e("div",yl,[gl,l(ae,{modelValue:t(M),"onUpdate:modelValue":d[3]||(d[3]=s=>G(M)?M.value=s:null),rows:"3",cols:"20",placeholder:"Write comment",class:"w-full",required:""},null,8,["modelValue"])]),e("div",kl,[l(S,{class:"w-fit h-fit mx-auto",type:"submit",label:"Submit",loading:t(E)},null,8,["loading"])])],32)]),_:1},8,["visible"])])):R("",!0)],64)}}};const ge=N=>(Ue("data-v-1d02ab4d"),N=N(),Ce(),N),$l={key:0,class:"card"},Sl=ge(()=>e("div",{class:"d-flex mr-2"},[e("h5",{class:"mb-1"},"Daily KPI Report")],-1)),Vl={class:"flex gap-2"},Dl={class:"flex-auto"},xl=ge(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Employee: ",-1)),Ul={class:"flex-auto"},Cl=ge(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Start Date: ",-1)),Fl={class:"flex-auto"},Tl=ge(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"}," End Date: ",-1)),El={key:1,class:"card"},Ml={class:"flex align-items-center justify-content-between gap-2 mb-5"},Il=ge(()=>e("h5",{class:"m-0"},"Preview",-1)),Al=ge(()=>e("p",{class:"text-center"},"No Data found...",-1)),ql={__name:"DailyReport",setup(N){Ke(Ye());const te=n(se("read_task")),Z=ye(),Y=he(),O=n(""),E=n(""),I=n(!1),C=n(!1),A=n(null);n("");const $=f=>{const r=f,o=new Date(r),d=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),x=String(o.getDate()).padStart(2,"0");return`${d}-${c}-${x}`},m=async()=>{if(D.value==""||!D.value)return Y.add({severity:"warn",summary:"Warning",detail:"Please Select Employee",group:"br",life:3e3});if(O.value&&!E.value||!O.value&&E.value)return Y.add({severity:"warn",summary:"Warning",detail:"Please Select Start Date and End Date",group:"br",life:3e3});const f=Q("token");I.value=!0;const r=$(O.value),o=$(E.value),{data:d,error:c}=await z(`${Z.public.apiUrl}/kpi-tracking/daily-report-view?start_date=${O.value?r:""}&end_date=${E.value?o:""}&user_id=${D.value?D.value.id:""}`,{method:"GET",headers:{Authorization:`Bearer ${f.value}`}},"$krDxyBlik9");return d.value.code==200?(A.value=d.value.data,I.value=!1):(I.value=!1,Y.add({severity:"error",summary:"Failed",detail:"Failed to generate!",group:"br",life:3e3}))},M=async()=>{const f=Q("token");C.value=!0;const r=$(O.value),o=$(E.value),{data:d,error:c}=await z(`${Z.public.apiUrl}/kpi-tracking/daily-report-download?start_date=${O.value?r:""}&end_date=${E.value?o:""}&user_id=${D.value?D.value.id:""}`,{method:"GET",headers:{Authorization:`Bearer ${f.value}`}},"$hn5CEzdH40");if(d.value.code==200){const x=document.createElement("a");x.href=d.value.download_path,x.target="_blank",x.click(),C.value=!1;return}else return C.value=!1,Y.add({severity:"error",summary:"Failed",detail:"Failed to download",group:"br",life:3e3})},F=(f,r)=>{const o=new Date(r);f=="startDate"?O.value=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate():E.value=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()},T=n([]),D=n(""),v=async()=>{var c,x,S;const f=Q("token"),{data:r,pending:o,error:d}=await qe("taskAssignModalData",()=>$fetch(`${Z.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${f.value}`}}));((x=(c=r.value)==null?void 0:c.data)==null?void 0:x.length)>0&&(T.value=(S=r.value)==null?void 0:S.data.map(j=>({name:j.name,id:j.id})))};return Ae(()=>{v(),console.log("call")}),(f,r)=>{const o=ke,d=Ie,c=be,x=Oe,S=Fe,j=Te;return g(),W(_e,null,[t(te)?(g(),W("div",$l,[Sl,l(x,{class:"border-0 px-0"},{start:b(()=>[e("div",Vl,[e("div",Dl,[xl,l(o,{onChange:r[0]||(r[0]=p=>f.filterTasks()),class:"select-emp",modelValue:t(D),"onUpdate:modelValue":r[1]||(r[1]=p=>G(D)?D.value=p:null),options:t(T),optionLabel:"name",placeholder:"Select Employee"},null,8,["modelValue","options"])]),e("div",Ul,[Cl,l(d,{modelValue:t(O),"onUpdate:modelValue":r[2]||(r[2]=p=>G(O)?O.value=p:null),onDateSelect:r[3]||(r[3]=p=>F("startDate",p)),showIcon:"",iconDisplay:"input",inputId:"icondisplay"},null,8,["modelValue"])]),e("div",Fl,[Tl,l(d,{modelValue:t(E),"onUpdate:modelValue":r[4]||(r[4]=p=>G(E)?E.value=p:null),onDateSelect:r[5]||(r[5]=p=>F("endtDate",p)),showIcon:"",iconDisplay:"input",inputId:"icondisplay"},null,8,["modelValue"])])])]),end:b(()=>[l(c,{onClick:m,class:"w-full",label:"Generate",loading:t(I)},null,8,["loading"])]),_:1})])):R("",!0),t(A)?(g(),W("div",El,[e("div",null,[e("div",Ml,[Il,l(c,{onClick:M,class:"w-fit",label:"Download",loading:t(C)},null,8,["loading"])]),l(j,{value:t(A),tableStyle:"min-width: 50rem"},{empty:b(()=>[Al]),default:b(()=>[l(S,{field:"date",header:"Date"}),l(S,{field:"scrum_meeting",header:"Stand-up Meeting Attendance"}),l(S,{field:"bounce",header:"Number of Bounces"}),l(S,{field:"update",header:"Task Update Compliance"}),l(S,{field:"commit",header:"Code Commit"}),l(S,{field:"projects",header:"No. of Projects Worked"}),l(S,{field:"pull_request",header:"Pull Request"}),l(S,{field:"bug",header:"Bug Discovered"}),l(S,{field:"build_failed",header:"Build Failed"}),l(S,{field:"completed",header:"Timely Delivery"}),l(S,{field:"overdue",header:"Missed Delivery"})]),_:1},8,["value"])])])):R("",!0)],64)}}},Bl=xe(ql,[["__scopeId","data-v-1d02ab4d"]]),Ll={class:"grid"},Pl={class:"col-12"},Rl={class:"flex justify-content-end my-4"},Ql={class:"card"},Kl=e("p",{class:"text-center"},"No Data found...",-1),Nl={class:"card"},Ol={class:"kpi-form grid"},Wl={class:"col-12"},zl={class:"user-selection w-full"},jl=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Section Title:",-1),Gl={class:"col-12"},Yl={class:"user-selection w-full"},Hl=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Weightage:",-1),Zl={class:"col-12"},Jl={class:"user-selection w-full"},Xl=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Section Status:",-1),ea={class:"col-12 mx-auto flex justify-content-center"},ta={class:"card"},la={class:"kpi-form grid"},aa={class:"col-12"},oa={class:"user-selection w-full"},sa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Section Title:",-1),na={class:"col-12"},ia={class:"user-selection w-full"},da=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Weightage:",-1),ra={class:"col-12"},ca={class:"user-selection w-full"},ua=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Section Status:",-1),ma={class:"col-12 mx-auto flex justify-content-center"},pa={class:"grid"},_a={class:"col-12"},fa={class:"flex justify-content-end my-4"},va={class:"card"},ba=e("p",{class:"text-center"},"No Data found...",-1),ha={class:"card"},ya={class:"kpi-form grid"},ga={class:"col-12"},ka=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Select Section:",-1),wa={class:"col-12"},$a={class:"user-selection w-full"},Sa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Title:",-1),Va={class:"col-12"},Da={class:"user-selection w-full"},xa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Weightage:",-1),Ua={class:"col-12"},Ca={class:"user-selection w-full"},Fa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Mark Type:",-1),Ta={class:"col-12"},Ea={class:"user-selection w-full"},Ma=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Target Mark:",-1),Ia={class:"col-12"},Aa={class:"user-selection w-full"},qa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Comment:",-1),Ba={class:"col-12"},La={class:"user-selection w-full"},Pa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Status:",-1),Ra={class:"col-12 mx-auto flex justify-content-center"},Qa={class:"card"},Ka={class:"kpi-form grid"},Na={class:"col-12"},Oa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Select Section:",-1),Wa={class:"col-12"},za={class:"user-selection w-full"},ja=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Title:",-1),Ga={class:"col-12"},Ya={class:"user-selection w-full"},Ha=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Weightage:",-1),Za={class:"col-12"},Ja={class:"user-selection w-full"},Xa=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Mark Type:",-1),eo={class:"col-12"},to={class:"user-selection w-full"},lo=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Target Mark:",-1),ao={class:"col-12"},oo={class:"user-selection w-full"},so=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Comment:",-1),no={class:"col-12"},io={class:"user-selection w-full"},ro=e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Status:",-1),co={class:"col-12 mx-auto flex justify-content-center"},uo={__name:"Section",setup(N){const te=n(se("read_section")),Z=n(se("create_section")),Y=n(se("update_section")),O=n(se("delete_section")),E=n(se("read_sub_section")),I=n(se("create_sub_section")),C=n(se("update_sub_section")),A=n(se("delete_sub_section")),$=ye(),m=he(),M=n([]),F=n([]),T=n(!1),D=n(!1),v=n(!1),f=n(!1),r=n({}),o=n({}),d=n({}),c=n({}),x=n(!1),S=n(!1),j=n(!1),p=n(!1),i=n(!1),U=async()=>{var K;const s=Q("token"),{data:a,pending:k}=await z(`${$.public.apiUrl}/kpi/section`,{method:"GET",headers:{Authorization:`Bearer ${s.value}`}},"$QLfPrBj95L");a&&(console.log("Section data: ",a.value.data),M.value=(K=a.value)==null?void 0:K.data.map((w,X)=>({...w,index:X+1})))},q=async()=>{var K;const s=Q("token"),{data:a,pending:k}=await z(`${$.public.apiUrl}/kpi/sub-section`,{method:"GET",headers:{Authorization:`Bearer ${s.value}`}},"$WaU7WXQtZH");a&&(console.log("Section data: ",a.value.data),F.value=(K=a.value)==null?void 0:K.data.map((w,X)=>({...w,index:X+1})))},ae=n([{name:"Active",label:1},{name:"Inactive",label:0}]),J=n([{name:"Percentage (%)",label:1},{name:"Number (01)",label:0}]),H=async()=>{var X;x.value=!0,console.log(Object.keys(r.value));const s=new FormData;if(s.append("name",r.value.name),s.append("status",(X=r.value.status)==null?void 0:X.label),s.append("section_weightage",r.value.section_weightage),!r.value.name||!r.value.status)return x.value=!1,m.add({severity:"error",summary:"Failed",detail:"Please fill all required fields",group:"br",life:3e3});const a=Q("token"),{data:k,pending:K,error:w}=await z(`${$.public.apiUrl}/kpi/section-create`,{method:"POST",headers:{Authorization:`Bearer ${a.value}`},body:s},"$CJGlGi6sZy");k.value?(U(),T.value=!1,r.value={},x.value=!1,m.add({severity:"success",summary:"Updated",detail:"Section Created Successfully",group:"br",life:3e3})):(x.value=!1,m.add({severity:"error",summary:"Failed",detail:"Failed to create section!",group:"br",life:3e3}))},ie=async()=>{var w,X;S.value=!0,console.log(Object.keys(o.value));const s=new FormData;if(s.append("section_id",(w=o.value.section)==null?void 0:w.id),s.append("title",o.value.name),s.append("target_mark",o.value.targetMark),s.append("mark_type",o.value.mark_type.label),s.append("weightage",o.value.weightage),s.append("comment",o.value.comment||""),s.append("status",(X=o.value.status)==null?void 0:X.label),!o.value.section||!o.value.name||!o.value.targetMark||!o.value.status)return S.value=!1,m.add({severity:"error",summary:"Failed",detail:"Please fill all required fields",group:"br",life:3e3});const a=Q("token"),{data:k,pending:K}=await z(`${$.public.apiUrl}/kpi/sub-section-create`,{method:"POST",headers:{Authorization:`Bearer ${a.value}`},body:s},"$YVPI7MPSvE");k.value?(q(),D.value=!1,o.value={},S.value=!1,m.add({severity:"success",summary:"Updated",detail:"Sub Section Created Successfully",group:"br",life:3e3})):(S.value=!1,m.add({severity:"error",summary:"Failed",detail:"Failed to create sub section!",group:"br",life:3e3}))},re=async s=>{v.value=!0,d.value={...s,status:s.status===1?{name:"Active",label:1}:{name:"Inactive",label:0}},console.log("Edit Data:",d.value)},h=n(),u=async s=>{f.value=!0,h.value=M.value.map(a=>({name:a.name,id:a.id})),c.value={subSectionId:s.id,section_id:h.value.find(a=>a.id===s.section_id),title:s.title,target_mark:s.target_mark,mark_type:J.value.find(a=>a.label===s.mark_type),weightage:s.weightage,comment:s.comment,status:ae.value.find(a=>a.label===s.status)}},L=async()=>{var X;if(j.value=!0,!d.value.name||!d.value.status)return j.value=!1,m.add({severity:"error",summary:"Failed",detail:"Please fill all required fields",group:"br",life:3e3});const s=new FormData;s.append("name",d.value.name),s.append("status",(X=d.value.status)==null?void 0:X.label),s.append("section_weightage",d.value.section_weightage);const a=Q("token"),{data:k,pending:K,error:w}=await z(`${$.public.apiUrl}/kpi/section-update/${d.value.id}`,{method:"POST",headers:{Authorization:`Bearer ${a.value}`},body:s},"$RRgAmPcwW9");k.value?(U(),v.value=!1,d.value={},j.value=!1,m.add({severity:"success",summary:"Updated",detail:"Section Updated Successfully",group:"br",life:3e3})):(j.value=!1,m.add({severity:"error",summary:w.value.data.app_message,detail:w.value.data.user_message,group:"br",life:3e3}))},B=async()=>{var X,de;if(p.value=!0,!c.value.section_id||!c.value.title||!c.value.target_mark||!c.value.status)return p.value=!1,m.add({severity:"error",summary:"Failed",detail:"Please fill all required fields",group:"br",life:3e3});console.log(c);const s=new FormData;s.append("section_id",(X=c.value.section_id)==null?void 0:X.id),s.append("title",c.value.title),s.append("weightage",c.value.weightage),s.append("target_mark",c.value.target_mark),s.append("mark_type",c.value.mark_type.label),s.append("comment",c.value.comment),s.append("status",(de=c.value.status)==null?void 0:de.label);const a=Q("token"),{data:k,pending:K,error:w}=await z(`${$.public.apiUrl}/kpi/sub-section-update/${c.value.subSectionId}`,{method:"POST",headers:{Authorization:`Bearer ${a.value}`},body:s},"$Bgl5cHylQ2");k.value?(q(),f.value=!1,c.value={},p.value=!1,m.add({severity:"success",summary:"Updated",detail:"Sub Section Updated Successfully",group:"br",life:3e3})):(p.value=!1,m.add({severity:"error",summary:w.value.data.app_message||"Error",detail:w.value.data.user_message||"Failed To Update",group:"br",life:3e3}))},V=async s=>{const a=Q("token"),{data:k,pending:K,error:w}=await z(`${$.public.apiUrl}/kpi/section-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a.value}`}},"$fSYmqaVVux");k.value?(U(),m.add({severity:"success",summary:"Deleted",detail:"Section Deleted Successfully",group:"br",life:3e3})):m.add({severity:"error",summary:"Failed",detail:w.value.data.user_message,group:"br",life:3e3})},y=async s=>{const a=Q("token"),{data:k,pending:K,error:w}=await z(`${$.public.apiUrl}/kpi/sub-section-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a.value}`}},"$K5gf5dTDYf");k.value?(q(),m.add({severity:"success",summary:"Deleted",detail:"Sub Section Deleted Successfully",group:"br",life:3e3})):m.add({severity:"error",summary:"Failed",detail:w.value.data.user_message,group:"br",life:3e3})};return Ae(()=>{U(),q()}),(s,a)=>{const k=be,K=He,w=Fe,X=Te,de=De,we=Ze,ue=ke,P=Ee,oe=Re,$e=We;return g(),ee($e,{activeIndex:0},{default:b(()=>[t(te)?(g(),ee(oe,{key:0,header:"Sections"},{default:b(()=>[e("div",Ll,[e("div",Pl,[e("div",Rl,[t(Z)?(g(),ee(k,{key:0,onClick:a[0]||(a[0]=()=>T.value=!0),label:"Section",icon:"pi pi-plus",class:""})):R("",!0)]),e("div",Ql,[l(X,{class:"table-stR",value:t(M),paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:t(i)},{empty:b(()=>[Kl]),loading:b(()=>[l(K,{style:{width:"50px",height:"50px"}})]),default:b(()=>[l(w,{field:"index",header:"Serial",sortable:""}),l(w,{style:{"text-wrap":"nowrap"},field:"name",header:"Section Name"}),l(w,{style:{"text-wrap":"nowrap"},field:"section_weightage",header:"Weightage"}),l(w,{field:"action",header:"Action"},{body:b(_=>[t(Y)?(g(),ee(k,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:ve=>re(_.data)},null,8,["onClick"])):R("",!0),t(O)?(g(),ee(k,{key:1,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ve=>V(_.data.id)},null,8,["onClick"])):R("",!0)]),_:1})]),_:1},8,["value","loading"])])])]),l(P,{visible:t(T),"onUpdate:visible":a[4]||(a[4]=_=>G(T)?T.value=_:null),modal:"",header:"Create Section",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{class:"",action:"",onSubmit:pe(H,["prevent"])},[e("div",Nl,[e("div",Ol,[e("div",Wl,[e("div",zl,[jl,l(de,{type:"text",modelValue:t(r).name,"onUpdate:modelValue":a[1]||(a[1]=_=>t(r).name=_),placeholder:"Title",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Gl,[e("div",Yl,[Hl,l(we,{modelValue:t(r).section_weightage,"onUpdate:modelValue":a[2]||(a[2]=_=>t(r).section_weightage=_),placeholder:"Weightage",inputId:"Weightage",min:0,max:60,class:"w-full"},null,8,["modelValue"])])]),e("div",Zl,[e("div",Jl,[Xl,l(ue,{modelValue:t(r).status,"onUpdate:modelValue":a[3]||(a[3]=_=>t(r).status=_),options:t(ae),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",ea,[l(k,{label:"Create",severity:"info",type:"submit",loading:t(x)},null,8,["loading"])])])])],32)]),_:1},8,["visible"]),l(P,{visible:t(v),"onUpdate:visible":a[8]||(a[8]=_=>G(v)?v.value=_:null),modal:"",header:"Edit Section",style:{width:"35rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{class:"",action:"",onSubmit:pe(L,["prevent"])},[e("div",ta,[e("div",la,[e("div",aa,[e("div",oa,[sa,l(de,{type:"text",modelValue:t(d).name,"onUpdate:modelValue":a[5]||(a[5]=_=>t(d).name=_),placeholder:"Title",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",na,[e("div",ia,[da,l(we,{modelValue:t(d).section_weightage,"onUpdate:modelValue":a[6]||(a[6]=_=>t(d).section_weightage=_),placeholder:"Weightage",inputId:"Weightage",min:0,max:60,class:"w-full"},null,8,["modelValue"])])]),e("div",ra,[e("div",ca,[ua,l(ue,{modelValue:t(d).status,"onUpdate:modelValue":a[7]||(a[7]=_=>t(d).status=_),options:t(ae),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",ma,[l(k,{label:"Update",severity:"info",type:"submit",loading:t(j)},null,8,["loading"])])])])],32)]),_:1},8,["visible"])]),_:1})):R("",!0),t(E)?(g(),ee(oe,{key:1,header:"Sub Sections"},{default:b(()=>[e("div",pa,[e("div",_a,[e("div",fa,[t(I)?(g(),ee(k,{key:0,onClick:a[9]||(a[9]=()=>D.value=!0),label:"Sub Section",icon:"pi pi-plus",class:""})):R("",!0)]),e("div",va,[l(X,{class:"table-stR",value:t(F),paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:t(i)},{empty:b(()=>[ba]),loading:b(()=>[l(K,{style:{width:"50px",height:"50px"}})]),default:b(()=>[l(w,{field:"index",header:"Serial",sortable:""}),l(w,{style:{"text-wrap":"nowrap"},field:"title",header:"Sub Section Name"}),l(w,{style:{"text-wrap":"nowrap"},field:"target_mark",header:"Target Mark"}),l(w,{style:{"text-wrap":"nowrap"},field:"weightage",header:"Weightage"}),l(w,{style:{"text-wrap":"nowrap"},field:"section_name",header:"Section"}),l(w,{style:{"text-wrap":"nowrap"},field:"comment",header:"Comment"}),l(w,{field:"action",header:"Action"},{body:b(_=>[t(C)?(g(),ee(k,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:ve=>u(_.data)},null,8,["onClick"])):R("",!0),t(A)?(g(),ee(k,{key:1,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:ve=>y(_.data.id)},null,8,["onClick"])):R("",!0)]),_:1})]),_:1},8,["value","loading"])])])]),l(P,{visible:t(D),"onUpdate:visible":a[17]||(a[17]=_=>G(D)?D.value=_:null),modal:"",header:"Create Sub Section",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{class:"",action:"",onSubmit:pe(ie,["prevent"])},[e("div",ha,[e("div",ya,[e("div",ga,[ka,l(ue,{modelValue:t(o).section,"onUpdate:modelValue":a[10]||(a[10]=_=>t(o).section=_),options:t(M),optionLabel:"name",placeholder:"Select Section",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e("div",wa,[e("div",$a,[Sa,l(de,{type:"text",modelValue:t(o).name,"onUpdate:modelValue":a[11]||(a[11]=_=>t(o).name=_),placeholder:"Title",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Va,[e("div",Da,[xa,l(de,{type:"text",modelValue:t(o).weightage,"onUpdate:modelValue":a[12]||(a[12]=_=>t(o).weightage=_),placeholder:"Weightage",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Ua,[e("div",Ca,[Fa,l(ue,{modelValue:t(o).mark_type,"onUpdate:modelValue":a[13]||(a[13]=_=>t(o).mark_type=_),options:t(J),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",Ta,[e("div",Ea,[Ma,l(de,{type:"number",modelValue:t(o).targetMark,"onUpdate:modelValue":a[14]||(a[14]=_=>t(o).targetMark=_),placeholder:"Set Target Mark",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Ia,[e("div",Aa,[qa,l(de,{type:"text",modelValue:t(o).comment,"onUpdate:modelValue":a[15]||(a[15]=_=>t(o).comment=_),placeholder:"Comment",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Ba,[e("div",La,[Pa,l(ue,{modelValue:t(o).status,"onUpdate:modelValue":a[16]||(a[16]=_=>t(o).status=_),options:t(ae),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",Ra,[l(k,{label:"Create",severity:"info",type:"submit",loading:t(S)},null,8,["loading"])])])])],32)]),_:1},8,["visible"]),l(P,{visible:t(f),"onUpdate:visible":a[25]||(a[25]=_=>G(f)?f.value=_:null),modal:"",header:"Edit Sub Section",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{class:"",action:"",onSubmit:pe(B,["prevent"])},[e("div",Qa,[e("div",Ka,[e("div",Na,[Oa,l(ue,{modelValue:t(c).section_id,"onUpdate:modelValue":a[18]||(a[18]=_=>t(c).section_id=_),options:t(h),optionLabel:"name",placeholder:"Select Section",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e("div",Wa,[e("div",za,[ja,l(de,{type:"text",modelValue:t(c).title,"onUpdate:modelValue":a[19]||(a[19]=_=>t(c).title=_),placeholder:"Title",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Ga,[e("div",Ya,[Ha,l(de,{type:"text",modelValue:t(c).weightage,"onUpdate:modelValue":a[20]||(a[20]=_=>t(c).weightage=_),placeholder:"Weightage",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Za,[e("div",Ja,[Xa,l(ue,{modelValue:t(c).mark_type,"onUpdate:modelValue":a[21]||(a[21]=_=>t(c).mark_type=_),options:t(J),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",eo,[e("div",to,[lo,l(de,{type:"number",modelValue:t(c).target_mark,"onUpdate:modelValue":a[22]||(a[22]=_=>t(c).target_mark=_),placeholder:"Set Target Mark",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",ao,[e("div",oo,[so,l(de,{type:"text",modelValue:t(c).comment,"onUpdate:modelValue":a[23]||(a[23]=_=>t(c).comment=_),placeholder:"Comment",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",no,[e("div",io,[ro,l(ue,{modelValue:t(c).status,"onUpdate:modelValue":a[24]||(a[24]=_=>t(c).status=_),options:t(ae),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",co,[l(k,{label:"Update",severity:"info",type:"submit",loading:t(p)},null,8,["loading"])])])])],32)]),_:1},8,["visible"])]),_:1})):R("",!0)]),_:1})}}};const Me=N=>(Ue("data-v-fd9d5cb5"),N=N(),Ce(),N),mo={key:0,class:"grid"},po={class:"col-12"},_o={class:"flex justify-content-end my-4"},fo={class:"card"},vo={class:"card"},bo={class:"kpi-form grid"},ho={class:"col-12"},yo={class:"user-selection w-full"},go=Me(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Quarter Name:",-1)),ko={class:"col-12"},wo={class:"user-selection w-full"},$o=Me(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Start Date:",-1)),So={class:"col-12"},Vo={class:"user-selection w-full"},Do=Me(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"End Date:",-1)),xo={class:"col-12"},Uo={class:"user-selection w-full"},Co=Me(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Year:",-1)),Fo={class:"text-center w-full text-red-500"},To={class:"col-12 mx-auto flex justify-content-center"},Eo={__name:"Quater",setup(N){const te=n(se("read_quater")),Z=n(se("create_quater")),Y=n(se("update_quater")),O=n(se("delete_quater")),E=ye(),I=he(),C=n([]),A=n([]),$=n(!1),m=n({name:"",start_date:"",end_date:"",year:""}),M=n(""),F=async()=>{const r=Q("token"),{data:o,pending:d}=await z(`${E.public.apiUrl}/kpi-quater/list`,{method:"GET",headers:{Authorization:`Bearer ${r.value}`}},"$xAc4CusaQB");o&&(C.value=o.value.data)},T=r=>{const o=new Date(r);return`${o.getFullYear()}-${("0"+(o.getMonth()+1)).slice(-2)}-${("0"+o.getDate()).slice(-2)}`},D=async r=>{console.log(r.newData);const o=new FormData;console.log(r.newData),o.append("name",r.newData.name),typeof r.newData.year=="string"?o.append("year",`${r.newData.year}-01-01`):o.append("year",T(r.newData.year)),typeof r.newData.start_date=="string"?o.append("start_date",`2024-${r.newData.start_date}`):o.append("start_date",T(r.newData.start_date)),typeof r.newData.end_date=="string"?o.append("end_date",`2024-${r.newData.end_date}`):o.append("end_date",T(r.newData.end_date));const d=Q("token"),{data:c,pending:x}=await z(`${E.public.apiUrl}/kpi-quater/update/${r.newData.id}`,{method:"POST",headers:{Authorization:`Bearer ${d.value}`},body:o},"$l1lK7dLb4F");return c?(F(),I.add({severity:"success",summary:"Updated",detail:"Successfully updated",group:"br",life:3e3})):I.add({severity:"error",summary:"Failed",detail:"Failed to update",group:"br",life:3e3})},v=async r=>{const o=Q("token"),{data:d,pending:c}=await z(`${E.public.apiUrl}/kpi-quater/delete/${r.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${o.value}`}},"$EbQqn17n2R");return d?(F(),I.add({severity:"success",summary:"Deleted",detail:"Successfully deleted",group:"br",life:3e3})):I.add({severity:"error",summary:"Failed",detail:"Failed to delete",group:"br",life:3e3})},f=async()=>{console.log(Object.keys(m.value)),console.log(m.value);const r=new FormData;if(m.value.name!="")r.append("name",m.value.name);else{M.value="Please fill the required fields";return}if(m.value.start_date!="")r.append("start_date",T(m.value.start_date));else{M.value="Please fill the required fields";return}if(m.value.end_date!="")r.append("end_date",T(m.value.end_date));else{M.value="Please fill the required fields";return}if(m.value.year!="")r.append("year",T(m.value.year));else{M.value="Please fill the required fields";return}const o=Q("token"),{data:d,pending:c}=await z(`${E.public.apiUrl}/kpi-quater/create`,{method:"POST",headers:{Authorization:`Bearer ${o.value}`},body:r},"$J9PxtNIiS2");return d?(F(),$.value=!1,m.value={name:"",start_date:"",end_date:"",year:""},M.value=null,I.add({severity:"success",summary:"Updated",detail:"Successfully Created",group:"br",life:3e3})):I.add({severity:"error",summary:"Failed",detail:"Failed to update",group:"br",life:3e3})};return Ae(()=>{F()}),(r,o)=>{const d=be,c=De,x=Fe,S=Ie,j=Te,p=Ee;return g(),W(_e,null,[t(te)?(g(),W("div",mo,[e("div",po,[e("div",_o,[t(Z)?(g(),ee(d,{key:0,onClick:o[0]||(o[0]=()=>$.value=!0),label:"Create",icon:"pi pi-plus",class:""})):R("",!0)]),e("div",fo,[l(j,{editingRows:t(A),"onUpdate:editingRows":o[1]||(o[1]=i=>G(A)?A.value=i:null),value:t(C),editMode:"row",dataKey:"id",onRowEditSave:D,pt:{table:{style:"min-width: 50rem"},column:{bodycell:({state:i})=>({style:i.d_editing&&"padding-top: 0.75rem; padding-bottom: 0.75rem"})}},dt:{table:{style:"min-width: 50rem"},column:{bodycell:({state:i})=>({style:i.d_editing&&"padding-top: 0.75rem; padding-bottom: 0.75rem"})}}},{default:b(()=>[l(x,{field:"name",header:"Quarter",style:{width:"20%"}},{editor:b(({data:i,field:U})=>[l(c,{modelValue:i[U],"onUpdate:modelValue":q=>i[U]=q},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{field:"start_date",header:"Start Date",style:{width:"20%"}},{editor:b(({data:i,field:U})=>[l(S,{modelValue:i[U],"onUpdate:modelValue":q=>i[U]=q,dateFormat:"mm-dd",fluid:"",value:i[U],manualInputs:!1},null,8,["modelValue","onUpdate:modelValue","value"])]),_:1}),l(x,{field:"end_date",header:"End Date",style:{width:"20%"}},{editor:b(({data:i,field:U})=>[l(S,{modelValue:i[U],"onUpdate:modelValue":q=>i[U]=q,dateFormat:"mm-dd",fluid:"",manualInputs:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(x,{field:"year",header:"Year",style:{width:"20%"}},{body:b(({data:i})=>[fe(le(i.year),1)]),editor:b(({data:i,field:U})=>[l(S,{modelValue:i[U],"onUpdate:modelValue":q=>i[U]=q,view:"year",dateFormat:"yy",fluid:"",manualInputs:!1},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(Y)?(g(),ee(x,{key:0,header:" ",rowEditor:!0,style:{width:"1%","margin-right":"-200px","min-width":"6rem",padding:"0 auto"},bodyStyle:"text-align:end",class:""})):R("",!0),t(Y)?R("",!0):(g(),ee(x,{key:1,header:" ",style:{width:"1%","min-width":"6rem","margin-right":"-200px",padding:"0 auto"},bodyStyle:"text-align:end",class:""})),t(O)?(g(),ee(x,{key:2,header:"Action",style:{width:"1%","min-width":"1rem",padding:"0"},bodyStyle:"text-align:end"},{body:b(({data:i})=>[l(d,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger p-button-text",onClick:U=>v(i)},null,8,["onClick"])]),_:1})):R("",!0)]),_:1},8,["editingRows","value","pt","dt"])])])])):R("",!0),l(p,{visible:t($),"onUpdate:visible":o[6]||(o[6]=i=>G($)?$.value=i:null),modal:"",header:"Create Quarter",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{class:"",action:"",onSubmit:pe(f,["prevent"])},[e("div",vo,[e("div",bo,[e("div",ho,[e("div",yo,[go,l(c,{type:"text",modelValue:t(m).name,"onUpdate:modelValue":o[2]||(o[2]=i=>t(m).name=i),placeholder:"Name",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",ko,[e("div",wo,[$o,l(S,{modelValue:t(m).start_date,"onUpdate:modelValue":o[3]||(o[3]=i=>t(m).start_date=i),dateFormat:"mm-dd",fluid:"",manualInputs:!1,class:"w-full",required:"",placeholder:"MM-DD"},null,8,["modelValue"])])]),e("div",So,[e("div",Vo,[Do,l(S,{modelValue:t(m).end_date,"onUpdate:modelValue":o[4]||(o[4]=i=>t(m).end_date=i),dateFormat:"mm-dd",fluid:"",manualInputs:!1,class:"w-full",required:"",placeholder:"MM-DD"},null,8,["modelValue"])])]),e("div",xo,[e("div",Uo,[Co,l(S,{modelValue:t(m).year,"onUpdate:modelValue":o[5]||(o[5]=i=>t(m).year=i),view:"year",dateFormat:"yy",fluid:"",manualInputs:!1,class:"w-full",placeholder:"YYYY"},null,8,["modelValue"])])]),e("p",Fo,le(t(M)),1),e("div",To,[l(d,{label:"Create",severity:"info",type:"submit"})])])])],32)]),_:1},8,["visible"])],64)}}},Mo=xe(Eo,[["__scopeId","data-v-fd9d5cb5"]]);const ne=N=>(Ue("data-v-41b11389"),N=N(),Ce(),N),Io={class:"card"},Ao=ne(()=>e("div",{class:"d-flex mr-2"},[e("h5",{class:"mb-1"},"KPI Report")],-1)),qo={class:"card mx-auto",style:{"max-width":"50rem"}},Bo={class:"grid col-12 w-full"},Lo={class:"col-12 md:col-4"},Po=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Team Member",-1)),Ro={class:"col-12 md:col-4"},Qo=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Quarter",-1)),Ko={class:"col-12 md:col-4"},No=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Deadline",-1)),Oo={key:0,class:""},Wo=["onClick"],zo=ne(()=>e("i",{class:"pi pi-times-circle text-xl"},null,-1)),jo=[zo],Go={class:"w-full col-12 grid"},Yo={class:"col-12 md:col-6"},Ho=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},[fe("Section"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Zo={class:"col-12 md:col-6"},Jo=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},[fe("Sub Section"),e("i",{class:"text-red-400 text-italic"},"*")],-1)),Xo={class:"flex gap-2 w-full"},es={class:"col-12 md:col-6"},ts=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Quarter",-1)),ls={class:"col-12 md:col-6"},as={for:"icondisplay",class:"font-bold block mb-2"},os={class:"col-12"},ss=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Comment",-1)),ns={class:"gap-2 flex justify-content-center w-full"},is={class:""},ds={class:"kpi-form grid"},rs={class:"col-12"},cs=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Select Section:",-1)),us={class:"col-12"},ms={class:"user-selection w-full"},ps=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Title:",-1)),_s={class:"col-12"},fs={class:"user-selection w-full"},vs=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Weightage:",-1)),bs={class:"col-12"},hs={class:"user-selection w-full"},ys=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Mark Type:",-1)),gs={class:"col-12"},ks={class:"user-selection w-full"},ws=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Key result Target:",-1)),$s={class:"col-12"},Ss={class:"user-selection w-full"},Vs=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Comment:",-1)),Ds={class:"col-12"},xs={class:"user-selection w-full"},Us=ne(()=>e("label",{for:"icondisplay",class:"font-bold block mb-2"},"Sub Section Status:",-1)),Cs={class:"col-12 mx-auto flex justify-content-center"},Fs={__name:"index",setup(N){const te=ye(),Z=n(se("read_kpi")),Y=n(se("create_kpi")),O=n(se("read_quater")),E=n(se("read_section")),I=n([]),C=n(""),A=n([]),$=n(""),m=n(""),M=n([]);n("");const F=n([{name:"Active",label:1},{name:"Inactive",label:0}]),T=n(!1),D=n([]);n([]);const v=n({}),f=n([{section_id:null,subsection_id:null,quater_id:null,achive_mark:0,target_mark:0,comment:""}]),r=n(""),o=n(!1),d=n(!1),c=he(),x=(h,u)=>{console.log("check selected section",u),d.value=h,v.value.section=u,console.log("check subsection create",v.value.section)},S=async()=>{var V,y,s;const h=Q("token"),{data:u,pending:L,error:B}=await qe("getMembers22",()=>$fetch(`${te.public.apiUrl}/teams/members`,{headers:{Authorization:`Bearer ${h.value}`}}));console.log("memmbess",(V=u.value)==null?void 0:V.team_members),(y=u.value)!=null&&y.team_members&&(I.value=(s=u.value)==null?void 0:s.team_members.map(a=>({id:a.id,name:a.name})),console.log("employee",C.value))},j=async()=>{var B,V,y;const h=Q("token"),{data:u,error:L}=await z(`${te.public.apiUrl}/kpi-quater/list`,{method:"GET",headers:{Authorization:`Bearer ${h.value}`}},"$LQ1vlojxsA");((V=(B=u.value)==null?void 0:B.data)==null?void 0:V.length)>0&&(A.value=(y=u.value)==null?void 0:y.data)},p=async()=>{var B,V,y;const h=Q("token"),{data:u,error:L}=await z(`${te.public.apiUrl}/kpi/section`,{method:"GET",headers:{Authorization:`Bearer ${h.value}`}},"$aOHxRgEOE3");((V=(B=u.value)==null?void 0:B.data)==null?void 0:V.length)>0&&(M.value=(y=u.value)==null?void 0:y.data)},i=async()=>{var B,V,y;const h=Q("token"),{data:u,error:L}=await z(`${te.public.apiUrl}/kpi/sub-section`,{method:"GET",headers:{Authorization:`Bearer ${h.value}`}},"$QrpcIVwZho");((V=(B=u.value)==null?void 0:B.data)==null?void 0:V.length)>0&&(D.value=(y=u.value)==null?void 0:y.data)},U=async()=>{var V,y;T.value=!0,console.log(Object.keys(v.value));const h=new FormData;if(h.append("section_id",(V=v.value.section)==null?void 0:V.id),h.append("title",v.value.name),h.append("target_mark",v.value.targetMark),h.append("mark_type",v.value.mark_type.label),h.append("weightage",v.value.weightage),h.append("comment",v.value.comment||""),h.append("status",(y=v.value.status)==null?void 0:y.label),!v.value.section||!v.value.name||!v.value.targetMark||!v.value.status)return T.value=!1,c.add({severity:"error",summary:"Failed",detail:"Please fill all required fields",group:"br",life:3e3});const u=Q("token"),{data:L,pending:B}=await z(`${te.public.apiUrl}/kpi/sub-section-create`,{method:"POST",headers:{Authorization:`Bearer ${u.value}`},body:h},"$wlxClc7uGM");L.value?(i(),d.value=!1,v.value={},T.value=!1,c.add({severity:"success",summary:"Updated",detail:"Sub Section Created Successfully",group:"br",life:3e3})):(T.value=!1,c.add({severity:"error",summary:"Failed",detail:"Failed to create sub section!",group:"br",life:3e3}))},q=()=>{const h=f.value[f.value.length-1];if(h.section_id==null)return c.add({severity:"warn",summary:"KPI Information",detail:"Section Not selected",group:"br",life:3e3});if(h.subsection_id==null)return c.add({severity:"warn",summary:"KPI Information",detail:"Sub-section Not selected",group:"br",life:3e3});f.value.push({section_id:null,subsection_id:null,quater_id:null,achive_mark:0,comment:""})};Ne(f,(h,u)=>{console.log(h)});const ae=async()=>{const h=Q("token");if(C.value=="")return c.add({severity:"error",summary:"KPI Information",detail:"Employee not selected",group:"br",life:3e3});if(m.value=="")return c.add({severity:"error",summary:"KPI Information",detail:"Quarter not selected",group:"br",life:3e3});if($.value=="")return c.add({severity:"error",summary:"KPI Information",detail:"Deadline not selected",group:"br",life:3e3});const u=f.value[f.value.length-1];if(u.section_id==null)return c.add({severity:"warn",summary:"KPI Information",detail:"Section Not selected",group:"br",life:3e3});if(u.subsection_id==null)return c.add({severity:"warn",summary:"KPI Information",detail:"Sub-section Not selected",group:"br",life:3e3});const L=f.value.map(y=>({user_id:C.value.id,section_id:y.section_id.id,subsection_id:y.subsection_id.id,quater_id:m.value.id,achive_mark:y.achive_mark,comment:y.comment,deadline:H($.value)})),{data:B,error:V}=await z(`${te.public.apiUrl}/kpi/store`,{method:"POST",headers:{Authorization:`Bearer ${h.value}`},body:L},"$Fnl3NEI4jt");return B.value?(c.add({severity:"success",summary:"KPI Information",detail:"KPI Submission Complete",group:"br",life:3e3}),f.value=[{section_id:null,subsection_id:null,quater_id:null,achive_mark:0,target_mark:0,comment:""}],C.value="",o.value=!1):(o.value=!1,c.add({severity:"error",summary:"Failed",detail:"Failed to submit",group:"br",life:3e3}))},J=h=>{f.value.splice(h,1)},H=h=>{const u=new Date(h);return`${u.getFullYear()}-${("0"+(u.getMonth()+1)).slice(-2)}-${("0"+u.getDate()).slice(-2)}`},ie=h=>{h.index==0&&(S(),j(),p(),i())};S(),j(),p(),i();const re=new Date;return r.value=re.getFullYear(),(h,u)=>{const L=Pe,B=ke,V=Ie,y=be,s=De,a=Re,k=qt,K=wl,w=We,X=Bl,de=uo,we=Mo,ue=Ee;return g(),W(_e,null,[e("div",Io,[l(L,{position:"bottom-right",group:"br"}),Ao,l(w,{onTabChange:ie,class:"mt-3"},{default:b(()=>[t(Z)?(g(),ee(a,{key:0,class:"file-upload",header:"KPI"},{default:b(()=>[l(w,null,{default:b(()=>[t(Y)?(g(),ee(a,{key:0,header:"Generate"},{default:b(()=>[e("div",qo,[e("form",{action:"",class:"grid",style:{gap:"10px"},onSubmit:pe(ae,["prevent"])},[e("div",Bo,[e("div",Lo,[Po,l(B,{modelValue:t(C),"onUpdate:modelValue":u[0]||(u[0]=P=>G(C)?C.value=P:null),options:t(I),optionLabel:"name",placeholder:"Select User",class:"w-full"},null,8,["modelValue","options"])]),e("div",Ro,[Qo,l(B,{modelValue:t(m),"onUpdate:modelValue":u[1]||(u[1]=P=>G(m)?m.value=P:null),options:t(A),optionLabel:"name",placeholder:"Select Quarter",class:"w-full"},null,8,["modelValue","options"])]),e("div",Ko,[No,l(V,{modelValue:t($),"onUpdate:modelValue":u[2]||(u[2]=P=>G($)?$.value=P:null),dateFormat:"dd-mm-yy",placeholder:"DD-MM-YYYY"},null,8,["modelValue"])])]),t(C)!=""&&t(m)!==""?(g(),W("div",Oo,[(g(!0),W(_e,null,Ve(t(f),(P,oe)=>{var $e,_,ve,Be;return g(),W("div",{key:oe,class:"card relative"},[oe!=0?(g(),W("button",{key:0,type:"button",class:"close",onClick:me=>J(oe)},jo,8,Wo)):R("",!0),e("div",Go,[e("div",Yo,[Ho,l(B,{modelValue:t(f)[oe].section_id,"onUpdate:modelValue":me=>t(f)[oe].section_id=me,options:t(M),optionLabel:"name",placeholder:"Select Section",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","options"])]),e("div",Zo,[Jo,e("div",Xo,[l(B,{modelValue:t(f)[oe].subsection_id,"onUpdate:modelValue":me=>t(f)[oe].subsection_id=me,options:(_=($e=t(f)[oe])==null?void 0:$e.section_id)==null?void 0:_.sub_section,optionLabel:"title",placeholder:"Select Sub Section",class:"w-full",style:{"max-width":"17rem"}},null,8,["modelValue","onUpdate:modelValue","options"]),l(y,{onClick:()=>{x(!0,t(f)[oe].section_id)},icon:"pi pi-plus",severity:"success","aria-label":"Add New",class:""},null,8,["onClick"])])]),e("div",es,[ts,l(B,{disabled:"",modelValue:t(m),"onUpdate:modelValue":u[3]||(u[3]=me=>G(m)?m.value=me:null),options:t(A),optionLabel:"name",placeholder:"Select Quarter",class:"w-full"},null,8,["modelValue","options"])]),e("div",ls,[e("label",as,"Achieved Mark (Target: "+le(((ve=t(f)[oe].subsection_id)==null?void 0:ve.target_mark)||0)+le(((Be=t(f)[oe].subsection_id)==null?void 0:Be.mark_type)==1?"%":0)+")",1),l(s,{modelValue:t(f)[oe].achive_mark,"onUpdate:modelValue":me=>t(f)[oe].achive_mark=me,placeholder:"Input Mark",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",os,[ss,l(s,{modelValue:t(f)[oe].comment,"onUpdate:modelValue":me=>t(f)[oe].comment=me,placeholder:"Write comment",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])])])])}),128))])):R("",!0),e("div",ns,[l(y,{label:"New Section",class:"bg-green-500 border-none",onClick:u[4]||(u[4]=pe(P=>q(h.index),["prevent"]))}),l(y,{type:"submit",label:"Submit",class:"",disabled:t(C)===""||t(m)===""||t($)===""},null,8,["disabled"])])],32)])]),_:1})):R("",!0),l(a,{header:"Submission"},{default:b(()=>[l(k,{quater:t(A)},null,8,["quater"])]),_:1}),l(a,{header:"Report"},{default:b(()=>[l(K,{quater:t(A)},null,8,["quater"])]),_:1})]),_:1})]),_:1})):R("",!0),t(E)?(g(),ee(a,{key:1,header:"Daily Report"},{default:b(()=>[l(X)]),_:1})):R("",!0),t(E)?(g(),ee(a,{key:2,header:"Sections"},{default:b(()=>[l(de)]),_:1})):R("",!0),t(O)?(g(),ee(a,{key:3,header:"Quarter"},{default:b(()=>[l(we)]),_:1})):R("",!0)]),_:1})]),l(ue,{visible:t(d),"onUpdate:visible":u[12]||(u[12]=P=>G(d)?d.value=P:null),modal:"",header:"Create Sub Section",style:{width:"40rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:b(()=>[e("form",{class:"",action:"",onSubmit:pe(U,["prevent"])},[e("div",is,[e("div",ds,[e("div",rs,[cs,l(B,{modelValue:t(v).section,"onUpdate:modelValue":u[5]||(u[5]=P=>t(v).section=P),options:t(M),optionLabel:"name",placeholder:"Select Section",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),e("div",us,[e("div",ms,[ps,l(s,{type:"text",modelValue:t(v).name,"onUpdate:modelValue":u[6]||(u[6]=P=>t(v).name=P),placeholder:"Title",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",_s,[e("div",fs,[vs,l(s,{type:"text",modelValue:t(v).weightage,"onUpdate:modelValue":u[7]||(u[7]=P=>t(v).weightage=P),placeholder:"Weightage",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",bs,[e("div",hs,[ys,l(B,{modelValue:t(v).mark_type,"onUpdate:modelValue":u[8]||(u[8]=P=>t(v).mark_type=P),options:[{name:"Percentage (%)",label:1},{name:"Number (01)",label:0}],optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",gs,[e("div",ks,[ws,l(s,{type:"number",modelValue:t(v).targetMark,"onUpdate:modelValue":u[9]||(u[9]=P=>t(v).targetMark=P),placeholder:"Set Target Mark",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",$s,[e("div",Ss,[Vs,l(s,{type:"text",modelValue:t(v).comment,"onUpdate:modelValue":u[10]||(u[10]=P=>t(v).comment=P),placeholder:"Comment",min:"0",class:"w-full"},null,8,["modelValue"])])]),e("div",Ds,[e("div",xs,[Us,l(B,{modelValue:t(v).status,"onUpdate:modelValue":u[11]||(u[11]=P=>t(v).status=P),options:t(F),optionLabel:"name",placeholder:"Select Status",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])])]),e("div",Cs,[l(y,{label:"Create",severity:"info",type:"submit",loading:t(T)},null,8,["loading"])])])])],32)]),_:1},8,["visible"])],64)}}},Dn=xe(Fs,[["__scopeId","data-v-41b11389"]]);export{Dn as default};
