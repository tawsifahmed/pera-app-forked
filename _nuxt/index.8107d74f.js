import G from"./inputtext.esm.522665ec.js";import Q from"./inputicon.esm.cd217e6c.js";import X from"./divider.esm.ccd2f1b3.js";import Z from"./password.esm.311b8fac.js";import ee from"./button.esm.e7b23919.js";import{a2 as se,a3 as ae,a4 as le,cd as re,ae as te,$ as t,V as oe,ar as ie,b as o,i as e,l,u as ue,I as R,q as f,e as c,w as $,t as ne,k as me,F as de,o as i,a8 as ce,a9 as pe,ca as fe}from"./entry.270ea170.js";import{u as ve,a as _e}from"./cookie.ea11622d.js";import{_ as U}from"./avatar.a16da256.js";import he from"./AppConfig.ab7d73fe.js";import{u as ge}from"./layout.536c6dd7.js";import xe from"./toast.esm.f0a01f39.js";import{u as M}from"./auth.018336a5.js";import"./basecomponent.esm.d974fda6.js";import"./index.esm.e66bc844.js";import"./baseicon.esm.35ad2674.js";import"./overlayeventbus.esm.0874a092.js";import"./portal.esm.0b1180d3.js";import"./badge.esm.185cbf9d.js";import"./index.esm.bca9d4ac.js";import"./inputswitch.esm.12cf7498.js";import"./selectbutton.esm.ead06028.js";import"./sidebar.esm.22747a46.js";import"./index.esm.a78582f4.js";import"./index.esm.ca71834f.js";import"./index.esm.197fbc24.js";import"./index.esm.09cf9c34.js";import"./fetch.673ab5ce.js";const n=x=>(ce("data-v-44023a3f"),x=x(),pe(),x),we={class:"surface-ground flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden pt-1"},ye={class:"flex flex-column align-items-center justify-content-center"},be={style:{"border-radius":"56px",padding:"0.3rem",background:"linear-gradient(180deg, var(--primary-color) 10%, rgba(33, 150, 243, 0) 30%)"}},Pe={key:0,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},ke=n(()=>e("div",{class:"text-center mb-5"},[e("img",{src:U,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mb-3"},"Sign Up")],-1)),Ee={class:"field md:w-28rem mb-4"},Ve=n(()=>e("label",{for:"name",class:"block text-900 text-xl font-medium mb-2"},"Full Name",-1)),Se={key:0,id:"name-help",class:"error-report red-text"},Te={class:"field md:w-28rem mb-4"},Ie=n(()=>e("label",{for:"email",class:"block text-900 text-xl font-medium mb-2"},"Work Email",-1)),Ne={key:0,id:"email-help",class:"error-report red-text"},Ce={class:"field md:w-28rem mb-4"},Oe=n(()=>e("label",{for:"password",class:"block text-900 font-medium text-xl mb-2"},"Password",-1)),Re=n(()=>e("h6",null,"Pick a password",-1)),$e=n(()=>e("p",{class:"mt-2"},"Suggestions",-1)),Me=n(()=>e("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[e("li",null,"At least one lowercase"),e("li",null,"At least one uppercase"),e("li",null,"At least one numeric"),e("li",null,"Minimum 8 characters")],-1)),Ue={key:0,id:"password-help",class:"error-report red-text"},Be={class:"field md:w-28rem mb-4"},Ae=n(()=>e("label",{for:"password2",class:"block text-900 font-medium text-xl mb-2"},"Confirm Password",-1)),Fe={key:0,id:"password-help",class:"error-report red-text"},qe={key:1,id:"password-help",class:"error-report red-text"},De={key:1,class:"w-full surface-card py-8 px-5 sm:px-8",style:{"border-radius":"53px"}},je=n(()=>e("div",{class:"text-center mb-5"},[e("img",{src:U,alt:"Image",height:"80",class:"mb-3"}),e("div",{"data-v-d804f83c":"",class:"text-900 text-3xl font-medium mb-3"},"Verify Your Email")],-1)),ze={class:"field md:w-28rem mb-4"},He=n(()=>e("label",{for:"name",class:"block text-900 text-xl font-medium mb-2"},"OTP",-1)),Je={key:0,id:"name-help",class:"error-report red-text"},Le={class:"flex flex-wrap items-center justify-between mt-4"},Ke={key:0},We={key:1,class:""},Ye=["disabled"],Ge={__name:"index",setup(x){const{registerInviteUser:B,otpVerify:A,resendOtp:F}=M(),{authenticated:T,checkOTP:q,resendOtpResponse:D,resendOtpMsg:w}=ae(M()),j=fe(),v=le(),z=re(),H=te(),{layoutConfig:J}=ge(),k=t(),L=t(!0);oe(()=>`/layout/images/${J.darkTheme.value?"logo-white":"logo-dark"}.svg`);const I=t(z.params.register),N=t(!0),E=t(!1),a=t({userName:null,email:null,password:null,confirmPass:null}),d=t({email:null,password:null,otp:null}),s=t({userNameError:!1,emailError:!1,passwordError:!1,confirmPassError:!1,confirmPassMismatch:!1,otpError:!1}),u=t(!1),_=t(),C=t(!1);let V=null;const S=()=>{_.value=30,C.value=!1,V=setInterval(()=>{_.value>0?_.value-=1:(clearInterval(V),C.value=!0)},1e3)},K=async()=>{u.value=!0,a.value.id=I.value,a.value.userName?s.value.userNameError=!1:s.value.userNameError=!0,a.value.email=k.value.email,a.value.password?s.value.passwordError=!1:s.value.passwordError=!0,a.value.confirmPass?s.value.confirmPassError=!1:s.value.confirmPassError=!0,a.value.confirmPass&&a.value.password!==a.value.confirmPass&&(s.value.confirmPassError=!1,s.value.confirmPassMismatch=!0,u.value=!1),a.value.password===a.value.confirmPass&&(s.value.confirmPassMismatch=!1),a.value.confirmPass===""&&(s.value.confirmPassMismatch=!1,s.value.confirmPassError=!0,u.value=!1),s.value.userNameError||s.value.passwordError||s.value.confirmPassError||s.value.confirmPassMismatch||(await B(a.value),q.value===!0?(console.log("authenticated =>",T.value),v.add({severity:"success",summary:"Successfully Registered",detail:"Now verify email using OTP",group:"br",life:3e3}),d.value.email=a.value.email,d.value.password=a.value.password,N.value=!1,E.value=!0,S()):v.add({severity:"error",summary:"Registration Error",detail:"",group:"br",life:3e3})),u.value=!1},W=async()=>{u.value=!0,d.value.email?s.value.emailError=!1:s.value.emailError=!0,d.value.otp?s.value.otpError=!1:s.value.otpError=!0,s.value.emailError||s.value.otpError||(await A(d.value),T.value===!0?(v.add({severity:"success",summary:"Successfully Verified",detail:w,group:"br",life:3e3}),setTimeout(()=>{H.push("/login")},300)):v.add({severity:"error",summary:"Verification Failed",detail:w,group:"br",life:3e3})),u.value=!1},h=t(!1),Y=async()=>{h.value=!0,await F({email:d.value.email}),D.value===!0?(h.value=!1,v.add({severity:"info",summary:"OTP Resent",detail:w,group:"br",life:3e3}),S()):(h.value=!1,v.add({severity:"error",summary:"Error",detail:w,group:"br",life:3e3}))};return ie(()=>E.value,y=>{y?S():clearInterval(V)}),(async()=>{var P,g;const y=ve("token"),{data:r,pending:b,error:p}=await _e(()=>$fetch(`${j.public.apiUrl}/user/`+I.value,{headers:{Authorization:`Bearer ${y.value}`}}),"$EAcdxw7tKJ");(P=r.value)!=null&&P.data&&(k.value=(g=r.value)==null?void 0:g.data,email.value=k.value.email)})(),L.value=!1,(y,r)=>{const b=G,p=Q,P=X,g=Z,O=ee;return i(),o(de,null,[e("div",we,[e("div",ye,[l(ue(xe),{position:"bottom-right",group:"br"}),e("div",be,[N.value?(i(),o("div",Pe,[ke,e("form",{onSubmit:R(K,["prevent"])},[e("div",Ee,[Ve,l(b,{id:"name",modelValue:a.value.userName,"onUpdate:modelValue":r[0]||(r[0]=m=>a.value.userName=m),type:"text",placeholder:"John Doe",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),s.value.userNameError?(i(),o("small",Se,[l(p,{class:"pi pi-exclamation-triangle"}),f(" Full name required! ")])):c("",!0)]),e("div",Te,[Ie,l(b,{disabled:"",id:"email",modelValue:a.value.email,"onUpdate:modelValue":r[1]||(r[1]=m=>a.value.email=m),type:"email",placeholder:"example@gmail.com",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),s.value.emailError?(i(),o("small",Ne,[l(p,{class:"pi pi-exclamation-triangle"}),f(" Email required! ")])):c("",!0)]),e("div",Ce,[Oe,l(g,{id:"password",modelValue:a.value.password,"onUpdate:modelValue":r[2]||(r[2]=m=>a.value.password=m),placeholder:"Password",toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},{header:$(()=>[Re]),footer:$(()=>[l(P),$e,Me]),_:1},8,["modelValue"]),s.value.passwordError?(i(),o("small",Ue,[l(p,{class:"pi pi-exclamation-triangle"}),f(" Password required! ")])):c("",!0)]),e("div",Be,[Ae,l(g,{id:"password2",modelValue:a.value.confirmPass,"onUpdate:modelValue":r[3]||(r[3]=m=>a.value.confirmPass=m),placeholder:"Confirm Password",feedback:!1,toggleMask:!0,class:"w-full",inputClass:"w-full",inputStyle:{padding:"1rem"}},null,8,["modelValue"]),s.value.confirmPassError?(i(),o("small",Fe,[l(p,{class:"pi pi-exclamation-triangle"}),f(" Confirm Password required! ")])):c("",!0),s.value.confirmPassMismatch?(i(),o("small",qe,[l(p,{class:"pi pi-exclamation-triangle"}),f(" Confirm Password did not match! ")])):c("",!0)]),l(O,{type:"submit",label:"Sign Up",loading:u.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32)])):c("",!0),E.value?(i(),o("div",De,[je,e("form",{onSubmit:R(W,["prevent"])},[e("div",ze,[He,l(b,{id:"name",modelValue:d.value.otp,"onUpdate:modelValue":r[4]||(r[4]=m=>d.value.otp=m),type:"text",placeholder:"Enter OTP",class:"w-full",style:{padding:"1rem"}},null,8,["modelValue"]),s.value.otpError?(i(),o("small",Je,[l(p,{class:"pi pi-exclamation-triangle"}),f(" OTP required! ")])):c("",!0)]),l(O,{type:"submit",label:"Verify",loading:u.value,class:"w-full p-3 text-xl"},null,8,["loading"])],32),e("div",Le,[_.value>0?(i(),o("span",Ke,"Resend OTP in "+ne(_.value)+"s",1)):(i(),o("span",We,[f("Resend OTP? Â "),e("button",{onClick:Y,class:me(["forgot_pass md:mb-0 cursor-pointer text-blue-600",h.value?"blink_text":""]),disabled:h.value},"Click Here",10,Ye)]))])])):c("",!0)])])]),l(he,{simple:""})],64)}}},Es=se(Ge,[["__scopeId","data-v-44023a3f"]]);export{Es as default};
