import le from"./toast.esm.4e99d986.js";import{_ as ie}from"./nuxt-link.1634179a.js";import{_ as ae}from"./CreateSpace.54617e40.js";import ne from"./inputicon.esm.8f86592f.js";import G from"./inputtext.esm.8047d0d2.js";import re from"./iconfield.esm.9bf9cd10.js";import J from"./button.esm.55d690cc.js";import ce from"./textarea.esm.54b8f2ee.js";import de from"./multiselect.esm.49deb63f.js";import{a2 as pe,a3 as Q,$ as i,a4 as X,a5 as ue,o as f,b as B,u as o,i as t,l as s,a6 as S,K as Z,t as F,e as x,a7 as me,a8 as ve,q as U,a9 as fe,aa as _e,ab as ye,w as u,s as ge,c as V,P as be,a as xe}from"./entry.e1c0e88c.js";import{u as I}from"./company.cfdd3950.js";import"./colorpicker.esm.483efadc.js";import"./inputswitch.esm.a6ee09cc.js";import H from"./dialog.esm.4c2eb380.js";import{a as O}from"./usePermission.f2ef3c55.js";import N from"./column.esm.bcc460f0.js";import Se from"./datatable.esm.ebe93f42.js";import"./portal.esm.afd7e75b.js";import"./basecomponent.esm.3d4eb624.js";import"./index.esm.ed66ea6d.js";import"./baseicon.esm.9d7b2230.js";import"./index.esm.a7dfedeb.js";import"./index.esm.9f6fb2c0.js";import"./index.esm.500ed3bc.js";import"./workCompany.4fb85ea6.js";import"./cookie.4ac610cc.js";import"./badge.esm.782a7e7b.js";import"./index.esm.19bbf2cf.js";import"./checkbox.esm.6eeb32a6.js";import"./index.esm.a7c42a2e.js";import"./index.esm.7e6d68a5.js";import"./overlayeventbus.esm.fda4f9be.js";import"./virtualscroller.esm.b9c663eb.js";import"./paginator.esm.652ac4fa.js";import"./index.esm.281f3650.js";import"./dropdown.esm.95d4a155.js";import"./inputnumber.esm.72c2fd77.js";import"./index.esm.d2a1dc5f.js";import"./index.esm.b432fde7.js";import"./index.esm.7f6ac9fd.js";import"./index.esm.10b96bd7.js";import"./index.esm.8373fc69.js";import"./radiobutton.esm.dda9b8c2.js";import"./index.esm.33125ab0.js";import"./index.esm.8c54b7f1.js";const P=C=>(me("data-v-d31ca406"),C=C(),ve(),C),Ce={class:""},$e={key:0},ke={class:"field flex flex-column"},he=P(()=>t("label",{for:"name"},[U("Space Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),we={class:"field flex flex-column"},Ee=P(()=>t("label",{for:"name"},"Space Description",-1)),De={class:"field"},Ve=P(()=>t("label",{for:"name"},[U("Space Color"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),Ne={class:"m-0 d-flex colorpicker-wrapper"},Ie={class:"flex justify-center align-items-center"},Ue={class:"ml-2"},Pe={class:"flex"},Ae={class:"field"},Me=P(()=>t("label",null,[U("Space Members"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),Te={key:0,style:{color:"red"}},Be=P(()=>t("br",null,null,-1)),Fe={class:"flex justify-content-end mt-2"},je={__name:"EditSpace",props:["refSpaceId","singleCompany"],emits:["closeEditSpace"],setup(C,{emit:j}){const{editSpace:L}=I(),{isSpaceEdited:h}=Q(I()),A=I(),{refSpaceId:r,singleCompany:R}=C,w=i(!0),M=i(!1),m=i(!1),$=i(!1),E=X(),v=i(r==null?void 0:r.color),n=i(r==null?void 0:r.name),k=i(r==null?void 0:r.description),d=i([]),_=i(r==null?void 0:r.users.map(c=>({id:c.id,name:c.name})));ue(async()=>{await A.getTaskAssignModalData(),d.value=A.users}),i(null),console.log("spaceAvatarPreview",v.value);const p=c=>{v.value=c},y=j,g=i(!1),K=async()=>{if(m.value=!1,$.value=!1,g.value=!0,n.value===null||n.value===""){m.value=!0,g.value=!1;return}if(_.value.length===0){$.value=!0,g.value=!1;return}else{const c={id:r.id,name:n.value,description:k.value,company_id:R.id,color:v.value,users:_.value.map(e=>e.id)};await L(c),h.value===!0?(w.value=!1,g.value=!1,y("closeEditSpace",!1),E.add({severity:"success",summary:"Successful",detail:"Space Updated Successfully",group:"br",life:3e3}),console.log("space created")):(g.value=!1,E.add({severity:"error",summary:"Error",detail:"Unable to update space",group:"br",life:3e3}),console.log("space not created"))}},q=()=>{y("closeEditSpace",!1)};return(c,e)=>{const Y=G,D=ce,z=de,T=J;return f(),B("div",Ce,[o(w)?(f(),B("div",$e,[t("div",ke,[he,s(Y,{id:"name",modelValue:o(n),"onUpdate:modelValue":e[0]||(e[0]=a=>S(n)?n.value=a:null),required:"true",invalid:o(m)},null,8,["modelValue","invalid"])]),t("div",we,[Ee,s(D,{id:"description",class:"border-gray-300",modelValue:o(k),"onUpdate:modelValue":e[1]||(e[1]=a=>S(k)?k.value=a:null),rows:"3",cols:"20",invalid:c.spaceDescriptionError},null,8,["modelValue","invalid"])]),t("div",De,[Ve,t("div",Ne,[t("div",Ie,[t("div",{id:"dynamic-div",style:Z(`background-color: ${o(v)};`),class:"d-flex align-items-center justify-content-center text-3xl text-white"},F(o(n)?o(n).charAt(0).toUpperCase():"S"),5),t("div",Ue,[t("div",Pe,[t("div",{id:"white",class:"color",onClick:e[2]||(e[2]=a=>p("#e5ded4"))}),t("div",{id:"gray",class:"color",onClick:e[3]||(e[3]=a=>p("#9e9e9e"))}),t("div",{id:"orange",class:"color",onClick:e[4]||(e[4]=a=>p("#ff9800"))}),t("div",{id:"purple",class:"color",onClick:e[5]||(e[5]=a=>p("#9c27b0"))}),t("div",{id:"cadetblue",class:"color",onClick:e[6]||(e[6]=a=>p("#e91e63"))}),t("div",{id:"burlywood",class:"color",onClick:e[7]||(e[7]=a=>p("#4caf50"))}),t("div",{id:"pink",class:"color",onClick:e[8]||(e[8]=a=>p("#f44336"))}),t("div",{id:"lightseagreen",class:"color",onClick:e[9]||(e[9]=a=>p("#009688"))}),t("div",{id:"brown",class:"color",onClick:e[10]||(e[10]=a=>p("#795548"))}),t("div",{id:"cyan",class:"color",onClick:e[11]||(e[11]=a=>p("#00bcd4"))}),t("div",{id:"amber",class:"color",onClick:e[12]||(e[12]=a=>p("#ffc107"))}),t("div",{id:"indigo",class:"color",onClick:e[13]||(e[13]=a=>p("#3f51b5"))})])])])])]),t("div",Ae,[Me,s(z,{display:"chip",modelValue:o(_),"onUpdate:modelValue":e[14]||(e[14]=a=>S(_)?_.value=a:null),options:o(d),filter:"",optionLabel:"name",placeholder:"Select Space Members",class:"w-full",invalid:o($)},null,8,["modelValue","options","invalid"])]),o(M)?(f(),B("p",Te," Please fill/check up all the fields")):x("",!0)])):x("",!0),Be,t("div",Fe,[s(T,{label:"Cancel",icon:"pi pi-times",text:"",onClick:q}),s(T,{loading:o(g),label:"Save",icon:"pi pi-check",text:"",onClick:K},null,8,["loading"])])])}}},Le=pe(je,[["__scopeId","data-v-d31ca406"]]);const Re={class:"card"},Ke={class:"d-flex create-space-btn-wrapper mb-3"},qe={class:"breadCrumWrap"},Ye=t("p",{class:"pi pi-angle-right"},null,-1),ze=t("p",{class:"pi pi-angle-right"},null,-1),He={class:"text"},Oe={class:"create-btn-wrapper"},We={class:"flex justify-content-end mb-2"},Ge=t("i",{class:"pi pi-search"},null,-1),Je=t("p",{class:"py-2 text-center"},"No Data found...",-1),Qe={class:"cursor-pointer com-name hover:text-primary font-semibold"},Xe=t("p",null,"Are you sure you want to delete?",-1),Ze=t("p",null,"Are you sure you want to delete?",-1),zt={__name:"index",setup(C){const{getSingleCompany:j,deleteSpace:L}=I(),{singleCompany:h,singleCompanySpaces:A,isSpaceDeleted:r}=Q(I()),R=i(O("create_space")),w=i(O("update_space")),M=i(O("delete_space")),m=i(),$=i(!0),E=X(),{companies:v}=fe().params;if(console.log("companyParams,",v),i(!1),h.value===void 0)throw _e({statusCode:404,message:"Company not found",fatal:!0});const n=i(null),k=c=>{n.value=c,console.log("refCompanyId",n.value),d.value=!0},d=i(!1),_=async()=>{console.log("refCompanyIdFin",n.value),await L(n.value,v),r.value===!0?(E.add({severity:"success",summary:"Successful",detail:"Space Deleted Successfully",group:"br",life:3e3}),d.value=!1,console.log("space deleted")):(E.add({severity:"error",summary:"Error",detail:"Unable to delete space",group:"br",life:3e3}),console.log("space not deleted"))};(()=>{m.value={global:{value:null,matchMode:be.CONTAINS}}})();const y=i(!1),g=c=>{y.value=!0,n.value=c,console.log("refSpaceId",n.value)};ye(()=>{j(v),$.value=!1,console.log("company,",v)});const K=c=>{y.value=c},q=i(!0);return(c,e)=>{var W;const Y=le,D=ie,z=ae,T=ne,a=G,ee=re,b=J,te=Le,oe=xe("tooltip");return f(),B("div",Re,[s(Y,{position:"bottom-right",group:"br"}),t("div",Ke,[t("div",qe,[s(D,{to:"/",class:"text pi pi-home"}),Ye,s(D,{to:"/companies",class:"text"},{default:u(()=>[U("Companies")]),_:1}),ze,t("p",He,"Company - "+F((W=o(h))==null?void 0:W.name),1)]),t("div",Oe,[o(R)?ge((f(),V(z,{key:0,spacePage:o(q)},null,8,["spacePage"])),[[oe,{value:"Create Space"},void 0,{left:!0}]]):x("",!0)])]),t("div",We,[s(ee,{iconPosition:"right"},{default:u(()=>[s(T,null,{default:u(()=>[Ge]),_:1}),s(a,{modelValue:o(m).global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>o(m).global.value=l),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),s(o(Se),{filters:o(m),"onUpdate:filters":e[1]||(e[1]=l=>S(m)?m.value=l:null),class:"table-dco",value:o(A),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:o($)},{empty:u(()=>[Je]),loading:u(()=>[U(" Loading data. Please wait. ")]),default:u(()=>[s(o(N),{field:"index",header:"Serial",sortable:""}),s(o(N),{field:"name",header:"Space Name"},{body:u(l=>[s(D,{to:`/companies/${o(v)}/spaces/${l.data.id}`},{default:u(()=>[t("p",Qe,F(l.data.name),1)]),_:2},1032,["to"])]),_:1}),s(o(N),{field:"description",header:"Description"}),s(o(N),{field:"color",header:"Space Color"},{body:u(l=>[t("div",{id:"dynamic-div",style:Z(`background-color: ${l.data.color}; width: 30px;`),class:"flex font-semibold justify-content-center rounded py-2 px-2 w-fit text-white"},F(l.data.name?l.data.name.charAt(0).toUpperCase():"S"),5)]),_:1}),s(o(N),{field:"action",header:"Action"},{body:u(l=>[o(w)?(f(),V(b,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:se=>g(l.data)},null,8,["onClick"])):x("",!0),o(M)?(f(),V(b,{key:1,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:se=>k(l.data.id)},null,8,["onClick"])):x("",!0),o(w)?x("",!0):(f(),V(b,{key:2,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",style:{visibility:"hidden"}})),o(M)?x("",!0):(f(),V(b,{key:3,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",style:{visibility:"hidden"}}))]),_:1})]),_:1},8,["filters","value","loading"]),s(o(H),{visible:o(d),"onUpdate:visible":e[3]||(e[3]=l=>S(d)?d.value=l:null),header:" ",style:{width:"25rem"}},{default:u(()=>[Xe,s(b,{label:"No",icon:"pi pi-times",text:"",onClick:e[2]||(e[2]=l=>d.value=!1)}),s(b,{label:"Yes",icon:"pi pi-check",text:"",onClick:_})]),_:1},8,["visible"]),s(o(H),{visible:o(d),"onUpdate:visible":e[5]||(e[5]=l=>S(d)?d.value=l:null),header:" ",style:{width:"25rem"}},{default:u(()=>[Ze,s(b,{label:"No",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=l=>d.value=!1)}),s(b,{label:"Yes",icon:"pi pi-check",text:"",onClick:_})]),_:1},8,["visible"]),s(o(H),{visible:o(y),"onUpdate:visible":e[7]||(e[7]=l=>S(y)?y.value=l:null),modal:"",header:"Edit Space",style:{width:"32rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:u(()=>[s(te,{refSpaceId:o(n),singleCompany:o(h),onCloseEditSpace:e[6]||(e[6]=l=>K(l))},null,8,["refSpaceId","singleCompany"])]),_:1},8,["visible"])])}}};export{zt as default};
