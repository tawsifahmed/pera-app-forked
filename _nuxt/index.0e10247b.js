import N from"./button.esm.cc72e76b.js";import Z from"./column.esm.da38bc26.js";import ee from"./datatable.esm.3866a673.js";import E from"./dialog.esm.d829ef8f.js";import j from"./multiselect.esm.73ea04ee.js";import{a2 as W,a5 as te,a6 as G,$ as n,ar as se,a as J,o as $,b as D,c as oe,w as v,l as d,i as e,u as p,bO as O,t as B,F as A,f as H,q as ae,e as le,a9 as T,s as w,a3 as K,a4 as Q,ca as X,a7 as ie}from"./entry.f5ea297c.js";import{u as U,a as P}from"./cookie.451fffa9.js";import{u as ne}from"./workCompany.2075752e.js";import{s as Y}from"./editor.esm.bd0f1a0e.js";import"./badge.esm.6fb23254.js";import"./basecomponent.esm.d5209ab2.js";import"./index.esm.0994c14c.js";import"./baseicon.esm.8a0a1832.js";import"./paginator.esm.1a14a9e3.js";import"./index.esm.3ff8e66c.js";import"./dropdown.esm.33fa9d59.js";import"./index.esm.64e38950.js";import"./index.esm.31c8a365.js";import"./index.esm.c964197b.js";import"./index.esm.8b7ef7ae.js";import"./overlayeventbus.esm.6a0a7c71.js";import"./portal.esm.236df3f1.js";import"./virtualscroller.esm.1bb55791.js";import"./inputnumber.esm.c5dd3651.js";import"./index.esm.a645f14e.js";import"./index.esm.194c5417.js";import"./inputtext.esm.2b814e00.js";import"./index.esm.76b8004b.js";import"./index.esm.255e5ed6.js";import"./index.esm.511d1595.js";import"./checkbox.esm.916dfb07.js";import"./radiobutton.esm.25c738f2.js";import"./index.esm.99a6f8cd.js";import"./index.esm.55e172f5.js";import"./index.esm.1e25f32f.js";const x=r=>(K("data-v-9da9c3d7"),r=r(),Q(),r),re=["onClick"],de={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},ce={class:""},ue={class:"title"},pe=x(()=>e("p",{class:""},"Participants:",-1)),me={class:""},be={class:"perticipants"},ve={class:"flex gap-1 flex-wrap"},_e={class:""},fe=["innerHTML"],he={class:"flex-auto"},ye=x(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),ge={class:"ql-formats flex justify-content-end mr-0"},we={class:"ql-bold"},ke={class:"ql-italic"},Se={class:"ql-underline"},$e={class:"ql-strike"},xe=x(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),Me=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),De=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),qe=x(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Re={class:"flex-auto"},Ue=x(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ve={__name:"ScrumTable",props:["scrumData","fetchData","employees","totalRecords"],setup(r){const{scrumData:q,fetchData:L,employees:z,totalRecords:F}=r;te(ne());const _=G(),h=n(!1);n(!1);const f=n(!1);n([]);const b=n(null),m=n(" "),y=n(""),V=X(),k=n(!1),C=t=>{console.log(t),b.value=t,h.value=!0},I=async t=>{t.preventDefault(),isSubmitting.value=!0;try{const s=U("token"),o=new FormData;o.append("space_id",selectedSpace.value.id),o.append("description",m.value),y.value.forEach(u=>o.append("user_ids[]",u.id));const c=await $fetch(`${V.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`},body:o});createModal.value=!1,_.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(s){console.error("Submission failed:",s),_.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}};se(m,t=>{t.length===0&&(m.value=" ")});const g=async t=>{var i,a,S;const s=U("token");k.value=!0;const{data:o,pending:c,error:u}=await P("scrumData",()=>$fetch(`${V.public.apiUrl}/scrum-meeting/list?page=${t.page+1}&limit=${t.rows}`,{headers:{Authorization:`Bearer ${s.value}`}}));return((a=(i=o.value)==null?void 0:i.data)==null?void 0:a.length)>0&&(q.value=(S=o.value)==null?void 0:S.data),k.value=!1};return(t,s)=>{const o=Z,c=N,u=ee,i=E,a=j,S=J("tooltip");return $(),D(A,null,[r.scrumData&&r.scrumData.length>0?($(),oe(u,{key:0,class:"table-st",value:r.scrumData,rowHover:!0,paginator:!0,rows:10,stripedRows:"",scrollable:"",tableStyle:"min-width: 50rem",totalRecords:r.totalRecords,loading:p(k),rowsPerPageOptions:[5,10,20,50],onPage:g},{default:v(()=>[d(o,{style:{width:"12%"},field:"meeting_date",header:"Date"},{body:v(l=>[e("div",{class:"cursor-pointer",onClick:()=>C(("toRaw"in t?t.toRaw:p(O))(l.data))},B(l.data.meeting_date),9,re)]),_:1}),d(o,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:v(l=>[e("div",de,[($(!0),D(A,null,H(l.data.user_ids,R=>($(),D("div",{class:"border rounded",key:R.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",ce,B(R.name),1)]))),128))])]),_:1}),d(o,{style:{width:"3%"},field:"actions",header:"Actions"},{body:v(l=>[d(c,{severity:"info",rounded:"",text:"",type:"button",onClick:()=>C(("toRaw"in t?t.toRaw:p(O))(l.data)),icon:"pi pi-pencil",class:""},{default:v(()=>[ae("View")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","totalRecords","loading"])):le("",!0),d(i,{lazy:"true",visible:p(h),"onUpdate:visible":s[0]||(s[0]=l=>T(h)?h.value=l:null),modal:"",header:"Scrum Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:v(()=>{var l;return[e("div",ue,[pe,e("p",me,B(p(b).meeting_date),1)]),e("div",be,[e("div",ve,[($(!0),D(A,null,H(p(b).user_ids,R=>($(),D("div",{class:"border rounded",key:R.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",_e,B(R.name),1)]))),128))])]),e("div",{class:"details",innerHTML:(l=p(b))==null?void 0:l.description},null,8,fe)]}),_:1},8,["visible"]),d(i,{lazy:"true",visible:p(f),"onUpdate:visible":s[3]||(s[3]=l=>T(f)?f.value=l:null),modal:"",header:"Update Scrum",dismissableMask:"true",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:I,class:"form",action:""},[e("div",he,[ye,d(p(Y),{modelValue:p(m),"onUpdate:modelValue":s[1]||(s[1]=l=>T(m)?m.value=l:null),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",ge,[w(e("button",we,null,512),[[S,"Bold",void 0,{bottom:!0}]]),w(e("button",ke,null,512),[[S,"Italic",void 0,{bottom:!0}]]),w(e("button",Se,null,512),[[S,"Underline",void 0,{bottom:!0}]]),w(e("button",$e,null,512),[[S,"Strikethrough",void 0,{bottom:!0}]]),xe,Me,De,qe])]),_:1},8,["modelValue"])]),e("div",Re,[Ue,d(a,{id:"members",display:"chip",modelValue:p(y),"onUpdate:modelValue":s[2]||(s[2]=l=>T(y)?y.value=l:null),options:r.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),d(c,{label:t.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:t.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Ce=W(Ve,[["__scopeId","data-v-9da9c3d7"]]);const M=r=>(K("data-v-bce93524"),r=r(),Q(),r),Be={class:"card"},Te={class:"header"},Ae=M(()=>e("h3",null,"Meeting Minutes",-1)),Le={class:"flex-auto"},ze=M(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Fe={class:"ql-formats flex justify-content-end mr-0"},Ie={class:"ql-bold"},Pe={class:"ql-italic"},Oe={class:"ql-underline"},He={class:"ql-strike"},Ne=M(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),Ee=M(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),je=M(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),We=M(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ge={class:"flex-auto"},Je=M(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ke={__name:"index",setup(r){const q=X(),L=G(),z=n(0),F=n([]),_=n(!1),h=n([]),f=n(""),b=n(""),m=n(!1),y=n(!0),V=async g=>{g.preventDefault(),m.value=!0;try{const t=U("token"),s=new FormData;s.append("description",b.value),f.value.forEach(c=>s.append("user_ids[]",c.id));const o=await $fetch(`${q.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${t.value}`},body:s});console.log("Submission successful:",o),_.value=!1,L.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),b.value="",f.value="",k()}catch(t){console.error("Submission failed:",t),L.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{m.value=!1}},k=async()=>{var c,u,i,a;y.value=!0;const g=U("token"),{data:t,pending:s,error:o}=await P("scrumData",()=>$fetch(`${q.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${g.value}`}}));return((u=(c=t.value)==null?void 0:c.data)==null?void 0:u.length)>0&&(F.value=(i=t.value)==null?void 0:i.data,z.value=(a=t.value)==null?void 0:a.totalRecords),y.value=!1},C=async()=>{var c,u,i;const g=U("token"),{data:t,pending:s,error:o}=await P("taskAssignModalData",()=>$fetch(`${q.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${g.value}`}}));((u=(c=t.value)==null?void 0:c.data)==null?void 0:u.length)>0&&(h.value=(i=t.value)==null?void 0:i.data.map(a=>({name:a.name,id:a.id})))};ie(()=>{C(),k()});const I=()=>{_.value=!1,b.value="",f.value=""};return(g,t)=>{const s=N,o=Ce,c=j,u=E,i=J("tooltip");return $(),D(A,null,[e("div",Be,[e("header",Te,[Ae,d(s,{onClick:t[0]||(t[0]=a=>_.value=!_.value),icon:"pi pi-plus",severity:"secondary"})]),d(o,{scrumData:F.value,fetchData:k,employees:h.value,totalRecords:z.value},null,8,["scrumData","employees","totalRecords"])]),d(u,{lazy:"true",loading:y.value,visible:_.value,"onUpdate:visible":[t[3]||(t[3]=a=>_.value=a),I],modal:"",header:"New Scrum",dismissableMask:"true",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:V,class:"form",action:""},[e("div",Le,[ze,d(p(Y),{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=a=>b.value=a),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",Fe,[w(e("button",Ie,null,512),[[i,"Bold",void 0,{bottom:!0}]]),w(e("button",Pe,null,512),[[i,"Italic",void 0,{bottom:!0}]]),w(e("button",Oe,null,512),[[i,"Underline",void 0,{bottom:!0}]]),w(e("button",He,null,512),[[i,"Strikethrough",void 0,{bottom:!0}]]),Ne,Ee,je,We])]),_:1},8,["modelValue"])]),e("div",Ge,[Je,d(c,{id:"members",display:"chip",modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),options:h.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),d(s,{label:m.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:m.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},Vt=W(Ke,[["__scopeId","data-v-bce93524"]]);export{Vt as default};
