import De from"./toast.esm.d6307c83.js";import de from"./button.esm.b0938963.js";import Se from"./inputicon.esm.a57fdced.js";import ce from"./inputtext.esm.9731008c.js";import Ce from"./iconfield.esm.3e676cc5.js";import Ee from"./toolbar.esm.7cfd6792.js";import Ie from"./progressspinner.esm.c351167d.js";import{a2 as ue,$ as l,a4 as me,a5 as pe,a6 as ye,a as Ne,o as k,b as I,i as t,q as C,s as be,l as a,u as e,a7 as h,e as j,a8 as ve,a9 as fe,ca as _e,w as f,P as Ue,c as ne,t as X,F as ge,f as xe,K as Be}from"./entry.a108e2da.js";import{u as P,a as Ae}from"./cookie.fcc06399.js";import{u as he}from"./fetch.bca51f34.js";import F from"./column.esm.6854465f.js";import Fe from"./datatable.esm.e0c33493.js";import Te from"./textarea.esm.492cc698.js";import $e from"./dropdown.esm.3f73977e.js";import we from"./multiselect.esm.bcf6e217.js";import{u as ee}from"./company.32131650.js";import{a as Z}from"./usePermission.32e04ebf.js";import re from"./dialog.esm.fb85d07e.js";import"./portal.esm.3dc66d4a.js";import"./basecomponent.esm.d3ddefe6.js";import"./index.esm.176b61e6.js";import"./baseicon.esm.dd86c4df.js";import"./index.esm.e6d5ed48.js";import"./index.esm.08e16c87.js";import"./index.esm.eeace9ff.js";import"./badge.esm.18927dfa.js";import"./index.esm.42bf455b.js";import"./paginator.esm.9ff7e11a.js";import"./index.esm.da2c0e72.js";import"./inputnumber.esm.ab06beaf.js";import"./index.esm.a2b575a4.js";import"./index.esm.6162c81c.js";import"./index.esm.4a0984e2.js";import"./index.esm.1e684607.js";import"./index.esm.528207a6.js";import"./overlayeventbus.esm.537f8c16.js";import"./virtualscroller.esm.cee164c6.js";import"./index.esm.f63ace50.js";import"./index.esm.06300656.js";import"./checkbox.esm.1464606a.js";import"./radiobutton.esm.8443d4e3.js";import"./index.esm.ffd1aa37.js";import"./index.esm.cdd9fbb9.js";import"./workCompany.486f05bf.js";const te=c=>(ve("data-v-8b705925"),c=c(),fe(),c),Oe={class:"field"},ze={for:"company"},qe=te(()=>t("i",{class:"text-red-400"},"*",-1)),je={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},He={class:"field flex flex-column"},Ke={for:"email"},Re={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Qe={class:"field flex flex-column"},Ye=te(()=>t("label",null,[C("Line Manager"),t("i",{class:"text-red-400"},"*")],-1)),Ge={class:"field flex flex-column"},Je=te(()=>t("label",null,[C("Team Lead"),t("i",{class:"text-red-400"},"*")],-1)),We={class:"field"},Xe=te(()=>t("label",null,[C("Team Members"),t("i",{class:"text-red-400"},"*")],-1)),Ze={key:0,style:{color:"red"}},Pe={class:"create-btn-wrapper mb-0"},et={__name:"CreateTeam",props:{param:{type:Object,required:!0}},emits:["closeCreateModal"],setup(c,{emit:H}){const O=_e(),A=l(c.param.usersLists),m=l([]),L=l([]),V=l([]),p=me(),_=l(""),v=l(""),y=l(!1),b=l(!1),T=l(!0),$=H,w=l(!1),z=async()=>{var i;if(w.value=!0,_.value===""||m.value.length===0||L.value.length===0||V.value.length===0){b.value=!0,w.value=!1;return}else if(b.value=!1,!b.value){const n=P("token"),{data:u,error:r,pending:g}=await he(`${O.public.apiUrl}/teams/create`,{method:"POST",headers:{Authorization:`Bearer ${n.value}`},body:{name:_.value,description:v.value,team_lead_id:m.value.id,line_manager_id:L.value.id,members:V.value.map(D=>D.id)}},"$LDh3IAOr92");if(((i=u==null?void 0:u.value)==null?void 0:i.code)===201){w.value=!1,_.value=null,v.value=null,m.value=[],L.value=[],V.value=[],T.value=!1,$("closeCreateModal",!1),p.add({severity:"success",summary:"Success",detail:"Team created successfully!",group:"br",life:3e3});return}else{w.value=!1,p.add({severity:"error",summary:"Error",detail:"Failed to create team!",group:"br",life:3e3});return}}};return pe(()=>{const i=document.getElementById("createTeamName");ye(()=>{i&&i.focus()})}),(i,n)=>{const u=ce,r=Te,g=$e,D=we,E=de,N=Ne("tooltip");return k(),I("div",null,[t("div",Oe,[t("label",ze,[C("Name"),qe,be(t("span",je,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(u,{id:"createTeamName",modelValue:e(_),"onUpdate:modelValue":n[0]||(n[0]=x=>h(_)?_.value=x:null),class:"w-full"},null,8,["modelValue"])]),t("div",He,[t("label",Ke,[C("Description "),be(t("span",Re,null,512),[[N,{value:"Demo Text Text Demo Text Text Demo Text Text Demo Text Text Demo Text Text."},void 0,{right:!0}]])]),a(r,{id:"description",class:"border-gray-300",modelValue:e(v),"onUpdate:modelValue":n[1]||(n[1]=x=>h(v)?v.value=x:null),rows:"3",cols:"20",invalid:e(y)},null,8,["modelValue","invalid"])]),t("div",Qe,[Ye,a(g,{modelValue:e(L),"onUpdate:modelValue":n[2]||(n[2]=x=>h(L)?L.value=x:null),options:e(A),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",Ge,[Je,a(g,{modelValue:e(m),"onUpdate:modelValue":n[3]||(n[3]=x=>h(m)?m.value=x:null),options:e(A),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",We,[Xe,a(D,{display:"chip",modelValue:e(V),"onUpdate:modelValue":n[4]||(n[4]=x=>h(V)?V.value=x:null),options:e(A),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e(b)?(k(),I("p",Ze,"Please fill/check up all the fields")):j("",!0),t("div",Pe,[a(E,{loading:e(w),label:"Save",icon:"pi pi-check",text:"",onClick:z},null,8,["loading"])])])}}},tt=ue(et,[["__scopeId","data-v-8b705925"]]);const Q=c=>(ve("data-v-e4bdffc0"),c=c(),fe(),c),lt={class:"field"},at=Q(()=>t("label",{for:"company"},[C("Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ot={class:"field flex flex-column"},st=Q(()=>t("label",{for:"email"},"Description",-1)),it={class:"field flex flex-column"},nt=Q(()=>t("label",null,[C("Line Manager"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),rt={class:"field flex flex-column"},dt=Q(()=>t("label",null,[C("Team Lead"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),ct={class:"field"},ut=Q(()=>t("label",null,[C("Team Members"),t("i",{class:"text-red-400 text-italic"},"*")],-1)),mt={key:0,style:{color:"red"}},pt={class:"create-btn-wrappe"},vt={__name:"EditTeam",props:{param:{type:Object,required:!0}},emits:["closeEditModal"],setup(c,{emit:H}){const O=ee(),{getTaskAssignModalData:K}=ee(),A=_e(),m=c,L=me(),V=l(m.param.id),p=l(m.param.editName),_=l(m.param.editDescription),v=l(m.param.editLineManager),y=l(m.param.editTeamLead),b=l(m.param.editMembers),T=l(O.users),$=l(!1),w=l(!0),z=H,i=l(!1),n=async()=>{var u;if(i.value=!0,p.value===""||y.value.length===0||v.value.length===0||b.value.length===0){$.value=!0,i.value=!1;return}else if($.value=!1,!$.value){const r=P("token"),{data:g,error:D,pending:E}=await he(`${A.public.apiUrl}/teams/update/${V.value}`,{method:"POST",headers:{Authorization:`Bearer ${r.value}`},body:{name:p.value,description:_.value,team_lead_id:y.value.id,line_manager_id:v.value.id,members:b.value.map(N=>N.id)}},"$L7Q6VHiEVV");if(((u=g==null?void 0:g.value)==null?void 0:u.code)===200){i.value=!1,w.value=!1,z("closeEditModal",!1),L.add({severity:"success",summary:"Success",detail:"Team Updated successfully!",group:"br",life:3500});return}else{i.value=!1,L.add({severity:"error",summary:"Error",detail:"Failed to update team!",group:"br",life:3e3});return}}};return pe(async()=>{await K(),T.value=O.users;const u=document.getElementById("editTeamName");ye(()=>{u&&u.focus()})}),(u,r)=>{const g=ce,D=Te,E=$e,N=we,x=de;return k(),I("div",null,[t("div",lt,[at,a(g,{id:"editTeamName",modelValue:e(p),"onUpdate:modelValue":r[0]||(r[0]=M=>h(p)?p.value=M:null),class:"w-full"},null,8,["modelValue"])]),t("div",ot,[st,a(D,{id:"description",class:"border-gray-300",modelValue:e(_),"onUpdate:modelValue":r[1]||(r[1]=M=>h(_)?_.value=M:null),rows:"3",cols:"20",invalid:u.teamDescriptionError},null,8,["modelValue","invalid"])]),t("div",it,[nt,a(E,{modelValue:e(v),"onUpdate:modelValue":r[2]||(r[2]=M=>h(v)?v.value=M:null),options:e(T),optionLabel:"name",placeholder:"Select Line Manager",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",rt,[dt,a(E,{modelValue:e(y),"onUpdate:modelValue":r[3]||(r[3]=M=>h(y)?y.value=M:null),options:e(T),optionLabel:"name",placeholder:"Select Team Lead",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"])]),t("div",ct,[ut,a(N,{display:"chip",modelValue:e(b),"onUpdate:modelValue":r[4]||(r[4]=M=>h(b)?b.value=M:null),options:e(T),filter:"",optionLabel:"name",placeholder:"Select Team Members",class:"w-full"},null,8,["modelValue","options"])]),e($)?(k(),I("p",mt,"Please fill/check up all the fields")):j("",!0),t("div",pt,[a(x,{label:"Update",icon:"pi pi-check",text:"",onClick:n,loading:e(i)},null,8,["loading"])])])}}},ft=ue(vt,[["__scopeId","data-v-e4bdffc0"]]);const le=c=>(ve("data-v-3c1e03dc"),c=c(),fe(),c),_t={key:0,class:"card"},ht={class:"d-flex mr-2"},bt=le(()=>t("div",{class:"d-flex mr-2"},[t("h5",{class:"mb-1"},"Teams")],-1)),gt=le(()=>t("i",{class:"pi pi-search"},null,-1)),xt=le(()=>t("p",{class:"text-center"},"No Data found...",-1)),yt={style:{display:"flex","flex-wrap":"wrap"}},Tt=le(()=>t("p",null,"Are you sure you want to delete?",-1)),$t={__name:"index",setup(c){const H=ee(),{getTaskAssignModalData:O}=ee(),K=_e(),A=l(Z("read_team")),m=l(Z("create_team")),L=l(Z("update_team")),V=l(Z("delete_team")),p=l(),_=l(!0),v=l(!1),y=l(!1),b=me(),T=l(!1),$=l(!1),w=l([]),z=l([]),i=l(!1),n=l(""),u=l(""),r=l(""),g=l(null),D=l(null),E=l(null),N=d=>{T.value=!1,Y()},x=d=>{$.value=!1,Y()},M=async()=>{v.value=!0,await O(),w.value=H.users,T.value=!0,v.value=!1},ke=d=>{console.log("editTeamdata",d),n.value=d.id,$.value=!0,u.value=d.name,r.value=d.description,g.value={id:d.children.data.id,name:d.children.data.name},console.log("editLineManager",g.value),D.value={id:d.children.children.data.id,name:d.children.children.data.name},console.log("editTeamLead",D.value),E.value=d.children.children.children.map(s=>({id:s.data.id,name:s.data.name})),console.log("editMembers",E.value)},Le=d=>{i.value=!0,n.value=d},Me=async()=>{y.value=!0;const d=P("token"),{data:s,pending:ae}=await he(`${K.public.apiUrl}/teams/delete/${n.value}`,{method:"DELETE",headers:{Authorization:`Bearer ${d.value}`}},"$0jIuqBy51n");s.value.code===200?(i.value=!1,b.add({severity:"success",summary:"Success",detail:"Employee Deleted successfully!",group:"br",life:3e3}),y.value=!1,Y()):(b.add({severity:"error",summary:"Error",detail:"Employee Deleted Failed!",group:"br",life:3e3}),y.value=!1)},Y=async()=>{var G,J,W;const d=P("token"),{data:s,pending:ae,error:q}=await Ae("getTeams",()=>$fetch(`${K.public.apiUrl}/teams/list`,{headers:{Authorization:`Bearer ${d.value}`}}));((J=(G=s.value)==null?void 0:G.data)==null?void 0:J.length)>0&&(z.value=(W=s.value)==null?void 0:W.data.map((oe,se)=>({...oe,index:se+1})))},Ve=()=>{p.value={global:{value:null,matchMode:Ue.CONTAINS}}};return pe(()=>{Y(),_.value=!1}),Ve(),(d,s)=>{const ae=De,q=de,G=Se,J=ce,W=Ce,oe=Ee,se=Ie;return e(A)?(k(),I("div",_t,[t("div",ht,[a(ae,{position:"bottom-right",group:"br"}),bt]),a(oe,{class:"border-0 px-0"},{start:f(()=>[e(m)?(k(),ne(q,{key:0,icon:"pi pi-plus",label:"Create",onClick:M,class:"mr-2",severity:"secondary",loading:e(v)},null,8,["loading"])):j("",!0)]),end:f(()=>[a(W,{iconPosition:"right",raised:""},{default:f(()=>[a(G,null,{default:f(()=>[gt]),_:1}),a(J,{modelValue:e(p).global.value,"onUpdate:modelValue":s[0]||(s[0]=o=>e(p).global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),a(e(Fe),{filters:e(p),"onUpdate:filters":s[1]||(s[1]=o=>h(p)?p.value=o:null),class:"table-st",value:e(z),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:15,dataKey:"id",filterDisplay:"menu",loading:e(_)},{empty:f(()=>[xt]),loading:f(()=>[a(se,{style:{width:"50px",height:"50px"}})]),footer:f(()=>[C(" In total there are "+X(e(w)?e(w).length:0)+" rows. ",1)]),default:f(()=>[a(e(F),{field:"index",header:"Serial",sortable:"",style:{width:"5%"}}),a(e(F),{field:"name",header:"Team Name",style:{width:"15%"}}),a(e(F),{field:"description",header:"Description",style:{width:"20%"}}),a(e(F),{field:"Line Manager",header:"Line Manager",style:{width:"10%"}},{body:f(o=>{var S,U,B;return[t("div",null,X((B=(U=(S=o==null?void 0:o.data)==null?void 0:S.children)==null?void 0:U.data)==null?void 0:B.name),1)]}),_:1}),a(e(F),{field:"Line Manager",header:"Team Lead",style:{width:"10%"}},{body:f(o=>{var S,U,B,R;return[t("div",null,X((R=(B=(U=(S=o==null?void 0:o.data)==null?void 0:S.children)==null?void 0:U.children)==null?void 0:B.data)==null?void 0:R.name),1)]}),_:1}),a(e(F),{field:"Members",header:"Members",style:{width:"30%"}},{body:f(o=>{var S,U,B;return[t("div",yt,[(k(!0),I(ge,null,xe((B=(U=(S=o==null?void 0:o.data)==null?void 0:S.children)==null?void 0:U.children)==null?void 0:B.children,R=>(k(),I("div",{key:R,style:{display:"flex","flex-wrap":"wrap",gap:"5px"}},[(k(!0),I(ge,null,xe(R,ie=>(k(),I("div",{key:ie},[t("div",{class:"mb-1",style:Be(ie.name?"border: 1px solid rgba(167, 167, 167, 0.486); border-radius: 5px; padding: 2px 5px":" ")},X(ie.name),5)]))),128))]))),128))])]}),_:1}),a(e(F),{field:"action",header:"Action",style:{width:"10%"}},{body:f(o=>[e(L)?(k(),ne(q,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:S=>ke(o.data)},null,8,["onClick"])):j("",!0),e(V)?(k(),ne(q,{key:1,icon:"pi pi-trash",text:"",class:"",severity:"warning",rounded:"",onClick:S=>Le(o.data.id)},null,8,["onClick"])):j("",!0)]),_:1})]),_:1},8,["filters","value","loading"]),a(e(re),{visible:e(T),"onUpdate:visible":s[3]||(s[3]=o=>h(T)?T.value=o:null),modal:"",header:"Create Team",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[a(tt,{param:{usersLists:e(w)},onCloseCreateModal:s[2]||(s[2]=o=>N(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(re),{visible:e($),"onUpdate:visible":s[5]||(s[5]=o=>h($)?$.value=o:null),modal:"",header:"Edit Team",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[a(ft,{param:{id:e(n),editName:e(u),editDescription:e(r),editLineManager:e(g),editTeamLead:e(D),editMembers:e(E)},onCloseEditModal:s[4]||(s[4]=o=>x(o))},null,8,["param"])]),_:1},8,["visible"]),a(e(re),{visible:e(i),"onUpdate:visible":s[7]||(s[7]=o=>h(i)?i.value=o:null),header:" ",style:{width:"25rem"}},{default:f(()=>[Tt,a(q,{label:"No",icon:"pi pi-times",text:"",onClick:s[6]||(s[6]=o=>i.value=!1)}),a(q,{label:"Yes",icon:"pi pi-check",text:"",onClick:Me,loading:e(y)},null,8,["loading"])]),_:1},8,["visible"])])):j("",!0)}}},vl=ue($t,[["__scopeId","data-v-3c1e03dc"]]);export{vl as default};
