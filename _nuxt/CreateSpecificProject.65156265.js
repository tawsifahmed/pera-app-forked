import ie from"./button.esm.cf9d0562.js";import re from"./inputtext.esm.6420a228.js";import ue from"./textarea.esm.ed68f9d3.js";import ce from"./inputgroupaddon.esm.c31a89b4.js";import de from"./inputgroup.esm.40457bbc.js";import pe from"./dropdown.esm.50168ae5.js";import me from"./dialog.esm.80bb630d.js";import{d as ve}from"./vuedraggable.umd.c43b9d33.js";import{ao as fe,a4 as _e,a3 as ke,$ as n,V as O,ar as M,a as ge,o as k,b as g,l as i,k as Se,w as S,u as a,i as t,q as x,t as he,a7 as f,s as V,e as B,K as xe,a6 as Ce}from"./entry.96805b80.js";import z from"./colorpicker.esm.7c420859.js";import{u as ye,a as be}from"./cookie.7ef5219e.js";import{u as we}from"./workCompany.f58fea20.js";import{u as Ne}from"./company.31771ef8.js";const Pe=we(),Ve=Ne(),A=fe("workProjects",{state:()=>({isProjectCreated:null}),getters:{save(u){return u.isProjectCreated}},actions:{async createProjects({name:u,description:C,space_id:y,statuses:j}){var c;const E=ye("token"),{data:D,pending:G}=await be("https://pbe.singularitybd.net/api/v1/projects/create",{method:"POST",headers:{Authorization:`Bearer ${E.value}`},body:{name:u,description:C,space_id:y,statuses:j}},"$h5ITqNs3Yo");((c=D.value)==null?void 0:c.app_message)==="success"&&(this.isProjectCreated=!0,await Pe.getCompany(),await Ve.getSingleSpace(y))}}});const je={class:"field"},De={for:"name"},Te={class:"field"},$e=t("label",{for:"name"},[x("Project Name"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Ie={class:"field"},Ue=t("label",{for:"name"},"Project Description ",-1),Oe={class:"mb-4"},Be=t("p",{class:"text-slate-700 mb-2 tracking-wide left-3"},[x("Setup Task Status"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Ee={class:"container"},qe=t("p",{class:"pi pi-plus cursor-pointer"},null,-1),Fe={key:0,class:"text-red-600 text-small"},Le={class:"row mt-2"},Me={class:"col-12 d-flex flex-column p-0"},ze=["onMouseenter"],Ae={style:{"margin-right":"-4px"},width:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",class:"cu-status-manager-status-list-item__drag-handler-icon"},Ge=t("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"},[t("circle",{cx:"5",cy:"5",r:"1"}),t("circle",{cx:"5",cy:"12",r:"1"}),t("circle",{cx:"5",cy:"19",r:"1"}),t("circle",{cx:"12",cy:"5",r:"1"}),t("circle",{cx:"12",cy:"12",r:"1"}),t("circle",{cx:"12",cy:"19",r:"1"})],-1),He=[Ge],Re={class:"flex align-items-center",style:{width:"89%"}},We=["onClick"],Ke=t("p",{class:"pi pi-times"},null,-1),Xe=[Ke],Ye={class:"mb-4"},Je=t("p",{class:"text-slate-700 mb-2 tracking-wide left-3"},[x("Set Task Close Status"),t("i",{class:"text-red-400 text-italic"},"*")],-1),Qe={class:"container"},Ze={class:"field"},et={key:0,class:"text-red-600 text-small"},tt={key:0,class:"text-center",style:{color:"red"}},ft={__name:"CreateSpecificProject",props:["singleSpace","spaces","isPage"],setup(u){const C=_e(),y=A(),{save:j}=ke(A()),{singleSpace:E,spaces:D,isPage:G}=u,c=n(!1),T=n(!1),H=n(!0),q=n(!1),$=n(null),R=n(!0),W=O(()=>({animation:250,group:"tasks",disabled:!R.value,ghostClass:"ghost"})),K=O(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",margin:"8px 0px"})),X=O(()=>({backgroundColor:"#f9f9f9",boxShadow:"0px 4px 4px #e2e2e3",cursor:"grab",margin:"8px 0px"})),d=n(""),s=n([{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}]),b=n("6466f1"),F=n(null),w=n(!1),Y=n(!1),p=n(null),m=n(""),J=()=>{var o;if(d.value?w.value=!1:w.value=!0,((o=d==null?void 0:d.value)==null?void 0:o.length)>0){const e={taskStatusName:d.value,taskStatusColor:`#${b.value}`,is_closed_status:0,serial_no:s.value.length+1};s.value.push(e),d.value=""}else w.value=!0;s.value.length>0&&(F.value=!0)},Q=o=>{var e,v;s.value.splice(o,1),((e=r.value)==null?void 0:e.is_closed_status)===((v=s.value[o])==null?void 0:v.is_closed_status)&&(r.value=null),s.value.length==0&&(F.value=!1)},r=n(null);M(r,o=>{o&&s.value.forEach(e=>{e.is_closed_status=e.taskStatusName===o.taskStatusName?1:0}),console.log("taskStatusList",s.value)}),M(s,o=>{o.forEach((e,v)=>{e.serial_no=v+1})});const h=n(!1),Z=async()=>{if(h.value=!0,p.value===null||s.value.length<=0||r.value===null)T.value=!0,h.value=!1;else{T.value=!1,s.value=s.value.map(e=>(e.taskStatusColor.startsWith("#")||(e.taskStatusColor=`#${e.taskStatusColor}`),e));const o={name:p.value,description:m.value,space_id:D,statuses:s.value};console.log("statuses",s.value),await y.createProjects(o),j.value===!0?(c.value=!1,p.value=null,m.value=null,s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value=null,h.value=!1,C.add({severity:"success",summary:"Success!",detail:"Project created successfully!",group:"br",life:3e3})):(C.add({severity:"error",summary:"Failed",detail:"Project creation Failed!",group:"br",life:3e3}),h.value=!1,c.value=!0)}},ee=async()=>{if(c.value=!0,c.value){console.log("isOpen"),await Ce();let o=document.getElementById("createProjectName");o&&o.focus()}},te=()=>{c.value=!1,p.value&&(p.value=null),m.value&&(m.value=null),s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value&&(r.value=null),d.value=""},se=()=>{p.value&&(p.value=null),m.value&&(m.value=null),s.value=[{taskStatusName:"Open",taskStatusColor:"#6466f1",is_closed_status:0,serial_no:1},{taskStatusName:"Doing",taskStatusColor:"#ff0084",is_closed_status:0,serial_no:2},{taskStatusName:"Dev Done",taskStatusColor:"#12955d",is_closed_status:0,serial_no:3}],r.value&&(r.value=null),d.value=""};return(o,e)=>{const v=ie,I=re,ae=ue,L=ce,le=de,oe=pe,ne=me,N=ge("tooltip");return k(),g("div",null,[i(v,{icon:u.isPage?"":"pi pi-plus",class:Se(u.isPage?"btn-primary cursor-pointer text-white px-5 py-2":"p-button-sm"),label:u.isPage?"Create +":"",onClick:ee,severity:u.isPage?"primary":"secondary","aria-label":"Bookmark",text:!u.isPage},null,8,["icon","class","label","severity","text"]),i(ne,{visible:a(c),"onUpdate:visible":[e[9]||(e[9]=P=>f(c)?c.value=P:null),se],style:{width:"450px"},header:"Create Project",modal:!0,class:"p-fluid"},{footer:S(()=>[i(v,{label:"Cancel",icon:"pi pi-times",text:"",onClick:te}),i(v,{loading:a(h),label:"Save",icon:"pi pi-check",text:"",onClick:Z},null,8,["loading"])]),default:S(()=>{var P;return[t("div",je,[t("label",De,[x("Create project for "),t("strong",null,he((P=u.singleSpace)==null?void 0:P.name),1),x(" space")])]),t("div",Te,[$e,i(I,{id:"createProjectName",modelValue:a(p),"onUpdate:modelValue":e[0]||(e[0]=l=>f(p)?p.value=l:null),required:"true"},null,8,["modelValue"])]),t("div",Ie,[Ue,i(ae,{id:"description",class:"border-gray-300",modelValue:a(m),"onUpdate:modelValue":e[1]||(e[1]=l=>f(m)?m.value=l:null),rows:"3",cols:"20"},null,8,["modelValue"])]),t("div",Oe,[Be,t("div",Ee,[i(le,null,{default:S(()=>[i(L,null,{default:S(()=>[V(i(a(z),{class:"color-pick",style:{width:"1.5rem"},modelValue:a(b),"onUpdate:modelValue":e[2]||(e[2]=l=>f(b)?b.value=l:null),inputId:"cp-hex",format:"hex"},null,8,["modelValue"]),[[N,{value:"Pick Color"},void 0,{left:!0}]])]),_:1}),V(i(I,{class:"form-control",modelValue:a(d),"onUpdate:modelValue":e[3]||(e[3]=l=>f(d)?d.value=l:null),placeholder:"e.g., TO-DO, DOING"},null,8,["modelValue"]),[[N,{value:"Type Status Name"},void 0,{top:!0}]]),i(L,{onClick:J,class:"btn btn-outline-secondary cursor-pointer"},{default:S(()=>[qe]),_:1})]),_:1}),a(w)?(k(),g("p",Fe,"Please type status name!")):B("",!0),t("div",Le,[t("div",Me,[i(a(ve),{modelValue:a(s),"onUpdate:modelValue":e[5]||(e[5]=l=>f(s)?s.value=l:null),options:a(W),disabled:!a(H),class:"list-group","ghost-class":"ghost",move:o.checkMove,onStart:e[6]||(e[6]=l=>q.value=!0),onEnd:e[7]||(e[7]=l=>q.value=!1)},{item:S(({element:l,index:U})=>[(k(),g("div",{class:"flex delete-task justify-content-between",style:xe(a($)===U?a(X):a(K)),onMouseenter:_=>$.value=U,onMouseleave:e[4]||(e[4]=_=>$.value=null),key:l.id},[(k(),g("svg",Ae,He)),t("div",Re,[V(i(a(z),{class:"color-pick mr-2 status-colors border-none",modelValue:l.taskStatusColor,"onUpdate:modelValue":_=>l.taskStatusColor=_,inputId:"cp-hex",format:"hex"},null,8,["modelValue","onUpdate:modelValue"]),[[N,{value:"Change Color"},void 0,{left:!0}]]),V(i(I,{class:"text-uppercase text-muteds w-full",id:"name",modelValue:l.taskStatusName,"onUpdate:modelValue":_=>l.taskStatusName=_,required:"true"},null,8,["modelValue","onUpdate:modelValue"]),[[N,{value:"Change Status Name"},void 0,{left:!0}]])]),t("div",{onClick:_=>Q(U),class:"cursor-pointer cross-icon ms-1 flex justify-content-center align-items-center"},Xe,8,We)],44,ze))]),_:1},8,["modelValue","options","disabled","move"])])])])]),t("div",Ye,[Je,t("div",Qe,[t("div",Ze,[i(oe,{modelValue:a(r),"onUpdate:modelValue":e[8]||(e[8]=l=>f(r)?r.value=l:null),options:a(s),optionLabel:"taskStatusName",placeholder:"Select Status",class:"w-full"},null,8,["modelValue","options"])]),a(Y)?(k(),g("p",et,"Please set close status!")):B("",!0)])]),a(T)?(k(),g("p",tt,"Please add/fill/check up all the fields")):B("",!0)]}),_:1},8,["visible"])])}}};export{ft as _};
