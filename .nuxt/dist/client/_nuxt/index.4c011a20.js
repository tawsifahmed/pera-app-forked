import G from"./button.esm.388dac8c.js";import oe from"./column.esm.0e7ea2df.js";import ae from"./datatable.esm.79293d9e.js";import J from"./dialog.esm.882b91ad.js";import K from"./multiselect.esm.f7939525.js";import{a2 as Q,a3 as le,a4 as X,$ as i,ar as ie,a as Y,o as x,b as C,c as ne,w as h,l,i as e,u as d,bO as re,t as E,F as H,f as P,e as ce,a7 as O,s as $,a8 as Z,a9 as ee,ca as te,a5 as de}from"./entry.301ffb3a.js";import{u as V,a as W}from"./cookie.92fabe3b.js";import{u as ue}from"./workCompany.3516056b.js";import{s as se}from"./editor.esm.7aa490bb.js";import"./badge.esm.8601ea29.js";import"./basecomponent.esm.3ef3224a.js";import"./index.esm.34d947f9.js";import"./baseicon.esm.ae76dc18.js";import"./paginator.esm.53ed8919.js";import"./index.esm.0eaa7c6d.js";import"./dropdown.esm.64eb9ca6.js";import"./index.esm.a4fbc4b7.js";import"./index.esm.0c3c4133.js";import"./index.esm.3cb2c250.js";import"./index.esm.304061f5.js";import"./overlayeventbus.esm.6d6e2075.js";import"./portal.esm.21667c44.js";import"./virtualscroller.esm.6321cf3d.js";import"./inputnumber.esm.850e79d6.js";import"./index.esm.96d7a8d4.js";import"./index.esm.0b4b155a.js";import"./inputtext.esm.785b4390.js";import"./index.esm.976e0566.js";import"./index.esm.f65fce28.js";import"./index.esm.fc3355bd.js";import"./checkbox.esm.b0f3ce9e.js";import"./radiobutton.esm.9223a76d.js";import"./index.esm.1c2b60d2.js";import"./index.esm.cee30326.js";import"./index.esm.e8f446c1.js";const M=n=>(Z("data-v-4b245bf2"),n=n(),ee(),n),pe=["onClick"],me={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},be={class:""},ve={class:"title"},_e=M(()=>e("p",{class:""},"Participants:",-1)),fe={class:""},he={class:"perticipants"},ye={class:"flex gap-1"},ge={class:""},$e=["innerHTML"],Se={class:"flex-auto"},ke=M(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),we={class:"ql-formats flex justify-content-end mr-0"},xe={class:"ql-bold"},Me={class:"ql-italic"},De={class:"ql-underline"},qe={class:"ql-strike"},Ue=M(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),Re=M(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Ce=M(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Ve=M(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Be={class:"flex-auto"},Te=M(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ae={__name:"ScrumTable",props:["scrumData","fetchData","employees","totalRecords"],setup(n){const{scrumData:B,fetchData:L,employees:z,totalRecords:N}=n;le(ue());const u=X(),y=i(!1),q=i(!1),g=i(!1),U=i([]),b=i(null),v=i(" "),_=i(""),T=te(),p=i(!1),o=t=>{console.log(t),b.value=t,y.value=!0},m=async t=>{try{const s=V("token"),r=await $fetch(`${T.public.apiUrl}/scrum-meeting/delete/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s.value}`}});return q.value=!1,u.add({severity:"success",summary:"Meeting Minutes",detail:"Deleted successfully!",group:"br",life:3e3}),L()}catch(s){console.error("Submission failed:",s),u.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to Delete Meeting Minutes",group:"br",life:3e3})}finally{q.value=!1}},S=async t=>{t.preventDefault(),isSubmitting.value=!0;try{const s=V("token"),r=new FormData;r.append("space_id",selectedSpace.value.id),r.append("description",v.value),_.value.forEach(F=>r.append("user_ids[]",F.id));const R=await $fetch(`${T.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`},body:r});console.log("Submission successful:",R),createModal.value=!1,u.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(s){console.error("Submission failed:",s),u.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}},c=async t=>{console.log(t),console.log("employees",z),b.value=t.data,g.value=!0,v.value=t.data.description,_.value=t.data.user_ids,U.value=t.data.space_id};ie(v,t=>{t.length===0&&(v.value=" ")});const f=async t=>{var A,I,k;const s=V("token");p.value=!0;const{data:r,pending:R,error:F}=await W("scrumData",()=>$fetch(`${T.public.apiUrl}/scrum-meeting/list?page=${t.page+1}&limit=${t.rows}`,{headers:{Authorization:`Bearer ${s.value}`}}));return((I=(A=r.value)==null?void 0:A.data)==null?void 0:I.length)>0&&(B.value=(k=r.value)==null?void 0:k.data),p.value=!1};return(t,s)=>{const r=oe,R=G,F=ae,A=J,I=K,k=Y("tooltip");return x(),C(H,null,[n.scrumData&&n.scrumData.length>0?(x(),ne(F,{key:0,class:"table-st",value:n.scrumData,rowHover:!0,paginator:!0,rows:10,stripedRows:"",tableStyle:"min-width: 50rem",totalRecords:n.totalRecords,loading:d(p),rowsPerPageOptions:[5,10,20,50],onPage:f},{default:h(()=>[l(r,{style:{width:"2%"},field:"id",header:"Serial"}),l(r,{style:{width:"10%"},field:"meeting_date",header:"Date"},{body:h(a=>[e("div",{class:"cursor-pointer",onClick:()=>o(("toRaw"in t?t.toRaw:d(re))(a.data))},E(a.data.meeting_date),9,pe)]),_:1}),l(r,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:h(a=>[e("div",me,[(x(!0),C(H,null,P(a.data.user_ids,w=>(x(),C("div",{class:"border rounded",key:w.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",be,E(w.name),1)]))),128))])]),_:1}),l(r,{style:{width:"3%"},field:"actions",header:"Actions"},{body:h(a=>[l(R,{severity:"info",rounded:"",text:"",type:"button",onClick:w=>c(a),icon:"pi pi-pencil",class:""},null,8,["onClick"]),l(R,{severity:"danger",rounded:"",text:"",type:"button",onClick:w=>{var j;return m((j=a==null?void 0:a.data)==null?void 0:j.id)},icon:"pi pi-trash",class:""},null,8,["onClick"])]),_:1})]),_:1},8,["value","totalRecords","loading"])):ce("",!0),l(A,{lazy:"true",visible:d(y),"onUpdate:visible":s[0]||(s[0]=a=>O(y)?y.value=a:null),modal:"",header:"Scrum Details",style:{minWidth:"35vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:h(()=>{var a;return[e("div",ve,[_e,e("p",fe,E(d(b).meeting_date),1)]),e("div",he,[e("div",ye,[(x(!0),C(H,null,P(d(b).user_ids,w=>(x(),C("div",{class:"border rounded",key:w.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",ge,E(w.name),1)]))),128))])]),e("div",{class:"details",innerHTML:(a=d(b))==null?void 0:a.description},null,8,$e)]}),_:1},8,["visible"]),l(A,{lazy:"true",visible:d(g),"onUpdate:visible":s[3]||(s[3]=a=>O(g)?g.value=a:null),modal:"",header:"Update Scrum",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:h(()=>[e("form",{onSubmit:S,class:"form",action:""},[e("div",Se,[ke,l(d(se),{modelValue:d(v),"onUpdate:modelValue":s[1]||(s[1]=a=>O(v)?v.value=a:null),editorStyle:"height: 200px"},{toolbar:h(()=>[e("span",we,[$(e("button",xe,null,512),[[k,"Bold",void 0,{bottom:!0}]]),$(e("button",Me,null,512),[[k,"Italic",void 0,{bottom:!0}]]),$(e("button",De,null,512),[[k,"Underline",void 0,{bottom:!0}]]),$(e("button",qe,null,512),[[k,"Strikethrough",void 0,{bottom:!0}]]),Ue,Re,Ce,Ve])]),_:1},8,["modelValue"])]),e("div",Be,[Te,l(I,{id:"members",display:"chip",modelValue:d(_),"onUpdate:modelValue":s[2]||(s[2]=a=>O(_)?_.value=a:null),options:n.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),l(R,{label:t.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:t.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Le=Q(Ae,[["__scopeId","data-v-4b245bf2"]]);const D=n=>(Z("data-v-81070886"),n=n(),ee(),n),ze={class:"card"},Fe={class:"header"},Ie=D(()=>e("h3",null,"Meeting Minutes",-1)),Ee={class:"flex-auto"},Oe=D(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),He={class:"ql-formats flex justify-content-end mr-0"},Ne={class:"ql-bold"},We={class:"ql-italic"},je={class:"ql-underline"},Pe={class:"ql-strike"},Ge=D(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),Je=D(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Ke=D(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Qe=D(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Xe={class:"flex-auto"},Ye=D(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ze={__name:"index",setup(n){const B=te(),L=X(),z=i(0),N=i([]),u=i(!1),y=i([]),q=i(""),g=i(""),U=i(!1),b=i(!0),v=async p=>{p.preventDefault(),U.value=!0;try{const o=V("token"),m=new FormData;m.append("description",g.value),q.value.forEach(c=>m.append("user_ids[]",c.id));const S=await $fetch(`${B.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${o.value}`},body:m});console.log("Submission successful:",S),u.value=!1,L.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),_()}catch(o){console.error("Submission failed:",o),L.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{U.value=!1}},_=async()=>{var c,f,t,s;b.value=!0;const p=V("token"),{data:o,pending:m,error:S}=await W("scrumData",()=>$fetch(`${B.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${p.value}`}}));return((f=(c=o.value)==null?void 0:c.data)==null?void 0:f.length)>0&&(N.value=(t=o.value)==null?void 0:t.data,z.value=(s=o.value)==null?void 0:s.totalRecords),b.value=!1},T=async()=>{var c,f,t;const p=V("token"),{data:o,pending:m,error:S}=await W("taskAssignModalData",()=>$fetch(`${B.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${p.value}`}}));((f=(c=o.value)==null?void 0:c.data)==null?void 0:f.length)>0&&(y.value=(t=o.value)==null?void 0:t.data.map(s=>({name:s.name,id:s.id})))};return de(()=>{T(),_()}),(p,o)=>{const m=G,S=Le,c=K,f=J,t=Y("tooltip");return x(),C(H,null,[e("div",ze,[e("header",Fe,[Ie,l(m,{onClick:o[0]||(o[0]=s=>u.value=!u.value),icon:"pi pi-plus",severity:"secondary"})]),l(S,{scrumData:N.value,fetchData:_,employees:y.value,totalRecords:z.value},null,8,["scrumData","employees","totalRecords"])]),l(f,{lazy:"true",loading:b.value,visible:u.value,"onUpdate:visible":o[3]||(o[3]=s=>u.value=s),modal:"",header:"New Scrum",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:h(()=>[e("form",{onSubmit:v,class:"form",action:""},[e("div",Ee,[Oe,l(d(se),{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=s=>g.value=s),editorStyle:"height: 200px"},{toolbar:h(()=>[e("span",He,[$(e("button",Ne,null,512),[[t,"Bold",void 0,{bottom:!0}]]),$(e("button",We,null,512),[[t,"Italic",void 0,{bottom:!0}]]),$(e("button",je,null,512),[[t,"Underline",void 0,{bottom:!0}]]),$(e("button",Pe,null,512),[[t,"Strikethrough",void 0,{bottom:!0}]]),Ge,Je,Ke,Qe])]),_:1},8,["modelValue"])]),e("div",Xe,[Ye,l(c,{id:"members",display:"chip",modelValue:q.value,"onUpdate:modelValue":o[2]||(o[2]=s=>q.value=s),options:y.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),l(m,{label:U.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:U.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},At=Q(Ze,[["__scopeId","data-v-81070886"]]);export{At as default};
