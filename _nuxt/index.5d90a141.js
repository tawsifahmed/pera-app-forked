import{_ as pe}from"./nuxt-link.d5d115f9.js";import le from"./button.esm.a55c2431.js";import{_ as ue,a as me}from"./CreateCompany.62a05c47.js";import _e from"./inputicon.esm.d7523654.js";import oe from"./inputtext.esm.5cd40da3.js";import ye from"./iconfield.esm.1b32a169.js";import ve from"./dialog.esm.0b6d087d.js";import be from"./dropdown.esm.4fa36b0b.js";import{ao as ae,a2 as G,a3 as ie,$ as i,a as fe,o as r,b as w,i as l,l as s,u as t,a5 as k,e as U,q as T,s as ge,ap as se,aq as ne,a8 as he,at as xe,c as R,w as y,P as Ce,t as we}from"./entry.570ab878.js";import{u as H}from"./company.198e2c6a.js";import A from"./column.esm.6208f1b7.js";import ke from"./datatable.esm.3837e306.js";import"./toast.esm.ef8cdcd7.js";import{a as Y}from"./usePermission.23a55d5e.js";import{u as te}from"./workCompany.886927d5.js";import"./badge.esm.54d3e6c5.js";import"./basecomponent.esm.c7fbaad5.js";import"./index.esm.b72e702d.js";import"./baseicon.esm.c7f0dea4.js";import"./index.esm.c6f3b761.js";import"./portal.esm.1e4af6e4.js";import"./index.esm.330f474a.js";import"./index.esm.d468d720.js";import"./index.esm.2cce7489.js";import"./overlayeventbus.esm.c91907e9.js";import"./virtualscroller.esm.84c3372a.js";import"./cookie.3ed14f9e.js";import"./fetch.11b9759f.js";import"./paginator.esm.23dce669.js";import"./index.esm.c592065e.js";import"./inputnumber.esm.9d737ca0.js";import"./index.esm.bb3da758.js";import"./index.esm.e450f24c.js";import"./index.esm.f3846021.js";import"./index.esm.b806f7cb.js";import"./index.esm.feb1baca.js";import"./checkbox.esm.1ad534d4.js";import"./radiobutton.esm.b232767f.js";import"./index.esm.a8b59750.js";import"./index.esm.ecdc2543.js";import"./index.esm.2547ec1e.js";import"./index.esm.417f68ee.js";const I=u=>(se("data-v-9756644b"),u=u(),ne(),u),Se={class:"position-relative flex flex-column justify-content-between w-100 modal-container"},$e={class:"field"},Ee=I(()=>l("label",{for:"company"},[T("Company Size"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),Ve={class:"field"},Ne=I(()=>l("label",{for:"worktype"},[T("Company Work Type?"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),Ue={class:"field"},Me=I(()=>l("label",{for:"email"},[T("Email Address"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),De={key:0,class:"text-danger text-center text-xs mt-2"},Le={class:"field"},Te=I(()=>l("label",{for:"company"},[T("Company Name"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),Ie={class:"field mb-0"},Re={class:"mb-0",for:"company"},Ae={class:"pi pi-info-circle cursor-pointer ml-1 text-sm instruction-tip"},Oe={class:"relative w-fit mx-auto"},Fe=["src"],je={key:1,src:ue,alt:"",style:{height:"60px",width:"60px","border-radius":"100%","object-fit":"cover",border:"1px solid gray"}},ze={class:"img-label"},Be={key:0,for:"imageCancel"},He={key:1,for:"image"},qe=I(()=>l("i",{class:"pi pi-plus",style:{color:"red",right:"0.2rem",bottom:"0.2rem","z-index":"5","background-color":"white",padding:"5px","border-radius":"20px","box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px",cursor:"pointer"}},null,-1)),Je=[qe],Ke=["v-model"],We=I(()=>l("br",null,null,-1)),Ze={key:0,style:{color:"red"}},Ye={class:"create-btn-wrapper"},Ge={__name:"EditCompany",props:["refCompanyId"],emits:["closeEditModal"],setup(u,{emit:q}){const{editCompany:F,getCompanyList:J}=H(),{isCompanyEdited:f}=G(H()),{refCompanyId:e}=u,M=q,S=ie();i(!1);const c=i();c.value=e!=null&&e.number_of_employees?{id:e==null?void 0:e.number_of_employees,label:e==null?void 0:e.number_of_employees}:"";const j=i([{id:"1-10",label:"1-10"},{id:"11-25",label:"11-25"},{id:"26-250",label:"26-250"},{id:"251-500",label:"251-500"},{id:"501-2000",label:"501-2000"}]),g=i(e!=null&&e.company_type?{id:e==null?void 0:e.company_type,label:e==null?void 0:e.company_type}:""),K=i([{id:"PMO",label:"PMO"},{id:"Finance & Accounting",label:"Finance & Accounting"},{id:"HR & Recruiting",label:"HR & Recruiting"},{id:"Operations",label:"Operations"},{id:"Support",label:"Support"},{id:"Sales & CRM",label:"Sales & CRM"},{id:"Personal Use",label:"Personal Use"},{id:"IT",label:"IT"},{id:"Creative & Design",label:"Creative & Design"},{id:"Personal Services",label:"Personal Services"},{id:"Marketing",label:"Marketing"},{id:"Engineering & Production",label:"Engineering & Production"},{id:"Other",label:"Other"}]),h=i(e==null?void 0:e.email),W=_=>String(_).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),x=i(null),$=i(null);x.value=e==null?void 0:e.email;const z=()=>{$.value=!1,h.value,W(h.value)!==null?(x.value=h.value,$.value=!0):(x.value=null,$.value=!1)},m=i(e==null?void 0:e.name),E=i(e==null?void 0:e.logo),v=i(null),B=i(null),C=_=>{v.value=_.target.files[0],E.value=URL.createObjectURL(v.value)},b=()=>{v.value=null,E.value=null,B.value.value=null},D=i(!1),V=i(!1),Q=async()=>{var _,a;if(V.value=!0,c.value===null||g.value===null||x.value===null||m.value===null||m.value===""){D.value=!0,V.value=!1;return}else{D.value=!1;let n=(_=c.value)==null?void 0:_.label,N=(a=g.value)==null?void 0:a.label;console.log("company type",g.value.label);const d={id:e.id,name:m.value,email:x.value,address:null,contact_number:null,number_of_employees:n,company_type:N,logo:v.value?v.value:null};console.log("workspaceData",d),await F(d),f.value===!0?(M("closeEditModal",!1),S.add({severity:"success",summary:"Success",detail:"Company edited successfully!",group:"br",life:3e3}),console.log("company edited"),V.value=!1):(console.log("company not edited"),S.add({severity:"error",summary:"Error",detail:"Unable to edit company!",group:"br",life:3e3}),V.value=!1)}};return(_,a)=>{const n=be,N=oe,d=le,Z=fe("tooltip");return r(),w("div",Se,[l("div",$e,[Ee,s(n,{modelValue:t(c),"onUpdate:modelValue":a[0]||(a[0]=p=>k(c)?c.value=p:null),inputId:"company",options:t(j),optionLabel:"label",placeholder:"Select Size",class:"w-full"},null,8,["modelValue","options"])]),l("div",Ve,[Ne,s(n,{modelValue:t(g),"onUpdate:modelValue":a[1]||(a[1]=p=>k(g)?g.value=p:null),inputId:"worktype",options:t(K),optionLabel:"label",placeholder:"Select Type",class:"w-full"},null,8,["modelValue","options"])]),l("div",Ue,[Me,s(N,{type:"email",inputId:"email",class:"w-full px-2 py-2 shadow border focus:border-purple-500",placeholder:"Type Email",modelValue:t(h),"onUpdate:modelValue":a[2]||(a[2]=p=>k(h)?h.value=p:null),onInput:z},null,8,["modelValue"]),t($)!==null&&t($)!==!0?(r(),w("p",De,"Invalid Email!")):U("",!0)]),l("div",Le,[Te,s(N,{type:"company",class:"w-full px-2 py-2 shadow border focus:border-purple-500",placeholder:"Type Name",modelValue:t(m),"onUpdate:modelValue":a[3]||(a[3]=p=>k(m)?m.value=p:null)},null,8,["modelValue"])]),l("div",Ie,[l("label",Re,[T("Company Logo "),ge(l("span",Ae,null,512),[[Z,{value:"Upload 1:1 ratio size"},void 0,{right:!0}]])]),l("div",Oe,[t(E)?(r(),w("img",{key:0,src:`${t(E)}`,style:{height:"60px",width:"60px","border-radius":"100%","object-fit":"cover"}},null,8,Fe)):(r(),w("img",je)),l("div",ze,[t(E)?(r(),w("label",Be,[l("i",{class:"pi pi-minus",onClick:b,style:{color:"red",right:"0.2rem",bottom:"0.2rem","z-index":"5","background-color":"white",padding:"5px","border-radius":"20px","box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px",cursor:"pointer"}})])):(r(),w("label",He,Je)),l("input",{class:"hidden",type:"file","v-model":t(v),ref_key:"inputFile",ref:B,id:"image",onInput:a[4]||(a[4]=p=>C(p)),accept:".png, .jpeg, .jpg"},null,40,Ke)])])]),We,t(D)?(r(),w("p",Ze,"Please fill/check up all the fields properly")):U("",!0),l("div",Ye,[s(d,{onClick:Q,class:"text-white py-2 px-6 tracking-wide",label:"Update Company",loading:t(V)},null,8,["loading"])])])}}},Qe=ae(Ge,[["__scopeId","data-v-9756644b"]]);const O=u=>(se("data-v-050a6278"),u=u(),ne(),u),Xe={class:"card"},Pe={class:"d-flex create-btn-wrapper mb-3"},et={class:"breadCrumWrap"},tt=O(()=>l("p",{class:"pi pi-angle-right"},null,-1)),lt=O(()=>l("p",{class:"text"},"Companies",-1)),ot={class:"flex mb-2 justify-content-end"},at=O(()=>l("i",{class:"pi pi-search"},null,-1)),it=O(()=>l("p",{class:"text-center"},"No Data found...",-1)),st=["onClick"],nt=O(()=>l("p",null,"Are you sure you want to delete?",-1)),rt={__name:"index",setup(u){const q=i(Y("create_company")),F=i(Y("update_company")),J=i(Y("delete_company")),f=i(),e=i(!0),M=ie();he();const S=i(!1),c=i(!1),{getCompanyList:j,deleteCompany:g,switchCompany:K}=H(),{compList:h,isCompanyDeleted:W,companySwitchToast:x,isCompanySwitched:$}=G(H()),z=te();z.getCompany();const{companyList:m}=G(te()),E=()=>{S.value=!0},v=a=>{c.value=!0,b.value=a},B=a=>{c.value=a},C=i(!1);i(!1);const b=i(null),D=a=>{b.value=a,console.log("refCompanyId",b.value),C.value=!0},V=async()=>{if(console.log("refCompanyIdFin",b.value),await g(b.value),W.value===!0)if(M.add({severity:"success",summary:"Successful",detail:"Company Deleted Successfully",group:"br",life:3e3}),C.value=!1,m.value.length>=1)if(b.value===Number(localStorage.getItem("userCompany")))await _(m.value[0].id),localStorage.setItem("userCompany",JSON.stringify(m.value[0].id)),await z.getCompany(),await j();else return;else localStorage.removeItem("userCompany"),window.location.href="/";else M.add({severity:"error",summary:"Error",detail:"Unable to delete company",group:"br",life:3e3}),console.log("company not deleted")};xe(()=>{j(),e.value=!1}),(()=>{f.value={global:{value:null,matchMode:Ce.CONTAINS}}})();const _=async a=>{a!==Number(localStorage.getItem("userCompany"))&&(await K(a),$.value===!0?(localStorage.setItem("userCompany",JSON.stringify(a)),M.add({severity:"success",summary:"Success",detail:x,group:"br",life:3e3})):M.add({severity:"error",summary:"Error",detail:x,group:"br",life:3e3}))};return(a,n)=>{const N=pe,d=le,Z=me,p=_e,re=oe,ce=ye,X=ve,de=Qe;return r(),w("div",Xe,[l("div",Pe,[l("div",et,[s(N,{to:"/",class:"text pi pi-home"}),tt,lt]),t(q)?(r(),R(d,{key:0,onClick:E,class:"cursor-pointer text-white px-5 py-2",label:"Create +"})):U("",!0),s(Z,{visible:t(S),"onUpdate:visible":n[0]||(n[0]=o=>k(S)?S.value=o:null)},null,8,["visible"])]),l("div",ot,[s(ce,{iconPosition:"right"},{default:y(()=>[s(p,null,{default:y(()=>[at]),_:1}),s(re,{modelValue:t(f).global.value,"onUpdate:modelValue":n[1]||(n[1]=o=>t(f).global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),s(t(ke),{filters:t(f),"onUpdate:filters":n[2]||(n[2]=o=>k(f)?f.value=o:null),class:"table-st",value:t(h),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,dataKey:"id",filterDisplay:"menu",loading:t(e)},{empty:y(()=>[it]),loading:y(()=>[T(" Loading data. Please wait. ")]),default:y(()=>[s(t(A),{field:"index",header:"Serial",sortable:""}),s(t(A),{field:"name",header:"Company Name"},{body:y(o=>{var L;return[s(N,{style:{color:"inherit"},to:`/companies/${(L=o==null?void 0:o.data)==null?void 0:L.id}`},{default:y(()=>{var P;return[l("p",{class:"cursor-pointer hover:text-primary font-semibold",onClick:ct=>{var ee;return _((ee=o==null?void 0:o.data)==null?void 0:ee.id)}},we((P=o==null?void 0:o.data)==null?void 0:P.name),9,st)]}),_:2},1032,["to"])]}),_:1}),s(t(A),{field:"number_of_employees",header:"Number of Employees"}),s(t(A),{field:"company_type",header:"Type"}),s(t(A),{field:"action",header:"Action"},{body:y(o=>[t(F)?(r(),R(d,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:L=>v(o.data)},null,8,["onClick"])):U("",!0),t(F)?U("",!0):(r(),R(d,{key:1,style:{visibility:"hidden"},icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:L=>v(o.data)},null,8,["onClick"])),t(J)?(r(),R(d,{key:2,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:L=>D(o.data.id)},null,8,["onClick"])):U("",!0),t(J)?U("",!0):(r(),R(d,{key:3,style:{visibility:"hidden"},icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:L=>D(o.data.id)},null,8,["onClick"]))]),_:1})]),_:1},8,["filters","value","loading"]),s(X,{visible:t(C),"onUpdate:visible":n[4]||(n[4]=o=>k(C)?C.value=o:null),header:" ",dismissableMask:"true",style:{width:"25rem"}},{default:y(()=>[nt,s(d,{label:"No",icon:"pi pi-times",text:"",onClick:n[3]||(n[3]=o=>C.value=!1)}),s(d,{label:"Yes",icon:"pi pi-check",text:"",onClick:V})]),_:1},8,["visible"]),s(X,{visible:t(c),"onUpdate:visible":n[6]||(n[6]=o=>k(c)?c.value=o:null),modal:"",header:"Edit Company",dismissableMask:"true",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[s(de,{refCompanyId:t(b),onCloseEditModal:n[5]||(n[5]=o=>B(o))},null,8,["refCompanyId"])]),_:1},8,["visible"])])}}},Xt=ae(rt,[["__scopeId","data-v-050a6278"]]);export{Xt as default};
