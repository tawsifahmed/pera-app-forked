import{_ as pe}from"./nuxt-link.4f060967.js";import ee from"./button.esm.e846d103.js";import{_ as ue,a as me}from"./CreateCompany.81ed2e39.js";import _e from"./inputicon.esm.0da03ef4.js";import te from"./inputtext.esm.2f4ebd3b.js";import ye from"./iconfield.esm.af7b77fd.js";import ve from"./dialog.esm.47d02448.js";import be from"./dropdown.esm.4e9c9472.js";import{a2 as le,a3 as Y,a4 as oe,$ as a,o as d,b as k,i as l,l as i,u as t,a7 as S,e as U,a8 as ae,a9 as ie,q as R,ae as fe,ac as ge,c as D,w as y,P as he,t as xe}from"./entry.f1083d62.js";import{u as z}from"./company.ab78e0f0.js";import I from"./column.esm.347a1d2a.js";import Ce from"./datatable.esm.549750af.js";import"./toast.esm.8e0c7f26.js";import{a as q}from"./usePermission.0e59467d.js";import{u as P}from"./workCompany.9fc24a14.js";import"./badge.esm.06f68ce4.js";import"./basecomponent.esm.dd1da9c1.js";import"./index.esm.0cabc4e6.js";import"./baseicon.esm.9dc16ba1.js";import"./index.esm.1c5b7344.js";import"./portal.esm.a12ffff4.js";import"./index.esm.0a9206fc.js";import"./index.esm.25dde301.js";import"./index.esm.dadcf415.js";import"./overlayeventbus.esm.0f70953e.js";import"./virtualscroller.esm.8b3bbffe.js";import"./cookie.9dea65c9.js";import"./fetch.10fa1737.js";import"./paginator.esm.48f6f07f.js";import"./index.esm.59d7ab85.js";import"./inputnumber.esm.bd15fd88.js";import"./index.esm.db20bc22.js";import"./index.esm.262c264f.js";import"./index.esm.f2124f4a.js";import"./index.esm.18ac01f2.js";import"./index.esm.26a78852.js";import"./checkbox.esm.f06bbf32.js";import"./radiobutton.esm.6dce7c4d.js";import"./index.esm.8aab8f7c.js";import"./index.esm.d83addac.js";import"./index.esm.1d6733e5.js";import"./index.esm.6a9442c3.js";const L=m=>(ae("data-v-c626d8c8"),m=m(),ie(),m),we={class:"position-relative flex flex-column justify-content-between w-100 modal-container"},ke={class:"field"},Se=L(()=>l("label",{for:"company"},[R("Company Size"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),$e={class:"field"},Ee=L(()=>l("label",{for:"worktype"},[R("Company Work Type?"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),Ve={class:"field"},Ne=L(()=>l("label",{for:"email"},[R("Email Address"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),Ue={key:0,class:"text-danger text-center text-xs mt-2"},Le={class:"field"},Me=L(()=>l("label",{for:"company"},[R("Company Name"),l("i",{class:"text-red-400 text-italic"},"*")],-1)),Te={class:"field mb-0"},De=L(()=>l("label",{class:"mb-0",for:"company"},"Company Logo ",-1)),Ie={class:"relative w-fit mx-auto"},Re=["src"],Ae={key:1,src:ue,alt:"",style:{height:"60px",width:"60px","border-radius":"100%","object-fit":"cover"}},Oe={class:"img-label"},je={key:0,for:"imageCancel"},Fe={key:1,for:"image"},ze=L(()=>l("i",{class:"pi pi-plus",style:{color:"red",right:"0.2rem",bottom:"0.2rem","z-index":"5","background-color":"white",padding:"5px","border-radius":"20px","box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px",cursor:"pointer"}},null,-1)),Be=[ze],He=["v-model"],Je=L(()=>l("br",null,null,-1)),Ke={key:0,style:{color:"red"}},We={class:"create-btn-wrapper"},Ze={__name:"EditCompany",props:["refCompanyId"],emits:["closeEditModal"],setup(m,{emit:B}){const{editCompany:O,getCompanyList:H}=z(),{isCompanyEdited:b}=Y(z()),{refCompanyId:e}=m,M=B,$=oe();a(!1);const p=a();p.value=e!=null&&e.number_of_employees?{id:e==null?void 0:e.number_of_employees,label:e==null?void 0:e.number_of_employees}:"";const j=a([{id:"1-10",label:"1-10"},{id:"11-25",label:"11-25"},{id:"26-250",label:"26-250"},{id:"251-500",label:"251-500"},{id:"501-2000",label:"501-2000"}]),f=a(e!=null&&e.company_type?{id:e==null?void 0:e.company_type,label:e==null?void 0:e.company_type}:""),J=a([{id:"PMO",label:"PMO"},{id:"Finance & Accounting",label:"Finance & Accounting"},{id:"HR & Recruiting",label:"HR & Recruiting"},{id:"Operations",label:"Operations"},{id:"Support",label:"Support"},{id:"Sales & CRM",label:"Sales & CRM"},{id:"Personal Use",label:"Personal Use"},{id:"IT",label:"IT"},{id:"Creative & Design",label:"Creative & Design"},{id:"Personal Services",label:"Personal Services"},{id:"Marketing",label:"Marketing"},{id:"Engineering & Production",label:"Engineering & Production"},{id:"Other",label:"Other"}]),g=a(e==null?void 0:e.email),K=w=>String(w).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),h=a(null),E=a(null);h.value=e==null?void 0:e.email;const F=()=>{E.value=!1,g.value,K(g.value)!==null?(h.value=g.value,E.value=!0):(h.value=null,E.value=!1)},_=a(e==null?void 0:e.name),V=a(e==null?void 0:e.logo),v=a(null),W=w=>{v.value=w.target.files[0],V.value=URL.createObjectURL(v.value)},x=()=>{v.value=null,V.value=null},u=a(!1),C=a(!1),Z=async()=>{var w,r;if(C.value=!0,p.value===null||f.value===null||h.value===null||_.value===null||_.value===""){u.value=!0,C.value=!1;return}else{u.value=!1;let c=(w=p.value)==null?void 0:w.label,n=(r=f.value)==null?void 0:r.label;console.log("company type",f.value.label);const N={id:e.id,name:_.value,email:h.value,address:null,contact_number:null,number_of_employees:c,company_type:n,logo:v.value?v.value:null};console.log("workspaceData",N),await O(N),b.value===!0?(M("closeEditModal",!1),$.add({severity:"success",summary:"Success",detail:"Company edited successfully!",group:"br",life:3e3}),console.log("company edited"),C.value=!1):(console.log("company not edited"),$.add({severity:"error",summary:"Error",detail:"Unable to edit company!",group:"br",life:3e3}),C.value=!1)}};return(w,r)=>{const c=be,n=te,N=ee;return d(),k("div",we,[l("div",ke,[Se,i(c,{modelValue:t(p),"onUpdate:modelValue":r[0]||(r[0]=s=>S(p)?p.value=s:null),inputId:"company",options:t(j),optionLabel:"label",placeholder:"Select Size",class:"w-full"},null,8,["modelValue","options"])]),l("div",$e,[Ee,i(c,{modelValue:t(f),"onUpdate:modelValue":r[1]||(r[1]=s=>S(f)?f.value=s:null),inputId:"worktype",options:t(J),optionLabel:"label",placeholder:"Select Type",class:"w-full"},null,8,["modelValue","options"])]),l("div",Ve,[Ne,i(n,{type:"email",inputId:"email",class:"w-full px-2 py-2 shadow border focus:border-purple-500",placeholder:"Type Email",modelValue:t(g),"onUpdate:modelValue":r[2]||(r[2]=s=>S(g)?g.value=s:null),onInput:F},null,8,["modelValue"]),t(E)!==null&&t(E)!==!0?(d(),k("p",Ue,"Invalid Email!")):U("",!0)]),l("div",Le,[Me,i(n,{type:"company",class:"w-full px-2 py-2 shadow border focus:border-purple-500",placeholder:"Type Name",modelValue:t(_),"onUpdate:modelValue":r[3]||(r[3]=s=>S(_)?_.value=s:null)},null,8,["modelValue"])]),l("div",Te,[De,l("div",Ie,[t(V)?(d(),k("img",{key:0,src:`${t(V)}`,style:{height:"60px",width:"60px","border-radius":"100%","object-fit":"cover"}},null,8,Re)):(d(),k("img",Ae)),l("div",Oe,[t(V)?(d(),k("label",je,[l("i",{class:"pi pi-minus",onClick:x,style:{color:"red",right:"0.2rem",bottom:"0.2rem","z-index":"5","background-color":"white",padding:"5px","border-radius":"20px","box-shadow":"rgba(0, 0, 0, 0.16) 0px 1px 4px",cursor:"pointer"}})])):(d(),k("label",Fe,Be)),l("input",{class:"hidden",type:"file","v-model":t(v),id:"image",onInput:r[4]||(r[4]=s=>W(s)),accept:".png, .jpeg, .jpg"},null,40,He)])])]),Je,t(u)?(d(),k("p",Ke,"Please fill/check up all the fields properly")):U("",!0),l("div",We,[i(N,{onClick:Z,class:"text-white py-2 px-6 tracking-wide",label:"Update Company",loading:t(C)},null,8,["loading"])])])}}},qe=le(Ze,[["__scopeId","data-v-c626d8c8"]]);const A=m=>(ae("data-v-22740af8"),m=m(),ie(),m),Ye={class:"card"},Ge={class:"d-flex create-btn-wrapper mb-3"},Qe={class:"breadCrumWrap"},Xe=A(()=>l("p",{class:"pi pi-angle-right"},null,-1)),Pe=A(()=>l("p",{class:"text"},"Companies",-1)),et={class:"flex mb-2 justify-content-end"},tt=A(()=>l("i",{class:"pi pi-search"},null,-1)),lt=A(()=>l("p",{class:"text-center"},"No Data found...",-1)),ot=["onClick"],at=A(()=>l("p",null,"Are you sure you want to delete?",-1)),it={__name:"index",setup(m){const B=a(q("create_company")),O=a(q("update_company")),H=a(q("delete_company")),b=a(),e=a(!0),M=oe();fe();const $=a(!1),p=a(!1),{getCompanyList:j,deleteCompany:f,switchCompany:J}=z(),{compList:g,isCompanyDeleted:K,companySwitchToast:h,isCompanySwitched:E}=Y(z()),F=P();F.getCompany();const{companyList:_}=Y(P()),V=()=>{$.value=!0},v=c=>{p.value=!0,u.value=c},W=c=>{p.value=c},x=a(!1);a(!1);const u=a(null),C=c=>{u.value=c,console.log("refCompanyId",u.value),x.value=!0},Z=async()=>{if(console.log("refCompanyIdFin",u.value),await f(u.value),K.value===!0)if(M.add({severity:"success",summary:"Successful",detail:"Company Deleted Successfully",group:"br",life:3e3}),x.value=!1,_.value.length>=1)if(u.value===Number(localStorage.getItem("userCompany")))await r(_.value[0].id),localStorage.setItem("userCompany",JSON.stringify(_.value[0].id)),await F.getCompany(),await j();else return;else localStorage.removeItem("userCompany"),window.location.href="/";else M.add({severity:"error",summary:"Error",detail:"Unable to delete company",group:"br",life:3e3}),console.log("company not deleted")};ge(()=>{j(),e.value=!1}),(()=>{b.value={global:{value:null,matchMode:he.CONTAINS}}})();const r=async c=>{c!==Number(localStorage.getItem("userCompany"))&&(await J(c),E.value===!0?(localStorage.setItem("userCompany",JSON.stringify(c)),M.add({severity:"success",summary:"Success",detail:h,group:"br",life:3e3})):M.add({severity:"error",summary:"Error",detail:h,group:"br",life:3e3}))};return(c,n)=>{const N=pe,s=ee,ne=me,se=_e,re=te,ce=ye,G=ve,de=qe;return d(),k("div",Ye,[l("div",Ge,[l("div",Qe,[i(N,{to:"/",class:"text pi pi-home"}),Xe,Pe]),t(B)?(d(),D(s,{key:0,onClick:V,class:"cursor-pointer text-white px-5 py-2",label:"Create +"})):U("",!0),i(ne,{visible:t($),"onUpdate:visible":n[0]||(n[0]=o=>S($)?$.value=o:null)},null,8,["visible"])]),l("div",et,[i(ce,{iconPosition:"right"},{default:y(()=>[i(se,null,{default:y(()=>[tt]),_:1}),i(re,{modelValue:t(b).global.value,"onUpdate:modelValue":n[1]||(n[1]=o=>t(b).global.value=o),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),i(t(Ce),{filters:t(b),"onUpdate:filters":n[2]||(n[2]=o=>S(b)?b.value=o:null),class:"table-st",value:t(g),stripedRows:"",paginator:"",tableStyle:"min-width: 50rem",rows:10,dataKey:"id",filterDisplay:"menu",loading:t(e)},{empty:y(()=>[lt]),loading:y(()=>[R(" Loading data. Please wait. ")]),default:y(()=>[i(t(I),{field:"index",header:"Serial",sortable:""}),i(t(I),{field:"name",header:"Company Name"},{body:y(o=>{var T;return[i(N,{to:`/companies/${(T=o==null?void 0:o.data)==null?void 0:T.id}`},{default:y(()=>{var Q;return[l("p",{class:"cursor-pointer com-name hover:text-primary font-semibold",onClick:nt=>{var X;return r((X=o==null?void 0:o.data)==null?void 0:X.id)}},xe((Q=o==null?void 0:o.data)==null?void 0:Q.name),9,ot)]}),_:2},1032,["to"])]}),_:1}),i(t(I),{field:"number_of_employees",header:"Number of Employees"}),i(t(I),{field:"company_type",header:"Type"}),i(t(I),{field:"action",header:"Action"},{body:y(o=>[t(O)?(d(),D(s,{key:0,icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:T=>v(o.data)},null,8,["onClick"])):U("",!0),t(O)?U("",!0):(d(),D(s,{key:1,style:{visibility:"hidden"},icon:"pi pi-pencil",text:"",class:"mr-2",severity:"success",rounded:"",onClick:T=>v(o.data)},null,8,["onClick"])),t(H)?(d(),D(s,{key:2,icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:T=>C(o.data.id)},null,8,["onClick"])):U("",!0),t(H)?U("",!0):(d(),D(s,{key:3,style:{visibility:"hidden"},icon:"pi pi-trash",text:"",class:"mt-2",severity:"warning",rounded:"",onClick:T=>C(o.data.id)},null,8,["onClick"]))]),_:1})]),_:1},8,["filters","value","loading"]),i(G,{visible:t(x),"onUpdate:visible":n[4]||(n[4]=o=>S(x)?x.value=o:null),header:" ",style:{width:"25rem"}},{default:y(()=>[at,i(s,{label:"No",icon:"pi pi-times",text:"",onClick:n[3]||(n[3]=o=>x.value=!1)}),i(s,{label:"Yes",icon:"pi pi-check",text:"",onClick:Z})]),_:1},8,["visible"]),i(G,{visible:t(p),"onUpdate:visible":n[6]||(n[6]=o=>S(p)?p.value=o:null),modal:"",header:"Edit Company",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[i(de,{refCompanyId:t(u),onCloseEditModal:n[5]||(n[5]=o=>W(o))},null,8,["refCompanyId"])]),_:1},8,["visible"])])}}},Yt=le(it,[["__scopeId","data-v-22740af8"]]);export{Yt as default};
