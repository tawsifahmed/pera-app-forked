import N from"./button.esm.32bef0f9.js";import ee from"./column.esm.7a10f518.js";import te from"./datatable.esm.962e638b.js";import W from"./dialog.esm.8bebc37a.js";import j from"./multiselect.esm.e6bfb530.js";import{a2 as G,a3 as se,a4 as J,$ as d,ar as oe,a as K,o as $,b as q,c as le,w as v,l as i,i as e,u as p,bO as ae,t as F,F as z,f as H,e as ie,a7 as L,s as g,a8 as Q,a9 as X,ca as Y,a5 as ne}from"./entry.3bbd680d.js";import{u as U,a as O}from"./cookie.46510969.js";import{u as re}from"./workCompany.8b0d286c.js";import{s as Z}from"./editor.esm.5134eb81.js";import"./badge.esm.ab9659d4.js";import"./basecomponent.esm.22a83963.js";import"./index.esm.c51a4b34.js";import"./baseicon.esm.07236b28.js";import"./paginator.esm.8df0b0a3.js";import"./index.esm.08162a27.js";import"./dropdown.esm.94ac987f.js";import"./index.esm.4bb3c5dc.js";import"./index.esm.9d078b4b.js";import"./index.esm.08a9cf78.js";import"./index.esm.e875bfac.js";import"./overlayeventbus.esm.fae87c9d.js";import"./portal.esm.b00f5f1c.js";import"./virtualscroller.esm.bd9c8660.js";import"./inputnumber.esm.953e3723.js";import"./index.esm.f03fcaa8.js";import"./index.esm.d98cf75f.js";import"./inputtext.esm.49d8341d.js";import"./index.esm.8d661d72.js";import"./index.esm.39cf72b3.js";import"./index.esm.77330c63.js";import"./checkbox.esm.ddd12731.js";import"./radiobutton.esm.e8c2d6e1.js";import"./index.esm.870f63e2.js";import"./index.esm.11091131.js";import"./index.esm.5795fbf5.js";const w=r=>(Q("data-v-54d8a99d"),r=r(),X(),r),de=["onClick"],ce={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},ue={class:""},pe={class:"title"},me=w(()=>e("p",{class:""},"Participants:",-1)),be={class:""},_e={class:"perticipants"},ve={class:"flex gap-1"},fe={class:""},he=["innerHTML"],ye={class:"flex-auto"},ge=w(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Se={class:"ql-formats flex justify-content-end mr-0"},ke={class:"ql-bold"},$e={class:"ql-italic"},we={class:"ql-underline"},xe={class:"ql-strike"},Me=w(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),De=w(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),qe=w(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Ue=w(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ce={class:"flex-auto"},Ve=w(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Be={__name:"ScrumTable",props:["scrumData","fetchData","employees"],setup(r){const{scrumData:C,fetchData:V,employees:B}=r;se(re());const c=J(),f=d(!1),M=d(!1),h=d(!1),D=d([]),m=d(null),b=d(" "),_=d(""),T=Y(),y=t=>{console.log(t),m.value=t,f.value=!0},l=async t=>{try{const s=U("token"),o=await $fetch(`${T.public.apiUrl}/scrum-meeting/delete/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s.value}`}});return M.value=!1,c.add({severity:"success",summary:"Meeting Minutes",detail:"Deleted successfully!",group:"br",life:3e3}),V()}catch(s){console.error("Submission failed:",s),c.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to Delete Meeting Minutes",group:"br",life:3e3})}finally{M.value=!1}},u=async t=>{t.preventDefault(),isSubmitting.value=!0;try{const s=U("token"),o=new FormData;o.append("space_id",selectedSpace.value.id),o.append("description",b.value),_.value.forEach(I=>o.append("user_ids[]",I.id));const n=await $fetch(`${T.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`},body:o});console.log("Submission successful:",n),createModal.value=!1,c.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(s){console.error("Submission failed:",s),c.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}},S=async t=>{console.log(t),console.log("employees",B),m.value=t.data,h.value=!0,b.value=t.data.description,_.value=t.data.user_ids,D.value=t.data.space_id};return oe(b,t=>{t.length===0&&(b.value=" ")}),(t,s)=>{const o=ee,n=N,I=te,R=W,P=j,A=K("tooltip");return $(),q(z,null,[r.scrumData&&r.scrumData.length>0?($(),le(I,{key:0,class:"table-st",value:r.scrumData,rowHover:!0,paginator:"",rows:30,stripedRows:"",tableStyle:"min-width: 50rem"},{default:v(()=>[i(o,{style:{width:"2%"},field:"id",header:"Serial"}),i(o,{style:{width:"10%"},field:"meeting_date",header:"Date"},{body:v(a=>[e("div",{class:"cursor-pointer",onClick:()=>y(("toRaw"in t?t.toRaw:p(ae))(a.data))},F(a.data.meeting_date),9,de)]),_:1}),i(o,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:v(a=>[e("div",ce,[($(!0),q(z,null,H(a.data.user_ids,k=>($(),q("div",{class:"border rounded",key:k.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",ue,F(k.name),1)]))),128))])]),_:1}),i(o,{style:{width:"3%"},field:"actions",header:"Actions"},{body:v(a=>[i(n,{severity:"info",rounded:"",text:"",type:"button",onClick:k=>S(a),icon:"pi pi-pencil",class:""},null,8,["onClick"]),i(n,{severity:"danger",rounded:"",text:"",type:"button",onClick:k=>{var E;return l((E=a==null?void 0:a.data)==null?void 0:E.id)},icon:"pi pi-trash",class:""},null,8,["onClick"])]),_:1})]),_:1},8,["value"])):ie("",!0),i(R,{lazy:"true",visible:p(f),"onUpdate:visible":s[0]||(s[0]=a=>L(f)?f.value=a:null),modal:"",header:"Scrum Details",style:{minWidth:"35vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>{var a;return[e("div",pe,[me,e("p",be,F(p(m).meeting_date),1)]),e("div",_e,[e("div",ve,[($(!0),q(z,null,H(p(m).user_ids,k=>($(),q("div",{class:"border rounded",key:k.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",fe,F(k.name),1)]))),128))])]),e("div",{class:"details",innerHTML:(a=p(m))==null?void 0:a.description},null,8,he)]}),_:1},8,["visible"]),i(R,{lazy:"true",visible:p(h),"onUpdate:visible":s[3]||(s[3]=a=>L(h)?h.value=a:null),modal:"",header:"Update Scrum",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:u,class:"form",action:""},[e("div",ye,[ge,i(p(Z),{modelValue:p(b),"onUpdate:modelValue":s[1]||(s[1]=a=>L(b)?b.value=a:null),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",Se,[g(e("button",ke,null,512),[[A,"Bold",void 0,{bottom:!0}]]),g(e("button",$e,null,512),[[A,"Italic",void 0,{bottom:!0}]]),g(e("button",we,null,512),[[A,"Underline",void 0,{bottom:!0}]]),g(e("button",xe,null,512),[[A,"Strikethrough",void 0,{bottom:!0}]]),Me,De,qe,Ue])]),_:1},8,["modelValue"])]),e("div",Ce,[Ve,i(P,{id:"members",display:"chip",modelValue:p(_),"onUpdate:modelValue":s[2]||(s[2]=a=>L(_)?_.value=a:null),options:r.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),i(n,{label:t.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:t.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Te=G(Be,[["__scopeId","data-v-54d8a99d"]]);const x=r=>(Q("data-v-31273163"),r=r(),X(),r),Ae={class:"card"},Fe={class:"header"},Le=x(()=>e("h3",null,"Meeting Minutes",-1)),ze={class:"flex-auto"},Ie=x(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Re={class:"ql-formats flex justify-content-end mr-0"},Ee={class:"ql-bold"},He={class:"ql-italic"},Oe={class:"ql-underline"},Ne={class:"ql-strike"},We=x(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),je=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Ge=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Je=x(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),Ke={class:"flex-auto"},Qe=x(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Xe={__name:"index",setup(r){const C=Y(),V=J(),B=d([]),c=d(!1),f=d([]),M=d(""),h=d(""),D=d(!1),m=d(!0),b=async y=>{y.preventDefault(),D.value=!0;try{const l=U("token"),u=new FormData;u.append("description",h.value),M.value.forEach(t=>u.append("user_ids[]",t.id));const S=await $fetch(`${C.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${l.value}`},body:u});console.log("Submission successful:",S),c.value=!1,V.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),_()}catch(l){console.error("Submission failed:",l),V.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{D.value=!1}},_=async()=>{var t,s,o;m.value=!0;const y=U("token"),{data:l,pending:u,error:S}=await O("scrumData",()=>$fetch(`${C.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${y.value}`}}));return((s=(t=l.value)==null?void 0:t.data)==null?void 0:s.length)>0&&(B.value=(o=l.value)==null?void 0:o.data),m.value=!1},T=async()=>{var t,s,o;const y=U("token"),{data:l,pending:u,error:S}=await O("taskAssignModalData",()=>$fetch(`${C.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${y.value}`}}));((s=(t=l.value)==null?void 0:t.data)==null?void 0:s.length)>0&&(f.value=(o=l.value)==null?void 0:o.data.map(n=>({name:n.name,id:n.id})))};return ne(()=>{T(),_()}),(y,l)=>{const u=N,S=Te,t=j,s=W,o=K("tooltip");return $(),q(z,null,[e("div",Ae,[e("header",Fe,[Le,i(u,{onClick:l[0]||(l[0]=n=>c.value=!c.value),icon:"pi pi-plus",severity:"secondary"})]),i(S,{scrumData:B.value,fetchData:_,employees:f.value},null,8,["scrumData","employees"])]),i(s,{lazy:"true",loading:m.value,visible:c.value,"onUpdate:visible":l[3]||(l[3]=n=>c.value=n),modal:"",header:"New Scrum",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:v(()=>[e("form",{onSubmit:b,class:"form",action:""},[e("div",ze,[Ie,i(p(Z),{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=n=>h.value=n),editorStyle:"height: 200px"},{toolbar:v(()=>[e("span",Re,[g(e("button",Ee,null,512),[[o,"Bold",void 0,{bottom:!0}]]),g(e("button",He,null,512),[[o,"Italic",void 0,{bottom:!0}]]),g(e("button",Oe,null,512),[[o,"Underline",void 0,{bottom:!0}]]),g(e("button",Ne,null,512),[[o,"Strikethrough",void 0,{bottom:!0}]]),We,je,Ge,Je])]),_:1},8,["modelValue"])]),e("div",Ke,[Qe,i(t,{id:"members",display:"chip",modelValue:M.value,"onUpdate:modelValue":l[2]||(l[2]=n=>M.value=n),options:f.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),i(u,{label:D.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:D.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},Bt=G(Xe,[["__scopeId","data-v-31273163"]]);export{Bt as default};
