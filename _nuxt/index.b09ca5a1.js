import H from"./button.esm.88347c6f.js";import Y from"./column.esm.8a6ee162.js";import Z from"./datatable.esm.f74cef75.js";import N from"./dialog.esm.a5b8057b.js";import E from"./multiselect.esm.f28c9f3c.js";import{a2 as j,a3 as ee,a4 as W,$ as n,ar as te,a as G,o as w,b as D,c as se,w as y,l as d,i as e,u as m,bO as oe,t as C,F as L,f as O,e as ae,a7 as T,s as g,a8 as J,a9 as K,ca as Q,a5 as le}from"./entry.3e031b31.js";import{u as U,a as P}from"./cookie.3a12c915.js";import{u as ie}from"./workCompany.26742698.js";import{s as X}from"./editor.esm.cee34e65.js";import"./badge.esm.d2071273.js";import"./basecomponent.esm.f10d2202.js";import"./index.esm.e4de41df.js";import"./baseicon.esm.ab14f454.js";import"./paginator.esm.b5f94b10.js";import"./index.esm.b1e73331.js";import"./dropdown.esm.4e38f6fc.js";import"./index.esm.3bbfbffd.js";import"./index.esm.2869aa49.js";import"./index.esm.5dc4fd42.js";import"./index.esm.96be34b5.js";import"./overlayeventbus.esm.6bdd91ba.js";import"./portal.esm.448751c9.js";import"./virtualscroller.esm.36665890.js";import"./inputnumber.esm.9e5cecde.js";import"./index.esm.1ade529d.js";import"./index.esm.f7fd1575.js";import"./inputtext.esm.54067f1b.js";import"./index.esm.e37a6ddf.js";import"./index.esm.fda85297.js";import"./index.esm.c53ff983.js";import"./checkbox.esm.3d476e26.js";import"./radiobutton.esm.2c677a93.js";import"./index.esm.6604c4b8.js";import"./index.esm.112fa617.js";import"./index.esm.906520e3.js";const x=r=>(J("data-v-b567cd25"),r=r(),K(),r),ne=["onClick"],re={style:{display:"flex","flex-wrap":"wrap",gap:"2px"}},ce={class:""},de={class:"title"},ue=x(()=>e("p",{class:""},"Participants:",-1)),pe={class:""},me={class:"perticipants"},be={class:"flex gap-1 flex-wrap"},_e={class:""},ve=["innerHTML"],fe={class:"flex-auto"},he=x(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),ye={class:"ql-formats flex justify-content-end mr-0"},ge={class:"ql-bold"},Se={class:"ql-italic"},$e={class:"ql-underline"},ke={class:"ql-strike"},we=x(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),xe=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Me=x(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),De=x(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),qe={class:"flex-auto"},Re=x(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Ue={__name:"ScrumTable",props:["scrumData","fetchData","employees","totalRecords"],setup(r){const{scrumData:q,fetchData:z,employees:A,totalRecords:F}=r;ee(ie());const b=W(),_=n(!1);n(!1);const S=n(!1);n([]);const v=n(null),u=n(" "),f=n(""),V=Q(),$=n(!1),I=t=>{console.log(t),v.value=t,_.value=!0},h=async t=>{t.preventDefault(),isSubmitting.value=!0;try{const o=U("token"),a=new FormData;a.append("space_id",selectedSpace.value.id),a.append("description",u.value),f.value.forEach(i=>a.append("user_ids[]",i.id));const p=await $fetch(`${V.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${o.value}`},body:a});createModal.value=!1,b.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),fetchScrum()}catch(o){console.error("Submission failed:",o),b.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{isSubmitting.value=!1}};te(u,t=>{t.length===0&&(u.value=" ")});const s=async t=>{var l,B,k;const o=U("token");$.value=!0;const{data:a,pending:p,error:i}=await P("scrumData",()=>$fetch(`${V.public.apiUrl}/scrum-meeting/list?page=${t.page+1}&limit=${t.rows}`,{headers:{Authorization:`Bearer ${o.value}`}}));return((B=(l=a.value)==null?void 0:l.data)==null?void 0:B.length)>0&&(q.value=(k=a.value)==null?void 0:k.data),$.value=!1};return(t,o)=>{const a=Y,p=Z,i=N,l=E,B=H,k=G("tooltip");return w(),D(L,null,[r.scrumData&&r.scrumData.length>0?(w(),se(p,{key:0,class:"table-st",value:r.scrumData,rowHover:!0,paginator:!0,rows:10,stripedRows:"",scrollable:"",tableStyle:"min-width: 50rem",totalRecords:r.totalRecords,loading:m($),rowsPerPageOptions:[5,10,20,50],onPage:s},{default:y(()=>[d(a,{style:{width:"12%"},field:"meeting_date",header:"Date"},{body:y(c=>[e("div",{class:"cursor-pointer",onClick:()=>I(("toRaw"in t?t.toRaw:m(oe))(c.data))},C(c.data.meeting_date),9,ne)]),_:1}),d(a,{style:{width:"35%"},field:"user ids",header:"Participants"},{body:y(c=>[e("div",re,[(w(!0),D(L,null,O(c.data.user_ids,R=>(w(),D("div",{class:"border rounded",key:R.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",ce,C(R.name),1)]))),128))])]),_:1})]),_:1},8,["value","totalRecords","loading"])):ae("",!0),d(i,{lazy:"true",visible:m(_),"onUpdate:visible":o[0]||(o[0]=c=>T(_)?_.value=c:null),modal:"",header:"Scrum Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:y(()=>{var c;return[e("div",de,[ue,e("p",pe,C(m(v).meeting_date),1)]),e("div",me,[e("div",be,[(w(!0),D(L,null,O(m(v).user_ids,R=>(w(),D("div",{class:"border rounded",key:R.id,style:{border:"1px solid rgba(167, 167, 167, 0.486)","border-radius":"5px",padding:"2px 5px"}},[e("div",_e,C(R.name),1)]))),128))])]),e("div",{class:"details",innerHTML:(c=m(v))==null?void 0:c.description},null,8,ve)]}),_:1},8,["visible"]),d(i,{lazy:"true",visible:m(S),"onUpdate:visible":o[3]||(o[3]=c=>T(S)?S.value=c:null),modal:"",header:"Update Scrum",dismissableMask:"true",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[e("form",{onSubmit:h,class:"form",action:""},[e("div",fe,[he,d(m(X),{modelValue:m(u),"onUpdate:modelValue":o[1]||(o[1]=c=>T(u)?u.value=c:null),editorStyle:"height: 200px"},{toolbar:y(()=>[e("span",ye,[g(e("button",ge,null,512),[[k,"Bold",void 0,{bottom:!0}]]),g(e("button",Se,null,512),[[k,"Italic",void 0,{bottom:!0}]]),g(e("button",$e,null,512),[[k,"Underline",void 0,{bottom:!0}]]),g(e("button",ke,null,512),[[k,"Strikethrough",void 0,{bottom:!0}]]),we,xe,Me,De])]),_:1},8,["modelValue"])]),e("div",qe,[Re,d(l,{id:"members",display:"chip",modelValue:m(f),"onUpdate:modelValue":o[2]||(o[2]=c=>T(f)?f.value=c:null),options:r.employees,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),d(B,{label:t.isSubmitting?"Submitting...":"Update",severity:"primary",type:"submit",disabled:t.isSubmitting},null,8,["label","disabled"])],32)]),_:1},8,["visible"])],64)}}},Ve=j(Ue,[["__scopeId","data-v-b567cd25"]]);const M=r=>(J("data-v-56488b54"),r=r(),K(),r),Be={class:"card"},Ce={class:"header"},Te=M(()=>e("h3",null,"Meeting Minutes",-1)),Le={class:"flex-auto"},ze=M(()=>e("label",{for:"description",class:"font-bold block mb-2"},"Description: ",-1)),Ae={class:"ql-formats flex justify-content-end mr-0"},Fe={class:"ql-bold"},Ie={class:"ql-italic"},Pe={class:"ql-underline"},Oe={class:"ql-strike"},He=M(()=>e("span",{class:"ql-formats"},[e("select",{class:"ql-color"}),e("select",{class:"ql-background"})],-1)),Ne=M(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),Ee=M(()=>e("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),je=M(()=>e("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),We={class:"flex-auto"},Ge=M(()=>e("label",{for:"members",class:"font-bold block mb-2"},"Members: ",-1)),Je={__name:"index",setup(r){const q=Q(),z=W(),A=n(0),F=n([]),b=n(!1),_=n([]),S=n(""),v=n(""),u=n(!1),f=n(!0),V=async h=>{h.preventDefault(),u.value=!0;try{const s=U("token"),t=new FormData;t.append("description",v.value),S.value.forEach(a=>t.append("user_ids[]",a.id));const o=await $fetch(`${q.public.apiUrl}/scrum-meeting/create`,{method:"POST",headers:{Authorization:`Bearer ${s.value}`},body:t});console.log("Submission successful:",o),b.value=!1,z.add({severity:"success",summary:"Meeting Minutes",detail:"Created successfully!",group:"br",life:3e3}),$()}catch(s){console.error("Submission failed:",s),z.add({severity:"error",summary:"Meeting Minutes",detail:"Failed to create Meeting Minutes",group:"br",life:3e3})}finally{u.value=!1}},$=async()=>{var a,p,i,l;f.value=!0;const h=U("token"),{data:s,pending:t,error:o}=await P("scrumData",()=>$fetch(`${q.public.apiUrl}/scrum-meeting/list`,{headers:{Authorization:`Bearer ${h.value}`}}));return((p=(a=s.value)==null?void 0:a.data)==null?void 0:p.length)>0&&(F.value=(i=s.value)==null?void 0:i.data,A.value=(l=s.value)==null?void 0:l.totalRecords),f.value=!1},I=async()=>{var a,p,i;const h=U("token"),{data:s,pending:t,error:o}=await P("taskAssignModalData",()=>$fetch(`${q.public.apiUrl}/users/list`,{headers:{Authorization:`Bearer ${h.value}`}}));((p=(a=s.value)==null?void 0:a.data)==null?void 0:p.length)>0&&(_.value=(i=s.value)==null?void 0:i.data.map(l=>({name:l.name,id:l.id})))};return le(()=>{I(),$()}),(h,s)=>{const t=H,o=Ve,a=E,p=N,i=G("tooltip");return w(),D(L,null,[e("div",Be,[e("header",Ce,[Te,d(t,{onClick:s[0]||(s[0]=l=>b.value=!b.value),icon:"pi pi-plus",severity:"secondary"})]),d(o,{scrumData:F.value,fetchData:$,employees:_.value,totalRecords:A.value},null,8,["scrumData","employees","totalRecords"])]),d(p,{lazy:"true",loading:f.value,visible:b.value,"onUpdate:visible":s[3]||(s[3]=l=>b.value=l),modal:"",header:"New Scrum",dismissableMask:"true",style:{minWidth:"30vw"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[e("form",{onSubmit:V,class:"form",action:""},[e("div",Le,[ze,d(m(X),{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=l=>v.value=l),editorStyle:"height: 200px"},{toolbar:y(()=>[e("span",Ae,[g(e("button",Fe,null,512),[[i,"Bold",void 0,{bottom:!0}]]),g(e("button",Ie,null,512),[[i,"Italic",void 0,{bottom:!0}]]),g(e("button",Pe,null,512),[[i,"Underline",void 0,{bottom:!0}]]),g(e("button",Oe,null,512),[[i,"Strikethrough",void 0,{bottom:!0}]]),He,Ne,Ee,je])]),_:1},8,["modelValue"])]),e("div",We,[Ge,d(a,{id:"members",display:"chip",modelValue:S.value,"onUpdate:modelValue":s[2]||(s[2]=l=>S.value=l),options:_.value,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Members",class:"w-full",maxSelectedLabels:2},null,8,["modelValue","options"])]),d(t,{label:u.value?"Submitting...":"Submit",severity:"primary",type:"submit",disabled:u.value},null,8,["label","disabled"])],32)]),_:1},8,["loading","visible"])],64)}}},Ut=j(Je,[["__scopeId","data-v-56488b54"]]);export{Ut as default};
