import Gs from"./toast.esm.8e0c7f26.js";import{_ as Xs}from"./nuxt-link.4f060967.js";import ds from"./multiselect.esm.d9a634cf.js";import us from"./dropdown.esm.4e9c9472.js";import cs from"./calendar.esm.617e2cc2.js";import Kt from"./button.esm.e846d103.js";import Zs from"./inputicon.esm.0da03ef4.js";import Bs from"./inputtext.esm.2f4ebd3b.js";import Qs from"./iconfield.esm.af7b77fd.js";import ea from"./toolbar.esm.54b5bb07.js";import Ys from"./card.esm.51bd0548.js";import ks from"./avatar.esm.d08e30fa.js";import ta from"./speeddial.esm.c2a96d84.js";import zs from"./treetable.esm.59e353a3.js";import sa from"./timeline.esm.6e4585b0.js";import{r as _t,o as d,b as h,l as _,p as Ds,w as S,h as se,q as me,i,t as E,c as ue,n as As,m as Ls,e as T,k as ve,K as R,F as pe,f as Te,T as os,_ as H,j as aa,G as Rs,Q as ia,I as dt,a3 as gt,$ as v,a4 as Jt,aa as is,ar as Le,a5 as hs,V as bs,a as ms,u as r,a7 as P,s as q,a6 as Pt,bO as Yt,ca as qs,a2 as Ts,a8 as Cs,a9 as Es,ao as la,cb as na,ac as oa,P as ra}from"./entry.f1083d62.js";import{u as ct,a as js}from"./cookie.9dea65c9.js";import{u as ls}from"./fetch.10fa1737.js";import{d as da}from"./vuedraggable.umd.9044480f.js";import{u as Ue}from"./company.ab78e0f0.js";import{a as ut}from"./usePermission.0e59467d.js";import rt from"./column.esm.347a1d2a.js";import Ps from"./textarea.esm.a49a2f1d.js";import{s as rs}from"./editor.esm.5bea86d5.js";import ua from"./floatlabel.esm.38f9237f.js";import ca from"./inputnumber.esm.bd15fd88.js";import ha from"./confirmpopup.esm.f8af8edf.js";import ma from"./tabpanel.esm.6698c416.js";import va from"./tabview.esm.5a8bb800.js";import{u as Is}from"./clock.7753488d.js";import"./inplace.esm.8a49bd85.js";import as from"./dialog.esm.47d02448.js";import"./portal.esm.a12ffff4.js";import"./basecomponent.esm.dd1da9c1.js";import"./index.esm.0a9206fc.js";import"./baseicon.esm.9dc16ba1.js";import"./index.esm.1d6733e5.js";import"./index.esm.1c5b7344.js";import"./index.esm.6a9442c3.js";import"./checkbox.esm.f06bbf32.js";import"./index.esm.25dde301.js";import"./index.esm.dadcf415.js";import"./index.esm.0cabc4e6.js";import"./overlayeventbus.esm.0f70953e.js";import"./virtualscroller.esm.8b3bbffe.js";import"./index.esm.1493f6f1.js";import"./index.esm.18ac01f2.js";import"./index.esm.e1839713.js";import"./badge.esm.06f68ce4.js";import"./index.esm.8aab8f7c.js";import"./paginator.esm.48f6f07f.js";import"./index.esm.59d7ab85.js";import"./index.esm.f2124f4a.js";import"./index.esm.db20bc22.js";import"./index.esm.262c264f.js";import"./index.esm.d83addac.js";import"./index.esm.cac72192.js";import"./_commonjsHelpers.87174ba5.js";import"./workCompany.9fc24a14.js";var pa=Object.defineProperty,fa=(t,e,a)=>e in t?pa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,at=(t,e,a)=>fa(t,typeof e!="symbol"?e+"":e,a);const ya=(t,e,a)=>{const l=t[e];return l?typeof l=="function"?l():Promise.resolve(l):new Promise((o,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==a?". Note that variables only represent file names one level deep.":""))))})};let zt,Hs,Ws,qe,Rt={},Mt={};class _a{constructor(e,a=!1){at(this,"texts",{}),at(this,"dateToMinutes",l=>l.getHours()*60+l.getMinutes()),qe=this,this._texts=e,!a&&Date&&!Date.prototype.addDays&&this._initDatePrototypes()}_initDatePrototypes(){Date.prototype.addDays=function(e){return qe.addDays(this,e)},Date.prototype.subtractDays=function(e){return qe.subtractDays(this,e)},Date.prototype.addHours=function(e){return qe.addHours(this,e)},Date.prototype.subtractHours=function(e){return qe.subtractHours(this,e)},Date.prototype.addMinutes=function(e){return qe.addMinutes(this,e)},Date.prototype.subtractMinutes=function(e){return qe.subtractMinutes(this,e)},Date.prototype.getWeek=function(){return qe.getWeek(this)},Date.prototype.isToday=function(){return qe.isToday(this)},Date.prototype.isLeapYear=function(){return qe.isLeapYear(this)},Date.prototype.format=function(e="YYYY-MM-DD"){return qe.formatDate(this,e)},Date.prototype.formatTime=function(e="HH:mm"){return qe.formatTime(this,e)}}removePrototypes(){delete Date.prototype.addDays,delete Date.prototype.subtractDays,delete Date.prototype.addHours,delete Date.prototype.subtractHours,delete Date.prototype.addMinutes,delete Date.prototype.subtractMinutes,delete Date.prototype.getWeek,delete Date.prototype.isToday,delete Date.prototype.isLeapYear,delete Date.prototype.format,delete Date.prototype.formatTime}updateTexts(e){this._texts=e}_todayFormatted(){return Hs!==new Date().getDate()&&(zt=new Date,Hs=zt.getDate(),Ws=`${zt.getFullYear()}-${zt.getMonth()}-${zt.getDate()}`),Ws}addDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()+a),l}subtractDays(e,a){const l=new Date(e.valueOf());return l.setDate(l.getDate()-a),l}addHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()+a),l}subtractHours(e,a){const l=new Date(e.valueOf());return l.setHours(l.getHours()-a),l}addMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()+a),l}subtractMinutes(e,a){const l=new Date(e.valueOf());return l.setMinutes(l.getMinutes()-a),l}getWeek(e){const a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),l=a.getUTCDay()||7;a.setUTCDate(a.getUTCDate()+4-l);const o=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((a-o)/864e5+1)/7)}isToday(e){return`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}`===this._todayFormatted()}isLeapYear(e){const a=e.getFullYear();return!(a%400)||a%100&&!(a%4)}getPreviousFirstDayOfWeek(e=null,a){const l=e&&new Date(e.valueOf())||new Date,o=a?7:6;return l.setDate(l.getDate()-(l.getDay()+o)%7),l}stringToDate(e){return e instanceof Date?e:(e.length===10&&(e+=" 00:00"),new Date(e.replace(/-/g,"/")))}countDays(e,a){typeof e=="string"&&(e=e.replace(/-/g,"/")),typeof a=="string"&&(a=a.replace(/-/g,"/")),e=new Date(e).setHours(0,0,0,0),a=new Date(a).setHours(0,0,1,0);const l=(new Date(a).getTimezoneOffset()-new Date(e).getTimezoneOffset())*60*1e3;return Math.ceil((a-e-l)/(24*3600*1e3))}datesInSameTimeStep(e,a,l){return Math.abs(e.getTime()-a.getTime())<=l*60*1e3}formatDate(e,a="YYYY-MM-DD",l=null){if(l||(l=this._texts),a||(a="YYYY-MM-DD"),a==="YYYY-MM-DD")return this.formatDateLite(e);Rt={},Mt={};const o={YYYY:()=>this._hydrateDateObject(e,l).YYYY,YY:()=>this._hydrateDateObject(e,l).YY(),M:()=>this._hydrateDateObject(e,l).M,MM:()=>this._hydrateDateObject(e,l).MM(),MMM:()=>this._hydrateDateObject(e,l).MMM(),MMMM:()=>this._hydrateDateObject(e,l).MMMM(),MMMMG:()=>this._hydrateDateObject(e,l).MMMMG(),D:()=>this._hydrateDateObject(e,l).D,DD:()=>this._hydrateDateObject(e,l).DD(),S:()=>this._hydrateDateObject(e,l).S(),d:()=>this._hydrateDateObject(e,l).d,dd:()=>this._hydrateDateObject(e,l).dd(),ddd:()=>this._hydrateDateObject(e,l).ddd(),dddd:()=>this._hydrateDateObject(e,l).dddd(),HH:()=>this._hydrateTimeObject(e,l).HH,H:()=>this._hydrateTimeObject(e,l).H,hh:()=>this._hydrateTimeObject(e,l).hh,h:()=>this._hydrateTimeObject(e,l).h,am:()=>this._hydrateTimeObject(e,l).am,AM:()=>this._hydrateTimeObject(e,l).AM,mm:()=>this._hydrateTimeObject(e,l).mm,m:()=>this._hydrateTimeObject(e,l).m};return a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(s,u)=>{const n=o[u.replace(/\{|\}/g,"")];return n!==void 0?n():u})}formatDateLite(e){const a=e.getMonth()+1,l=e.getDate();return`${e.getFullYear()}-${a<10?"0":""}${a}-${l<10?"0":""}${l}`}formatTime(e,a="HH:mm",l=null,o=!1){let s=!1;if(o){const[f,m,p]=[e.getHours(),e.getMinutes(),e.getSeconds()];f+m+p===23+59+59&&(s=!0)}if(e instanceof Date&&a==="HH:mm")return s?"24:00":this.formatTimeLite(e);Mt={},l||(l=this._texts);const u=this._hydrateTimeObject(e,l),n=a.replace(/(\{[a-zA-Z]+\}|[a-zA-Z]+)/g,(f,m)=>{const p=u[m.replace(/\{|\}/g,"")];return p!==void 0?p:m});return s?n.replace("23:59","24:00"):n}formatTimeLite(e){const a=e.getHours(),l=e.getMinutes();return`${(a<10?"0":"")+a}:${(l<10?"0":"")+l}`}_nth(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}_hydrateDateObject(e,a){if(Rt.D)return Rt;const l=e.getFullYear(),o=e.getMonth()+1,s=e.getDate(),n=(e.getDay()-1+7)%7;return Rt={YYYY:l,YY:()=>l.toString().substring(2),M:o,MM:()=>(o<10?"0":"")+o,MMM:()=>a.months[o-1].substring(0,3),MMMM:()=>a.months[o-1],MMMMG:()=>(a.monthsGenitive||a.months)[o-1],D:s,DD:()=>(s<10?"0":"")+s,S:()=>this._nth(s),d:n+1,dd:()=>a.weekDays[n][0],ddd:()=>a.weekDays[n].substr(0,3),dddd:()=>a.weekDays[n]},Rt}_hydrateTimeObject(e,a){if(Mt.am)return Mt;let l,o;e instanceof Date?(l=e.getHours(),o=e.getMinutes()):(l=Math.floor(e/60),o=Math.floor(e%60));const s=l%12?l%12:12,u=(a||{am:"am",pm:"pm"})[l===24||l<12?"am":"pm"];return Mt={H:l,h:s,HH:(l<10?"0":"")+l,hh:(s<10?"0":"")+s,am:u,AM:u.toUpperCase(),m:o,mm:(o<10?"0":"")+o},Mt}}const ga=24*60;class wa{constructor(e){at(this,"_vuecal",null),at(this,"selectCell",(a=!1,l,o)=>{this._vuecal.$emit("cell-click",o?{date:l,split:o}:l),this._vuecal.clickToNavigate||a?this._vuecal.switchToNarrowerView():this._vuecal.dblclickToNavigate&&"ontouchstart"in window&&(this._vuecal.domEvents.dblTapACell.taps++,setTimeout(()=>this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.domEvents.dblTapACell.timeout),this._vuecal.domEvents.dblTapACell.taps>=2&&(this._vuecal.domEvents.dblTapACell.taps=0,this._vuecal.switchToNarrowerView(),this._vuecal.$emit("cell-dblclick",o?{date:l,split:o}:l)))}),at(this,"keyPressEnterCell",(a,l)=>{this._vuecal.$emit("cell-keypress-enter",l?{date:a,split:l}:a),this._vuecal.switchToNarrowerView()}),at(this,"getPosition",a=>{const{left:l,top:o}=this._vuecal.cellsEl.getBoundingClientRect(),{clientX:s,clientY:u}="ontouchstart"in window&&a.touches?a.touches[0]:a;return{x:s-l,y:u-o}}),at(this,"minutesAtCursor",a=>{let l=0,o={x:0,y:0};const{timeStep:s,timeCellHeight:u,timeFrom:n}=this._vuecal.$props;return typeof a=="number"?l=a:typeof a=="object"&&(o=this.getPosition(a),l=Math.round(o.y*s/parseInt(u)+n)),{minutes:Math.max(Math.min(l,ga),0),cursorCoords:o}}),this._vuecal=e}}const Da=2,gs=24*60;let be,ke,ws;class ba{constructor(e,a){at(this,"_vuecal",null),at(this,"eventDefaults",{_eid:null,start:"",startTimeMinutes:0,end:"",endTimeMinutes:0,title:"",content:"",background:!1,allDay:!1,segments:null,repeat:null,daysCount:1,deletable:!0,deleting:!1,titleEditable:!0,resizable:!0,resizing:!1,draggable:!0,dragging:!1,draggingStatic:!1,focused:!1,class:""}),this._vuecal=e,be=a}createAnEvent(e,a,l){if(typeof e=="string"&&(e=be.stringToDate(e)),!(e instanceof Date))return!1;const o=be.dateToMinutes(e);a=a*1||Da*60;const s=o+a,u=be.addMinutes(new Date(e),a);l.end&&(typeof l.end=="string"&&(l.end=be.stringToDate(l.end)),l.endTimeMinutes=be.dateToMinutes(l.end));const n={...this.eventDefaults,_eid:`${this._vuecal._.uid}_${this._vuecal.eventIdIncrement++}`,start:e,startTimeMinutes:o,end:u,endTimeMinutes:s,segments:null,...l};if(!(typeof this._vuecal.onEventCreate=="function"&&!this._vuecal.onEventCreate(n,()=>this.deleteAnEvent(n))))return n.startDateF!==n.endDateF&&(n.daysCount=be.countDays(n.start,n.end)),this._vuecal.mutableEvents.push(n),this._vuecal.addEventsToView([n]),this._vuecal.emitWithEvent("event-create",n),this._vuecal.$emit("event-change",{event:this._vuecal.cleanupEvent(n),originalEvent:null}),n}addEventSegment(e){e.segments||(e.segments={},e.segments[be.formatDateLite(e.start)]={start:e.start,startTimeMinutes:e.startTimeMinutes,endTimeMinutes:gs,isFirstDay:!0,isLastDay:!1});const a=e.segments[be.formatDateLite(e.end)];a&&(a.isLastDay=!1,a.endTimeMinutes=gs);const l=be.addDays(e.end,1),o=be.formatDateLite(l);return l.setHours(0,0,0,0),e.segments[o]={start:l,startTimeMinutes:0,endTimeMinutes:e.endTimeMinutes,isFirstDay:!1,isLastDay:!0},e.end=be.addMinutes(l,e.endTimeMinutes),e.daysCount=Object.keys(e.segments).length,o}removeEventSegment(e){let a=Object.keys(e.segments).length;if(a<=1)return be.formatDateLite(e.end);delete e.segments[be.formatDateLite(e.end)],a--;const l=be.subtractDays(e.end,1),o=be.formatDateLite(l),s=e.segments[o];return a?s&&(s.isLastDay=!0,s.endTimeMinutes=e.endTimeMinutes):e.segments=null,e.daysCount=a||1,e.end=l,o}createEventSegments(e,a,l){const o=a.getTime(),s=l.getTime();let u=e.start.getTime(),n=e.end.getTime(),f=!1,m,p,x;for(!e.end.getHours()&&!e.end.getMinutes()&&(n-=1e3),e.segments={},e.repeat?(m=o,p=Math.min(s,e.repeat.until?be.stringToDate(e.repeat.until).getTime():s)):(m=Math.max(o,u),p=Math.min(s,n));m<=p;){let V=!1;const B=be.addDays(new Date(m),1).setHours(0,0,0,0);let I,ye,ae,K;if(e.repeat){const J=new Date(m),_e=be.formatDateLite(J);(f||e.occurrences&&e.occurrences[_e])&&(f||(u=e.occurrences[_e].start,x=new Date(u).setHours(0,0,0,0),n=e.occurrences[_e].end),f=!0,V=!0),I=m===x,ye=_e===be.formatDateLite(new Date(n)),ae=new Date(I?u:m),K=be.formatDateLite(ae),ye&&(f=!1)}else V=!0,I=m===u,ye=p===n&&B>p,ae=I?e.start:new Date(m),K=be.formatDateLite(I?e.start:ae);V&&(e.segments[K]={start:ae,startTimeMinutes:I?e.startTimeMinutes:0,endTimeMinutes:ye?e.endTimeMinutes:gs,isFirstDay:I,isLastDay:ye}),m=B}return e}deleteAnEvent(e){this._vuecal.emitWithEvent("event-delete",e),this._vuecal.mutableEvents=this._vuecal.mutableEvents.filter(a=>a._eid!==e._eid),this._vuecal.view.events=this._vuecal.view.events.filter(a=>a._eid!==e._eid)}checkCellOverlappingEvents(e,a){ws=e.slice(0),ke={},e.forEach(o=>{ws.shift(),ke[o._eid]||(ke[o._eid]={overlaps:[],start:o.start,position:0}),ke[o._eid].position=0,ws.forEach(s=>{ke[s._eid]||(ke[s._eid]={overlaps:[],start:s.start,position:0});const u=this.eventInRange(s,o.start,o.end),n=a.overlapsPerTimeStep?be.datesInSameTimeStep(o.start,s.start,a.timeStep):1;if(!o.background&&!o.allDay&&!s.background&&!s.allDay&&u&&n)ke[o._eid].overlaps.push(s._eid),ke[o._eid].overlaps=[...new Set(ke[o._eid].overlaps)],ke[s._eid].overlaps.push(o._eid),ke[s._eid].overlaps=[...new Set(ke[s._eid].overlaps)],ke[s._eid].position++;else{let f,m;(f=(ke[o._eid]||{overlaps:[]}).overlaps.indexOf(s._eid))>-1&&ke[o._eid].overlaps.splice(f,1),(m=(ke[s._eid]||{overlaps:[]}).overlaps.indexOf(o._eid))>-1&&ke[s._eid].overlaps.splice(m,1),ke[s._eid].position--}})});let l=0;for(const o in ke){const s=ke[o],u=s.overlaps.map(n=>({id:n,start:ke[n].start}));u.push({id:o,start:s.start}),u.sort((n,f)=>n.start<f.start?-1:n.start>f.start?1:n.id>f.id?-1:1),s.position=u.findIndex(n=>n.id===o),l=Math.max(this.getOverlapsStreak(s,ke),l)}return[ke,l]}getOverlapsStreak(e,a={}){let l=e.overlaps.length+1,o=[];return e.overlaps.forEach(s=>{o.includes(s)||e.overlaps.filter(n=>n!==s).forEach(n=>{a[n].overlaps.includes(s)||o.push(n)})}),o=[...new Set(o)],l-=o.length,l}eventInRange(e,a,l){if(e.allDay||!this._vuecal.time){const u=new Date(e.start).setHours(0,0,0,0);return new Date(e.end).setHours(23,59,0,0)>=new Date(a).setHours(0,0,0,0)&&u<=new Date(l).setHours(0,0,0,0)}const o=e.start.getTime(),s=e.end.getTime();return o<l.getTime()&&s>a.getTime()}}const ka={class:"vuecal__flex vuecal__weekdays-headings"},Ta=["onClick"],Ca={class:"vuecal__flex weekday-label",grow:""},Ea={class:"full"},Sa={class:"small"},xa={class:"xsmall"},Ma={key:0},Va={key:0,class:"vuecal__flex vuecal__split-days-headers",grow:""};function $a(t,e,a,l,o,s){return d(),h("div",ka,[(d(!0),h(pe,null,Te(s.headings,(u,n)=>(d(),h(pe,{key:n},[u.hide?T("",!0):(d(),h("div",{key:0,class:ve(["vuecal__flex vuecal__heading",{today:u.today,clickable:s.cellHeadingsClickable}]),style:R(s.weekdayCellStyles),onClick:f=>s.view.id==="week"&&s.selectCell(u.date,f),onDblclick:e[0]||(e[0]=f=>s.view.id==="week"&&s.vuecal.dblclickToNavigate&&a.switchToNarrowerView())},[_(os,{name:`slide-fade--${a.transitionDirection}`,appear:s.vuecal.transitions},{default:S(()=>[(d(),h("div",{class:"vuecal__flex",column:"",key:s.vuecal.transitions?`${n}-${u.dayOfMonth}`:!1},[i("div",Ca,[se(t.$slots,"weekday-heading",{heading:s.cleanupHeading(u),view:s.view},()=>[i("span",Ea,E(u.full),1),i("span",Sa,E(u.small),1),i("span",xa,E(u.xsmall),1),u.dayOfMonth?(d(),h("span",Ma," "+E(u.dayOfMonth),1)):T("",!0)])]),s.vuecal.hasSplits&&s.vuecal.stickySplitLabels?(d(),h("div",Va,[(d(!0),h(pe,null,Te(s.vuecal.daySplits,(f,m)=>(d(),h("div",{class:ve(["day-split-header",f.class||!1]),key:m},[se(t.$slots,"split-label",{split:f,view:s.view},()=>[me(E(f.label),1)])],2))),128))])):T("",!0)]))]),_:2},1032,["name","appear"])],46,Ta))],64))),128))])}const Vt=(t,e)=>{const a=t.__vccOpts||t;for(const[l,o]of e)a[l]=o;return a},Oa={inject:["vuecal","utils","view"],props:{transitionDirection:{type:String,default:"right"},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},methods:{selectCell(t,e){t.getTime()!==this.view.selectedDate.getTime()&&(this.view.selectedDate=t),this.utils.cell.selectCell(!1,t,e)},cleanupHeading:t=>({label:t.full,date:t.date,...t.today?{today:t.today}:{}})},computed:{headings(){if(!["month","week"].includes(this.view.id))return[];let t=!1;return this.weekDays.map((a,l)=>{const o=this.utils.date.addDays(this.view.startDate,this.vuecal.startWeekOnSunday&&this.vuecal.hideWeekends?l-1:l);return{hide:a.hide,full:a.label,small:a.short||a.label.substr(0,3),xsmall:a.short||a.label.substr(0,1),...this.view.id==="week"?{dayOfMonth:o.getDate(),date:o,today:!t&&this.utils.date.isToday(o)&&!t++}:{}}})},cellWidth(){return 100/(7-this.weekDays.reduce((t,e)=>t+e.hide,0))},weekdayCellStyles(){return{...this.vuecal.hideWeekdays.length?{width:`${this.cellWidth}%`}:{}}},cellHeadingsClickable(){return this.view.id==="week"&&(this.vuecal.clickToNavigate||this.vuecal.dblclickToNavigate)}}},Ks=Vt(Oa,[["render",$a]]),Aa={class:"vuecal__header"},La={key:0,class:"vuecal__flex vuecal__menu",role:"tablist","aria-label":"Calendar views navigation"},ja=["onDragenter","onDragleave","onClick","aria-label"],Ia={key:1,class:"vuecal__title-bar"},Ha=["aria-label"],Wa={class:"vuecal__flex vuecal__title",grow:""},Ua=["aria-label"],Fa={key:0,class:"vuecal__flex vuecal__split-days-headers"};function Na(t,e,a,l,o,s){const u=_t("weekdays-headings");return d(),h("div",Aa,[a.options.hideViewSelector?T("",!0):(d(),h("div",La,[(d(!0),h(pe,null,Te(a.viewProps.views,(n,f)=>(d(),h(pe,{key:f},[n.enabled?(d(),h("button",{key:0,class:ve(["vuecal__view-btn",{"vuecal__view-btn--active":s.view.id===f,"vuecal__view-btn--highlighted":t.highlightedControl===f}]),type:"button",onDragenter:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(m,f,t.$data),onDragleave:m=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(m,f,t.$data),onClick:m=>s.switchView(f,null,!0),"aria-label":`${n.label} view`},E(n.label),43,ja)):T("",!0)],64))),128))])),a.options.hideTitleBar?T("",!0):(d(),h("div",Ia,[i("button",{class:ve(["vuecal__arrow vuecal__arrow--prev",{"vuecal__arrow--highlighted":t.highlightedControl==="previous"}]),type:"button",onClick:e[0]||(e[0]=(...n)=>s.previous&&s.previous(...n)),onDragenter:e[1]||(e[1]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"previous",t.$data)),onDragleave:e[2]||(e[2]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"previous",t.$data)),"aria-label":`Previous ${s.view.id}`},[se(t.$slots,"arrow-prev")],42,Ha),i("div",Wa,[_(os,{name:a.options.transitions?`slide-fade--${s.transitionDirection}`:""},{default:S(()=>[(d(),ue(aa(s.broaderView?"button":"span"),{type:!!s.broaderView&&"button",key:`${s.view.id}${s.view.startDate.toString()}`,onClick:e[3]||(e[3]=n=>!!s.broaderView&&s.switchToBroaderView()),"aria-label":!!s.broaderView&&`Go to ${s.broaderView} view`},{default:S(()=>[se(t.$slots,"title")]),_:3},8,["type","aria-label"]))]),_:3},8,["name"])]),a.options.todayButton?(d(),h("button",{key:0,class:ve(["vuecal__today-btn",{"vuecal__today-btn--highlighted":t.highlightedControl==="today"}]),type:"button",onClick:e[4]||(e[4]=(...n)=>s.goToToday&&s.goToToday(...n)),onDragenter:e[5]||(e[5]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"today",t.$data)),onDragleave:e[6]||(e[6]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"today",t.$data)),"aria-label":"Today"},[se(t.$slots,"today-button")],34)):T("",!0),i("button",{class:ve(["vuecal__arrow vuecal__arrow--next",{"vuecal__arrow--highlighted":t.highlightedControl==="next"}]),type:"button",onClick:e[7]||(e[7]=(...n)=>s.next&&s.next(...n)),onDragenter:e[8]||(e[8]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragEnter(n,"next",t.$data)),onDragleave:e[9]||(e[9]=n=>a.editEvents.drag&&s.dnd&&s.dnd.viewSelectorDragLeave(n,"next",t.$data)),"aria-label":`Next ${s.view.id}`},[se(t.$slots,"arrow-next")],42,Ua)])),a.viewProps.weekDaysInHeader?(d(),ue(u,{key:2,"week-days":a.weekDays,"transition-direction":s.transitionDirection,"switch-to-narrower-view":a.switchToNarrowerView},Ds({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:S(({heading:n,view:f})=>[se(t.$slots,"weekday-heading",{heading:n,view:f})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:S(({split:n})=>[se(t.$slots,"split-label",{split:n,view:s.view})]),key:"1"}:void 0]),1032,["week-days","transition-direction","switch-to-narrower-view"])):T("",!0),_(os,{name:`slide-fade--${s.transitionDirection}`},{default:S(()=>[s.showDaySplits?(d(),h("div",Fa,[(d(!0),h(pe,null,Te(a.daySplits,(n,f)=>(d(),h("div",{class:ve(["day-split-header",n.class||!1]),key:f},[se(t.$slots,"split-label",{split:n,view:s.view.id},()=>[me(E(n.label),1)])],2))),128))])):T("",!0)]),_:3},8,["name"])])}const Ba={inject:["vuecal","previous","next","switchView","updateSelectedDate","modules","view"],components:{WeekdaysHeadings:Ks},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},hasSplits:{type:[Boolean,Number],default:!1},daySplits:{type:Array,default:()=>[]},viewProps:{type:Object,default:()=>({})},weekDays:{type:Array,default:()=>[]},switchToNarrowerView:{type:Function,default:()=>{}}},data:()=>({highlightedControl:null}),methods:{goToToday(){this.updateSelectedDate(new Date(new Date().setHours(0,0,0,0)))},switchToBroaderView(){this.transitionDirection="left",this.broaderView&&this.switchView(this.broaderView)}},computed:{transitionDirection:{get(){return this.vuecal.transitionDirection},set(t){this.vuecal.transitionDirection=t}},broaderView(){const{enabledViews:t}=this.vuecal;return t[t.indexOf(this.view.id)-1]},showDaySplits(){return this.view.id==="day"&&this.hasSplits&&this.options.stickySplitLabels&&!this.options.minSplitWidth},dnd(){return this.modules.dnd}}},Ya=Vt(Ba,[["render",Na]]),za=["draggable"];function Ra(t,e,a,l,o,s){return d(),h("div",{class:ve(["vuecal__event",s.eventClasses]),style:R(s.eventStyles),tabindex:"0",onFocus:e[4]||(e[4]=(...u)=>s.focusEvent&&s.focusEvent(...u)),onKeypress:e[5]||(e[5]=Rs(dt((...u)=>s.onEnterKeypress&&s.onEnterKeypress(...u),["stop"]),["enter"])),onMouseenter:e[6]||(e[6]=(...u)=>s.onMouseEnter&&s.onMouseEnter(...u)),onMouseleave:e[7]||(e[7]=(...u)=>s.onMouseLeave&&s.onMouseLeave(...u)),onTouchstart:e[8]||(e[8]=dt((...u)=>s.onTouchStart&&s.onTouchStart(...u),["stop"])),onMousedown:e[9]||(e[9]=u=>s.onMouseDown(u)),onMouseup:e[10]||(e[10]=(...u)=>s.onMouseUp&&s.onMouseUp(...u)),onTouchend:e[11]||(e[11]=(...u)=>s.onMouseUp&&s.onMouseUp(...u)),onTouchmove:e[12]||(e[12]=(...u)=>s.onTouchMove&&s.onTouchMove(...u)),onDblclick:e[13]||(e[13]=(...u)=>s.onDblClick&&s.onDblClick(...u)),draggable:s.draggable,onDragstart:e[14]||(e[14]=u=>s.draggable&&s.onDragStart(u)),onDragend:e[15]||(e[15]=u=>s.draggable&&s.onDragEnd())},[s.vuecal.editEvents.delete&&a.event.deletable?(d(),h("div",{key:0,class:"vuecal__event-delete",onClick:e[0]||(e[0]=dt((...u)=>s.deleteEvent&&s.deleteEvent(...u),["stop"])),onTouchstart:e[1]||(e[1]=dt((...u)=>s.touchDeleteEvent&&s.touchDeleteEvent(...u),["stop"]))},E(s.vuecal.texts.deleteEvent),33)):T("",!0),se(t.$slots,"event",{event:a.event,view:s.view.id}),s.resizable?(d(),h("div",{key:1,class:"vuecal__event-resize-handle",contenteditable:"false",onMousedown:e[2]||(e[2]=dt((...u)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...u),["stop","prevent"])),onTouchstart:e[3]||(e[3]=dt((...u)=>s.onResizeHandleMouseDown&&s.onResizeHandleMouseDown(...u),["stop","prevent"]))},null,32)):T("",!0)],46,za)}const qa={inject:["vuecal","utils","modules","view","domEvents","editEvents"],props:{cellFormattedDate:{type:String,default:""},event:{type:Object,default:()=>({})},cellEvents:{type:Array,default:()=>[]},overlaps:{type:Array,default:()=>[]},eventPosition:{type:Number,default:0},overlapsStreak:{type:Number,default:0},allDay:{type:Boolean,default:!1}},data:()=>({touch:{dragThreshold:30,startX:0,startY:0,dragged:!1}}),methods:{onMouseDown(t,e=!1){if("ontouchstart"in window&&!e)return!1;const{clickHoldAnEvent:a,focusAnEvent:l,resizeAnEvent:o,dragAnEvent:s}=this.domEvents;if(l._eid===this.event._eid&&a._eid===this.event._eid)return!0;this.focusEvent(),a._eid=null,this.vuecal.editEvents.delete&&this.event.deletable&&(a.timeoutId=setTimeout(()=>{!o._eid&&!s._eid&&(a._eid=this.event._eid,this.event.deleting=!0)},a.timeout))},onMouseUp(t){this.domEvents.focusAnEvent._eid===this.event._eid&&!this.touch.dragged&&(this.domEvents.focusAnEvent.mousedUp=!0),this.touch.dragged=!1},onMouseEnter(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-enter",this.event)},onMouseLeave(t){t.preventDefault(),this.vuecal.emitWithEvent("event-mouse-leave",this.event)},onTouchMove(t){if(typeof this.vuecal.onEventClick!="function")return;const{clientX:e,clientY:a}=t.touches[0],{startX:l,startY:o,dragThreshold:s}=this.touch;(Math.abs(e-l)>s||Math.abs(a-o)>s)&&(this.touch.dragged=!0)},onTouchStart(t){this.touch.startX=t.touches[0].clientX,this.touch.startY=t.touches[0].clientY,this.onMouseDown(t,!0)},onEnterKeypress(t){if(typeof this.vuecal.onEventClick=="function")return this.vuecal.onEventClick(this.event,t)},onDblClick(t){if(typeof this.vuecal.onEventDblclick=="function")return this.vuecal.onEventDblclick(this.event,t)},onDragStart(t){this.dnd&&this.dnd.eventDragStart(t,this.event)},onDragEnd(){this.dnd&&this.dnd.eventDragEnd(this.event)},onResizeHandleMouseDown(){this.focusEvent(),this.domEvents.dragAnEvent._eid=null,this.domEvents.resizeAnEvent=Object.assign(this.domEvents.resizeAnEvent,{_eid:this.event._eid,start:(this.segment||this.event).start,split:this.event.split||null,segment:!!this.segment&&this.utils.date.formatDateLite(this.segment.start),originalEnd:new Date((this.segment||this.event).end),originalEndTimeMinutes:this.event.endTimeMinutes}),this.event.resizing=!0},deleteEvent(t=!1){if("ontouchstart"in window&&!t)return!1;this.utils.event.deleteAnEvent(this.event)},touchDeleteEvent(t){this.deleteEvent(!0)},cancelDeleteEvent(){this.event.deleting=!1},focusEvent(){const{focusAnEvent:t}=this.domEvents,e=t._eid;if(e!==this.event._eid){if(e){const a=this.view.events.find(l=>l._eid===e);a&&(a.focused=!1)}this.vuecal.cancelDelete(),this.vuecal.emitWithEvent("event-focus",this.event),t._eid=this.event._eid,this.event.focused=!0}}},computed:{eventDimensions(){const{startTimeMinutes:t,endTimeMinutes:e}=this.segment||this.event;let a=t-this.vuecal.timeFrom;const l=Math.max(Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),0);a=Math.min(e,this.vuecal.timeTo)-this.vuecal.timeFrom;const o=Math.round(a*this.vuecal.timeCellHeight/this.vuecal.timeStep),s=Math.max(o-l,5);return{top:l,height:s}},eventStyles(){if(this.event.allDay||!this.vuecal.time||!this.event.endTimeMinutes||this.view.id==="month"||this.allDay)return{};let t=100/Math.min(this.overlaps.length+1,this.overlapsStreak),e=100/(this.overlaps.length+1)*this.eventPosition;this.vuecal.minEventWidth&&t<this.vuecal.minEventWidth&&(t=this.vuecal.minEventWidth,e=(100-this.vuecal.minEventWidth)/this.overlaps.length*this.eventPosition);const{top:a,height:l}=this.eventDimensions;return{top:`${a}px`,height:`${l}px`,width:`${t}%`,left:this.event.left&&`${this.event.left}px`||`${e}%`}},eventClasses(){const{isFirstDay:t,isLastDay:e}=this.segment||{};return{[this.event.class]:!!this.event.class,"vuecal__event--focus":this.event.focused,"vuecal__event--resizing":this.event.resizing,"vuecal__event--background":this.event.background,"vuecal__event--deletable":this.event.deleting,"vuecal__event--all-day":this.event.allDay,"vuecal__event--dragging":!this.event.draggingStatic&&this.event.dragging,"vuecal__event--static":this.event.dragging&&this.event.draggingStatic,"vuecal__event--multiple-days":!!this.segment,"event-start":this.segment&&t&&!e,"event-middle":this.segment&&!t&&!e,"event-end":this.segment&&e&&!t}},segment(){return this.event.segments&&this.event.segments[this.cellFormattedDate]||null},draggable(){const{draggable:t,background:e,daysCount:a}=this.event;return this.vuecal.editEvents.drag&&t&&!e&&a===1},resizable(){const{editEvents:t,time:e}=this.vuecal;return t.resize&&this.event.resizable&&e&&!this.allDay&&(!this.segment||this.segment&&this.segment.isLastDay)&&this.view.id!=="month"},dnd(){return this.modules.dnd}}},Pa=Vt(qa,[["render",Ra]]),Ka=["data-split","aria-label","onTouchstart","onMousedown","onDragover","onDrop"],Ja={key:0,class:"cell-time-labels"},Ga=["innerHTML"],Xa={key:2,class:"vuecal__cell-events"},Za=["title"];function Qa(t,e,a,l,o,s){const u=_t("event");return d(),ue(ia,{class:ve(["vuecal__cell",s.cellClasses]),name:`slide-fade--${s.transitionDirection}`,tag:"div",appear:a.options.transitions,style:R(s.cellStyles)},{default:S(()=>[(d(!0),h(pe,null,Te(s.splitsCount?s.splits:1,(n,f)=>(d(),h("div",{class:ve(["vuecal__flex vuecal__cell-content",s.splitsCount&&s.splitClasses(n)]),key:a.options.transitions?`${s.view.id}-${a.data.content}-${f}`:f,"data-split":s.splitsCount?n.id:!1,column:"",tabindex:"0","aria-label":a.data.content,onFocus:e[0]||(e[0]=m=>s.onCellFocus(m)),onKeypress:e[1]||(e[1]=Rs(m=>s.onCellkeyPressEnter(m),["enter"])),onTouchstart:m=>!s.isDisabled&&s.onCellTouchStart(m,s.splitsCount?n.id:null),onMousedown:m=>!s.isDisabled&&s.onCellMouseDown(m,s.splitsCount?n.id:null),onClick:e[2]||(e[2]=m=>!s.isDisabled&&s.onCellClick(m)),onDblclick:e[3]||(e[3]=m=>!s.isDisabled&&s.onCellDblClick(m)),onContextmenu:e[4]||(e[4]=m=>!s.isDisabled&&a.options.cellContextmenu&&s.onCellContextMenu(m)),onDragenter:e[5]||(e[5]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragEnter(m,t.$data,a.data.startDate)),onDragover:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragOver(m,t.$data,a.data.startDate,s.splitsCount?n.id:null),onDragleave:e[6]||(e[6]=m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragLeave(m,t.$data,a.data.startDate)),onDrop:m=>!s.isDisabled&&a.editEvents.drag&&s.dnd&&s.dnd.cellDragDrop(m,t.$data,a.data.startDate,s.splitsCount?n.id:null)},[a.options.showTimeInCells&&a.options.time&&s.isWeekOrDayView&&!a.allDay?(d(),h("div",Ja,[(d(!0),h(pe,null,Te(s.vuecal.timeCells,(m,p)=>(d(),h("span",{class:"cell-time-label",key:p},E(m.label),1))),128))])):T("",!0),s.isWeekOrDayView&&!a.allDay&&s.specialHours.length?(d(!0),h(pe,{key:1},Te(s.specialHours,(m,p)=>(d(),h("div",{class:ve(["vuecal__special-hours",`vuecal__special-hours--day${m.day} ${m.class}`]),style:R(`height: ${m.height}px;top: ${m.top}px`)},[m.label?(d(),h("div",{key:0,class:"special-hours-label",innerHTML:m.label},null,8,Ga)):T("",!0)],6))),256)):T("",!0),se(t.$slots,"cell-content",{events:s.events,selectCell:m=>s.selectCell(m,!0),split:s.splitsCount?n:!1}),s.eventsCount&&(s.isWeekOrDayView||s.view.id==="month"&&a.options.eventsOnMonthView)?(d(),h("div",Xa,[(d(!0),h(pe,null,Te(s.splitsCount?n.events:s.events,(m,p)=>(d(),ue(u,{key:p,"cell-formatted-date":a.data.formattedDate,event:m,"all-day":a.allDay,"cell-events":s.splitsCount?n.events:s.events,overlaps:((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).overlaps,"event-position":((s.splitsCount?n.overlaps[m._eid]:t.cellOverlaps[m._eid])||[]).position,"overlaps-streak":s.splitsCount?n.overlapsStreak:t.cellOverlapsStreak},{event:S(({event:x,view:V})=>[se(t.$slots,"event",{view:V,event:x})]),_:2},1032,["cell-formatted-date","event","all-day","cell-events","overlaps","event-position","overlaps-streak"]))),128))])):T("",!0)],42,Ka))),128)),s.timelineVisible?(d(),h("div",{class:"vuecal__now-line",style:R(`top: ${s.todaysTimePosition}px`),key:a.options.transitions?`${s.view.id}-now-line`:"now-line",title:s.utils.date.formatTime(s.vuecal.now)},null,12,Za)):T("",!0)]),_:3},8,["class","name","appear","style"])}const ei={inject:["vuecal","utils","modules","view","domEvents"],components:{Event:Pa},props:{options:{type:Object,default:()=>({})},editEvents:{type:Object,required:!0},data:{type:Object,required:!0},cellSplits:{type:Array,default:()=>[]},minTimestamp:{type:[Number,null],default:null},maxTimestamp:{type:[Number,null],default:null},cellWidth:{type:[Number,Boolean],default:!1},allDay:{type:Boolean,default:!1}},data:()=>({cellOverlaps:{},cellOverlapsStreak:1,timeAtCursor:null,highlighted:!1,highlightedSplit:null}),methods:{getSplitAtCursor({target:t}){let a=t.classList.contains("vuecal__cell-split")?t:this.vuecal.findAncestor(t,"vuecal__cell-split");return a&&(a=a.attributes["data-split"].value,parseInt(a).toString()===a.toString()&&(a=parseInt(a))),a||null},splitClasses(t){return{"vuecal__cell-split":!0,"vuecal__cell-split--highlighted":this.highlightedSplit===t.id,[t.class]:!!t.class}},checkCellOverlappingEvents(){this.options.time&&this.eventsCount&&!this.splitsCount&&(this.eventsCount===1?(this.cellOverlaps=[],this.cellOverlapsStreak=1):[this.cellOverlaps,this.cellOverlapsStreak]=this.utils.event.checkCellOverlappingEvents(this.events,this.options))},isDOMElementAnEvent(t){return this.vuecal.isDOMElementAnEvent(t)},selectCell(t,e=!1){const a=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.selectCell(e,this.timeAtCursor,a),this.timeAtCursor=null},onCellkeyPressEnter(t){this.isSelected||this.onCellFocus(t);const e=this.splitsCount?this.getSplitAtCursor(t):null;this.utils.cell.keyPressEnterCell(this.timeAtCursor,e),this.timeAtCursor=null},onCellFocus(t){if(!this.isSelected&&!this.isDisabled){this.isSelected=this.data.startDate;const e=this.splitsCount?this.getSplitAtCursor(t):null,a=this.timeAtCursor||this.data.startDate;this.vuecal.$emit("cell-focus",e?{date:a,split:e}:a)}},onCellMouseDown(t,e=null,a=!1){if("ontouchstart"in window&&!a)return!1;this.isSelected||this.onCellFocus(t);const{clickHoldACell:l,focusAnEvent:o}=this.domEvents;this.domEvents.cancelClickEventCreation=!1,l.eventCreated=!1,this.timeAtCursor=new Date(this.data.startDate);const{minutes:s,cursorCoords:{y:u}}=this.vuecal.minutesAtCursor(t);this.timeAtCursor.setMinutes(s);const n=this.isDOMElementAnEvent(t.target);!n&&o._eid&&((this.view.events.find(f=>f._eid===o._eid)||{}).focused=!1),this.editEvents.create&&!n&&this.setUpEventCreation(t,u)},setUpEventCreation(t,e){if(this.options.dragToCreateEvent&&["week","day"].includes(this.view.id)){const{dragCreateAnEvent:a}=this.domEvents;if(a.startCursorY=e,a.split=this.splitsCount?this.getSplitAtCursor(t):null,a.start=this.timeAtCursor,this.options.snapToTime){let l=this.timeAtCursor.getHours()*60+this.timeAtCursor.getMinutes();const o=l+this.options.snapToTime/2;l=o-o%this.options.snapToTime,a.start.setHours(0,l,0,0)}}else this.options.cellClickHold&&["month","week","day"].includes(this.view.id)&&this.setUpCellHoldTimer(t)},setUpCellHoldTimer(t){const{clickHoldACell:e}=this.domEvents;e.cellId=`${this.vuecal._.uid}_${this.data.formattedDate}`,e.split=this.splitsCount?this.getSplitAtCursor(t):null,e.timeoutId=setTimeout(()=>{if(e.cellId&&!this.domEvents.cancelClickEventCreation){const{_eid:a}=this.utils.event.createAnEvent(this.timeAtCursor,null,e.split?{split:e.split}:{});e.eventCreated=a}},e.timeout)},onCellTouchStart(t,e=null){this.onCellMouseDown(t,e,!0)},onCellClick(t){this.isDOMElementAnEvent(t.target)||this.selectCell(t)},onCellDblClick(t){const e=new Date(this.data.startDate);e.setMinutes(this.vuecal.minutesAtCursor(t).minutes);const a=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-dblclick",a?{date:e,split:a}:e),this.options.dblclickToNavigate&&this.vuecal.switchToNarrowerView()},onCellContextMenu(t){t.stopPropagation(),t.preventDefault();const e=new Date(this.data.startDate),{cursorCoords:a,minutes:l}=this.vuecal.minutesAtCursor(t);e.setMinutes(l);const o=this.splitsCount?this.getSplitAtCursor(t):null;this.vuecal.$emit("cell-contextmenu",{date:e,...a,...o||{},e:t})}},computed:{dnd(){return this.modules.dnd},nowInMinutes(){return this.utils.date.dateToMinutes(this.vuecal.now)},isBeforeMinDate(){return this.minTimestamp!==null&&this.minTimestamp>this.data.endDate.getTime()},isAfterMaxDate(){return this.maxTimestamp&&this.maxTimestamp<this.data.startDate.getTime()},isDisabled(){const{disableDays:t}=this.options,{isYearsOrYearView:e}=this.vuecal;return t.length&&t.includes(this.data.formattedDate)&&!e?!0:this.isBeforeMinDate||this.isAfterMaxDate},isSelected:{get(){let t=!1;const{selectedDate:e}=this.view;return this.view.id==="years"?t=e.getFullYear()===this.data.startDate.getFullYear():this.view.id==="year"?t=e.getFullYear()===this.data.startDate.getFullYear()&&e.getMonth()===this.data.startDate.getMonth():t=e.getTime()===this.data.startDate.getTime(),t},set(t){this.view.selectedDate=t,this.vuecal.$emit("update:selected-date",this.view.selectedDate)}},isWeekOrDayView(){return["week","day"].includes(this.view.id)},transitionDirection(){return this.vuecal.transitionDirection},specialHours(){return this.data.specialHours.map(t=>{let{from:e,to:a}=t;return e=Math.max(e,this.options.timeFrom),a=Math.min(a,this.options.timeTo),{...t,height:(a-e)*this.timeScale,top:(e-this.options.timeFrom)*this.timeScale}})},events(){const{startDate:t,endDate:e}=this.data;let a=[];if(!(["years","year"].includes(this.view.id)&&!this.options.eventsCountOnYearView)){if(a=this.view.events.slice(0),this.view.id==="month"&&a.push(...this.view.outOfScopeEvents),a=a.filter(l=>this.utils.event.eventInRange(l,t,e)),this.options.showAllDayEvents&&this.view.id!=="month"&&(a=a.filter(l=>!!l.allDay===this.allDay)),this.options.time&&this.isWeekOrDayView&&!this.allDay){const{timeFrom:l,timeTo:o}=this.options;a=a.filter(s=>{const u=s.daysCount>1&&s.segments[this.data.formattedDate]||{},n=s.daysCount===1&&s.startTimeMinutes<o&&s.endTimeMinutes>l,f=s.daysCount>1&&u.startTimeMinutes<o&&u.endTimeMinutes>l,m=!1;return s.allDay||n||f||m})}this.options.time&&this.isWeekOrDayView&&!(this.options.showAllDayEvents&&this.allDay)&&a.sort((l,o)=>l.start<o.start?-1:1),this.cellSplits.length||this.$nextTick(this.checkCellOverlappingEvents)}return a},eventsCount(){return this.events.length},splits(){return this.cellSplits.map((t,e)=>{const a=this.events.filter(s=>s.split===t.id),[l,o]=this.utils.event.checkCellOverlappingEvents(a.filter(s=>!s.background&&!s.allDay),this.options);return{...t,overlaps:l,overlapsStreak:o,events:a}})},splitsCount(){return this.splits.length},cellClasses(){return{[this.data.class]:!!this.data.class,"vuecal__cell--current":this.data.current,"vuecal__cell--today":this.data.today,"vuecal__cell--out-of-scope":this.data.outOfScope,"vuecal__cell--before-min":this.isDisabled&&this.isBeforeMinDate,"vuecal__cell--after-max":this.isDisabled&&this.isAfterMaxDate,"vuecal__cell--disabled":this.isDisabled,"vuecal__cell--selected":this.isSelected,"vuecal__cell--highlighted":this.highlighted,"vuecal__cell--has-splits":this.splitsCount,"vuecal__cell--has-events":this.eventsCount}},cellStyles(){return{...this.cellWidth?{width:`${this.cellWidth}%`}:{}}},timelineVisible(){const{time:t,timeTo:e}=this.options;return this.data.today&&this.isWeekOrDayView&&t&&!this.allDay&&this.nowInMinutes<=e},todaysTimePosition(){if(!this.data.today||!this.options.time)return;const t=this.nowInMinutes-this.options.timeFrom;return Math.round(t*this.timeScale)},timeScale(){return this.options.timeCellHeight/this.options.timeStep}}},Js=Vt(ei,[["render",Qa]]),ti={key:0,class:"vuecal__all-day-text",style:{width:"3em"}};function si(t,e,a,l,o,s){const u=_t("vuecal-cell");return d(),h("div",{class:"vuecal__flex vuecal__all-day",style:R(a.cellOrSplitMinWidth&&{height:a.height})},[a.cellOrSplitMinWidth?T("",!0):(d(),h("div",ti,[i("span",null,E(a.label),1)])),i("div",{class:ve(["vuecal__flex vuecal__cells",`${s.view.id}-view`]),grow:"",style:R(a.cellOrSplitMinWidth?`min-width: ${a.cellOrSplitMinWidth}px`:"")},[(d(!0),h(pe,null,Te(a.cells,(n,f)=>(d(),ue(u,{key:f,options:a.options,"edit-events":s.editEvents,data:n,"all-day":!0,"cell-width":a.options.hideWeekdays.length&&(s.vuecal.isWeekView||s.vuecal.isMonthView)&&s.vuecal.cellWidth,"min-timestamp":a.options.minTimestamp,"max-timestamp":a.options.maxTimestamp,"cell-splits":a.daySplits},{event:S(({event:m,view:p})=>[se(t.$slots,"event",{view:p,event:m})]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],6)],4)}const ai={inject:["vuecal","view","editEvents"],components:{"vuecal-cell":Js},props:{options:{type:Object,required:!0},cells:{type:Array,required:!0},label:{type:String,required:!0},daySplits:{type:Array,default:()=>[]},shortEvents:{type:Boolean,default:!0},height:{type:String,default:""},cellOrSplitMinWidth:{type:Number,default:null}},computed:{hasCellOrSplitWidth(){return!!(this.options.minCellWidth||this.daySplits.length&&this.options.minSplitWidth)}}},ii=Vt(ai,[["render",si]]),li=["lang"],ni={class:"default"},oi={key:0,class:"vuecal__flex vuecal__body",grow:""},ri=["onBlur","innerHTML"],di=["innerHTML"],ui=["innerHTML"],ci={class:"vuecal__flex",row:"",grow:""},hi={key:0,class:"vuecal__time-column"},mi={class:"vuecal__time-cell-label"},vi={key:1,class:"vuecal__flex vuecal__week-numbers",column:""},pi=["wrap","column"],fi=["onBlur","innerHTML"],yi=["innerHTML"],_i=["innerHTML"],gi=["wrap"],wi=["innerHTML"],Di=["innerHTML"],bi={key:2,class:"vuecal__cell-events-count"},ki={key:3,class:"vuecal__no-event"},Ti=["onBlur","innerHTML"],Ci=["innerHTML"],Ei={key:2,class:"vuecal__event-time"},Si={key:0},xi={key:1,class:"days-to-end"},Mi=["innerHTML"],Vi={key:0,class:"vuecal__scrollbar-check"};function $i(t,e,a,l,o,s){const u=_t("vuecal-header"),n=_t("all-day-bar"),f=_t("weekdays-headings"),m=_t("vuecal-cell");return d(),h("div",{class:ve(["vuecal__flex vuecal",s.cssClasses]),column:"",ref:"vuecal",lang:a.locale},[_(u,{options:t.$props,"edit-events":s.editEvents,"view-props":{views:s.views,weekDaysInHeader:s.weekDaysInHeader},"week-days":s.weekDays,"has-splits":s.hasSplits,"day-splits":s.daySplits,"switch-to-narrower-view":s.switchToNarrowerView},Ds({"arrow-prev":S(()=>[se(t.$slots,"arrow-prev",{},()=>[e[0]||(e[0]=me(" ")),e[1]||(e[1]=i("i",{class:"angle"},null,-1)),e[2]||(e[2]=me(" "))])]),"arrow-next":S(()=>[se(t.$slots,"arrow-next",{},()=>[e[3]||(e[3]=me(" ")),e[4]||(e[4]=i("i",{class:"angle"},null,-1)),e[5]||(e[5]=me(" "))])]),"today-button":S(()=>[se(t.$slots,"today-button",{},()=>[i("span",ni,E(o.texts.today),1)])]),title:S(()=>[se(t.$slots,"title",{title:s.viewTitle,view:o.view},()=>[me(E(s.viewTitle),1)])]),_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:S(({heading:p,view:x})=>[se(t.$slots,"weekday-heading",{heading:p,view:x})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:S(({split:p})=>[se(t.$slots,"split-label",{split:p,view:o.view.id})]),key:"1"}:void 0]),1032,["options","edit-events","view-props","week-days","has-splits","day-splits","switch-to-narrower-view"]),a.hideBody?T("",!0):(d(),h("div",oi,[_(os,{name:`slide-fade--${o.transitionDirection}`,appear:a.transitions},{default:S(()=>[(d(),h("div",{class:"vuecal__flex",style:{"min-width":"100%"},key:a.transitions?o.view.id:!1,column:""},[a.showAllDayEvents&&s.hasTimeColumn&&(!s.cellOrSplitMinWidth||s.isDayView&&!a.minSplitWidth)?(d(),ue(n,As(Ls({key:0},s.allDayBar)),{event:S(({event:p,view:x})=>[se(t.$slots,"event",{view:x,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:V=>s.onEventTitleBlur(V,p),innerHTML:p.title},null,40,ri)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,di)):T("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,ui)):T("",!0)])]),_:3},16)):T("",!0),i("div",{class:ve(["vuecal__bg",{vuecal__flex:!s.hasTimeColumn}]),column:""},[i("div",ci,[s.hasTimeColumn?(d(),h("div",hi,[a.showAllDayEvents&&s.cellOrSplitMinWidth&&!(s.isDayView&&!a.minSplitWidth)?(d(),h("div",{key:0,class:"vuecal__all-day-text",style:R({height:s.allDayBar.height})},[i("span",null,E(o.texts.allDay),1)],4)):T("",!0),(d(!0),h(pe,null,Te(s.timeCells,(p,x)=>(d(),h("div",{class:"vuecal__time-cell",key:x,style:R(`height: ${a.timeCellHeight}px`)},[se(t.$slots,"time-cell",{hours:p.hours,minutes:p.minutes},()=>[e[6]||(e[6]=i("span",{class:"vuecal__time-cell-line"},null,-1)),i("span",mi,E(p.label),1)])],4))),128))])):T("",!0),a.showWeekNumbers&&s.isMonthView?(d(),h("div",vi,[(d(),h(pe,null,Te(6,p=>i("div",{class:"vuecal__flex vuecal__week-number-cell",key:p,grow:""},[se(t.$slots,"week-number-cell",{week:s.getWeekNumber(p-1)},()=>[me(E(s.getWeekNumber(p-1)),1)])])),64))])):T("",!0),i("div",{class:ve(["vuecal__flex vuecal__cells",`${o.view.id}-view`]),grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,column:!!s.cellOrSplitMinWidth},[s.cellOrSplitMinWidth&&s.isWeekView?(d(),ue(f,{key:0,"transition-direction":o.transitionDirection,"week-days":s.weekDays,"switch-to-narrower-view":s.switchToNarrowerView,style:R(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},Ds({_:2},[t.$slots["weekday-heading"]?{name:"weekday-heading",fn:S(({heading:p,view:x})=>[se(t.$slots,"weekday-heading",{heading:p,view:x})]),key:"0"}:void 0,t.$slots["split-label"]?{name:"split-label",fn:S(({split:p})=>[se(t.$slots,"split-label",{split:p,view:o.view.id})]),key:"1"}:void 0]),1032,["transition-direction","week-days","switch-to-narrower-view","style"])):s.hasSplits&&a.stickySplitLabels&&a.minSplitWidth?(d(),h("div",{key:1,class:"vuecal__flex vuecal__split-days-headers",style:R(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(pe,null,Te(s.daySplits,(p,x)=>(d(),h("div",{class:ve(["day-split-header",p.class||!1]),key:x},[se(t.$slots,"split-label",{split:p,view:o.view.id},()=>[me(E(p.label),1)])],2))),128))],4)):T("",!0),a.showAllDayEvents&&s.hasTimeColumn&&(s.isWeekView&&s.cellOrSplitMinWidth||s.isDayView&&s.hasSplits&&a.minSplitWidth)?(d(),ue(n,As(Ls({key:2},s.allDayBar)),{event:S(({event:p,view:x})=>[se(t.$slots,"event",{view:x,event:p},()=>[s.editEvents.title&&p.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:V=>s.onEventTitleBlur(V,p),innerHTML:p.title},null,40,fi)):p.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:p.title},null,8,yi)):T("",!0),p.content&&!s.hasShortEvents&&!s.isShortMonthView?(d(),h("div",{key:2,class:"vuecal__event-content",innerHTML:p.content},null,8,_i)):T("",!0)])]),_:3},16)):T("",!0),i("div",{class:"vuecal__flex",ref:p=>o.cellsEl=p,grow:"",wrap:!s.cellOrSplitMinWidth||!s.isWeekView,style:R(s.cellOrSplitMinWidth?`min-width: ${s.cellOrSplitMinWidth}px`:"")},[(d(!0),h(pe,null,Te(s.viewCells,(p,x)=>(d(),ue(m,{key:x,options:t.$props,"edit-events":s.editEvents,data:p,"cell-width":a.hideWeekdays.length&&(s.isWeekView||s.isMonthView)&&s.cellWidth,"min-timestamp":s.minTimestamp,"max-timestamp":s.maxTimestamp,"cell-splits":s.hasSplits&&s.daySplits||[]},{"cell-content":S(({events:V,split:B,selectCell:I})=>[se(t.$slots,"cell-content",{cell:p,view:o.view,goNarrower:I,events:V},()=>[B&&!a.stickySplitLabels?(d(),h("div",{key:0,class:"split-label",innerHTML:B.label},null,8,wi)):T("",!0),p.content?(d(),h("div",{key:1,class:"vuecal__cell-date",innerHTML:p.content},null,8,Di)):T("",!0),(s.isMonthView&&!a.eventsOnMonthView||s.isYearsOrYearView&&a.eventsCountOnYearView)&&V.length?(d(),h("div",bi,[se(t.$slots,"events-count",{view:o.view,events:V},()=>[me(E(V.length),1)])])):T("",!0),!s.cellOrSplitHasEvents(V,B)&&s.isWeekOrDayView?(d(),h("div",ki,[se(t.$slots,"no-event",{},()=>[me(E(o.texts.noEvent),1)])])):T("",!0)])]),event:S(({event:V,view:B})=>[se(t.$slots,"event",{view:B,event:V},()=>[s.editEvents.title&&V.titleEditable?(d(),h("div",{key:0,class:"vuecal__event-title vuecal__event-title--edit",contenteditable:"",onBlur:I=>s.onEventTitleBlur(I,V),innerHTML:V.title},null,40,Ti)):V.title?(d(),h("div",{key:1,class:"vuecal__event-title",innerHTML:V.title},null,8,Ci)):T("",!0),a.time&&!V.allDay&&!(s.isMonthView&&(V.allDay||a.showAllDayEvents==="short"))&&!s.isShortMonthView?(d(),h("div",Ei,[me(E(o.utils.date.formatTime(V.start,s.TimeFormat)),1),V.endTimeMinutes?(d(),h("span",Si," - "+E(o.utils.date.formatTime(V.end,s.TimeFormat,null,!0)),1)):T("",!0),V.daysCount>1&&(V.segments[p.formattedDate]||{}).isFirstDay?(d(),h("small",xi," +"+E(V.daysCount-1)+E((o.texts.day[0]||"").toLowerCase()),1)):T("",!0)])):T("",!0),V.content&&!(s.isMonthView&&V.allDay&&a.showAllDayEvents==="short")&&!s.isShortMonthView?(d(),h("div",{key:3,class:"vuecal__event-content",innerHTML:V.content},null,8,Mi)):T("",!0)])]),"no-event":S(()=>[se(t.$slots,"no-event",{},()=>[me(E(o.texts.noEvent),1)])]),_:2},1032,["options","edit-events","data","cell-width","min-timestamp","max-timestamp","cell-splits"]))),128))],12,gi)],10,pi)])],2)]))]),_:3},8,["name","appear"]),o.ready?T("",!0):(d(),h("div",Vi,e[7]||(e[7]=[i("div",null,null,-1)])))]))],10,li)}const qt=24*60,ns={weekDays:Array(7).fill(""),weekDaysShort:[],months:Array(12).fill(""),years:"",year:"",month:"",week:"",day:"",today:"",noEvent:"",allDay:"",deleteEvent:"",createEvent:"",dateFormat:"dddd MMMM D, YYYY",am:"am",pm:"pm"},Us=["years","year","month","week","day"],Fs=new _a(ns),Oi={name:"vue-cal",components:{"vuecal-cell":Js,"vuecal-header":Ya,WeekdaysHeadings:Ks,AllDayBar:ii},provide(){return{vuecal:this,utils:this.utils,modules:this.modules,previous:this.previous,next:this.next,switchView:this.switchView,updateSelectedDate:this.updateSelectedDate,editEvents:this.editEvents,view:this.view,domEvents:this.domEvents}},props:{activeView:{type:String,default:"week"},allDayBarHeight:{type:[String,Number],default:"25px"},cellClickHold:{type:Boolean,default:!0},cellContextmenu:{type:Boolean,default:!1},clickToNavigate:{type:Boolean,default:!1},dblclickToNavigate:{type:Boolean,default:!0},disableDatePrototypes:{type:Boolean,default:!1},disableDays:{type:Array,default:()=>[]},disableViews:{type:Array,default:()=>[]},dragToCreateEvent:{type:Boolean,default:!0},dragToCreateThreshold:{type:Number,default:15},editableEvents:{type:[Boolean,Object],default:!1},events:{type:Array,default:()=>[]},eventsCountOnYearView:{type:Boolean,default:!1},eventsOnMonthView:{type:[Boolean,String],default:!1},hideBody:{type:Boolean,default:!1},hideTitleBar:{type:Boolean,default:!1},hideViewSelector:{type:Boolean,default:!1},hideWeekdays:{type:Array,default:()=>[]},hideWeekends:{type:Boolean,default:!1},locale:{type:[String,Object],default:"en"},maxDate:{type:[String,Date],default:""},minCellWidth:{type:Number,default:0},minDate:{type:[String,Date],default:""},minEventWidth:{type:Number,default:0},minSplitWidth:{type:Number,default:0},onEventClick:{type:[Function,null],default:null},onEventCreate:{type:[Function,null],default:null},onEventDblclick:{type:[Function,null],default:null},overlapsPerTimeStep:{type:Boolean,default:!1},resizeX:{type:Boolean,default:!1},selectedDate:{type:[String,Date],default:""},showAllDayEvents:{type:[Boolean,String],default:!1},showTimeInCells:{type:Boolean,default:!1},showWeekNumbers:{type:[Boolean,String],default:!1},snapToTime:{type:Number,default:0},small:{type:Boolean,default:!1},specialHours:{type:Object,default:()=>({})},splitDays:{type:Array,default:()=>[]},startWeekOnSunday:{type:Boolean,default:!1},stickySplitLabels:{type:Boolean,default:!1},time:{type:Boolean,default:!0},timeCellHeight:{type:Number,default:40},timeFormat:{type:String,default:""},timeFrom:{type:Number,default:0},timeStep:{type:Number,default:60},timeTo:{type:Number,default:qt},todayButton:{type:Boolean,default:!1},transitions:{type:Boolean,default:!0},twelveHour:{type:Boolean,default:!1},watchRealTime:{type:Boolean,default:!1},xsmall:{type:Boolean,default:!1}},data(){return{ready:!1,texts:{...ns},utils:{date:(this.disableDatePrototypes?Fs.removePrototypes():!1)||Fs,cell:null,event:null},modules:{dnd:null},cellsEl:null,view:{id:"",title:"",startDate:null,endDate:null,firstCellDate:null,lastCellDate:null,selectedDate:null,events:[]},eventIdIncrement:1,now:new Date,timeTickerIds:[null,null],domEvents:{resizeAnEvent:{_eid:null,start:null,split:null,segment:null,originalEndTimeMinutes:0,originalEnd:null,end:null,startCell:null,endCell:null},dragAnEvent:{_eid:null},dragCreateAnEvent:{startCursorY:null,start:null,split:null,event:null},focusAnEvent:{_eid:null,mousedUp:!1},clickHoldAnEvent:{_eid:null,timeout:1200,timeoutId:null},dblTapACell:{taps:0,timeout:500},clickHoldACell:{cellId:null,split:null,timeout:1200,timeoutId:null,eventCreated:!1},cancelClickEventCreation:!1},mutableEvents:[],transitionDirection:"right"}},methods:{async loadLocale(t){if(typeof this.locale=="object"){this.texts=Object.assign({},ns,t),this.utils.date.updateTexts(this.texts);return}const e=await ya(Object.assign({"./i18n/ar.json":()=>H(()=>import("./ar.es.1c5432ef.js"),[],import.meta.url),"./i18n/bg.json":()=>H(()=>import("./bg.es.133f1d79.js"),[],import.meta.url),"./i18n/bn.json":()=>H(()=>import("./bn.es.d6f1145b.js"),[],import.meta.url),"./i18n/bs.json":()=>H(()=>import("./bs.es.424f8392.js"),[],import.meta.url),"./i18n/ca.json":()=>H(()=>import("./ca.es.10691e62.js"),[],import.meta.url),"./i18n/cs.json":()=>H(()=>import("./cs.es.d467a362.js"),[],import.meta.url),"./i18n/da.json":()=>H(()=>import("./da.es.5c82d648.js"),[],import.meta.url),"./i18n/de.json":()=>H(()=>import("./de.es.fc3d5977.js"),[],import.meta.url),"./i18n/el.json":()=>H(()=>import("./el.es.09498e63.js"),[],import.meta.url),"./i18n/en.json":()=>H(()=>import("./en.es.cf2ff814.js"),[],import.meta.url),"./i18n/es.json":()=>H(()=>import("./es.es.1bcf8f87.js"),[],import.meta.url),"./i18n/et.json":()=>H(()=>import("./et.es.dfc4f817.js"),[],import.meta.url),"./i18n/fa.json":()=>H(()=>import("./fa.es.54e3e37f.js"),[],import.meta.url),"./i18n/fi.json":()=>H(()=>import("./fi.es.f02a3c28.js"),[],import.meta.url),"./i18n/fr.json":()=>H(()=>import("./fr.es.7cd25089.js"),[],import.meta.url),"./i18n/he.json":()=>H(()=>import("./he.es.a00ad66b.js"),[],import.meta.url),"./i18n/hr.json":()=>H(()=>import("./hr.es.c03853d7.js"),[],import.meta.url),"./i18n/hu.json":()=>H(()=>import("./hu.es.5447b096.js"),[],import.meta.url),"./i18n/id.json":()=>H(()=>import("./id.es.3384c049.js"),[],import.meta.url),"./i18n/is.json":()=>H(()=>import("./is.es.5855059c.js"),[],import.meta.url),"./i18n/it.json":()=>H(()=>import("./it.es.a2e39e6b.js"),[],import.meta.url),"./i18n/ja.json":()=>H(()=>import("./ja.es.549021b7.js"),[],import.meta.url),"./i18n/ka.json":()=>H(()=>import("./ka.es.b97af2c6.js"),[],import.meta.url),"./i18n/ko.json":()=>H(()=>import("./ko.es.65303d13.js"),[],import.meta.url),"./i18n/lt.json":()=>H(()=>import("./lt.es.6bd7ea81.js"),[],import.meta.url),"./i18n/mn.json":()=>H(()=>import("./mn.es.c0946de5.js"),[],import.meta.url),"./i18n/nl.json":()=>H(()=>import("./nl.es.fb098524.js"),[],import.meta.url),"./i18n/no.json":()=>H(()=>import("./no.es.00bfcb00.js"),[],import.meta.url),"./i18n/pl.json":()=>H(()=>import("./pl.es.d9683cfc.js"),[],import.meta.url),"./i18n/pt-br.json":()=>H(()=>import("./pt-br.es.a068d598.js"),[],import.meta.url),"./i18n/pt-pt.json":()=>H(()=>import("./pt-pt.es.a068d598.js"),[],import.meta.url),"./i18n/ro.json":()=>H(()=>import("./ro.es.c05b88b7.js"),[],import.meta.url),"./i18n/ru.json":()=>H(()=>import("./ru.es.18bbb6e3.js"),[],import.meta.url),"./i18n/sk.json":()=>H(()=>import("./sk.es.cf475731.js"),[],import.meta.url),"./i18n/sl.json":()=>H(()=>import("./sl.es.4f19bf30.js"),[],import.meta.url),"./i18n/sq.json":()=>H(()=>import("./sq.es.a264a995.js"),[],import.meta.url),"./i18n/sr.json":()=>H(()=>import("./sr.es.0d3cfbc7.js"),[],import.meta.url),"./i18n/sv.json":()=>H(()=>import("./sv.es.f64e2fa4.js"),[],import.meta.url),"./i18n/tr.json":()=>H(()=>import("./tr.es.576f73c9.js"),[],import.meta.url),"./i18n/uk.json":()=>H(()=>import("./uk.es.ed3c3f03.js"),[],import.meta.url),"./i18n/vi.json":()=>H(()=>import("./vi.es.4582ebe1.js"),[],import.meta.url),"./i18n/zh-cn.json":()=>H(()=>import("./zh-cn.es.50f64b69.js"),[],import.meta.url),"./i18n/zh-hk.json":()=>H(()=>import("./zh-hk.es.6da7777e.js"),[],import.meta.url)}),`./i18n/${t}.json`,3);this.texts=Object.assign({},ns,e),this.utils.date.updateTexts(this.texts)},loadDragAndDrop(){H(()=>import("./drag-and-drop.es.bedab85d.js"),[],import.meta.url).then(t=>{const{DragAndDrop:e}=t;this.modules.dnd=new e(this)}).catch(()=>console.warn("Vue Cal: Missing drag & drop module."))},validateView(t){return Us.includes(t)||(console.error(`Vue Cal: invalid active-view parameter provided: "${t}".
A valid view must be one of: ${Us.join(", ")}.`),t="week"),this.enabledViews.includes(t)||(console.warn(`Vue Cal: the provided active-view "${t}" is disabled. Using the "${this.enabledViews[0]}" view instead.`),t=this.enabledViews[0]),t},switchToNarrowerView(t=null){this.transitionDirection="right";const e=this.enabledViews[this.enabledViews.indexOf(this.view.id)+1];e&&this.switchView(e,t)},switchView(t,e=null,a=!1){t=this.validateView(t);const l=this.utils.date,o=this.view.startDate&&this.view.startDate.getTime();if(this.transitions&&a){if(this.view.id===t)return;const n=this.enabledViews;this.transitionDirection=n.indexOf(this.view.id)>n.indexOf(t)?"left":"right"}const s=this.view.id;switch(this.view.events=[],this.view.id=t,this.view.firstCellDate=null,this.view.lastCellDate=null,e||(e=this.view.selectedDate||this.view.startDate),t){case"years":{this.view.startDate=new Date(Math.floor(e.getFullYear()/25)*25||2e3,0,1),this.view.endDate=new Date(this.view.startDate.getFullYear()+25,0,1),this.view.endDate.setSeconds(-1);break}case"year":{this.view.startDate=new Date(e.getFullYear(),0,1),this.view.endDate=new Date(e.getFullYear()+1,0,1),this.view.endDate.setSeconds(-1);break}case"month":{this.view.startDate=new Date(e.getFullYear(),e.getMonth(),1),this.view.endDate=new Date(e.getFullYear(),e.getMonth()+1,1),this.view.endDate.setSeconds(-1);let n=new Date(this.view.startDate);if(n.getDay()!==(this.startWeekOnSunday?0:1)&&(n=l.getPreviousFirstDayOfWeek(n,this.startWeekOnSunday)),this.view.firstCellDate=n,this.view.lastCellDate=l.addDays(n,41),this.view.lastCellDate.setHours(23,59,59,0),this.hideWeekends){if([0,6].includes(this.view.firstCellDate.getDay())){const f=this.view.firstCellDate.getDay()===6&&!this.startWeekOnSunday?2:1;this.view.firstCellDate=l.addDays(this.view.firstCellDate,f)}if([0,6].includes(this.view.startDate.getDay())){const f=this.view.startDate.getDay()===6?2:1;this.view.startDate=l.addDays(this.view.startDate,f)}if([0,6].includes(this.view.lastCellDate.getDay())){const f=this.view.lastCellDate.getDay()===0&&!this.startWeekOnSunday?2:1;this.view.lastCellDate=l.subtractDays(this.view.lastCellDate,f)}if([0,6].includes(this.view.endDate.getDay())){const f=this.view.endDate.getDay()===0?2:1;this.view.endDate=l.subtractDays(this.view.endDate,f)}}break}case"week":{e=l.getPreviousFirstDayOfWeek(e,this.startWeekOnSunday);const n=this.hideWeekends?5:7;this.view.startDate=this.hideWeekends&&this.startWeekOnSunday?l.addDays(e,1):e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=l.addDays(e,n),this.view.endDate.setSeconds(-1);break}case"day":{this.view.startDate=e,this.view.startDate.setHours(0,0,0,0),this.view.endDate=new Date(e),this.view.endDate.setHours(23,59,59,0);break}}this.addEventsToView();const u=this.view.startDate&&this.view.startDate.getTime();if(!(s===t&&u===o)&&(this.$emit("update:activeView",t),this.ready)){const n=this.view.startDate,f={view:t,startDate:n,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate,outOfScopeEvents:this.view.outOfScopeEvents.map(this.cleanupEvent)}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:l.getWeek(this.startWeekOnSunday?l.addDays(n,1):n)}:{}};this.$emit("view-change",f)}},previous(){this.previousNext(!1)},next(){this.previousNext()},previousNext(t=!0){const e=this.utils.date;this.transitionDirection=t?"right":"left";const a=t?1:-1;let l=null;const{startDate:o,id:s}=this.view;switch(s){case"years":l=new Date(o.getFullYear()+25*a,0,1);break;case"year":l=new Date(o.getFullYear()+1*a,1,1);break;case"month":l=new Date(o.getFullYear(),o.getMonth()+1*a,1);break;case"week":l=e[t?"addDays":"subtractDays"](e.getPreviousFirstDayOfWeek(o,this.startWeekOnSunday),7);break;case"day":l=e[t?"addDays":"subtractDays"](o,1);const u=l.getDay(),n=this.startWeekOnSunday?u:(u||7)-1;if(this.weekDays[n].hide){const m=this.weekDays.map((x,V)=>({...x,i:V}));let p=0;t?([...m.slice(n),...m].find(x=>(p++,!x.hide)).i,p--):[...m,...m.slice(0,n)].reverse().find(x=>(p++,!x.hide)).i,l=e[t?"addDays":"subtractDays"](l,p)}break}l&&this.switchView(s,l)},addEventsToView(t=[]){const e=this.utils.event,{startDate:a,endDate:l,firstCellDate:o,lastCellDate:s}=this.view;if(t.length||(this.view.events=[]),t=t.length?t:[...this.mutableEvents],!t||this.isYearsOrYearView&&!this.eventsCountOnYearView)return;let u=t.filter(n=>e.eventInRange(n,a,l));!this.isYearsOrYearView&&!(this.isMonthView&&!this.eventsOnMonthView)&&(u=u.map(n=>n.daysCount>1?e.createEventSegments(n,o||a,s||l):n)),this.view.events.push(...u),this.isMonthView&&(this.view.outOfScopeEvents=[],t.forEach(n=>{(e.eventInRange(n,o,a)||e.eventInRange(n,l,s))&&(this.view.events.some(f=>f._eid===n._eid)||this.view.outOfScopeEvents.push(n))}))},findAncestor(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t},isDOMElementAnEvent(t){return t.classList.contains("vuecal__event")||this.findAncestor(t,"vuecal__event")},onMouseMove(t){const{resizeAnEvent:e,dragAnEvent:a,dragCreateAnEvent:l}=this.domEvents;e._eid===null&&a._eid===null&&!l.start||(t.preventDefault(),e._eid?this.eventResizing(t):this.dragToCreateEvent&&l.start&&this.eventDragCreation(t))},onMouseUp(t){const{focusAnEvent:e,resizeAnEvent:a,clickHoldAnEvent:l,clickHoldACell:o,dragCreateAnEvent:s}=this.domEvents,{_eid:u}=l,{_eid:n}=a;let f=!1;const{event:m,start:p}=s,x=this.isDOMElementAnEvent(t.target),V=e.mousedUp;if(e.mousedUp=!1,x&&(this.domEvents.cancelClickEventCreation=!0),o.eventCreated)return;if(n){const{originalEnd:I,originalEndTimeMinutes:ye,endTimeMinutes:ae}=a,K=this.view.events.find(J=>J._eid===a._eid);if(f=ae&&ae!==ye,K&&K.end.getTime()!==I.getTime()){const J=this.mutableEvents.find(oe=>oe._eid===a._eid);J.endTimeMinutes=K.endTimeMinutes,J.end=K.end;const _e=this.cleanupEvent(K),k={...this.cleanupEvent(K),end:I,endTimeMinutes:K.originalEndTimeMinutes};this.$emit("event-duration-change",{event:_e,oldDate:a.originalEnd,originalEvent:k}),this.$emit("event-change",{event:_e,originalEvent:k})}K&&(K.resizing=!1),a._eid=null,a.start=null,a.split=null,a.segment=null,a.originalEndTimeMinutes=null,a.originalEnd=null,a.endTimeMinutes=null,a.startCell=null,a.endCell=null}else p&&(m&&(this.emitWithEvent("event-drag-create",m),s.event.resizing=!1),s.start=null,s.split=null,s.event=null);!x&&!n&&this.unfocusEvent(),l.timeoutId&&!u&&(clearTimeout(l.timeoutId),l.timeoutId=null),o.timeoutId&&(clearTimeout(o.timeoutId),o.timeoutId=null);const B=typeof this.onEventClick=="function";if(V&&!f&&!u&&!m&&B){let I=this.view.events.find(ye=>ye._eid===e._eid);return!I&&this.isMonthView&&(I=this.view.outOfScopeEvents.find(ye=>ye._eid===e._eid)),I&&this.onEventClick(I,t)}},onKeyUp(t){t.keyCode===27&&this.cancelDelete()},eventResizing(t){const{resizeAnEvent:e}=this.domEvents,a=this.view.events.find(m=>m._eid===e._eid)||{segments:{}},{minutes:l,cursorCoords:o}=this.minutesAtCursor(t),s=a.segments&&a.segments[e.segment],{date:u,event:n}=this.utils,f=Math.max(l,this.timeFrom+1,(s||a).startTimeMinutes+1);if(a.endTimeMinutes=e.endTimeMinutes=f,this.snapToTime){const m=a.endTimeMinutes+this.snapToTime/2;a.endTimeMinutes=m-m%this.snapToTime}if(s&&(s.endTimeMinutes=a.endTimeMinutes),a.end.setHours(0,a.endTimeMinutes,a.endTimeMinutes===qt?-1:0,0),this.resizeX&&this.isWeekView){a.daysCount=u.countDays(a.start,a.end);const m=this.cellsEl,p=m.offsetWidth/m.childElementCount,x=Math.floor(o.x/p);if(e.startCell===null&&(e.startCell=x-(a.daysCount-1)),e.endCell!==x){e.endCell=x;const V=u.addDays(a.start,x-e.startCell),B=Math.max(u.countDays(a.start,V),1);if(B!==a.daysCount){let I=null;B>a.daysCount?I=n.addEventSegment(a):I=n.removeEventSegment(a),e.segment=I,a.endTimeMinutes+=.001}}}this.$emit("event-resizing",{_eid:a._eid,end:a.end,endTimeMinutes:a.endTimeMinutes})},eventDragCreation(t){const{dragCreateAnEvent:e}=this.domEvents,{start:a,startCursorY:l,split:o}=e,s=new Date(a),{minutes:u,cursorCoords:{y:n}}=this.minutesAtCursor(t);if(!(!e.event&&Math.abs(l-n)<this.dragToCreateThreshold))if(e.event){if(s.setHours(0,u,u===qt?-1:0,0),this.snapToTime){let p=s.getHours()*60+s.getMinutes();const x=p+this.snapToTime/2;p=x-x%this.snapToTime,s.setHours(0,p,0,0)}const f=a<s,{event:m}=e;m.start=f?a:s,m.end=f?s:a,m.startTimeMinutes=m.start.getHours()*60+m.start.getMinutes(),m.endTimeMinutes=m.end.getHours()*60+m.end.getMinutes()}else{if(e.event=this.utils.event.createAnEvent(a,1,{split:o}),!e.event){e.start=null,e.split=null,e.event=null;return}e.event.resizing=!0}},unfocusEvent(){const{focusAnEvent:t,clickHoldAnEvent:e}=this.domEvents,a=this.view.events.find(l=>l._eid===(t._eid||e._eid));t._eid=null,e._eid=null,a&&(a.focused=!1,a.deleting=!1)},cancelDelete(){const{clickHoldAnEvent:t}=this.domEvents;if(t._eid){const e=this.view.events.find(a=>a._eid===t._eid);e&&(e.deleting=!1),t._eid=null,t.timeoutId=null}},onEventTitleBlur(t,e){if(e.title===t.target.innerHTML)return;const a=e.title;e.title=t.target.innerHTML;const l=this.cleanupEvent(e);this.$emit("event-title-change",{event:l,oldTitle:a}),this.$emit("event-change",{event:l,originalEvent:{...l,title:a}})},updateMutableEvents(){const t=this.utils.date;this.mutableEvents=[],this.events.forEach(e=>{const a=typeof e.start=="string"?t.stringToDate(e.start):e.start,l=t.formatDateLite(a),o=t.dateToMinutes(a);let s=null;typeof e.end=="string"&&e.end.includes("24:00")?(s=new Date(e.end.replace(" 24:00","")),s.setHours(23,59,59,0)):s=typeof e.end=="string"?t.stringToDate(e.end):e.end;let u=t.formatDateLite(s),n=t.dateToMinutes(s);(!n||n===qt)&&(!this.time||typeof e.end=="string"&&e.end.length===10?s.setHours(23,59,59,0):s.setSeconds(s.getSeconds()-1),u=t.formatDateLite(s),n=qt);const f=l!==u;e=Object.assign({...this.utils.event.eventDefaults},e,{_eid:`${this._.uid}_${this.eventIdIncrement++}`,segments:f?{}:null,start:a,startTimeMinutes:o,end:s,endTimeMinutes:n,daysCount:f?t.countDays(a,s):1,class:e.class}),this.mutableEvents.push(e)})},minutesAtCursor(t){return this.utils.cell.minutesAtCursor(t)},createEvent(t,e,a={}){return this.utils.event.createAnEvent(t,e,a)},cleanupEvent(t){return t={...t},["segments","deletable","deleting","titleEditable","resizable","resizing","draggable","dragging","draggingStatic","focused"].forEach(a=>{a in t&&delete t[a]}),t.repeat||delete t.repeat,t},emitWithEvent(t,e){this.$emit(t,this.cleanupEvent(e))},updateSelectedDate(t){if(t&&typeof t=="string"?t=this.utils.date.stringToDate(t):t=new Date(t),t&&t instanceof Date){const{selectedDate:e}=this.view;e&&(this.transitionDirection=e.getTime()>t.getTime()?"left":"right"),t.setHours(0,0,0,0),(!e||e.getTime()!==t.getTime())&&(this.view.selectedDate=t),this.switchView(this.view.id)}this.$emit("update:selected-date",this.view.selectedDate)},getWeekNumber(t){const e=this.utils.date,l=this.firstCellDateWeekNumber+t,o=this.startWeekOnSunday?1:0;return l>52?e.getWeek(e.addDays(this.view.firstCellDate,7*t+o)):l},timeTick(){this.now=new Date,this.timeTickerIds[1]=setTimeout(this.timeTick,60*1e3)},updateDateTexts(){this.utils.date.updateTexts(this.texts)},alignWithScrollbar(){if(document.getElementById("vuecal-align-with-scrollbar"))return;const t=this.$refs.vuecal.getElementsByClassName("vuecal__scrollbar-check")[0],e=t.offsetWidth-t.children[0].offsetWidth;if(e){const a=document.createElement("style");a.id="vuecal-align-with-scrollbar",a.type="text/css",a.innerHTML=`.vuecal--view-with-time .vuecal__weekdays-headings,.vuecal--view-with-time .vuecal__all-day {padding-right: ${e}px}`,document.head.appendChild(a)}},cellOrSplitHasEvents(t,e=null){return t.length&&(!e&&t.length||e&&t.some(a=>a.split===e.id))}},created(){this.utils.cell=new wa(this),this.utils.event=new ba(this,this.utils.date),this.loadLocale(this.locale),this.editEvents.drag&&this.loadDragAndDrop(),this.updateMutableEvents(this.events),this.view.id=this.currentView,this.selectedDate?this.updateSelectedDate(this.selectedDate):(this.view.selectedDate=new Date,this.switchView(this.currentView)),this.time&&this.watchRealTime&&(this.timeTickerIds[0]=setTimeout(this.timeTick,(60-this.now.getSeconds())*1e3))},mounted(){const t=this.utils.date,e="ontouchstart"in window,{resize:a,drag:l,create:o,delete:s,title:u}=this.editEvents,n=this.onEventClick&&typeof this.onEventClick=="function";(a||l||o||s||u||n)&&window.addEventListener(e?"touchend":"mouseup",this.onMouseUp),(a||l||o&&this.dragToCreateEvent)&&window.addEventListener(e?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),u&&window.addEventListener("keyup",this.onKeyUp),e&&(this.$refs.vuecal.oncontextmenu=function(p){p.preventDefault(),p.stopPropagation()}),this.hideBody||this.alignWithScrollbar();const f=this.view.startDate,m={view:this.view.id,startDate:f,endDate:this.view.endDate,...this.isMonthView?{firstCellDate:this.view.firstCellDate,lastCellDate:this.view.lastCellDate}:{},events:this.view.events.map(this.cleanupEvent),...this.isWeekView?{week:t.getWeek(this.startWeekOnSunday?t.addDays(f,1):f)}:{}};this.$emit("ready",m),this.ready=!0},beforeUnmount(){const t="ontouchstart"in window;window.removeEventListener(t?"touchmove":"mousemove",this.onMouseMove,{passive:!1}),window.removeEventListener(t?"touchend":"mouseup",this.onMouseUp),window.removeEventListener("keyup",this.onKeyUp),this.timeTickerIds[0]&&clearTimeout(this.timeTickerIds[0]),this.timeTickerIds[1]&&clearTimeout(this.timeTickerIds[1]),this.timeTickerIds=[null,null]},computed:{editEvents(){return this.editableEvents&&typeof this.editableEvents=="object"?{title:!!this.editableEvents.title,drag:!!this.editableEvents.drag,resize:!!this.editableEvents.resize,create:!!this.editableEvents.create,delete:!!this.editableEvents.delete}:{title:!!this.editableEvents,drag:!!this.editableEvents,resize:!!this.editableEvents,create:!!this.editableEvents,delete:!!this.editableEvents}},views(){return{years:{label:this.texts.years,enabled:!this.disableViews.includes("years")},year:{label:this.texts.year,enabled:!this.disableViews.includes("year")},month:{label:this.texts.month,enabled:!this.disableViews.includes("month")},week:{label:this.texts.week,enabled:!this.disableViews.includes("week")},day:{label:this.texts.day,enabled:!this.disableViews.includes("day")}}},currentView(){return this.validateView(this.activeView)},enabledViews(){return Object.keys(this.views).filter(t=>this.views[t].enabled)},hasTimeColumn(){return this.time&&this.isWeekOrDayView},isShortMonthView(){return this.isMonthView&&this.eventsOnMonthView==="short"},firstCellDateWeekNumber(){const t=this.utils.date,e=this.view.firstCellDate;return t.getWeek(this.startWeekOnSunday?t.addDays(e,1):e)},timeCells(){const t=[];for(let e=this.timeFrom,a=this.timeTo;e<a;e+=this.timeStep)t.push({hours:Math.floor(e/60),minutes:e%60,label:this.utils.date.formatTime(e,this.TimeFormat),value:e});return t},TimeFormat(){return this.timeFormat||(this.twelveHour?"h:mm{am}":"HH:mm")},daySplits(){return(this.splitDays.filter(t=>!t.hide)||[]).map((t,e)=>({...t,id:t.id||e+1}))},hasSplits(){return this.daySplits.length&&this.isWeekOrDayView},hasShortEvents(){return this.showAllDayEvents==="short"},cellOrSplitMinWidth(){let t=null;return this.hasSplits&&this.minSplitWidth?t=this.visibleDaysCount*this.minSplitWidth*this.daySplits.length:this.minCellWidth&&this.isWeekView&&(t=this.visibleDaysCount*this.minCellWidth),t},allDayBar(){let t=this.allDayBarHeight||null;return t&&!isNaN(t)&&(t+="px"),{cells:this.viewCells,options:this.$props,label:this.texts.allDay,shortEvents:this.hasShortEvents,daySplits:this.hasSplits&&this.daySplits||[],cellOrSplitMinWidth:this.cellOrSplitMinWidth,height:t}},minTimestamp(){let t=null;return this.minDate&&typeof this.minDate=="string"?t=this.utils.date.stringToDate(this.minDate):this.minDate&&this.minDate instanceof Date&&(t=this.minDate),t?t.getTime():null},maxTimestamp(){let t=null;return this.maxDate&&typeof this.maxDate=="string"?t=this.utils.date.stringToDate(this.maxDate):this.maxDate&&this.maxDate instanceof Date&&(t=this.maxDate),t?t.getTime():null},weekDays(){let{weekDays:t,weekDaysShort:e=[]}=this.texts;return t=t.slice(0).map((a,l)=>({label:a,...e.length?{short:e[l]}:{},hide:this.hideWeekends&&l>=5||this.hideWeekdays.length&&this.hideWeekdays.includes(l+1)})),this.startWeekOnSunday&&t.unshift(t.pop()),t},weekDaysInHeader(){return this.isMonthView||this.isWeekView&&!this.minCellWidth&&!(this.hasSplits&&this.minSplitWidth)},months(){return this.texts.months.map(t=>({label:t}))},specialDayHours(){return!this.specialHours||!Object.keys(this.specialHours).length?{}:Array(7).fill("").map((t,e)=>{let a=this.specialHours[e+1]||[];return Array.isArray(a)||(a=[a]),t=[],a.forEach(({from:l,to:o,class:s,label:u},n)=>{t[n]={day:e+1,from:[null,void 0].includes(l)?null:l*1,to:[null,void 0].includes(o)?null:o*1,class:s||"",label:u||""}}),t})},viewTitle(){const t=this.utils.date;let e="";const a=this.view.startDate,l=a.getFullYear(),o=a.getMonth();switch(this.view.id){case"years":{e=this.texts.years;break}case"year":{e=l;break}case"month":{e=`${this.months[o].label} ${l}`;break}case"week":{const s=this.view.endDate,u=a.getFullYear();let n=this.texts.months[a.getMonth()];this.xsmall&&(n=n.substring(0,3));let f=`${n} ${u}`;if(s.getMonth()!==a.getMonth()){const m=s.getFullYear();let p=this.texts.months[s.getMonth()];this.xsmall&&(p=p.substring(0,3)),u===m?f=`${n} - ${p} ${u}`:this.small?f=`${n.substring(0,3)} ${u} - ${p.substring(0,3)} ${m}`:f=`${n} ${u} - ${p} ${m}`}e=`${this.texts.week} ${t.getWeek(this.startWeekOnSunday?t.addDays(a,1):a)} (${f})`;break}case"day":{e=this.utils.date.formatDate(a,this.texts.dateFormat,this.texts);break}}return e},viewCells(){const t=this.utils.date;let e=[],a=null,l=!1;this.watchRealTime||(this.now=new Date);const o=this.now;switch(this.view.id){case"years":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(25)).map((s,u)=>{const n=new Date(a+u,0,1),f=new Date(a+u+1,0,1);return f.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:f,content:a+u,current:a+u===o.getFullYear()}});break}case"year":{a=this.view.startDate.getFullYear(),e=Array.apply(null,Array(12)).map((s,u)=>{const n=new Date(a,u,1),f=new Date(a,u+1,1);return f.setSeconds(-1),{startDate:n,formattedDate:t.formatDateLite(n),endDate:f,content:this.xsmall?this.months[u].label.substr(0,3):this.months[u].label,current:u===o.getMonth()&&a===o.getFullYear()}});break}case"month":{const s=this.view.startDate.getMonth(),u=new Date(this.view.firstCellDate);l=!1,e=Array.apply(null,Array(42)).map((n,f)=>{const m=t.addDays(u,f),p=new Date(m);p.setHours(23,59,59,0);const x=!l&&t.isToday(m)&&!l++;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,content:m.getDate(),today:x,outOfScope:m.getMonth()!==s,class:`vuecal__cell--day${m.getDay()||7}`}}),(this.hideWeekends||this.hideWeekdays.length)&&(e=e.filter(n=>{const f=n.startDate.getDay()||7;return!(this.hideWeekends&&f>=6||this.hideWeekdays.length&&this.hideWeekdays.includes(f))}));break}case"week":{l=!1;const s=this.view.startDate,u=this.weekDays;e=u.map((n,f)=>{const m=t.addDays(s,this.startWeekOnSunday&&this.hideWeekends?f-1:f),p=new Date(m);p.setHours(23,59,59,0);const x=(m.getDay()||7)-1;return{startDate:m,formattedDate:t.formatDateLite(m),endDate:p,today:!l&&t.isToday(m)&&!l++,specialHours:this.specialDayHours[x]||[]}}).filter((n,f)=>!u[f].hide);break}case"day":{const s=this.view.startDate,u=new Date(this.view.startDate);u.setHours(23,59,59,0);const n=(s.getDay()||7)-1;e=[{startDate:s,formattedDate:t.formatDateLite(s),endDate:u,today:t.isToday(s),specialHours:this.specialDayHours[n]||[]}];break}}return e},visibleDaysCount(){return this.isDayView?1:7-this.weekDays.reduce((t,e)=>t+e.hide,0)},cellWidth(){return 100/this.visibleDaysCount},cssClasses(){const{resizeAnEvent:t,dragAnEvent:e,dragCreateAnEvent:a}=this.domEvents;return{[`vuecal--${this.view.id}-view`]:!0,[`vuecal--${this.locale}`]:this.locale,"vuecal--no-time":!this.time,"vuecal--view-with-time":this.hasTimeColumn,"vuecal--week-numbers":this.showWeekNumbers&&this.isMonthView,"vuecal--twelve-hour":this.twelveHour,"vuecal--click-to-navigate":this.clickToNavigate,"vuecal--hide-weekends":this.hideWeekends,"vuecal--split-days":this.hasSplits,"vuecal--sticky-split-labels":this.hasSplits&&this.stickySplitLabels,"vuecal--overflow-x":this.minCellWidth&&this.isWeekView||this.hasSplits&&this.minSplitWidth,"vuecal--small":this.small,"vuecal--xsmall":this.xsmall,"vuecal--resizing-event":t._eid,"vuecal--drag-creating-event":a.event,"vuecal--dragging-event":e._eid,"vuecal--events-on-month-view":this.eventsOnMonthView,"vuecal--short-events":this.isMonthView&&this.eventsOnMonthView==="short","vuecal--has-touch":typeof window<"u"&&"ontouchstart"in window}},isYearsOrYearView(){return["years","year"].includes(this.view.id)},isYearsView(){return this.view.id==="years"},isYearView(){return this.view.id==="year"},isMonthView(){return this.view.id==="month"},isWeekOrDayView(){return["week","day"].includes(this.view.id)},isWeekView(){return this.view.id==="week"},isDayView(){return this.view.id==="day"}},watch:{events:{handler(t,e){this.updateMutableEvents(t),this.addEventsToView()},deep:!0},locale(t){this.loadLocale(t)},selectedDate(t){this.updateSelectedDate(t)},activeView(t){this.switchView(t)}}},Ai=Vt(Oi,[["render",$i]]);const Li={class:"filter-wrapper pb-2 mb-1"},ji={class:"mb-2 relative"},Ii={class:"mb-2 relative"},Hi={class:"flex flex-wrap gap-1"},Wi={class:"view-btns"},Ui=i("i",{class:"pi pi-search"},null,-1),Fi={key:0},Ni={class:"grid mt-2"},Bi={class:"col-12 lg:col-6 xl:col-3"},Yi={class:"card mb-0",style:"border-left:6px solid #000;"},zi={to:"/tags",class:"flex justify-content-between"},Ri=i("h4",{class:"mb-0 block text-xl font-semibold tracking-tight"},"Total Tasks",-1),qi={class:"text-900 font-bold text-2xl"},Pi={to:"/tags",class:"flex justify-content-between"},Ki={class:"mb-0 text-xl font-semibold tracking-tight"},Ji={class:"text-900 font-bold text-2xl"},Gi={class:"col-12"},Xi={class:"task-container"},Zi=["onClick"],Qi={class:"title-group"},el={class:"rtitle line-clamp-1",style:{"font-weight":"600"}},tl={style:{"font-size":"12px"}},sl=i("strong",null,"Due Date:",-1),al={class:"w-full flex justify-content-center"},il=i("p",{class:"text-center font-medium font-italic"},"No data found",-1),ll=["onMouseenter"],nl=["onDblclick"],ol={class:"task-status"},rl={key:1},dl={class:"flex align-items-center"},ul=["onClick","title"],cl=["onsubmit"],hl=["onMouseenter"],ml={key:0,class:"flex gap-1 w-full h-full justify-content-center align-items-center"},vl={class:"flex justify-content-start gap-1"},pl=["src"],fl={key:0,class:"inline-block"},yl={class:"task-status-2"},_l={key:0,class:"flex align-items-center"},gl=["title"],wl={key:1},Dl={class:"flex align-items-center"},bl={key:0,class:"pi pi-calendar",style:{"padding-top":"0.1rem"}},kl={key:0,class:"inline-block"},Tl={class:"task-status-2 flex"},Cl=i("i",{class:"pi pi-flag pt-2"},null,-1),El={key:0,class:"flex align-items-center"},Sl={key:1,class:"pt-1"},xl={key:1},Ml={class:"flex align-items-center"},Vl=["onMouseover","onMouseleave"],$l=["onClick","onMouseleave"],Ol={key:2,class:"main-container"},Al={class:"content"},Ll={class:"boardContainer",style:{display:"flex","overflow-x":"auto","align-items":"start"}},jl={class:"column-container"},Il={class:""},Hl=["onClick"],Wl={class:""},Ul={class:"font-semibold truncate-board text-sm title"},Fl={class:"flex align-items-center gap-2 mt-1"},Nl={class:"status text-sm"},Bl={key:0,class:"mt-2 flex align-items-center gap-2"},Yl=i("i",{class:"pi pi-user text-lg"},null,-1),zl={class:"flex justify-content-start gap-1"},Rl=["src"],ql={key:1,class:"mt-2 flex align-items-center gap-2"},Pl=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),Kl={key:2,class:"mt-2 flex align-items-center gap-2"},Jl=i("i",{class:"pi pi-flag text-lg"},null,-1),Gl={class:"text-sm"},Xl=["onClick"],Zl=i("p",{class:"mb-1"},"Subtask",-1),Ql={class:"text-sm font-semibold"},en=["onClick"],tn={class:"font-semibold truncate-board text-sm title"},sn={class:"flex align-items-center gap-2 mt-1"},an={class:"status text-sm"},ln={key:0,class:"mt-2 flex align-items-center gap-2"},nn=i("i",{class:"pi pi-user text-lg"},null,-1),on={class:"flex justify-content-start gap-1"},rn=["src"],dn={key:1,class:"mt-2 flex align-items-center gap-2"},un=i("i",{class:"pi pi-calendar-minus text-lg"},null,-1),cn={key:2,class:"mt-2 flex align-items-center gap-2"},hn=i("i",{class:"pi pi-flag text-lg"},null,-1),mn={class:"text-sm"},vn={class:"mt-2 flex align-items-center gap-2"},pn=i("i",{class:"pi pi-angle-right text-lg"},null,-1),fn={class:"text-sm font-semibold"},yn={key:3,class:""},_n=["onClick","innerHTML"],gn={key:4},wn={class:"commit-card-wrapper mb-2"},Dn={class:"flex justify-content-between align-items-center bb"},bn={class:"flex align-items-center gap-2"},kn=i("div",{class:"pi pi-user"},null,-1),Tn={class:"m-0"},Cn={class:"font-light mt-2 mb-0 commit-title"},En={class:"text-right"},Sn={class:"font-normal mb-0 text-mute"},xn=["href"],Mn={key:1,class:"w-full flex justify-content-center my-1"},Vn=i("h4",null,[i("i",null,"No Commits Found")],-1),$n=[Vn],On={__name:"TaskTable",props:["kanbanTasks"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask"],setup(t,{emit:e}){var Re;const a=qs(),l=Ue(),{getSingleProject:o,getTaskAssignModalData:s,editTask:u,createTask:n}=Ue(),{modStatusList:f,singleProject:m,statuslist:p,isTaskEdited:x,recentTaskData:V,countTasksByStatus:B,totalTaskCount:I,calendarTasks:ye,tasks:ae}=gt(Ue()),K=v(ut("create_task")),J=v(ut("update_task")),_e=v(ut("delete_task")),k=v(ut("download_task")),oe=Jt(),$e=e,Ee=v(ae||[]),ie=(Re=is().params)==null?void 0:Re.projects,W=v(),Y=v(),O=v(),ce=v(),ge=v(),we=v(),re=v({}),A=v("list"),L=v(null),de=w=>{A.value=w,w==="git"&&M()},le=v([]);(async()=>{var ee,z;const w=ct("token"),{data:y,pending:j,error:X}=await js("branchList",()=>$fetch(`${a.public.apiUrl}/gitlab/${ie}/branch`,{headers:{Authorization:`Bearer ${w.value}`}}));if(((ee=y.value)==null?void 0:ee.branch_list.length)>0){let nt=(z=y.value.branch_list)==null?void 0:z.map(Pe=>({label:Pe.name,name:Pe.name}));le.value=[{label:"",name:"All"},...nt]}else le.value=[{label:"No Branches",name:"No Branches"}]})();const Fe=v({label:"",name:"All"}),te=v([]),M=async()=>{var ee;const w=ct("token"),{data:y,pending:j,error:X}=await js("commitsList",()=>{var z;return $fetch(`${a.public.apiUrl}/gitlab/${ie}/commit?branch=${Fe.value?(z=Fe.value)==null?void 0:z.label:""}`,{headers:{Authorization:`Bearer ${w.value}`}})});((ee=y.value)==null?void 0:ee.code)===200?te.value=y.value.commit_list:te.value=[]};A.value==="git"&&M();const ne=()=>{M()},Me=v([{name:"All",code:""},{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),$t=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),Qe=w=>{const y=w,j=new Date(y),X=j.getFullYear(),ee=String(j.getMonth()+1).padStart(2,"0");return`${String(j.getDate()).padStart(2,"0")}-${ee}-${X}`},Ne=v({}),wt=v(null),it=w=>{wt.value=w,Be.value!==w&&(xe.value={...xe.value,[w]:!1},Be.value=null)},Be=v(null),xe=v({}),Ye=v(null),Ge=v(!1),ht=w=>{Ye.value=w.data.name;const y=document.getElementById(`inputTaskName${w.key}`);Be.value=w.key,xe.value=Object.keys(xe.value).reduce((j,X)=>(j[X]=!1,j),{}),Pt(()=>{y&&y.focus()}),xe.value={...xe.value,[w.key]:!0}},U=v(!1);Le(Ye,(w,y)=>{y!==null&&(U.value=!0)});let Ve=v(null);const ze=w=>{Ve.value&&(clearTimeout(Ve.value),Ve.value=null),Ve.value=setTimeout(()=>{$e("handleTaskDetailView",w),Ve.value=null},250)},et=w=>{Ve.value&&(clearTimeout(Ve.value),Ve.value=null),ht(w)},He=async w=>{if(w.key==="new"){if(L.value==null)return oe.add({severity:"warn",summary:"Error",detail:"Task name is required!",group:"br",life:3e3});const y={name:L.value,parent_task_id:Z.value,project_id:ie};return await n(y),L.value="",D.value=!1}else{if(U.value!==!0)return oe.add({severity:"warn",summary:"Error",detail:"Change task name!",group:"br",life:3e3});await Ft(Ye.value,w.key),xe.value={...xe.value,[taskId]:!1},Ye.value=null,Be.value=null,U.value=!1}},mt=w=>{Ne.value={...Ne.value,[w]:!0}},tt=w=>{Ne.value={...Ne.value,[w]:!1}},Dt=w=>[{label:"Add Sub Task",icon:"pi pi-plus text-white",command:()=>{$e("openCreateSpace",w.key,"sub-task")},disabled:!K},{label:"Edit Task",icon:"pi pi-pencil text-white",command:()=>{$e("handleTaskEdit",w)},disabled:!J},{label:"Task Detail",icon:"pi pi-window-maximize text-white",command:()=>{$e("handleTaskDetailView",w)}},{label:"Delete Task",icon:"pi pi-trash text-white",command:()=>{$e("confirmDeleteTask",w.key)},disabled:!_e}],Ot=v(),At=v(),Lt=v(),jt=v(),bt=v(),Xe=v(),vt=v(null),vs=()=>{if(W.value||Y.value||O.value||we.value||ce.value||ge.value)W.value="",Y.value="",O.value="",we.value="",ce.value="",ge.value="",Ot.value="",At.value="",Lt.value="",jt.value="",bt.value="",Xe.value="",kt.value=!1,Tt.value=!1,Oe();else return},Oe=async()=>{Ot.value=W.value?W.value.map(w=>w.id):"",At.value=Y.value?Y.value.code:"",Lt.value=O.value?O.value.id:"",jt.value=we.value,bt.value=ce.value,Xe.value=ge.value,o(ie,Ot.value,At.value,Lt.value,jt.value,bt.value,Xe.value)},kt=v(!1),Tt=v(!1),Ze=w=>{const y=new Date(w);ce.value=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate(),kt.value=!0,Oe()},lt=w=>{Tt.value=!0;const y=new Date(w);ge.value=y.getFullYear()+"-"+(y.getMonth()+1)+"-"+y.getDate(),Oe()},It=()=>{kt.value=!1,ce.value="",bt.value="",Oe()},ps=()=>{Tt.value=!1,ge.value="",Xe.value="",Oe()},pt=v(!1),st=w=>{if(pt.value=!0,w.length>0){const y=`data:text/csv;charset=utf-8,"Serial No.","Task Name","Project","Assignee","Priority","Status","Time Tracked","Due Date","Overdue"
`+w.map((ee,z)=>{var We,ot;const nt=z+1,Pe=ee.data.name,Et=m.value.name,St=ee.data.assignee.split(", ").join("; "),ft=(We=ee.data.priority)!=null&&We.name?(ot=ee.data.priority)==null?void 0:ot.name:"",$=ee.data.status.name;let Ie=ee.data.total_duration;const he=Math.floor(Ie/3600),De=Math.floor(Ie%3600/60),fe=Ie%60;he>0?Ie=`${he} hr ${De} min ${fe} sec`:De>0?Ie=`${De} min ${fe} sec`:Ie=`${fe} sec`;const c=ee.data.dueDateValue,g=ee.data.is_overdue?"Yes":"No";return`"${nt}","${Pe}","${Et}","${St}","${ft}","${$}","${Ie}","${c}","${g}"`}).join(`
`),j=encodeURI(y),X=document.createElement("a");X.setAttribute("href",j),X.setAttribute("download","tasks.csv"),document.body.appendChild(X),X.click(),document.body.removeChild(X),pt.value=!1}else pt.value=!1,oe.add({severity:"error",summary:"Error",detail:"No data found to download",group:"br",life:3e3})},Ht=v(!0);hs(async()=>{await o(ie),Ht.value=!1,Xt()});async function Wt(w,y){var j;try{const X=ct("token"),{data:ee,pending:z}=await ls(`${a.public.apiUrl}/tasks/update/${y}`,{method:"POST",headers:{Authorization:`Bearer ${X.value}`},body:{status:w==null?void 0:w.id}},"$7UcE4NQ81w");((j=ee.value)==null?void 0:j.app_message)==="success"?(oe.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),await o(ie)):oe.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(X){console.error("Error fetching data:",X)}}const Ut=v(!1),Ft=async(w,y)=>{if(w instanceof Date){Ut.value=!0;let j;if(w){const ee=new Date(w);ee.setDate(ee.getDate()+1),j=ee.toISOString()}const X={id:y,dueDate:j?new Date(new Date(j).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,project_id:ie};await u(X),x.value===!0?(Ut.value=!1,oe.add({severity:"success",summary:"Successful",detail:"Due date updated ",group:"br",life:3e3})):(Ut.value=!1,oe.add({severity:"error",summary:"Error",detail:"Unable to update due date!",group:"br",life:3e3}))}else if(w!=null&&w.name){const j={id:y,priority:w.name,project_id:ie};await u(j),x.value===!0?oe.add({severity:"success",summary:"Successful",detail:"Priority updated ",group:"br",life:3e3}):oe.add({severity:"error",summary:"Error",detail:"Unable to update task priority!",group:"br",life:3e3})}else Ge.value=!0,await u({id:y,name:w,project_id:ie}),x.value===!0?(oe.add({severity:"success",summary:"Successful",detail:"Task name updated ",group:"br",life:3e3}),Ge.value=!1):(oe.add({severity:"error",summary:"Error",detail:"Unable to update task name!",group:"br",life:3e3}),Ge.value=!1)},Nt=v(),fs=async(w,y)=>{y.node.data.dueDateValue;const j=new Date(w);j.setHours(23,59,0,0),Nt.value=j;let X=new Date(Nt.value).toLocaleDateString("en-US",{month:"short",day:"2-digit"});y.node.data.dueDateValue=X,await Ft(Nt.value,y.node.key)};function ys(){const w="0123456789ABCDEF";let y="#";for(let j=0;j<6;j++)y+=w[Math.floor(Math.random()*10)];return y}function Ct(w){return{backgroundColor:ys(),color:"white",borderRadius:"50%",border:"2px solid white"}}const Xt=async()=>{await s(),re.value=l.users},Zt=v(!0),Qt=bs(()=>({animation:250,group:"tasks",disabled:!Zt.value,ghostClass:"ghost"})),es=bs(()=>({backgroundColor:"#fff",boxShadow:"0px 2px 2px #e2e2e2",cursor:"grab",padding:"12px 10px",margin:"8px 0px"})),ts=(w,y)=>{const{added:j,moved:X,removed:ee}=w;j&&Wt(y,w.added.element.key)},b=v({});v(null);const D=v(!1),F=v(""),Z=v(null),Q=async()=>{D.value&&(Ae(Yt(Ee.value)),F.value="");const w={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:"",created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};D.value=!0,Ee.value=[w,...Ee.value],await Pt();const y=document.getElementById("newSubTask");y&&y.focus()},G=async w=>{D.value&&Ae(Yt(Ee.value));const y=Yt(w.node);Z.value=y.key;const j={key:"new",unique_id:`new-${Date.now()}`,data:{name:"",assignee:"",created_at:new Date().toISOString(),dueDateValue:"",status:{id:null,name:"New",color_code:"#6466f1"},is_overdue:!1},children:[]};D.value=!0;const X=N(y.key,j,Yt(Ee.value));Ee.value=structuredClone(X),F.value="",b.value[w.node.key]==!0||(b.value[w.node.key]=!0),await Pt();const ee=document.getElementById("newSubTask");ee&&ee.focus()};function N(w,y,j){for(const X of j){if(X.key===w)return X.children.unshift(y),j;if(N(w,y,X.children))return j}return!1}function Ae(w=Yt(Ee.value)){const y=w.filter(j=>j.key!=="new");return y.forEach(j=>{j.children&&j.children.length>0&&(j.children=Ae(j.children))}),Ee.value=structuredClone(y)}return(w,y)=>{const j=ds,X=us,ee=cs,z=Kt,nt=Zs,Pe=Bs,Et=Qs,St=ea,ft=Ys,$=ks,Ie=ta,he=zs,De=sa,fe=ms("tooltip");return d(),h(pe,null,[i("div",Li,[_(j,{onChange:y[0]||(y[0]=c=>Oe()),modelValue:r(W),"onUpdate:modelValue":y[1]||(y[1]=c=>P(W)?W.value=c:null),options:r(re),filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Assignees",maxSelectedLabels:3,class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(X,{onChange:y[2]||(y[2]=c=>Oe()),modelValue:r(Y),"onUpdate:modelValue":y[3]||(y[3]=c=>P(Y)?Y.value=c:null),options:r(Me),optionLabel:"name",placeholder:"Priority",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),_(X,{onChange:y[4]||(y[4]=c=>Oe()),modelValue:r(O),"onUpdate:modelValue":y[5]||(y[5]=c=>P(O)?O.value=c:null),options:r(f),optionLabel:"name",placeholder:"Status",class:"w-full md:w-17rem mb-2"},null,8,["modelValue","options"]),i("div",ji,[_(ee,{onDateSelect:y[6]||(y[6]=c=>Ze(c)),modelValue:r(ce),"onUpdate:modelValue":y[7]||(y[7]=c=>P(ce)?ce.value=c:null),placeholder:"Start Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),r(kt)?(d(),h("p",{key:0,onClick:It,class:"pi pi-times absolute cursor-pointer"})):T("",!0)]),i("div",Ii,[_(ee,{onDateSelect:y[8]||(y[8]=c=>lt(c)),modelValue:r(ge),"onUpdate:modelValue":y[9]||(y[9]=c=>P(ge)?ge.value=c:null),placeholder:"End Due Date",class:"w-full md:w-17rem"},null,8,["modelValue"]),r(Tt)?(d(),h("p",{key:0,onClick:ps,class:"pi pi-times end-cross absolute cursor-pointer"})):T("",!0)]),_(z,{onClick:vs,label:"Reset",class:"mr-2 w-full md:w-15rem mb-2",severity:"secondary"})]),_(St,{class:"border-0 px-0"},{start:S(()=>[i("div",Hi,[r(K)?(d(),ue(z,{key:0,icon:"pi pi-plus",label:"Create Task",onClick:y[10]||(y[10]=c=>Q()),class:"mr-2",severity:"secondary"})):T("",!0),i("div",Wi,[_(z,{icon:"pi pi-box",label:"Overview",onClick:y[11]||(y[11]=c=>de("overview")),class:ve(["board-btn view-btn",{"bg-indigo-400 text-white":r(A)==="overview"}]),severity:"secondary"},null,8,["class"]),_(z,{icon:"pi pi-list",label:"List",onClick:y[12]||(y[12]=c=>de("list")),class:ve(["table-btn view-btn",{"bg-indigo-400 text-white":r(A)==="list"}]),severity:"secondary"},null,8,["class"]),_(z,{icon:"pi pi-th-large",label:"Board",onClick:y[13]||(y[13]=c=>de("board")),class:ve(["board-btn view-btn",{"bg-indigo-400 text-white":r(A)==="board"}]),severity:"secondary"},null,8,["class"]),_(z,{icon:"pi pi-calendar",label:"Calendar",onClick:y[14]||(y[14]=c=>de("calendar")),class:ve(["calendar-btn view-btn",{"bg-indigo-400 text-white":r(A)==="calendar"}]),severity:"secondary"},null,8,["class"])]),q(_(z,{icon:"pi pi-github",onClick:y[15]||(y[15]=c=>de("git")),class:ve(["px-4",{"bg-indigo-400 text-white":r(A)==="git"}]),severity:"secondary"},null,8,["class"]),[[fe,{value:"Git Commits"},void 0,{right:!0}]]),r(k)?q((d(),ue(z,{key:1,onClick:y[16]||(y[16]=c=>st(r(ae))),loading:r(pt),severity:"secondary",class:"px-4",icon:"pi pi-file-excel"},null,8,["loading"])),[[fe,{value:"Download Tasks"},void 0,{right:!0}]]):T("",!0)])]),end:S(()=>[_(Et,{iconPosition:"right",raised:""},{default:S(()=>[_(nt,null,{default:S(()=>[Ui]),_:1}),_(Pe,{onKeyup:y[17]||(y[17]=c=>Oe()),modelValue:r(we),"onUpdate:modelValue":y[18]||(y[18]=c=>P(we)?we.value=c:null),placeholder:"Keyword Search"},null,8,["modelValue"])]),_:1})]),_:1}),r(A)==="overview"?(d(),h("div",Fi,[i("div",Ni,[i("div",Bi,[i("div",Yi,[i("div",zi,[Ri,i("div",qi,E(r(I)),1)])])]),(d(!0),h(pe,null,Te(r(B),(c,g)=>(d(),h("div",{key:c,class:"col-12 lg:col-6 xl:col-3"},[i("div",{class:"card mb-0",style:R(`border-left:6px solid ${c.statusColor};`)},[i("div",Pi,[i("h4",Ki,E(c.statusName),1),i("div",Ji,E(c.taskCount),1)])],4)]))),128)),i("div",Gi,[_(ft,{class:"h-full"},{title:S(()=>[me("Recent Tasks")]),content:S(()=>[i("div",Xi,[i("div",null,[(d(!0),h(pe,null,Te(r(V),c=>(d(),h("div",{key:c,onClick:g=>w.$emit("handleTaskDetailView",c),class:"task-card"},[i("div",Qi,[q(i("div",{class:ve("recenttaskstatus"),style:R(`background-color: ${c==null?void 0:c.statusColor};`)},null,4),[[fe,{value:`Status: ${c.statusName}`},void 0,{left:!0}]]),i("p",el,E(c==null?void 0:c.taskName),1)]),i("div",null,[i("i",null,[i("p",tl,[sl,me(" "+E(c.dueDate?Qe(c==null?void 0:c.dueDate):"-- Not Set --"),1)])])])],8,Zi))),128))]),i("div",al,[w.currentPage<w.totalPages?(d(),ue(z,{key:0,onClick:y[19]||(y[19]=c=>w.loadMoreTasks("hide-loader")),loading:w.loadMoreLoading,label:"Load More",severity:"secondary"},null,8,["loading"])):T("",!0)])])]),_:1})])])])):T("",!0),r(A)==="list"?(d(),ue(he,{key:1,class:"table-st",stripedRows:"",value:r(Ee),scrollable:"",scrollDirection:"both",expandedKeys:r(b),"onUpdate:expandedKeys":y[23]||(y[23]=c=>P(b)?b.value=c:null),lazy:!0,loading:r(Ht),filterDisplay:"menu",style:{overflow:"auto"},tableProps:{style:{minWidth:"1024px"}}},{empty:S(()=>[il]),default:S(()=>[_(r(rt),{field:"name",header:"Name",class:"",expander:"",style:{width:"45%"},showAddButton:!0},{body:S(c=>[i("div",{class:"inline-block w-full align-items-center tasktitle-hover cursor-pointer relative",onMouseenter:g=>it(c.node.key)},[i("div",{onDblclick:g=>et(c.node),class:"flex w-full"},[q((d(),h("div",ol,[_(X,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Wt(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":g=>c.node.data.status=g,options:r(p),disabled:!r(J),optionLabel:"name"},{value:S(g=>[g.value?(d(),h("div",{key:0,class:"flex align-items-center",style:R({backgroundColor:g.value.color_code})},[i("div",{style:R({backgroundColor:g.value.color_code}),class:"status-bg"},null,4)],4)):(d(),h("span",rl,E(g.placeholder),1))]),option:S(g=>[i("div",dl,[i("div",{style:R([{backgroundColor:g.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,E(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])),[[fe,{value:`${c.node.data.status.name}`},void 0,{top:!0}]]),i("span",{onClick:g=>ze(c.node),style:R(r(Be)===c.node.key?"display: none;":"display: block;"),class:"taskTitle cursor-pointer",title:c.node.data.name},E(c.node.data.name),13,ul),i("span",null,[_(Pe,{id:`inputTaskName${c.node.key}`,style:R(r(Be)===c.node.key?"display: block;":"display: none;"),class:"inline-task-input",modelValue:r(Ye),"onUpdate:modelValue":y[20]||(y[20]=g=>P(Ye)?Ye.value=g:null),type:"text",placeholder:"Edit task name"},null,8,["id","style","modelValue"])]),c.node.key=="new"?(d(),h("form",{key:0,onsubmit:g=>{g.preventDefault(),He(c.node)},action:""},[_(Pe,{id:"newSubTask",class:"inline-task-input",modelValue:r(L),"onUpdate:modelValue":y[21]||(y[21]=g=>P(L)?L.value=g:null),type:"text",placeholder:"Task Name",autocomplete:"off"},null,8,["modelValue"])],8,cl)):T("",!0)],40,nl)],40,ll)]),_:1}),_(r(rt),{field:"",header:"",style:{width:"5%",padding:"0.75rem 0rem"}},{body:S(c=>[i("div",{class:"w-full h-full flex align-items center",onMouseenter:g=>it(c.node.key)},[r(wt)===c.node.key?(d(),h("div",ml,[!r(xe)[c.node.key]&&c.node.key!=="new"?q((d(),ue(z,{key:0,onClick:g=>ht(c.node),severity:"secondary",icon:"pi pi-pencil",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,8,["onClick"])),[[fe,{value:"Edit Name",showDelay:500},void 0,{top:!0}]]):T("",!0),!r(xe)[c.node.key]&&c.node.key!=="new"?q((d(),ue(z,{key:1,onClick:g=>G(c),severity:"secondary",icon:"pi pi-plus",class:"w-fit h-fit p-1",style:{"font-size":"0.2rem"}},null,8,["onClick"])),[[fe,{value:"Add Sub Task",showDelay:500},void 0,{top:!0}]]):T("",!0),r(xe)[c.node.key]||c.node.key=="new"?q((d(),ue(z,{key:2,onClick:g=>He(c.node),loading:r(Ge),severity:"secondary",label:c.node.key=="new"?"":"Save",icon:c.node.key=="new"?"pi pi-check":"",class:"p-1 w-fit h-full",style:R(c.node.key=="new"?"font-size: 0.8rem !important; height: fit-content !important;":"")},null,8,["onClick","loading","label","icon","style"])),[[fe,{value:c.node.key!=="new"?"Update Name":"Add Task"},void 0,{top:!0}]]):T("",!0),c.node.key=="new"?q((d(),ue(z,{key:3,onClick:y[22]||(y[22]=g=>Ae()),severity:"secondary",icon:"pi pi-minus",class:"w-fit h-fit p-1",style:{"font-size":"0.8rem !important"}},null,512)),[[fe,{value:"Cancel Task",showDelay:500},void 0,{top:!0}]]):T("",!0)])):T("",!0)],40,hl)]),_:1}),_(r(rt),{field:"assignee",header:"Assignee",style:{width:"16%"}},{body:S(c=>[i("div",vl,[(d(!0),h(pe,null,Te(c.node.data.assigneeObj,(g,We)=>(d(),h("span",{key:We,class:"flex justify-content-center assignee-wrapper",style:R({marginLeft:We>0?"-20px":"0",zIndex:10-We})},[g.image?q((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:g.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,pl)),[[fe,{value:`${g.name}`},void 0,{top:!0}]]):q((d(),ue($,{key:1,label:g.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:R([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},Ct(We)])},null,8,["label","style"])),[[fe,{value:`${g.name}`},void 0,{top:!0}]])],4))),128))])]),_:1}),_(r(rt),{field:"status",header:"Status",style:{width:"10%"}},{body:S(c=>[c.node.key!=="new"?(d(),h("div",fl,[i("div",yl,[_(X,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Wt(c.node.data.status,c.node.key),modelValue:c.node.data.status,"onUpdate:modelValue":g=>c.node.data.status=g,options:r(p),disabled:!r(J),optionLabel:"name"},{value:S(g=>[g.value?(d(),h("div",_l,[i("div",{title:g.value.name,style:R({color:g.value.color_code,fontWeight:500}),class:"pt-1 status-truncate"},E(g.value.name),13,gl)])):(d(),h("span",wl,E(g.placeholder),1))]),option:S(g=>[i("div",Dl,[i("div",{style:R([{backgroundColor:g.option.color_code},{width:"15px",height:"15px","border-radius":"50%"}]),class:"p-1 mr-2 pi"},null,4),i("div",null,E(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):T("",!0)]),_:1}),_(r(rt),{field:"dueDateValue",header:"Due Date",style:{textWrap:"nowrap",width:"9%",padding:"0.75rem 0.5rem"}},{body:S(c=>[c.node.key!=="new"?(d(),h("i",bl)):T("",!0),c.node.key!=="new"?(d(),ue(ee,{key:1,onDateSelect:g=>fs(g,c),class:ve(["inline-calendar cursor-pointer",c.node.data.dueDateColor==="#087641"&&c.node.data.dueDateValue?"green-calendar":c.node.data.dueDateColor==="#b13a41"&&c.node.data.dueDateValue?"red-calendar":""]),placeholder:c.node.data.dueDateValue?c.node.data.dueDateValue:"--:--"},null,8,["onDateSelect","class","placeholder"])):T("",!0)]),_:1}),_(r(rt),{field:"priority",header:"Priority",style:{width:"9%"}},{body:S(c=>[c.node.key!=="new"?(d(),h("div",kl,[i("div",Tl,[Cl,_(X,{class:"mr-1 flex justify-content-center align-items-center",onChange:g=>Ft(c.node.data.priority,c.node.key),modelValue:c.node.data.priority,"onUpdate:modelValue":g=>c.node.data.priority=g,options:r($t),disabled:!r(J),optionLabel:"name",placeholder:"Set Priority"},{value:S(g=>[g.value?(d(),h("div",El,[g.value.name?(d(),h("div",{key:0,style:R({color:g.value.name==="Low"?"#e1aa1e":g.value.name==="Normal"?"#067bea":g.value.name==="High"?"#ff4928":g.value.name==="Urgent"?"crimson":"",fontWeight:500}),class:"pt-1"},E(g.value.name),5)):(d(),h("div",Sl,"-----"))])):(d(),h("span",xl,E(g.placeholder),1))]),option:S(g=>[i("div",Ml,[i("div",null,E(g.option.name),1)])]),_:2},1032,["onChange","modelValue","onUpdate:modelValue","options","disabled"])])])):T("",!0)]),_:1}),_(r(rt),{field:"action",header:"Action",style:{width:"6%",position:"relative"}},{body:S(c=>[c.node.key!=="new"?(d(),h("div",{key:0,class:"justify-content-start align-items-center webView-action",style:{width:"fit-content"},onMouseover:g=>mt(c.node.key),onMouseleave:g=>tt(c.node.key)},[_(Ie,{visible:r(Ne)[c.node.key],"onUpdate:visible":g=>r(Ne)[c.node.key]=g,model:Dt(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,Vl)):T("",!0),c.node.key!=="new"?(d(),h("div",{key:1,class:"justify-content-start align-items-center tabView-action",style:{width:"fit-content"},onClick:g=>mt(c.node.key),onMouseleave:g=>tt(c.node.key)},[_(Ie,{visible:r(Ne)[c.node.key],"onUpdate:visible":g=>r(Ne)[c.node.key]=g,model:Dt(c.node),direction:"left",class:"custom-speed-dial",tooltipOptions:{position:"top"}},null,8,["visible","onUpdate:visible","model"])],40,$l)):T("",!0)]),_:1})]),_:1},8,["value","expandedKeys","loading"])):T("",!0),r(A)==="board"?(d(),h("div",Ol,[i("div",Al,[i("div",null,[i("div",Ll,[(d(!0),h(pe,null,Te(t.kanbanTasks,c=>(d(),h("div",{key:c,class:"groupColumnContainer"},[i("div",jl,[i("div",{style:R(`background-color: ${c.statusColor}; `),class:"column-header"},E(c.name)+" - "+E(c.content.length),5),_(r(da),{modelValue:c.content,"onUpdate:modelValue":g=>c.content=g,options:r(Qt),disabled:!r(J),class:"draggable scrollbar",itemKey:"name",group:"cardItem",onChange:g=>ts(g,c.status)},{item:S(({element:g})=>{var We,ot,Bt,C,_s,Ss;return[i("div",Il,[(d(),h("div",{class:"task-card",style:R(r(es)),key:g.id,onClick:Ce=>w.$emit("handleTaskDetailView",g,c.content,c.name)},[i("div",Wl,[q((d(),h("p",Ul,[me(E(g.data.name),1)])),[[fe,{value:`${g.data.name}`},void 0,{top:!0}]]),i("div",Fl,[i("div",{class:"status-icon",style:R(`background-color:${g.data.status.color_code}`)},null,4),i("p",Nl,E(g.data.status.name),1)]),((ot=(We=g.data)==null?void 0:We.assigneeObj)==null?void 0:ot.length)>0?(d(),h("div",Bl,[Yl,i("div",zl,[(d(!0),h(pe,null,Te(g.data.assigneeObj,(Ce,yt)=>(d(),h("span",{key:yt,class:"flex justify-content-center assignee-wrapper",style:R({marginLeft:yt>0?"-20px":"0",zIndex:10-yt})},[Ce.image?q((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:Ce.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,Rl)),[[fe,{value:`${Ce.name}`},void 0,{top:!0}]]):q((d(),ue($,{key:1,label:Ce.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:R([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},Ct(yt)])},null,8,["label","style"])),[[fe,{value:`${Ce.name}`},void 0,{top:!0}]])],4))),128))])])):T("",!0),(Bt=g.data)!=null&&Bt.dueDateValue?(d(),h("div",ql,[Pl,i("p",{style:R(`color: ${g.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},E(g.data.dueDateValue),5)])):T("",!0),(_s=(C=g.data)==null?void 0:C.priority)!=null&&_s.name?(d(),h("div",Kl,[Jl,i("p",Gl,E((Ss=g.data.priority)==null?void 0:Ss.name),1)])):T("",!0),i("div",{class:"mt-2 flex align-items-center gap-2 cursor-pointer p-1 rounded hover:bg-gray-100",style:{"border-radius":"5px"},onClick:Ce=>{Ce.stopPropagation(),r(vt)==g.unique_id?vt.value=null:vt.value=g.unique_id}},[Zl,i("i",{class:ve(`pi ${r(vt)==g.unique_id?"pi-angle-down":"pi-angle-right"}  text-lg`)},null,2),i("p",Ql,E(g.children.length),1)],8,Xl)]),me(" "+E(g.t_name),1)],12,Hl)),i("div",{class:ve(r(vt)===g.unique_id?"":"hidden")},[(d(!0),h(pe,null,Te(g.children,Ce=>{var yt,xs,Ms,Vs,$s,Os;return d(),h("div",{key:Ce.unique_id,class:"sub-card",onClick:xt=>w.$emit("handleTaskDetailView",Ce,c.content,c.name)},[i("p",tn,E(Ce.data.name),1),i("div",sn,[i("div",{class:"status-icon",style:R(`background-color:${Ce.data.status.color_code}`)},null,4),i("p",an,E(Ce.data.status.name),1)]),((xs=(yt=Ce.data)==null?void 0:yt.assigneeObj)==null?void 0:xs.length)>0?(d(),h("div",ln,[nn,i("div",on,[(d(!0),h(pe,null,Te(Ce.data.assigneeObj,(xt,ss)=>(d(),h("span",{key:ss,class:"flex justify-content-center assignee-wrapper",style:R({marginLeft:ss>0?"-20px":"0",zIndex:10-ss})},[xt.image?q((d(),h("img",{key:0,class:"mr-2 capitalize cursor-pointer",src:xt.image,style:{height:"28px",width:"28px","border-radius":"32px",border:"2px solid white"},alt:"",srcset:""},null,8,rn)),[[fe,{value:`${xt.name}`},void 0,{top:!0}]]):q((d(),ue($,{key:1,label:xt.name.charAt(0),class:"mr-2 capitalize cursor-pointer",size:"small",style:R([{"background-color":"black",color:"white","border-radius":"50%",border:"2px solid white"},Ct(ss)])},null,8,["label","style"])),[[fe,{value:`${xt.name}`},void 0,{top:!0}]])],4))),128))])])):T("",!0),(Ms=Ce.data)!=null&&Ms.dueDateValue?(d(),h("div",dn,[un,i("p",{style:R(`color: ${Ce.data.dueDateColor}; font-weight: 500;`),class:"text-sm"},E(Ce.data.dueDateValue),5)])):T("",!0),($s=(Vs=Ce.data)==null?void 0:Vs.priority)!=null&&$s.name?(d(),h("div",cn,[hn,i("p",mn,E((Os=Ce.data.priority)==null?void 0:Os.name),1)])):T("",!0),i("div",vn,[pn,i("p",fn,E(Ce.children.length),1)])],8,en)}),128))],2)])]}),_:2},1032,["modelValue","onUpdate:modelValue","options","disabled","onChange"])])]))),128))])])])])):T("",!0),r(A)==="calendar"?(d(),h("div",yn,[_(r(Ai),{events:r(ye),"selected-date":new Date().current,"time-from":8*60,"disable-views":["years","year","week"],"active-view":"month","events-on-month-view":"short",style:{height:"600px"}},{event:S(({event:c})=>[i("div",{onClick:g=>ze(c),class:"vuecal__event",style:R({background:c.color}),innerHTML:c.title},null,12,_n)]),_:1},8,["events","selected-date"])])):T("",!0),r(A)==="git"?(d(),h("div",gn,[_(ft,null,{title:S(()=>[me("Commit List")]),content:S(()=>[_(X,{onChange:ne,modelValue:r(Fe),"onUpdate:modelValue":y[24]||(y[24]=c=>P(Fe)?Fe.value=c:null),options:r(le),optionLabel:"name",placeholder:"Branches",class:"w-full md:w-17rem mb-3 mt-2"},null,8,["modelValue","options"]),i("div",null,[i("div",wn,[r(te).length>0?(d(),ue(De,{key:0,value:r(te)},{content:S(c=>[i("div",Dn,[i("div",null,[i("div",bn,[kn,i("h6",Tn,E(c.item.author_name),1)]),i("div",null,[i("h6",Cn,"- "+E(c.item.title),1)])]),i("div",En,[i("p",Sn,[i("small",null,E(c.item.authored_date),1)]),i("a",{href:c.item.web_url,target:"_blank",class:"font-small text-end"},[i("small",null,E(c.item.short_id),1)],8,xn)])])]),_:1},8,["value"])):(d(),h("div",Mn,$n))])])]),_:1})])):T("",!0)],64)}}};const Ke=t=>(Cs("data-v-cfeccfc4"),t=t(),Es(),t),An={class:"field flex flex-column"},Ln=Ke(()=>i("label",{for:"name"},[me("Set Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),jn={class:"field"},In=Ke(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),Hn={class:"ql-formats flex justify-content-end mr-0"},Wn={class:"ql-bold"},Un={class:"ql-italic"},Fn={class:"ql-underline"},Nn={class:"ql-strike"},Bn=Ke(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),Yn=Ke(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),zn=Ke(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),Rn=Ke(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),qn={class:"field"},Pn=Ke(()=>i("label",null,"Assignees ",-1)),Kn={class:"field"},Jn=Ke(()=>i("label",null,"Tags ",-1)),Gn={class:"field"},Xn=Ke(()=>i("label",null,"Due Date ",-1)),Zn={class:"field"},Qn=Ke(()=>i("label",null,"Priority ",-1)),eo=Ke(()=>i("br",null,null,-1)),to={key:0,class:"text-center",style:{color:"red"}},so={class:"create-btn-wrapper mb-0"},ao={__name:"CreateTask",props:["createTaskTitle","taskId","projects","usersLists","tagsLists"],emits:["closeCreateModal"],setup(t,{emit:e}){const{createTask:a}=Ue(),{isTaskCreated:l,detectDuplicateTask:o}=gt(Ue()),{createTaskTitle:s,taskId:u,projects:n,usersLists:f,tagsLists:m}=t,p=Jt(),x=v(!1),V=v(u),B=v(!0),I=v(!1),ye=v(!1),ae=v(null),K=v(" ");Le(K,Y=>{Y.length===0&&(K.value=" ")});const J=v(null),_e=v(null),k=v(null),oe=v(null),$e=v(!1),Ee=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),je=e,ie=Y=>{if(console.log("test druve"),$e.value)J.value=Y;else{const O=new Date(Y);O.setHours(23,59,0,0),J.value=O}};Le(J,(Y,O)=>{Y&&O&&Y!==O&&($e.value=!0)});const W=async()=>{var Y,O,ce;if(x.value=!0,ae.value===null)ye.value=!0,x.value=!1;else{ye.value=!1;let ge;if(J.value){const re=new Date(J.value);re.setDate(re.getDate()+1),ge=re.toISOString()}const we={name:ae.value,description:K.value,dueDate:ge?new Date(new Date(ge).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null,assignees:(Y=_e.value)==null?void 0:Y.map(re=>re.id),tags:(O=k.value)==null?void 0:O.map(re=>re.id),priority:(ce=oe.value)==null?void 0:ce.name,project_id:n,parent_task_id:u};if(ge){const re=new Date(ge);re.setDate(re.getDate()-1),J.value=re?new Date(re).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(we),o.value===!0?(x.value=!1,p.add({severity:"error",summary:"Error",detail:"Task already exists!",group:"br",life:3e3})):l.value===!0?(x.value=!1,B.value=!1,I.value=!0,ae.value=null,je("closeCreateModal",!1),p.add({severity:"success",summary:"Successful",detail:"Task created Successfully",group:"br",life:3e3})):(x.value=!1,p.add({severity:"error",summary:"Error",detail:"Unable to create task!",group:"br",life:3e3}))}};return hs(()=>{const Y=document.getElementById("createTaskName");Pt(()=>{Y&&Y.focus()})}),(Y,O)=>{const ce=Bs,ge=Ps,we=ds,re=cs,A=us,L=Kt,de=ms("tooltip");return d(),h("div",null,[_(ce,{type:"hidden",modelValue:r(V),"onUpdate:modelValue":O[0]||(O[0]=le=>P(V)?V.value=le:null)},null,8,["modelValue"]),i("div",An,[Ln,_(ge,{id:"createTaskName",class:"border-gray-300",modelValue:r(ae),"onUpdate:modelValue":O[1]||(O[1]=le=>P(ae)?ae.value=le:null),invalid:Y.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",jn,[In,_(r(rs),{modelValue:r(K),"onUpdate:modelValue":O[2]||(O[2]=le=>P(K)?K.value=le:null),editorStyle:"height: 120px"},{toolbar:S(()=>[i("span",Hn,[q(i("button",Wn,null,512),[[de,"Bold",void 0,{bottom:!0}]]),q(i("button",Un,null,512),[[de,"Italic",void 0,{bottom:!0}]]),q(i("button",Fn,null,512),[[de,"Underline",void 0,{bottom:!0}]]),q(i("button",Nn,null,512),[[de,"Strikethrough",void 0,{bottom:!0}]]),Bn,Yn,zn,Rn])]),_:1},8,["modelValue"])]),i("div",qn,[Pn,_(we,{display:"chip",modelValue:r(_e),"onUpdate:modelValue":O[3]||(O[3]=le=>P(_e)?_e.value=le:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",Kn,[Jn,_(we,{display:"chip",modelValue:r(k),"onUpdate:modelValue":O[4]||(O[4]=le=>P(k)?k.value=le:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:5,class:"w-full"},null,8,["modelValue","options"])]),i("div",Gn,[Xn,_(re,{modelValue:r(J),"onUpdate:modelValue":O[5]||(O[5]=le=>P(J)?J.value=le:null),class:"w-full clndr",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:O[6]||(O[6]=le=>ie(le))},null,8,["modelValue"])]),i("div",Zn,[Qn,_(A,{modelValue:r(oe),"onUpdate:modelValue":O[7]||(O[7]=le=>P(oe)?oe.value=le:null),options:r(Ee),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),eo,r(ye)?(d(),h("p",to,"Please add task name")):T("",!0),i("div",so,[_(L,{label:"Save",icon:"pi pi-check",text:"",onClick:W,loading:r(x)},null,8,["loading"])])])}}},io=Ts(ao,[["__scopeId","data-v-cfeccfc4"]]);const Je=t=>(Cs("data-v-eeee4ee3"),t=t(),Es(),t),lo={class:"position-relative d-flex flex-column justify-content-between w-100 modal-container"},no={class:"field flex flex-column"},oo=Je(()=>i("label",{for:"name"},[me("Edit Task Name"),i("i",{class:"text-red-400 text-italic"},"*")],-1)),ro={class:"field"},uo=Je(()=>i("label",{for:"description",class:"block mb-2"},"Description: ",-1)),co={class:"ql-formats flex justify-content-end mr-0"},ho={class:"ql-bold"},mo={class:"ql-italic"},vo={class:"ql-underline"},po={class:"ql-strike"},fo=Je(()=>i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1)),yo=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1)),_o=Je(()=>i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1)),go=Je(()=>i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1)),wo={class:"field"},Do=Je(()=>i("label",null,"Assignees",-1)),bo={class:"field"},ko=Je(()=>i("label",null,"Tags",-1)),To={class:"field"},Co=Je(()=>i("label",null,"Due Date",-1)),Eo={class:"field"},So=Je(()=>i("label",null,"Priority",-1)),xo=Je(()=>i("br",null,null,-1)),Mo={key:0,class:"text-center",style:{color:"red"}},Vo={class:"edt-btn-wrapper mb-0"},$o={__name:"EditTask",props:["singleTask","usersLists","tagsLists","projects"],emits:["closeEditModal"],setup(t,{emit:e}){var Y,O,ce,ge,we,re;const{editTask:a}=Ue(),{isTaskEdited:l,detectDuplicateTask:o}=gt(Ue()),{singleTask:s,usersLists:u,tagsLists:n,projects:f}=t,m=Jt(),p=v(!1),x=v((Y=s==null?void 0:s.data)==null?void 0:Y.name),V=v(((O=s==null?void 0:s.data)==null?void 0:O.description)||" "),B=v(!1);Le(V,A=>{A.length===0&&(V.value=" "),B.value=!0});const I=v((ce=s==null?void 0:s.data)!=null&&ce.dueDate?new Date(s.data.dueDate).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),ye=v(!1),ae=v(null);ae.value=(ge=s==null?void 0:s.data)!=null&&ge.assigneeObj?(we=s==null?void 0:s.data)==null?void 0:we.assigneeObj.map(A=>({id:A.id,name:A.name})):"";const K=v(!1);Le(ae,A=>{K.value=!0});const J=v((re=s==null?void 0:s.data)==null?void 0:re.tagsObj),_e=v(!1);Le(J,A=>{_e.value=!0});const k=v(null);k.value=s.data.priority?{name:s.data.priority.name,code:s.data.priority.code}:"";const oe=v([{name:"Urgent",code:"Urgent"},{name:"High",code:"High"},{name:"Normal",code:"Normal"},{name:"Low",code:"Low"}]),$e=v(!1),Ee=e,je=A=>{if(console.log("test druve"),ye.value)I.value=A;else{const L=new Date(A);L.setHours(23,59,0,0),I.value=L}};Le(I,(A,L)=>{A&&L&&A!==L&&(ye.value=!0)});const ie=v(I.value);Le(I,(A,L)=>{A&&(ie.value=new Date(A).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const W=async()=>{var A;if(p.value=!0,x.value===null)$e.value=!0,p.value=!1;else{$e.value=!1;let L;if(I.value){const Se=new Date(I.value);Se.setDate(Se.getDate()+1),L=Se.toISOString()}const de=new Date((A=s==null?void 0:s.data)==null?void 0:A.dueDate).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),le={id:s.key,name:x.value,...B.value===!0?{description:V.value}:{},priority:k.value.name,...ie.value!==de?{dueDate:L?new Date(new Date(L).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...K.value===!0?{assignees:ae.value.map(Se=>Se.id)}:{},..._e.value===!0?{tags:J.value.map(Se=>Se.id)}:{},project_id:f};if(L){const Se=new Date(L);Se.setDate(Se.getDate()-1),I.value=Se?new Date(Se).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await a(le),o.value===!0?(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Cannnot edit, edited task name already exists!",group:"br",life:3e3})):l.value===!0?(p.value=!1,Ee("closeEditModal",!1),Ee("visibleEdit","visibleEdit"),m.add({severity:"success",summary:"Successful",detail:"Task updated Successfully",group:"br",life:3e3}),B.value===!0&&(B.value=!1,console.log("isDescriptionEdited Flagged")),K.value===!0&&(K.value=!1,console.log("isAsigneeEdited Flagged")),_e.value===!0&&(_e.value=!1,console.log("isTagsEdited Flagged"))):(p.value=!1,m.add({severity:"error",summary:"Error",detail:"Unable to update task!",group:"br",life:3e3}))}};return hs(()=>{const A=document.getElementById("editTaskName");Pt(()=>{A&&A.focus()})}),(A,L)=>{const de=Ps,le=ds,Se=cs,Fe=us,te=Kt,M=ms("tooltip");return d(),h("div",lo,[i("div",null,[i("div",no,[oo,_(de,{id:"editTaskName",class:"border-gray-300",modelValue:r(x),"onUpdate:modelValue":L[0]||(L[0]=ne=>P(x)?x.value=ne:null),rows:"3",cols:"15",invalid:A.spaceDescriptionError},null,8,["modelValue","invalid"])]),i("div",ro,[uo,_(r(rs),{modelValue:r(V),"onUpdate:modelValue":L[1]||(L[1]=ne=>P(V)?V.value=ne:null),editorStyle:"height: 120px"},{toolbar:S(()=>[i("span",co,[q(i("button",ho,null,512),[[M,"Bold",void 0,{bottom:!0}]]),q(i("button",mo,null,512),[[M,"Italic",void 0,{bottom:!0}]]),q(i("button",vo,null,512),[[M,"Underline",void 0,{bottom:!0}]]),q(i("button",po,null,512),[[M,"Strikethrough",void 0,{bottom:!0}]]),fo,yo,_o,go])]),_:1},8,["modelValue"])]),i("div",wo,[Do,_(le,{display:"chip",modelValue:r(ae),"onUpdate:modelValue":L[2]||(L[2]=ne=>P(ae)?ae.value=ne:null),options:t.usersLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",bo,[ko,_(le,{display:"chip",modelValue:r(J),"onUpdate:modelValue":L[3]||(L[3]=ne=>P(J)?J.value=ne:null),options:t.tagsLists,filter:"",resetFilterOnHide:"",optionLabel:"name",placeholder:"Select Tags",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),i("div",To,[Co,_(Se,{modelValue:r(I),"onUpdate:modelValue":L[4]||(L[4]=ne=>P(I)?I.value=ne:null),class:"w-full",placeholder:"Set Due Date",showTime:"",hideOnDateTimeSelect:"",hourFormat:"12",onDateSelect:L[5]||(L[5]=ne=>je(ne))},null,8,["modelValue"])]),i("div",Eo,[So,_(Fe,{modelValue:r(k),"onUpdate:modelValue":L[6]||(L[6]=ne=>P(k)?k.value=ne:null),options:r(oe),optionLabel:"name",placeholder:"Set Priority",class:"w-full"},null,8,["modelValue","options"])]),xo,r($e)?(d(),h("p",Mo,"Please add/fill/check up all the fields")):T("",!0),i("div",Vo,[_(te,{label:"Update",icon:"pi pi-check",text:"",onClick:W,loading:r(p)},null,8,["loading"])])])])}}},Oo=Ts($o,[["__scopeId","data-v-eeee4ee3"]]),Ns=la("fileUpload",()=>{const t=v(!1),e=v(!1),a=v(!1);async function l(s,u){e.value=!0;const n=new FormData;n.append("task_id",s),n.append("attachments",u);const f=ct("token");try{const m=await fetch("https://pbe.singularitybd.net/api/v1/tasks/attachment-upload",{method:"POST",headers:{Authorization:`Bearer ${f.value}`},body:n});if(!m.ok)throw new Error("Network response was not ok");const p=await m.json();console.log("upload data =>",p),(p==null?void 0:p.user_message)==="success"?t.value=!0:t.value=!1,e.value=!1}catch(m){console.error("Error uploading file:",m),t.value=!1,e.value=!1}}async function o(s){const u=ct("token");try{const n=await fetch(`https://pbe.singularitybd.net/api/v1/tasks/attachment-delete/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${u.value}`}});if(!n.ok)throw new Error("Network response was not ok");const f=await n.json();console.log("delete data =>",f),(f==null?void 0:f.user_message)==="success"?a.value=!0:a.value=!1}catch(n){console.error("Error uploading file:",n),a.value=!1}}return{fileUpload:l,fileDelete:o,isFileUpload:t,isLoading:e,isFileDeleted:a}});const Ao={class:"grid"},Lo={class:"col-12 flex justify-content-between"},jo={class:"m-0 detail-task-name cursor-pointer"},Io={class:"flex gap-1"},Ho=i("span",{class:"ml-1 text-lg pi pi-copy my-auto cursor-pointer",style:{"padding-top":"1px"}},null,-1),Wo=i("h5",{class:"m-0 ml-2"},"Activity",-1),Uo={class:"col-12 lg:col-7"},Fo={class:"task-wrapper card"},No={class:"task-det no-scrollbar"},Bo={class:"flex justify-content-between gap-2 flex-wrap align-items-center"},Yo={class:"w-full lg:w-fit"},zo={class:"flex mt-2 justify-content-between gap-2 align-items-center task-detail-wrapper"},Ro=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-calendar"}),i("p",{class:"text-nowrap"},"Due Date:")],-1),qo={class:"flex justify-content-between gap-2 align-items-centertask-detail-wrapper mt-3 mb-3"},Po=i("div",{class:"flex justify-content-start gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-tags"}),i("p",null,"Tags:")],-1),Ko={class:"w-full lg:w-fit"},Jo={class:"flex justify-content-between gap-2 align-items-center task-detail-wrapper"},Go=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",null,"Status:")],-1),Xo={class:"flex mt-4 mb-3 justify-content-start gap-6 align-items-center task-detail-wrapper"},Zo=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-stopwatch"}),i("p",{class:"text-nowrap"},"Track Time:")],-1),Qo={class:"clock-wrapper relative"},er={class:"border-round px-2 pt-3 pb-2"},tr={class:"flex justify-content-center align-items-center gap-3 manual-wrapper -mt-1"},sr=i("label",{for:"hours",class:"block mb-2 text-xs"},"Hours",-1),ar=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),ir=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),lr=i("label",{for:"minutes",class:"block mb-2 text-xs"},"Minutes",-1),nr=i("span",{class:"pi pi-chevron-up manual-time-changer"},null,-1),or=i("span",{class:"pi pi-chevron-down manual-time-changer"},null,-1),rr={class:"flex justify-content-center align-items-center",style:{"margin-top":"0.49rem !important"}},dr=i("div",null,null,-1),ur={class:"flex justify-content-between gap-2"},cr=i("div",{class:"flex justify-content-start w-fit gap-2 align-items-center task-detail-property"},[i("span",{class:"pi pi-user"}),i("p",null,"Assignee:")],-1),hr={class:"field mt-3 flex flex-column"},mr=i("div",{class:"flex justify-content-start gap-2 align-items-center mb-1 task-detail-property"},[i("span",{class:"pi pi-sliders-h"}),i("p",null,"Description:")],-1),vr={class:"ql-formats flex justify-content-end mr-0"},pr={class:"ql-bold"},fr={class:"ql-italic"},yr={class:"ql-underline"},_r={class:"ql-strike"},gr=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),wr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),Dr=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),br=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),kr={key:0,class:"flex justify-content-end"},Tr={class:"m-0"},Cr={class:"my-3 attach-sec flex align-items-center justify-content-start gap-2",style:{"overflow-x":"scroll"}},Er={key:0,class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-5 attch-w",style:{"background-color":"#f7fafc"}},Sr=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),xr=i("div",{class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},[i("div",{class:"text-xs"},"asdasd....asdme.extng"),i("div",{class:"text-xs"},"9 MAy, 2024")],-1),Mr=[Sr,xr],Vr=["href"],$r=i("div",{class:"pi pi-file text-6xl attach-icon"},null,-1),Or={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Ar={class:"text-xs"},Lr={class:"text-xs"},jr=["href"],Ir=["src"],Hr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Wr={class:"text-xs"},Ur={class:"text-xs"},Fr=["href"],Nr=i("div",{class:"pi pi-video text-6xl attach-icon"},null,-1),Br={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Yr={class:"text-xs"},zr={class:"text-xs"},Rr=["href"],qr=i("div",{class:"pi pi-file-pdf text-6xl text-danger attach-icon"},null,-1),Pr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Kr={class:"text-xs"},Jr={class:"text-xs"},Gr=["href"],Xr=i("div",{class:"pi pi-file-word text-6xl text-blue attach-icon"},null,-1),Zr={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},Qr={class:"text-xs"},ed={class:"text-xs"},td=["href"],sd=i("div",{class:"pi pi-file-excel text-6xl attach-icon",style:{color:"#04aa6d"}},null,-1),ad={class:"attach-detail flex flex-column justify-content-center align-items-center mt-1 pt-1 px-3"},id={class:"text-xs"},ld={class:"text-xs"},nd=["onClick"],od=i("i",{class:"pi pi-times text-xs text-white"},null,-1),rd=[od],dd={key:0,class:"flex gap-2 w-full justify-content-center"},ud=i("p",{class:"text-center"},"No Data found...",-1),cd=["onClick"],hd={class:"action-dropdown-det"},md={class:"action-dropdown-content-det"},vd={class:"card"},pd={class:"flex justify-content-start align-items-center task-detail-wrapper"},fd=i("div",{class:"flex justify-content-start gap-2 align-items-center bounce-detail-property"},[i("span",{class:"pi pi-flag"}),i("p",{class:"text-nowrap"},"Bounce Status:")],-1),yd={class:"col-12 lg:col-5"},_d={class:"comment-wrapper card no-scrollbar"},gd={class:"comments no-scrollbar"},wd={class:"my-2 text-surface-800"},Dd={key:0},bd=["innerHTML"],kd={class:"my-2 text-surface-800"},Td={class:"flex justify-content-start align-items-center"},Cd=["src"],Ed={class:"text-lg"},Sd={key:0,class:"flex justify-content-start my-2"},xd=["href"],Md=i("div",{class:"pi pi-file"},null,-1),Vd={class:"attach-detail flex flex-column justify-content-center align-items-center"},$d={class:"text-xs"},Od=["innerHTML"],Ad={style:{"line-height":"0"},class:"pb-1 float-right mt-3 mb-2"},Ld={key:0,class:"text-sm font-semibold tracking-wide leading-3 bg-gray-300 px-3 py-2 flex align-itens-center mb-1 relative"},jd=i("span",{class:"pi pi-file-import mr-2"},null,-1),Id=i("i",{class:"pi pi-times"},null,-1),Hd=[Id],Wd={class:"ql-formats flex justify-content-end mr-0"},Ud={class:"ql-bold"},Fd={class:"ql-italic"},Nd={class:"ql-underline"},Bd={class:"ql-strike"},Yd=i("span",{class:"ql-formats"},[i("select",{class:"ql-color"}),i("select",{class:"ql-background"})],-1),zd=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"ordered"},null,-1),Rd=i("button",{class:"ql-list",type:"button","data-pc-section":"list",value:"bullet"},null,-1),qd=i("button",{class:"ql-link",type:"button","data-pc-section":"link"},null,-1),Pd={__name:"TaskDetail",props:["usersLists","tagsLists","projID"],emits:["openCreateSpace","handleTaskEdit","handleTaskDetailView","confirmDeleteTask","updateTaskTable"],setup(t,{emit:e}){var Ct,Xt,Zt,Qt,es,ts;const a=qs(),{fileUpload:l,fileDelete:o}=Ns(),{isFileUpload:s,isLoading:u,isFileDeleted:n}=gt(Ns()),{getTaskTimerData:f,setManualTime:m,storeTaskTimer:p}=Is();gt(Is());const{editTask:x,addTaskComment:V,getTaskDetails:B,getSingleProject:I}=Ue(),{isTaskEdited:ye,isTaskCommentCreated:ae,singleTaskComments:K,subTasks:J,taskStatus:_e,taskDetails:k,taskActivity:oe}=gt(Ue());localStorage.setItem("taskDetailID",JSON.stringify(k.value.id));const{usersLists:$e,tagsLists:Ee,projID:je}=t,ie=e,W=Jt(),Y=v(!1),O=v(ut("update_task")),ce=v(ut("edit_bounce")),ge=v(ut("create_task")),we=v(null);we.value=(Xt=(Ct=k.value)==null?void 0:Ct.assignee)==null?void 0:Xt.map(b=>({id:b.id,name:b.name}));const re=v(!1);Le(we,b=>{re.value=!0});const A=v((Qt=(Zt=k.value)==null?void 0:Zt.tags)==null?void 0:Qt.map(b=>({id:b.id,name:b.name}))),L=v(!1);Le(A,b=>{L.value=!0});const de=v((es=k.value)!=null&&es.due_date?new Date(k.value.due_date).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null),le=v(!1),Se=b=>{if(console.log("test druve"),le.value)de.value=b;else{const D=new Date(b);D.setHours(23,59,0,0),de.value=D}};Le(de,(b,D)=>{b&&D&&b!==D&&(le.value=!0)});const Fe=v(de.value);Le(de,(b,D)=>{b&&(Fe.value=new Date(b).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase())});const te=v(),M=na(),ne=v(null),Me=v(null),$t=v(!1),Qe=v(!1),Ne=async b=>{var F,Z;Qe.value=!0;let D;if(ne.value>0||Me.value>0){D=ne.value*3600+Me.value*60,console.log("totalSeconds",D);const Q=await m((F=k.value)==null?void 0:F.id,D);(Q==null?void 0:Q.code)===200?(await B((Z=k.value)==null?void 0:Z.id),Qe.value=!1,W.add({severity:"success",summary:"Duration Added",detail:`Duration: ${ne.value?ne.value:0} hours and ${Me.value?Me.value:0} minutes`,group:"br",life:3e3}),ne.value=null,Me.value=null,b()):(Qe.value=!1,W.add({severity:"error",summary:"Error",detail:"Unable to add duration",group:"br",life:3e3})),console.log("responseData",Q)}else Qe.value=!1,W.add({severity:"error",summary:"Error",detail:"Please add duration",group:"br",life:3e3});D=null},wt=b=>{var D;console.log(b.detail),b.detail===3&&((D=k.value)==null?void 0:D.is_timer_start)==="false"&&M.require({target:b.currentTarget,group:"headless",message:"Set task duration:",accept:()=>{W.add({severity:"info",summary:"Confirmed",detail:"You have accepted",life:3e3})},reject:()=>{}})},it=v("00:00:00");let Be=null;const xe=v(!1),Ye=async()=>{var b,D,F,Z,Q,G,N,Ae,Re,w;if(k.value.id,xe.value=!0,((b=k.value)==null?void 0:b.is_timer_start)==="false"){await f("start",(D=k.value)==null?void 0:D.id),await B((F=k.value)==null?void 0:F.id),Ge(),xe.value=!1,localStorage.setItem("storeTaskID",JSON.stringify((Z=k.value)==null?void 0:Z.id)),localStorage.setItem("storeTaskProjectID",JSON.stringify(Number(je))),localStorage.setItem("storeTaskSpaceID",JSON.stringify((Q=k.value)==null?void 0:Q.project.space_id)),localStorage.setItem("storeTaskCompanyID",JSON.stringify((G=k.value)==null?void 0:G.project.company_id)),localStorage.setItem("storeTaskTimerStartTime",JSON.stringify(k.value.taskTimer.start_time));let y={task_id:k.value.id,project_id:je,space_id:k.value.project.space_id,company_id:k.value.project.company_id,timerStartTime:k.value.taskTimer.start_time};await p(y),W.add({severity:"success",summary:"Task Timer",detail:"Timer Started",group:"br",life:3e3}),await I(je)}else await f("stop",(N=k.value)==null?void 0:N.id,(Re=(Ae=k.value)==null?void 0:Ae.taskTimer)==null?void 0:Re.id),await B((w=k.value)==null?void 0:w.id),ht(),xe.value=!1,localStorage.removeItem("storeTaskID"),localStorage.removeItem("storeTaskProjectID"),localStorage.removeItem("storeTaskSpaceID"),localStorage.removeItem("storeTaskCompanyID"),localStorage.removeItem("storeTaskTimerStartTime"),await p({task_id:null,project_id:null,space_id:null,company_id:null}),W.add({severity:"success",summary:"Task Timer",detail:"Timer Stopped",group:"br",life:3e3}),await I(je)},Ge=()=>{k.value.id,console.log("taskDetails.value.taskTimer.start_time",k.value.taskTimer.start_time);const b=new Date(k.value.taskTimer.start_time).getTime();Be=setInterval(()=>{const D=Math.floor((Date.now()-b)/1e3);it.value=It(D)},1e3)},ht=()=>{clearInterval(Be),it.value=It(k.value.total_duration)},U=v([{is_bounce:"No"},{is_bounce:"Yes"}]),Ve=v(),ze=v(((ts=k.value)==null?void 0:ts.description)||" "),et=v(!1);Le(ze,b=>{b.length===0&&(ze.value=" "),et.value=!0});const He=v(null),mt=v(),tt=v(!0),Dt=v(!1),Ot=()=>{Dt.value=!0,tt.value=!1},At=()=>{Dt.value=!1,tt.value=!0},Lt=async()=>{var b;if(He.value===null||He.value===""){W.add({severity:"warn",summary:"Warn",detail:"Comment required",group:"br",life:3e3});return}Y.value=!0,await V((b=k.value)==null?void 0:b.id,He.value,st.value),ae.value===!0?(W.add({severity:"success",summary:"Successful",detail:"Comment added Successfully",group:"br",life:3e3}),He.value=null,Y.value=!1,st.value=null):(W.add({severity:"error",summary:"Error",detail:"Unable to add comment",group:"br",life:3e3}),Y.value=!1)},jt=b=>{const D=new Date(b),Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][D.getMonth()],Q=D.getDate(),G=D.getFullYear().toString().substr(-2),N=D.getHours(),Ae=D.getMinutes(),Re=N>=12?"PM":"AM",w=N%12||12,y=Ae<10?"0"+Ae:Ae;return`${Q} ${Z}'${G}, ${w}:${y}${Re}`},bt=async()=>{var Z,Q;let b;if(de.value){const G=new Date(de.value);G.setDate(G.getDate()+1),b=G.toISOString()}const D=new Date((Z=k.value)==null?void 0:Z.due_date).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),F={id:(Q=k.value)==null?void 0:Q.id,...et.value===!0?{description:ze.value}:{},project_id:je,...Fe.value!==D?{dueDate:b?new Date(new Date(b).getTime()-18*60*60*1e3).toISOString().slice(0,19).replace("T"," "):null}:{},...re.value===!0?{assignees:we.value.map(G=>G.id)}:{},...L.value===!0?{tags:A.value.map(G=>G.id)}:{}};if(b){const G=new Date(b);G.setDate(G.getDate()-1),de.value=G?new Date(G).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).replace(",","").toLowerCase():null}await x(F),ye.value===!0?(W.add({severity:"success",summary:"Successful",detail:"Task detail updated",group:"br",life:3e3}),mt.value=null,et.value===!0&&(et.value=!1,console.log("isDescriptionEdited Flagged")),re.value===!0&&(re.value=!1,console.log("isAsigneeEdited Flagged")),L.value===!0&&(L.value=!1,console.log("isTagsEdited Flagged"))):W.add({severity:"error",summary:"Error",detail:"Unable to upadte task detail",group:"br",life:3e3})},Xe=v(null),vt=b=>{Xe.value=b.target.files[0]},vs=async()=>{var b,D;Xe.value&&console.log("file =>",Xe.value),await l((b=k.value)==null?void 0:b.id,Xe.value),s.value===!0?(W.add({severity:"success",summary:"Successfull",detail:"File Upload successfully!",group:"br",life:3e3}),B((D=k.value)==null?void 0:D.id),document.getElementById("attachInput").value=null,Xe.value=null):W.add({severity:"error",summary:"Error",detail:"Unable to upload file!",group:"br",life:3e3})},Oe=b=>{const D=["jpg","JPG","jpeg","png","gif","bmp","svg","webp","ico","tiff","tif","heic","heif"],F=["mp4","avi","flv","wmv","mov","3gp","mkv"],Z=["pdf","PDF","ppt","pptx"],Q=["doc","docx","rtf"],G=["xls","xlsx","csv"];return D.some(N=>b.endsWith("."+N))?"image":F.some(N=>b.endsWith("."+N))?"video":Z.some(N=>b.endsWith("."+N))?"pdf":Q.some(N=>b.endsWith("."+N))?"word":G.some(N=>b.endsWith("."+N))?"excel":"file"};hs(async()=>{var F,Z;await B((F=k.value)==null?void 0:F.id);const b={name:k.value.status_name,code:k.value.status};te.value=b;const D={is_bounce:k.value.is_bounce};Ve.value=D,((Z=k.value)==null?void 0:Z.is_timer_start)==="true"&&Ge()});async function kt(b){var D,F,Z;try{const Q=ct("token"),{data:G,pending:N}=await ls(`${a.public.apiUrl}/tasks/update/${(D=k.value)==null?void 0:D.id}`,{method:"POST",headers:{Authorization:`Bearer ${Q.value}`},body:{status:b.code}},"$nwfJLeTGBC");((F=G.value)==null?void 0:F.app_message)==="success"?(B((Z=k.value)==null?void 0:Z.id),W.add({severity:"success",summary:"Successful",detail:"Status Changed",group:"br",life:3e3}),ie("updateTaskTable")):W.add({severity:"error",summary:"Error",detail:"Unable to change status",group:"br",life:3e3})}catch(Q){console.error("Error fetching data:",Q)}}async function Tt(b){var D,F,Z;try{const Q=ct("token"),{data:G,pending:N}=await ls(`${a.public.apiUrl}/tasks/update/${(D=k.value)==null?void 0:D.id}`,{method:"POST",headers:{Authorization:`Bearer ${Q.value}`},body:{is_bounce:b.is_bounce}},"$np1kf0qdb3");console.log("dataBO",G),((F=G.value)==null?void 0:F.app_message)==="success"?(B((Z=k.value)==null?void 0:Z.id),W.add({severity:"success",summary:"Successfull",detail:"Bounce Status Changed",group:"br",life:3e3})):W.add({severity:"error",summary:"Error",detail:"Unable to change bounce status",group:"br",life:3e3})}catch(Q){console.error("Error fetching data:",Q)}}const Ze=b=>{const F=b.split("/");return F[F.length-1]},lt=b=>{const D=["Jan","Feb","Mar","Apr","MAy","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F=b,Z=new Date(F),Q={year:"numeric",month:"long",day:"numeric"},N=Z.toLocaleDateString("en-US",Q).split(" "),Ae=D.indexOf(N[0]);return Ae!==-1&&(N[0]=D[Ae]),N.join(" ")};function It(b){const D=Math.floor(b/3600).toString().padStart(2,"0"),F=Math.floor(b%3600/60).toString().padStart(2,"0"),Z=(b%60).toString().padStart(2,"0");return`${D}:${F}:${Z}`}const ps=async b=>{var D;await o(b),n.value===!0?(W.add({severity:"success",summary:"Successful",detail:"File Deleted successfully!",group:"br",life:3e3}),B((D=k.value)==null?void 0:D.id)):W.add({severity:"error",summary:"Error",detail:"Unable to delete file!",group:"br",life:3e3})},pt=v(null),st=v(null),Ht=v(""),Wt=b=>{st.value=b.target.files[0],Ht.value=st.value?st.value.name:""},Ut=()=>{pt.value.click()},Ft=async()=>{st.value=null},Nt=async()=>{var Q;const b=ct("token"),{data:D,pending:F,error:Z}=await ls(`${a.public.apiUrl}/tasks/share/${(Q=k.value)==null?void 0:Q.id}`,{method:"GET",headers:{Authorization:`Bearer ${b.value}`}},"$yuqoLxhdIO");if(Z.value){W.add({severity:"error",summary:"Error",detail:"Failed to share",life:3e3});return}else{const G=document.createElement("textarea");G.value=D.value.shared_web_link,document.body.appendChild(G),G.select(),document.execCommand("copy"),document.body.removeChild(G),W.add({severity:"success",summary:"Share successful",detail:"Shared link copied",group:"br",life:3e3});return}},fs=bs(()=>{var b;return(b=k.value)!=null&&b.unique_id?k.value.unique_id.slice(0,6)+"...":""}),ys=()=>{var b,D;if((b=k.value)!=null&&b.id){const F=document.createElement("textarea");F.value=(D=k.value)==null?void 0:D.unique_id,document.body.appendChild(F),F.select(),document.execCommand("copy"),document.body.removeChild(F),W.add({severity:"success",summary:"Task ID copied",detail:"Task ID copied to clipboard",group:"br",life:3e3})}else W.add({severity:"error",summary:"Error",detail:"Task ID not found",group:"br",life:3e3})};return(b,D)=>{var nt,Pe,Et,St,ft;const F=ua,Z=ds,Q=us,G=ca,N=Kt,Ae=ha,Re=ma,w=rt,y=zs,j=va,X=ks,ee=Ys,z=ms("tooltip");return d(),h("div",Ao,[i("div",Lo,[i("h5",jo,E(r(k).name),1),i("div",Io,[q((d(),h("div",{onClick:ys,class:"flex justify-content-start gap-2 align-items-center cursor-pointer uniq-id-wrapper share-btn"},[Ho,i("span",null,E(r(fs)),1)])),[[z,{value:"Copy Task ID"},void 0,{top:!0}]]),q(i("span",{onClick:Nt,class:"pi pi-share-alt my-auto cursor-pointer ml-2 share-btn"},null,512),[[z,{value:"Share Task"},void 0,{top:!0}]]),Wo])]),i("div",Uo,[i("div",null,[i("div",Fo,[i("div",No,[i("form",{onSubmit:dt(bt,["prevent"]),class:"mt-2 task-detail ml-2"},[i("div",Bo,[i("div",Yo,[i("div",zo,[Ro,_(F,{class:"input-fields"},{default:S(()=>[_(r(cs),{style:"width: 164.94px; border-radius:7px;height:36px",modelValue:r(de),"onUpdate:modelValue":D[0]||(D[0]=$=>P(de)?de.value=$:null),placeholder:"Set Due Date",showTime:"",hourFormat:"12",onDateSelect:D[1]||(D[1]=$=>Se($))},null,8,["modelValue"])]),_:1})]),i("div",qo,[Po,_(F,{class:"input-fields",style:{width:"168px"}},{default:S(()=>[_(Z,{display:"chip",modelValue:r(A),"onUpdate:modelValue":D[2]||(D[2]=$=>P(A)?A.value=$:null),filter:"",resetFilterOnHide:"",options:t.tagsLists,optionLabel:"name",placeholder:"Select Tags",class:"w-full"},null,8,["modelValue","options"])]),_:1})])]),i("div",Ko,[i("div",Jo,[Go,_(Q,{onChange:D[3]||(D[3]=$=>kt(r(te))),modelValue:r(te),"onUpdate:modelValue":D[4]||(D[4]=$=>P(te)?te.value=$:null),options:r(_e),optionLabel:"name",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["modelValue","options"])]),i("div",Xo,[Zo,i("div",Qo,[_(Ae,{close:r($t),group:"headless"},{container:S(({message:$,acceptCallback:Ie,rejectCallback:he})=>[i("div",er,[i("div",tr,[i("div",null,[sr,_(G,{modelValue:r(ne),"onUpdate:modelValue":D[5]||(D[5]=De=>P(ne)?ne.value=De:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:23,id:"hours"},{incrementbuttonicon:S(()=>[ar]),decrementbuttonicon:S(()=>[ir]),_:1},8,["modelValue"])]),i("div",null,[lr,_(G,{modelValue:r(Me),"onUpdate:modelValue":D[6]||(D[6]=De=>P(Me)?Me.value=De:null),placeholder:"00",showButtons:"",buttonLayout:"vertical",style:{width:"3rem"},min:0,max:59,id:"minutes"},{incrementbuttonicon:S(()=>[nr]),decrementbuttonicon:S(()=>[or]),_:1},8,["modelValue"])])]),i("div",rr,[_(N,{icon:"pi pi-check px-2 py-0 text-sm",label:"",class:"border-none w-full mx-3",loading:r(Qe),onClick:De=>Ne(he),size:"small"},null,8,["loading","onClick"])])])]),_:1},8,["close"]),q(_(N,{loading:r(xe),class:"clock-btn",onClick:Ye,icon:((nt=r(k))==null?void 0:nt.is_timer_start)=="true"?"pi pi-stop":"pi pi-play",severity:((Pe=r(k))==null?void 0:Pe.is_timer_start)=="true"?" stop-color":"",rounded:"","aria-label":"Filter"},null,8,["loading","icon","severity"]),[[z,{value:((Et=r(k))==null?void 0:Et.is_timer_start)=="true"?"Stop":"Start"},void 0,{top:!0}]]),i("div",{class:"text-sm absolute",onClick:D[7]||(D[7]=$=>wt($))},E(((St=r(k))==null?void 0:St.is_timer_start)=="true"?r(it):It((ft=r(k))==null?void 0:ft.total_duration)),1)]),dr])])]),i("div",ur,[cr,_(F,{style:{width:"100%"},class:"input-fields"},{default:S(()=>[_(Z,{display:"chip",modelValue:r(we),"onUpdate:modelValue":D[8]||(D[8]=$=>P(we)?we.value=$:null),filter:"",resetFilterOnHide:"",options:t.usersLists,optionLabel:"name",placeholder:"Select Assignees",maxSelectedLabels:3,class:"w-full"},null,8,["modelValue","options"])]),_:1})]),i("div",hr,[mr,_(r(rs),{modelValue:r(ze),"onUpdate:modelValue":D[9]||(D[9]=$=>P(ze)?ze.value=$:null),editorStyle:"height: 150px",readonly:!r(O)},{toolbar:S(()=>[i("span",vr,[q(i("button",pr,null,512),[[z,"Bold",void 0,{bottom:!0}]]),q(i("button",fr,null,512),[[z,"Italic",void 0,{bottom:!0}]]),q(i("button",yr,null,512),[[z,"Underline",void 0,{bottom:!0}]]),q(i("button",_r,null,512),[[z,"Strikethrough",void 0,{bottom:!0}]]),gr,wr,Dr,br])]),_:1},8,["modelValue","readonly"])]),r(O)?(d(),h("div",kr,[_(N,{type:"submit",label:"Save"})])):T("",!0)],32),_(j,{class:"mt-3"},{default:S(()=>{var $,Ie;return[_(Re,{class:"file-upload",header:"Detail"},{default:S(()=>{var he,De,fe,c,g,We,ot,Bt;return[i("p",Tr,"Attachments: "+E((he=r(k))!=null&&he.attachments&&((fe=(De=r(k))==null?void 0:De.attachments)==null?void 0:fe.length)>0?(g=(c=r(k))==null?void 0:c.attachments)==null?void 0:g.length:0),1),i("div",Cr,[(We=r(k))!=null&&We.attachments&&((ot=r(k))==null?void 0:ot.attachments.length)===0?(d(),h("div",Er,Mr)):T("",!0),(d(!0),h(pe,null,Te((Bt=r(k))==null?void 0:Bt.attachments,C=>(d(),h("div",{key:C,target:"_blank",class:"card attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 py-2 relative",style:{"background-color":"#f7fafc"}},[Oe(C==null?void 0:C.file)==="file"?(d(),h("a",{key:0,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:C==null?void 0:C.file},[$r,i("div",Or,[i("div",Ar,E(Ze(C==null?void 0:C.file)),1),i("div",Lr,E(lt(C==null?void 0:C.created_at)),1)])],8,Vr)):T("",!0),Oe(C==null?void 0:C.file)==="image"?(d(),h("a",{key:1,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-0 relative",href:C==null?void 0:C.file},[i("img",{src:C==null?void 0:C.file,alt:"",style:{width:"90%",height:"80px","border-radius":"10px","border-top-left-radius":"10px","object-fit":"cover"}},null,8,Ir),i("div",Hr,[i("div",Wr,E(Ze(C==null?void 0:C.file)),1),i("div",Ur,E(lt(C==null?void 0:C.created_at)),1)])],8,jr)):T("",!0),Oe(C==null?void 0:C.file)==="video"?(d(),h("a",{key:2,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:C==null?void 0:C.file},[Nr,i("div",Br,[i("div",Yr,E(Ze(C==null?void 0:C.file)),1),i("div",zr,E(lt(C==null?void 0:C.created_at)),1)])],8,Fr)):T("",!0),Oe(C==null?void 0:C.file)==="pdf"?(d(),h("a",{key:3,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:C==null?void 0:C.file},[qr,i("div",Pr,[i("div",Kr,E(Ze(C==null?void 0:C.file)),1),i("div",Jr,E(lt(C==null?void 0:C.created_at)),1)])],8,Rr)):T("",!0),Oe(C==null?void 0:C.file)==="word"?(d(),h("a",{key:4,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:C==null?void 0:C.file},[Xr,i("div",Zr,[i("div",Qr,E(Ze(C==null?void 0:C.file)),1),i("div",ed,E(lt(C==null?void 0:C.created_at)),1)])],8,Gr)):T("",!0),Oe(C==null?void 0:C.file)==="excel"?(d(),h("a",{key:5,target:"_blank",class:"attachment-wrapper cursor-pointer flex flex-column justify-content-center align-items-center gap-2 px-2 my-6 relative",href:C==null?void 0:C.file},[sd,i("div",ad,[i("div",id,E(Ze(C==null?void 0:C.file)),1),i("div",ld,E(lt(C==null?void 0:C.created_at)),1)])],8,td)):T("",!0),i("div",{onClick:_s=>ps(C==null?void 0:C.id),class:"absolute bg-red-500 text-white p-2 flex align-items-center justify-content-center close-btn"},rd,8,nd)]))),128))]),r(O)?(d(),h("div",dd,[i("input",{onChange:vt,id:"attachInput",class:"float-right file-up-btn",type:"file",placeholder:"+"},null,32),_(N,{type:"button",loading:r(u),onClick:vs,label:"Upload"},null,8,["loading"])])):T("",!0)]}),_:1}),_(Re,{header:`Sub Tasks ${($=r(J))!=null&&$.length?r(J).length:0}`},{default:S(()=>[r(ge)?q((d(),ue(N,{key:0,icon:"pi pi-plus",label:"Create",onClick:D[10]||(D[10]=he=>{var De;return ie("openCreateSpace",(De=r(k))==null?void 0:De.id,"sub-task")}),class:"mr-2 sub-create",severity:"secondary"},null,512)),[[z,{value:"Create Sub Task"},void 0,{right:!0}]]):T("",!0),_(y,{class:"tree-table",value:r(J),lazy:!0,tableProps:{style:{minWidth:"650px"}},style:{overflow:"auto"}},{empty:S(()=>[ud]),default:S(()=>[_(w,{class:"cursor-pointer toneS",field:"name",header:"Name",expander:"",style:{width:"45%"}},{body:S(he=>[q((d(),h("span",{class:"subtaskTitle",onClick:De=>ie("handleTaskDetailView",he.node)},[me(E(he.node.data.name),1)],8,cd)),[[z,{value:`${he.node.data.name}`},void 0,{left:!0}]])]),_:1}),_(w,{field:"assignee",header:"Assignee",style:{width:"25%"}}),_(w,{field:"dueDateValue",header:"Due Date",style:R([{width:"11.5%"},{"text-wrap":"nowrap"}])}),_(w,{field:"priority",header:"Priority",style:{width:"10%"}},{body:S(he=>{var De,fe,c;return[i("span",{class:ve(["text-xs",((De=he.node.data.priority)==null?void 0:De.name)==="High"?"text-danger":((fe=he.node.data.priority)==null?void 0:fe.name)==="Medium"?"text-warning":"text-success"])},E((c=he.node.data.priority)==null?void 0:c.name),3)]}),_:1}),_(w,{field:"action",header:"Action"},{body:S(he=>[i("div",hd,[_(N,{style:{width:"30px",height:"30px","border-radius":"50%"},icon:"pi pi-ellipsis-v",class:"action-dropdown-det-toggle"}),i("div",md,[_(N,{icon:"pi pi-trash",class:"mr-1 ac-btn dlt-action",severity:"warning",rounded:"",onClick:De=>ie("confirmDeleteTask",he.node.key)},null,8,["onClick"]),_(N,{icon:"pi pi-cog",class:"mr-1 ac-btn view-action",severity:"info",onClick:De=>ie("handleTaskDetailView",he.node),rounded:""},null,8,["onClick"]),_(N,{icon:"pi pi-pencil",class:"mr-1 ac-btn edit-action",severity:"success",onClick:De=>ie("handleTaskEdit",he.node),rounded:""},null,8,["onClick"]),_(N,{icon:"pi pi-plus",class:"ac-btn sub-action",severity:"success",onClick:De=>ie("openCreateSpace",he.node.key,"sub-task"),rounded:""},null,8,["onClick"])])])]),_:1})]),_:1},8,["value"])]),_:1},8,["header"]),_(Re,{header:`Bounce ${((Ie=r(Ve))==null?void 0:Ie.is_bounce)==="Yes"?"1":""}`},{default:S(()=>[i("div",vd,[i("div",pd,[fd,_(Q,{onChange:D[11]||(D[11]=he=>Tt(r(Ve))),disabled:!r(ce),modelValue:r(Ve),"onUpdate:modelValue":D[12]||(D[12]=he=>P(Ve)?Ve.value=he:null),options:r(U),optionLabel:"is_bounce",placeholder:"Select Status",style:{width:"146.41px"}},null,8,["disabled","modelValue","options"])])])]),_:1},8,["header"])]}),_:1})])])])]),i("div",yd,[i("div",null,[i("div",_d,[i("div",gd,[i("div",wd,[r(tt)?(d(),ue(N,{key:0,onClick:Ot,label:"↓  Show More",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})):T("",!0)]),r(Dt)?(d(),h("div",Dd,[(d(!0),h(pe,null,Te(r(oe),$=>(d(),h("ul",{key:$,style:{"margin-left":"-15px","margin-top":"-6px"}},[i("li",{innerHTML:$.title,style:{"font-size":"smaller !important"}},null,8,bd)]))),128)),i("div",kd,[_(N,{onClick:At,label:"↑ Hide",class:"py-1 bg-gray-200 border-gray-100 text-surface-900 activity-btns"})])])):T("",!0),(d(!0),h(pe,null,Te(r(K),$=>(d(),ue(ee,{class:"mb-2",key:$.id},{title:S(()=>[i("div",Td,[$.commentator_image?(d(),h("img",{key:0,class:"mr-2",src:$.commentator_image,alt:"",style:{width:"28px",height:"28px","border-radius":"50%"}},null,8,Cd)):(d(),ue(X,{key:1,label:$.commentator_name.charAt(),class:"mr-2 capitalize",size:"small",style:{"background-color":"gray",color:"#ededed","border-radius":"50%"}},null,8,["label"])),i("p",Ed,E($.commentator_name),1)])]),content:S(()=>[Ze($==null?void 0:$.file)?(d(),h("div",Sd,[i("a",{href:$==null?void 0:$.file,target:"_blank",class:"bg-gray-200 attachment-wrapper cursor-pointer flex align-items-center px-3 py-3 gap-2 comment-file",style:{"background-color":"#f7fafc"}},[Md,i("div",Vd,[i("div",$d,E(Ze($==null?void 0:$.file)),1)])],8,xd)])):T("",!0),i("p",{innerHTML:$!=null&&$.comment?$==null?void 0:$.comment:"",class:"m-0 ml-1",style:{"font-size":"0.9rem"}},null,8,Od),i("i",Ad,E(jt($.time)),1)]),_:2},1024))),128))]),i("form",{onSubmit:dt(Lt,["prevent"]),class:"comment-add"},[r(st)?(d(),h("div",Ld,[i("div",null,[jd,me(),i("span",null,E(r(Ht)),1)]),i("div",{onClick:Ft,class:"close-comment"},Hd)])):T("",!0),i("div",null,[_(r(rs),{class:"mb-2",placeholder:"Add comment",modelValue:r(He),"onUpdate:modelValue":D[13]||(D[13]=$=>P(He)?He.value=$:null),editorStyle:"height: 76px"},{toolbar:S(()=>[i("span",Wd,[q(i("button",Ud,null,512),[[z,"Bold",void 0,{bottom:!0}]]),q(i("button",Fd,null,512),[[z,"Italic",void 0,{bottom:!0}]]),q(i("button",Nd,null,512),[[z,"Underline",void 0,{bottom:!0}]]),q(i("button",Bd,null,512),[[z,"Strikethrough",void 0,{bottom:!0}]]),Yd,zd,Rd,qd])]),_:1},8,["modelValue"]),i("input",{class:"hidden",type:"file",ref_key:"fileInput",ref:pt,onChange:Wt},null,544),_(N,{icon:"pi pi-cloud-upload",onClick:Ut,"aria-label":"Filter"}),_(N,{class:"ml-2",type:"submit",icon:"pi pi-plus",label:"Add",loading:r(Y)},null,8,["loading"])])],32)])])])])}}};const Gt=t=>(Cs("data-v-efb466c3"),t=t(),Es(),t),Kd={class:"card"},Jd={class:"d-flex create-space-btn-wrapper mb-3 mr-2"},Gd={class:"breadCrumWrap"},Xd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Zd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),Qd=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),eu=Gt(()=>i("p",{class:"pi pi-angle-right font-bold"},null,-1)),tu={class:"text cursor-pointer"},su={class:"inline-flex align-items-center justify-content-center gap-2"},au={class:"white-space-nowrap"},iu=Gt(()=>i("p",null,"Are you sure you want to delete?",-1)),lu={__name:"index",setup(t){const e=v(ut("read_task")),a=Ue(),l=Ue(),{getSingleProject:o,deleteTask:s,getTaskAssignModalData:u,getTagsAssignModalData:n,getTaskDetails:f}=Ue(),{singleProject:m,isTaskDeleted:p,tasks:x,kanbanTasks:V,taskDetails:B}=gt(Ue()),I=v({}),ye=v(!0),ae=Jt(),K=v(!1),J=v(null),_e=is().query.task_key,{projects:k}=is().params,oe=v(!1),$e=v(null),Ee=v(null),je=v(null),ie=v([]),W=v([]),Y=v(!1),O=v(!1),ce=v(!1),ge=async(te,M)=>{te?Ee.value=te:Ee.value="",M=="sub-task"?je.value="Create Sub Task":je.value="Create Task",oe.value=!0,await u(),ie.value=a.users,await n(),W.value=l.tags},we=async te=>{J.value=te,document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const M=document.createElement("div");M.style.position="absolute",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="100%",M.style.backgroundColor="rgba(0, 0, 0, 0)",M.style.zIndex="1000000",document.documentElement.appendChild(M),await u(),ie.value=a.users,await n(),W.value=l.tags,Y.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(M)},re=te=>{$e.value=te,O.value=!0},A=async()=>{K.value=!0,await s($e.value,k),p.value===!0?(K.value=!1,ae.add({severity:"success",summary:"Successful",detail:"Task Deleted Successfully",group:"br",life:3e3}),O.value=!1):(K.value=!1,ae.add({severity:"error",summary:"Error",detail:"Unable to delete task",group:"br",life:3e3}))},L=async te=>{var ne,Me;document.documentElement.style.cursor="wait",document.documentElement.style.position="relative";const M=document.createElement("div");M.style.position="absolute",M.style.top="0",M.style.left="0",M.style.width="100%",M.style.height="100%",M.style.backgroundColor="rgba(0, 0, 0, 0)",M.style.zIndex="100000010",document.documentElement.appendChild(M),ce.value&&(ce.value=!1),await f(te.key),await u(),ie.value=a.users,await n(),W.value=l.tags,ce.value=!0,document.documentElement.style.cursor="auto",document.documentElement.removeChild(M),console.log((Me=(ne=B==null?void 0:B.value)==null?void 0:ne.project)==null?void 0:Me.name,"taskDetails")};Le(ce,te=>{if(te===!0)return 0;localStorage.removeItem("taskDetailID")}),(()=>{I.value={global:{value:null,matchMode:ra.CONTAINS}}})();const le=te=>{oe.value=te},Se=te=>{Y.value=te},Fe=()=>{o(k)};return Le(()=>is().query.task_key,te=>{te&&L({key:te})}),_e&&L({key:_e}),oa(()=>{ye.value=!1}),(te,M)=>{var xe,Ye,Ge,ht;const ne=Gs,Me=Xs,$t=On,Qe=io,Ne=Oo,wt=ks,it=Pd,Be=Kt;return d(),h("div",Kd,[_(ne,{position:"bottom-right",group:"br"}),i("div",Jd,[i("div",Gd,[_(Me,{to:"/",class:"text pi pi-home"}),Xd,_(Me,{to:"/companies",class:"text"},{default:S(()=>[me("Companies")]),_:1}),Zd,_(Me,{to:`/companies/${(xe=r(m))==null?void 0:xe.company_id}`,class:"text"},{default:S(()=>{var U;return[me("Company - "+E((U=r(m))==null?void 0:U.company_name),1)]}),_:1},8,["to"]),Qd,_(Me,{to:`/companies/${(Ye=r(m))==null?void 0:Ye.company_id}/spaces/${(Ge=r(m))==null?void 0:Ge.space_id}`,class:"text"},{default:S(()=>{var U;return[me(" Space - "+E((U=r(m))==null?void 0:U.space_name),1)]}),_:1},8,["to"]),eu,i("p",tu,"Project - "+E((ht=r(m))==null?void 0:ht.name),1)])]),r(e)?(d(),ue($t,{key:0,kanbanTasks:r(V),tasks:r(x),onOpenCreateSpace:ge,onHandleTaskEdit:M[0]||(M[0]=U=>we(U)),onHandleTaskDetailView:M[1]||(M[1]=U=>L(U)),onConfirmDeleteTask:M[2]||(M[2]=U=>re(U))},null,8,["kanbanTasks","tasks"])):T("",!0),_(r(as),{visible:r(oe),"onUpdate:visible":M[4]||(M[4]=U=>P(oe)?oe.value=U:null),modal:"",header:r(je),style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw","330px":"98vw"}},{default:S(()=>[_(Qe,{usersLists:r(ie),tagsLists:r(W),taskId:r(Ee),projects:r(k),onCloseCreateModal:M[3]||(M[3]=U=>le(U))},null,8,["usersLists","tagsLists","taskId","projects"])]),_:1},8,["visible","header"]),_(r(as),{visible:r(Y),"onUpdate:visible":M[6]||(M[6]=U=>P(Y)?Y.value=U:null),modal:"",header:"Edit Task",style:{width:"30rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{default:S(()=>[_(Ne,{singleTask:r(J),usersLists:r(ie),tagsLists:r(W),projects:r(k),onCloseEditModal:M[5]||(M[5]=U=>Se(U))},null,8,["singleTask","usersLists","tagsLists","projects"])]),_:1},8,["visible"]),_(r(as),{visible:r(ce),"onUpdate:visible":M[10]||(M[10]=U=>P(ce)?ce.value=U:null),modal:"",header:"Task Details",style:{width:"90rem",height:"80rem"},breakpoints:{"1199px":"75vw","575px":"95vw"}},{header:S(()=>{var U,Ve,ze,et,He,mt,tt;return[i("div",su,[_(wt,{label:(ze=(Ve=(U=r(B))==null?void 0:U.project)==null?void 0:Ve.space_name)==null?void 0:ze.charAt(0),class:"capitalize p-0",size:"small",style:{"background-color":["#ededed"],color:["#000"],width:["1.4rem"],height:["1.4rem"],text:["12px"]}},null,8,["label"]),i("span",au,[me(E((He=(et=r(B))==null?void 0:et.project)==null?void 0:He.space_name)+" / ",1),i("strong",null,E((tt=(mt=r(B))==null?void 0:mt.project)==null?void 0:tt.name),1)])])]}),default:S(()=>[_(it,{usersLists:r(ie),tagsLists:r(W),projID:r(k),onOpenCreateSpace:ge,onHandleTaskEdit:M[7]||(M[7]=U=>we(U)),onHandleTaskDetailView:M[8]||(M[8]=U=>L(U)),onConfirmDeleteTask:M[9]||(M[9]=U=>re(U)),onUpdateTaskTable:Fe},null,8,["usersLists","tagsLists","projID"])]),_:1},8,["visible"]),_(r(as),{visible:r(O),"onUpdate:visible":M[12]||(M[12]=U=>P(O)?O.value=U:null),header:" ",style:{width:"25rem"}},{default:S(()=>[iu,_(Be,{label:"No",icon:"pi pi-times",text:"",onClick:M[11]||(M[11]=U=>O.value=!1)}),_(Be,{label:"Yes",icon:"pi pi-check",loading:r(K),text:"",onClick:A},null,8,["loading"])]),_:1},8,["visible"])])}}},cc=Ts(lu,[["__scopeId","data-v-efb466c3"]]);export{cc as default};
